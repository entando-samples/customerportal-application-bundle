{"version":3,"sources":["i18n.js","auth/KeycloakContext.js","components/__types__/ref.js","auth/withKeycloak.js","api/helpers.js","api/customers.js","components/Admin/AddCustomerModal.js","helpers/widgetEvents.js","custom-elements/widgetEventTypes.js","custom-elements/AdminAddCustomerElement.js","api/ticketingsystem.js","components/Admin/Configuration/TicketingSystem.js","api/productVersion.js","components/Admin/AddProductVersionModal.js","components/Admin/EditVersionModal.js","components/Admin/Configuration/ProductVersion.js","components/Admin/Configuration/AdminConfiguration.js","custom-elements/AdminConfigurationElement.js","api/partners.js","api/projects.js","auth/KeycloakViews.js","components/Admin/AddPartnerModal.js","components/Admin/AddProjectModal.js","components/Admin/EditProjectModal.js","components/Admin/ManagePartnersModal.js","components/Admin/ProjectActionItems.js","api/subscriptions.js","components/Customer/CustomerDataTable.js","components/Customer/CustomerDetails.js","components/Admin/EditCustomerModal.js","components/Customer/CustomerAccordian.js","components/Admin/AdminDashboard.js","custom-elements/AdminDashboardElement.js","components/Admin/RoleCheck.js","custom-elements/AdminRoleCheckElement.js","api/tickets.js","components/SubscriptionDetails/TicketList.js","components/Admin/EditSubscriptionModal.js","components/SubscriptionDetails/Subscription.js","components/Customer/CustomerProjectList.js","components/App.js","custom-elements/AppElement.js","api/portalusers.js","api/keycloak.js","components/Admin/ManageUser/AssignUser.js","custom-elements/AssignUserElement.js","custom-elements/CustomerDataTableElement.js","custom-elements/CustomerDetailsElement.js","components/Admin/ManageUser/DeleteUser.js","custom-elements/DeleteUserElement.js","components/Forms/enhancementRequest.js","custom-elements/FormsEnhancementRequestElement.js","components/Forms/OpenTicketForm.js","custom-elements/FormsOpenTicketElement.js","components/Admin/ManageSubscriptions/ManageSubscriptions.js","custom-elements/ManageSubscriptionsElement.js","components/Admin/ManageUser/ManageUser.js","custom-elements/ManageUserElement.js","components/Navigation/Navigation.js","custom-elements/NavigationElement.js","custom-elements/OpenTicketElement.js","custom-elements/ProductVersionElement.js","custom-elements/SubscriptionElement.js","components/Forms/SubscriptionForm.js","custom-elements/SubscriptionFormElement.js","custom-elements/TicketListElement.js","custom-elements/TicketingSystemElement.js","local/LocalApp.js","local/LocalAppElement.js"],"names":["i18n","defaultLocale","locale","fallbacks","translations","en","it","setLocale","KeycloakContext","PropTypes","oneOfType","func","shape","current","elementType","React","createContext","withKeycloak","WrappedComponent","WithKeycloakComponent","renderWrappedComponent","value","props","forwardedRef","rest","ref","keycloak","Consumer","this","Component","defaultProps","forwardRef","getKeycloakToken","window","entando","authenticated","token","isAuthenticated","initialized","authenticationChanged","prevProps","changedAuth","isPortalAdmin","hasKeycloakClientRole","isPortalSupport","isPortalPartner","isPortalCustomer","isPortalAdminOrSupport","isPortalUser","clientRole","resourceAccess","client","item","roles","includes","getDefaultOptions","headers","Headers","Authorization","getDefaultKeycloakOptions","getActiveSubscription","project","projectSubscriptions","find","status","getUrl","url","request","options","a","fetch","response","has","parseInt","get","data","json","Promise","reject","Error","statusText","resource","apiCustomerDelete","serviceUrl","id","method","apiCustomersGet","apiCustomerGet","apiCustomerPost","customer","body","JSON","stringify","apiCustomerPut","apiGetCustomersProjects","customerId","apiAddProjectToCustomer","projectId","apiDeleteProjectFromCustomer","adminResource","apiAdminCustomersGet","apiAdminCustomerGet","myResource","apiMyCustomersGet","apiGetMyCustomersProjects","handleChanges","e","input","target","name","setState","handleFormSubmit","handleValidation","state","customerNumber","contactName","contactPhone","contactEmail","notes","customerPost","then","submitMsg","t","submitColour","updateCustomerList","catch","clearValues","document","querySelector","className","baseState","invalid","formIsValid","lastAtPos","lastIndexOf","lastDotPos","indexOf","length","addEventListener","modalConfirmation","style","color","modalId","ModalWrapper","buttonTriggerText","modalHeading","buttonTriggerClassName","handleSubmit","primaryButtonText","secondaryButtonText","Form","onSubmit","TextInput","labelText","onChange","invalidText","TextArea","subscribeToWidgetEvent","eventType","eventHandler","removeEventListener","KEYCLOAK_EVENT_TYPE","getKeycloakInstance","ATTRIBUTES","AdminAddCustomerElement","mountPoint","createElement","unsubscribeFromKeycloakEvent","render","appendChild","getAttribute","Locale","ReactDOM","Provider","HTMLElement","customElements","define","apiTicketingSystemDelete","apiCurrentTicketingSystemGet","apiTicketingSystemsGet","ticketingSystems","apiTicketingSystemPost","ticketingsystem","apiTicketingSystemPut","event","preventDefault","ticketingSystem","updateTicketingSystem","createTicketingSystem","ticketingSystemType","serviceAccount","serviceAccountSecret","systemId","fetchData","confirm","deleteTicketingSystem","Select","SelectItem","text","map","type","i","Button","kind","tabIndex","onClick","handleDelete","apiProductVersionsGet","apiProductVersionGet","versionId","apiUpdateProductVersionsStatus","apiProductVersionPost","productVersion","apiProductVersionPut","apiProductVersionDelete","addProductVersion","updateProductVersions","handleStartDateChange","date","startDate","moment","toISOString","format","handleEndDateChange","endDate","match","DatePicker","dateFormat","datePickerType","DatePickerInput","placeholder","version","versionPut","buttonId","getVersionDetails","buttonClassName","ProductVersion","handleDeleteVersion","deleteVersion","getProductVersions","versions","productVersions","DataTable","rows","rowData","headerData","getHeaderProps","getTableProps","TableContainer","Table","TableHead","TableRow","header","TableHeader","TableBody","Object","keys","index","TableCell","Toggle","size","handleToggleChange","aria-label","defaultToggled","display","width","key","entVersion","loading","adminConfig","label","content","Tile","Accordion","AccordionItem","title","description","toString","AdminConfigurationElement","apiPartnerPost","partner","apiProjectsGet","apiProjectGet","apiProjectPost","apiProjectPut","apiAddSubscriptionToProject","subscriptionId","apiAddUserToProject","userId","apiDeletePartnerFromProject","partnerId","apiDeleteSubscriptionFromProject","apiDeleteUserFromProject","apiAddPartnerToProject","apiGetProjectUsers","apiGetProjectSubscriptions","AuthenticatedView","children","UnauthenticatedView","partnerNumber","partnerPost","projectList","getProjects","projects","result","trim","alert","projectPost","getAllProjects","customerList","getCustomers","customers","allCustomers","allProjects","projectPut","updateProjectList","getProjectDetails","ManagePartnersModal","handleRemovePartner","removePartner","err","console","log","hasForm","partners","margin","border","borderTop","handleClick","showMenu","handleOutsideClick","prevState","node","contains","isAdmin","actionDivider","topButton","padding","editProjectSubscription","subscriptionParam","subscription","newOrRenewSubscription","href","textDecoration","manageUsers","manageSubscriptions","openTicket","viewAllTickets","substr","rel","deleteProject","handleDeleteProject","zIndex","position","backgroundColor","to","formatStartDate","String","Date","toDateString","formatEndDate","lengthInMonths","setMonth","getMonth","apiSubscriptionGet","apiProjectSubscriptionPost","projectSubscriptionCreation","apiProjectSubscriptionPut","apiRenewSubscription","projectSubscriptionRenew","CustomerDataTable","closeMenu","action","partnerIndex","entandoVersion","tickets","getCustomer","getCustomerDetails","updateCustomer","getCustomersProjects","deleteCustomer","open","accordionOpened","getTime","handleSearch","newFilteredState","filter","toLowerCase","filteredCustomers","currentPage","undefined","forceUpdate","role","test","numberOfPages","Math","ceil","Search","onKeyPress","indexOfLastItem","firstIndexOfCurrentPage","PaginationNav","loop","Boolean","page","Number","totalItems","itemsShown","AdminDashboardElement","RoleCheck","roleType","defaultValue","renderForm","AdminRoleCheckElement","jiraResource","apiJiraTicketsGet","apiJiraTicketPost","ticket","ticketSystemUrl","ticketingSystemBaseUrl","ticketUrl","summary","priority","createDate","updateDate","subscriptionRequest","projectSubscription","level","subscriptionPut","updateSubscription","isNumeric","str","isNaN","parseFloat","getSubscriptionDetails","disabled","subscriptionData","users","params","license","user","username","path","AppElement","apiUserPost","apiUserGetByUsername","apiKeycloakUserGet","realm","usersResource","mapKeycloakUserEmails","keycloakUsers","usernameEmailMap","Map","forEach","keycloakUser","set","email","assignUser","handleFormValidation","assignUserToProject","res","dispatchEvent","CustomEvent","getPortalUserId","portalUserId","portalUserApi","portalUser","message","createPortalUser","authServerUrl","keycloakUrl","search","location","URLSearchParams","userList","unshift","setupFormComponents","AssignUserElement","CustomerDataTableElement","CustomerDetailsElement","handleRemoveUser","warn","displayUsers","handleUserDisplay","userAccess","row","cells","cell","DeleteUserElement","EnhancementRequest","ticketNo","customerName","projectName","openedBy","partnerName","enhancementDescription","FormsEnhancementRequestElement","createTicket","types","priorities","error","FormsOpenTicketElement","handleDeleteSubscription","deleteSubscription","subscriptions","ManageSubscriptionsElement","userFunctionality","ManageUserElement","Navigation","NavigationElement","OpenTicketElement","ProductVersionElement","SubscriptionElement","FORM_TYPE","SUBSCRIPTION_LEVEL","GOLD","PLATINUM","SUBSCRIPTION_STATUS","requested","pending","active","expired","submitSuccess","submitError","formatted","formType","stateToSubscription","updateStateForSuccess","newSubscription","renewSubscription","entandoVersionId","success","renewal","toUpperCase","subscriptionLevelList","entries","versionList","statusList","subscriptionType","createFormMessage","subMessageKey","titleKey","formLabelKey","successErrorMessage","SubscriptionFormElement","TicketListCustomerElement","TicketingSystemElement","logout","forceRefresh","exact","LocalAppElement"],"mappings":"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","file":"static/js/main.24914e73.chunk.js","sourcesContent":["import i18n from 'i18n-js';\r\n\r\nimport en from './i18n/locales/en.json';\r\nimport it from './i18n/locales/it.json';\r\n\r\ni18n.defaultLocale = 'en';\r\ni18n.locale = 'en';\r\ni18n.fallbacks = true;\r\ni18n.translations = { en, it };\r\n\r\nexport const setLocale = locale => {\r\n  i18n.locale = locale;\r\n};\r\n\r\nexport default i18n;\r\n","import React from 'react';\n\nconst KeycloakContext = React.createContext(null);\n\nexport default KeycloakContext;\n","import PropTypes from 'prop-types';\r\n\r\nexport default PropTypes.oneOfType([PropTypes.func, PropTypes.shape({ current: PropTypes.elementType }), PropTypes.shape(null)]);\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { forwardRef, Component } from 'react';\r\nimport refType from '../components/__types__/ref';\r\nimport KeycloakContext from './KeycloakContext';\r\n\r\nexport default function withKeycloak(WrappedComponent) {\r\n  class WithKeycloakComponent extends Component {\r\n    renderWrappedComponent = value => {\r\n      const { forwardedRef, ...rest } = this.props;\r\n      return <WrappedComponent {...rest} ref={forwardedRef} keycloak={value} />;\r\n    };\r\n\r\n    render() {\r\n      return <KeycloakContext.Consumer>{this.renderWrappedComponent}</KeycloakContext.Consumer>;\r\n    }\r\n  }\r\n\r\n  WithKeycloakComponent.propTypes = {\r\n    forwardedRef: refType,\r\n  };\r\n\r\n  WithKeycloakComponent.defaultProps = {\r\n    forwardedRef: () => {},\r\n  };\r\n\r\n  return forwardRef((props, ref) => <WithKeycloakComponent {...props} forwardedRef={ref} />);\r\n}\r\n","export const getKeycloakToken = () => {\r\n  if (window && window.entando && window.entando.keycloak && window.entando.keycloak.authenticated) {\r\n    return window.entando.keycloak.token;\r\n  }\r\n  return '';\r\n};\r\n\r\nconst ADMIN = 'cp-admin';\r\nconst SUPPORT = 'cp-support';\r\nconst PARTNER = 'cp-partner';\r\nconst CUSTOMER = 'cp-customer';\r\n\r\nexport const isAuthenticated = (props) => {\r\n  const {keycloak} = props;\r\n  return keycloak.initialized && keycloak.authenticated;\r\n}\r\n\r\nexport const authenticationChanged = (props, prevProps) => {\r\n  const authenticated = isAuthenticated(props);\r\n  const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n  return (authenticated && changedAuth);\r\n}\r\n\r\nexport const isPortalAdmin = () => {\r\n  return hasKeycloakClientRole(ADMIN);\r\n};\r\n\r\nexport const isPortalSupport = () => {\r\n  return hasKeycloakClientRole(SUPPORT);\r\n};\r\n\r\nexport const isPortalPartner = () => {\r\n  return hasKeycloakClientRole(PARTNER);\r\n};\r\n\r\nexport const isPortalCustomer = () => {\r\n  return hasKeycloakClientRole(CUSTOMER);\r\n};\r\n\r\nexport const isPortalAdminOrSupport = () => {\r\n  return isPortalAdmin() || isPortalSupport();\r\n};\r\n\r\nexport const isPortalCustomerOrPartner = () => {\r\n  return isPortalCustomer() || isPortalPartner();\r\n};\r\n\r\nexport const isPortalUser = () => {\r\n  return isPortalAdminOrSupport() || isPortalCustomerOrPartner();\r\n};\r\n\r\nexport const hasKeycloakClientRole = clientRole => {\r\n  if (getKeycloakToken()) {\r\n    const { resourceAccess } = window.entando.keycloak;\r\n    if (resourceAccess) {\r\n      for (const client in resourceAccess) {\r\n        const item = resourceAccess[client];\r\n        if (item.roles && item.roles.includes(clientRole)) {\r\n          // console.debug(\"Found role {} with client {} \", clientRole, client);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const getDefaultOptions = () => ({\r\n  headers: new Headers({\r\n    Authorization: `Bearer ${getKeycloakToken()}`,\r\n    'Content-Type': 'application/json',\r\n  }),\r\n});\r\n\r\nexport const getDefaultKeycloakOptions = () => ({\r\n  headers: new Headers({\r\n    Authorization: `Bearer ${getKeycloakToken()}`,\r\n    'Content-Type': 'application/x-www-form-urlencoded',\r\n  }),\r\n});\r\n\r\nexport const getActiveSubscription = project => {\r\n  return (project &&\r\n    project.projectSubscriptions &&\r\n    project.projectSubscriptions.find(\r\n      item => {\r\n        return (item.status === \"ACTIVE\") ? item : null\r\n      })\r\n  );\r\n}\r\n\r\nexport const getUrl = url => {\r\n  return `${url}`;\r\n};\r\n\r\nexport const request = async (url, options) => {\r\n  const response = await fetch(url, options);\r\n\r\n  const headers = {\r\n    ...(response.headers.has('X-Total-Count') ? {'X-Total-Count': parseInt(response.headers.get('X-Total-Count'), 10)} : {}),\r\n  };\r\n\r\n  if (response.status === 204) {\r\n    return { data: '', status: response.status };\r\n  }\r\n\r\n  return response.status >= 200 && response.status < 300\r\n    ? { data: await response.json(), headers, status: response.status }\r\n    : Promise.reject(new Error(response.statusText || response.status));\r\n};\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/customers';\r\n\r\nexport const apiCustomerDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerGet = async (serviceUrl, id) => {\r\n  const url = getUrl(`${serviceUrl}/${resource}/${id}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomersGetForAdminDashboard = async serviceUrl => {\r\n  const url = `${serviceUrl}/${resource}/all`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerPost = async (serviceUrl, customer) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: customer ? JSON.stringify(customer) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerPut = async (serviceUrl, customer) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: customer ? JSON.stringify(customer) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetCustomersProjects = async (serviceUrl, customerId) => {\r\n  const url = `${serviceUrl}/${resource}/${customerId}/projects`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddProjectToCustomer = async (serviceUrl, customerId, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${customerId}/projects/${projectId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiDeleteProjectFromCustomer = async (serviceUrl, customerId, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${customerId}/projects/${projectId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n// Endpoints for backend security\r\nconst adminResource = 'api/customers/admin';\r\nexport const apiAdminCustomersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${adminResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAdminCustomerGet = async (serviceUrl, customerId) => {\r\n  const url = getUrl(`${serviceUrl}/${adminResource}/${customerId}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nconst myResource = 'api/customers/mycustomers';\r\nexport const apiMyCustomersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${myResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetMyCustomersProjects = async (serviceUrl, customerId) => {\r\n  const url = `${serviceUrl}/${myResource}/${customerId}/projects`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomerPost } from '../../api/customers';\r\n\r\nclass AddCustomerModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      name: '',\r\n      customerNumber: '',\r\n      contactName: '',\r\n      contactPhone: '',\r\n      contactEmail: '',\r\n      notes: '',\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n\r\n    this.baseState = this.state;\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    if (this.state.customerNumber === '') {\r\n      formIsValid = false;\r\n      invalid['customerNumber'] = true;\r\n    }\r\n\r\n    if (typeof this.state.contactEmail !== 'undefined') {\r\n      let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n      let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n      if (\r\n        !(\r\n          lastAtPos < lastDotPos &&\r\n          lastAtPos > 0 &&\r\n          this.state.contactEmail.indexOf('@@') === -1 &&\r\n          lastDotPos > 2 &&\r\n          this.state.contactEmail.length - lastDotPos > 2\r\n        )\r\n      ) {\r\n        formIsValid = false;\r\n        invalid['contactEmail'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async customerPost(customer) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      return await apiCustomerPost(this.props.serviceUrl, customer);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = () => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const customer = {\r\n        name: this.state.name,\r\n        customerNumber: this.state.customerNumber,\r\n        contactName: this.state.contactName,\r\n        contactPhone: this.state.contactPhone,\r\n        contactEmail: this.state.contactEmail,\r\n        notes: this.state.notes,\r\n      };\r\n\r\n      this.customerPost(customer)\r\n        .then(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.added'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateCustomerList();\r\n        })\r\n        .catch(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  clearValues = () => {\r\n    const customerModalElement = document.querySelector('#modal-form-customer');\r\n    if (!customerModalElement.className.includes('is-visible')) {\r\n      this.setState(this.baseState);\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    const modalOpenButton = document.querySelector('.add-customer-button');\r\n    modalOpenButton.addEventListener('click', this.clearValues, false);\r\n  }\r\n\r\n  render() {\r\n    const modalConfirmation = (\r\n      <div className=\"bx--modal-header\">\r\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\r\n      </div>\r\n    )\r\n    const modalId = \"modal-form-customer\"\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.addCustomer')}\r\n        modalHeading={i18n.t('adminDashboard.addCustomer.title')}\r\n        buttonTriggerClassName=\"add-customer bx--btn bx--btn--tertiary add-customer-button\"\r\n        className=\"modal-form\"\r\n        id={modalId}\r\n        handleSubmit={this.handleFormSubmit}\r\n        primaryButtonText={i18n.t('modalText.save')}\r\n        secondaryButtonText={i18n.t('modalText.cancel')}\r\n      >\r\n        {modalConfirmation}\r\n        <div className=\"form-container\">\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <TextInput\r\n              id={\"name\" + modalId}\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.customerName') + ' *'}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <TextInput\r\n              id={\"customerNumber\" + modalId}\r\n              name=\"customerNumber\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.customerNumber') + ' *'}\r\n              value={this.state.customerNumber}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['customerNumber']}\r\n            />\r\n            <TextInput\r\n              id={\"contactName\" + modalId}\r\n              name=\"contactName\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.contactName')}\r\n              value={this.state.contactName}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              id={\"contactPhone\" + modalId}\r\n              name=\"contactPhone\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.contactPhone')}\r\n              value={this.state.contactPhone}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              id={\"contactEmail\" + modalId}\r\n              name=\"contactEmail\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.contactEmail') + ' *'}\r\n              value={this.state.contactEmail}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.email')}\r\n              invalid={this.state.invalid['contactEmail']}\r\n            />\r\n            <TextArea\r\n              id={\"notes\" + modalId}\r\n              name=\"notes\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.notes')}\r\n              value={this.state.notes}\r\n              onChange={this.handleChanges}\r\n            />\r\n          </Form>\r\n        </div>\r\n        {modalConfirmation}\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AddCustomerModal);\r\n","export const publishWidgetEvent = (eventId, payload) => {\r\n  const widgetEvent = new CustomEvent(eventId, {\r\n    detail: {\r\n      payload,\r\n    },\r\n  });\r\n  window.dispatchEvent(widgetEvent);\r\n};\r\n\r\nexport const createWidgetEventPublisher = eventType => payload => publishWidgetEvent(eventType, payload);\r\n\r\nexport const subscribeToWidgetEvent = (eventType, eventHandler) => {\r\n  window.addEventListener(eventType, eventHandler);\r\n\r\n  return () => {\r\n    window.removeEventListener(eventType, eventHandler);\r\n  };\r\n};\r\n\r\nexport const subscribeToWidgetEvents = (widgetEvents, eventHandler) => {\r\n  widgetEvents.forEach(eventType => window.addEventListener(eventType, eventHandler));\r\n\r\n  return () => {\r\n    widgetEvents.forEach(eventType => window.removeEventListener(eventType, eventHandler));\r\n  };\r\n};\r\n\r\nexport const widgetEventToFSA = widgetEvent => {\r\n  // for info about Flux Standard Action (FSA) see https://github.com/redux-utilities/flux-standard-action\r\n  const {\r\n    type,\r\n    detail: { payload, error, meta },\r\n  } = widgetEvent;\r\n  return { type, payload, error, meta };\r\n};\r\n","export const INPUT_EVENT_TYPES = {\r\n  formUpdate: 'customer.form.update',\r\n  formCreate: 'customer.form.create',\r\n  formDelete: 'customer.form.delete',\r\n};\r\n\r\nexport const OUTPUT_EVENT_TYPES = {\r\n  select: 'customer.table.select',\r\n  add: 'customer.table.add',\r\n  error: 'customer.table.error',\r\n  delete: 'customer.table.delete',\r\n};\r\n\r\nexport const KEYCLOAK_EVENT_TYPE = 'keycloak';\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AddCustomerModal from '../components/Admin/AddCustomerModal';\r\nimport '../index.scss';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport {KEYCLOAK_EVENT_TYPE} from '../custom-elements/widgetEventTypes';\r\nimport * as Locale from \"../i18n\";\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AdminAddCustomerElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AddCustomerModal serviceUrl={serviceUrl} locale={locale}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-add-customer-widget', AdminAddCustomerElement);\r\n","import {getDefaultOptions, request} from './helpers';\n\nconst resource = 'api/ticketing-systems';\n\nexport const apiTicketingSystemDelete = async (serviceUrl, id) => {\n  const url = `${serviceUrl}/${resource}/${id}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiCurrentTicketingSystemGet = async serviceUrl => {\n  const ticketingSystems = (await apiTicketingSystemsGet(serviceUrl)).data;\n  //Simplifying assumption to take the latest ticketing system as the current config. There should be only 1.\n  return (ticketingSystems && ticketingSystems.length) ? ticketingSystems[ticketingSystems.length - 1] : null;\n}\n\nexport const apiTicketingSystemsGet = async serviceUrl => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiTicketingSystemPost = async (serviceUrl, ticketingsystem) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: ticketingsystem ? JSON.stringify(ticketingsystem) : null,\n  };\n  return request(url, options);\n};\n\nexport const apiTicketingSystemPut = async (serviceUrl, ticketingsystem) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'PUT',\n    body: ticketingsystem ? JSON.stringify(ticketingsystem) : null,\n  };\n  return request(url, options);\n};\n","import React, { Component } from 'react';\nimport i18n from '../../../i18n';\nimport { Form, TextInput, Select, SelectItem, Button } from 'carbon-components-react';\nimport {\n  apiCurrentTicketingSystemGet,\n  apiTicketingSystemDelete,\n  apiTicketingSystemPost,\n  apiTicketingSystemPut,\n} from '../../../api/ticketingsystem';\nimport {authenticationChanged, isAuthenticated, isPortalAdmin} from '../../../api/helpers';\nimport withKeycloak from '../../../auth/withKeycloak';\n\nclass TicketingSystem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ticketingSystem: {},\n      ticketingSystemType: 'Jira',\n      url: '',\n      serviceAccount: '',\n      serviceAccountSecret: '',\n      systemId: '',\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async createTicketingSystem() {\n    const ticketingSystem = {\n      url: this.state.url,\n      serviceAccount: this.state.serviceAccount,\n      serviceAccountSecret: this.state.serviceAccountSecret,\n      systemId: this.state.systemId,\n    };\n    const response = (await apiTicketingSystemPost(this.props.serviceUrl, ticketingSystem)).data;\n    this.setState({\n      ticketingSystem: response\n    })\n  }\n\n  async updateTicketingSystem() {\n    const ticketingSystem = {\n      id: this.state.ticketingSystem.id,\n      url: this.state.url,\n      serviceAccount: this.state.serviceAccount,\n      serviceAccountSecret: this.state.serviceAccountSecret,\n      systemId: this.state.systemId,\n    };\n    return await apiTicketingSystemPut(this.props.serviceUrl, ticketingSystem);\n  }\n\n  async fetchData() {\n    const ticketingSystem = await apiCurrentTicketingSystemGet(this.props.serviceUrl);\n    this.setState({\n      ticketingSystem: ticketingSystem,\n      url: (ticketingSystem) ? ticketingSystem.url : '',\n      serviceAccount: (ticketingSystem) ? ticketingSystem.serviceAccount : '',\n      //Secret needs to be entered each time\n      systemId: (ticketingSystem) ? ticketingSystem.systemId : '',\n    })\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.fetchData();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n    }\n  }\n\n  async deleteTicketingSystem() {\n    return await apiTicketingSystemDelete(this.props.serviceUrl, this.state.ticketingSystem.id);\n  }\n\n  handleDelete() {\n    if (window.confirm('Are you sure you want to delete this ticketing system?')) {\n      this.deleteTicketingSystem()\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.deleted'),\n            submitColour: '#24a148',\n          });\n          this.fetchData();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    if (!this.state.ticketingSystem) {\n      this.createTicketingSystem()\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.created'),\n            submitColour: '#24a148',\n          });\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    } else {\n      this.updateTicketingSystem()\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.updated'),\n            submitColour: '#24a148',\n          });\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  render() {\n    const ticketingSystemTypes = ['Jira'];\n    if (isPortalAdmin()) {\n      return (\n        <div className=\"cp-form\">\n          <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n          <Form onSubmit={this.handleFormSubmit}>\n            <div className=\"bx--grid\">\n              <div className=\"bx--row\">\n                <div className=\"bx--col\">\n                  <Select\n                    id=\"ticketingSystemType\"\n                    name=\"ticketingSystemType\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.selectBackendTicketingSystem')}\n                    value={this.state.ticketingSystemType}\n                    onChange={this.handleChanges}\n                  >\n                    <SelectItem text={i18n.t('adminConfig.integrationTicketingSystem.select')}\n                                value=\"ticketing-system\"/>\n                    {ticketingSystemTypes.map((type, i) => (\n                      <SelectItem key={i} text={type} value={type}>\n                        {type}\n                      </SelectItem>\n                    ))}\n                  </Select>\n                  <TextInput\n                    id=\"serviceAccount\"\n                    name=\"serviceAccount\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.userName')}\n                    value={this.state.serviceAccount}\n                    onChange={this.handleChanges}\n                  />\n                  <TextInput\n                    id=\"systemId\"\n                    name=\"systemId\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.projectName')}\n                    value={this.state.systemId}\n                    onChange={this.handleChanges}\n                  />\n                </div>\n                <div className=\"bx--col\">\n                  <TextInput\n                    id=\"url\"\n                    name=\"url\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.url')}\n                    value={this.state.url}\n                    onChange={this.handleChanges}\n                  />\n                  <TextInput\n                    id=\"serviceAccountSecret\"\n                    name=\"serviceAccountSecret\"\n                    type=\"password\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.password')}\n                    value={this.state.serviceAccountSecret}\n                    onChange={this.handleChanges}\n                  />\n                </div>\n              </div>\n              <Button kind=\"primary\" tabIndex={0} type=\"submit\">\n                {' '}\n                {i18n.t('buttons.submit')}{' '}\n              </Button>\n              {this.state.ticketingSystem ? (\n                <Button kind=\"danger\" onClick={() => this.handleDelete()}>\n                  {' '}\n                  Delete{' '}\n                </Button>\n              ) : null}\n            </div>\n          </Form>\n        </div>\n      );\n    }\n    // Unauthorized\n    else {\n      return <p>{i18n.t('userMessages.unauthorized')}</p>;\n    }\n  }\n}\n\nexport default withKeycloak(TicketingSystem);\n","import { getDefaultOptions, request } from './helpers';\r\n\r\nconst resource = 'api/entando-versions';\r\n\r\nexport const apiProductVersionsGet = async serviceUrl => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionGet = async (serviceUrl, versionId) => {\r\n  const url = `${serviceUrl}/${resource}/${versionId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiUpdateProductVersionsStatus = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionPost = async (serviceUrl, productVersion) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: productVersion ? JSON.stringify(productVersion) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionPut = async (serviceUrl, productVersion) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: productVersion ? JSON.stringify(productVersion) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, DatePicker, DatePickerInput } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiProductVersionPost } from '../../api/productVersion';\r\nimport moment from 'moment';\r\n\r\nclass AddProductVersionModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      name: '',\r\n      startDate: '',\r\n      endDate: '',\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n\r\n    this.baseState = this.state;\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //name\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    if (typeof this.state.startDate !== 'undefined') {\r\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\r\n        formIsValid = false;\r\n        invalid['startDate'] = true;\r\n      }\r\n    }\r\n\r\n    if (typeof this.state.endDate !== 'undefined') {\r\n      if (!this.state.endDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\r\n        formIsValid = false;\r\n        invalid['endDate'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async addProductVersion() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      return await apiProductVersionPost(this.props.serviceUrl, this.state);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = () => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      this.addProductVersion()\r\n        .then(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.added'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateProductVersions();\r\n        })\r\n        .catch(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  clearValues = () => {\r\n    const customerModalElement = document.querySelector('#modal-form-product-version');\r\n    if (!customerModalElement.className.includes('is-visible')) {\r\n      this.setState(this.baseState);\r\n    }\r\n  };\r\n\r\n  handleStartDateChange = date => {\r\n    this.setState({\r\n      startDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\r\n    });\r\n  };\r\n\r\n  handleEndDateChange = date => {\r\n    this.setState({\r\n      endDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    const modalOpenButton = document.querySelector('.add-product-version-button');\r\n    modalOpenButton.addEventListener('click', this.clearValues, false);\r\n  }\r\n\r\n  render() {\r\n    const modalConfirmation = (\r\n      <div className=\"bx--modal-header\">\r\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\r\n      </div>\r\n    )\r\n    const modalId = \"modal-form-product-version\"\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.addProductVersion')}\r\n        modalHeading={i18n.t('adminDashboard.addProductVersion.title')}\r\n        buttonTriggerClassName=\"add-product-version bx--btn bx--btn--tertiary add-product-version-button\"\r\n        className=\"modal-form\"\r\n        id={modalId}\r\n        handleSubmit={this.handleFormSubmit}\r\n      >\r\n        {modalConfirmation}\r\n        <div className=\"form-container\">\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <TextInput\r\n              id={\"name\" + modalId}\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addProductVersion.productVersion')}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}>\r\n              <DatePickerInput\r\n                id={\"startDate\" + modalId}\r\n                name=\"startDate\"\r\n                placeholder=\"mm/dd/yyyy\"\r\n                labelText={i18n.t('adminDashboard.addProductVersion.productVersionStartDate')}\r\n                value={this.state.startDate}\r\n                //onChange={this.handleChanges}\r\n                type=\"text\"\r\n                invalidText={i18n.t('validation.invalid.date')}\r\n                invalid={this.state.invalid['startDate']}\r\n              />\r\n            </DatePicker>\r\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleEndDateChange}>\r\n              <DatePickerInput\r\n                id={\"endDate\" + modalId}\r\n                name=\"endDate\"\r\n                placeholder=\"mm/dd/yyyy\"\r\n                labelText={i18n.t('adminDashboard.addProductVersion.productVersionEndDate')}\r\n                value={this.state.endDate}\r\n                type=\"text\"\r\n                invalidText={i18n.t('validation.invalid.date')}\r\n                invalid={this.state.invalid['endDate']}\r\n              />\r\n            </DatePicker>\r\n          </Form>\r\n        </div>\r\n        {modalConfirmation}\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AddProductVersionModal);\r\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport { ModalWrapper, Form, TextInput, DatePicker, DatePickerInput } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiProductVersionGet, apiProductVersionPut } from '../../api/productVersion';\nimport moment from 'moment';\nimport {authenticationChanged} from \"../../api/helpers\";\n\nclass EditVersionModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      name: '',\n      startDate: '',\n      endDate: '',\n      invalid: {},\n      modalId: '',\n      buttonId: '',\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    //name\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    if (typeof this.state.startDate !== 'undefined') {\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n        formIsValid = false;\n        invalid['startDate'] = true;\n      }\n    }\n\n    if (typeof this.state.endDate !== 'undefined') {\n      if (!this.state.endDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n        formIsValid = false;\n        invalid['endDate'] = true;\n      }\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.getVersionDetails();\n    }\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  handleStartDateChange = date => {\n    this.setState({\n      startDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\n    });\n  };\n\n  handleEndDateChange = date => {\n    this.setState({\n      endDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\n    });\n  };\n\n  async getVersionDetails() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      const version = await apiProductVersionGet(this.props.serviceUrl, this.props.version.id);\n      this.setState({\n        name: version.data.name,\n        startDate: moment(version.data.startDate).format('MM/DD/YYYY'),\n        endDate: moment(version.data.endDate).format('MM/DD/YYYY'),\n        modalId: 'modal-form-version-edit-' + version.data.id,\n        buttonId: 'edit-version-button-' + version.data.id,\n      });\n    }\n  }\n\n  async versionPut(version) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      return await apiProductVersionPut(this.props.serviceUrl, version);\n    }\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const version = {\n        id: this.props.version.id,\n        name: this.state.name,\n        startDate: moment(this.state.startDate).format(),\n        endDate: moment(this.state.endDate).format(),\n      };\n      this.versionPut(version)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.updated'),\n            submitColour: '#24a148',\n          });\n          this.props.updateProductVersions();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      this.getVersionDetails();\n      const modalOpenButton = document.querySelector('.edit-version-button-' + this.props.version.id);\n      modalOpenButton.addEventListener('click', this.clearValues, false);\n    }\n  }\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n      </div>\n    )\n    const buttonClassName = 'bx--btn bx--btn--ghost edit-version-button-' + this.props.version.id;\n    const modalId = this.state.modalId\n    return (\n      <ModalWrapper\n        buttonTriggerText={i18n.t('buttons.edit')}\n        modalHeading={i18n.t('adminDashboard.addProject.editTitle')}\n        buttonTriggerClassName={buttonClassName}\n        className=\"modal-form\"\n        id={this.state.modalId}\n        handleSubmit={this.handleFormSubmit}\n        primaryButtonText={i18n.t('modalText.save')}\n        secondaryButtonText={i18n.t('modalText.cancel')}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit} id={\"form\" + modalId}>\n            <TextInput\n              id={\"name\" + modalId}\n              name=\"name\"\n              labelText={i18n.t('adminDashboard.addProject.projectName') + ' *'}\n              value={this.state.name}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['name']}\n            />\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}\n                        value={this.state.startDate}>\n              <DatePickerInput\n                id={\"startDate\" + modalId}\n                name=\"startDate\"\n                placeholder=\"mm/dd/yyyy\"\n                labelText={i18n.t('subscriptionDetails.startDate') + ' *'}\n                onChange={this.handleChanges}\n                type=\"text\"\n                invalidText={i18n.t('validation.invalid.date')}\n                invalid={this.state.invalid['startDate']}\n              />\n            </DatePicker>\n            <DatePicker\n              dateFormat=\"m/d/Y\"\n              datePickerType=\"single\"\n              onChange={this.handleEndDateChange}\n              id={\"endDate\"+modalId}\n              name=\"endDate\"\n              value={this.state.endDate}\n            >\n              <DatePickerInput\n                id={\"endDate\"+modalId}\n                name=\"endDate\"\n                placeholder=\"mm/dd/yyyy\"\n                labelText={i18n.t('subscriptionDetails.endDate') + ' *'}\n                onChange={this.handleChanges}\n                type=\"text\"\n                invalidText={i18n.t('validation.invalid.date')}\n                invalid={this.state.invalid['endDate']}\n              />\n            </DatePicker>\n          </Form>\n        </div>\n        {modalConfirmation}\n      </ModalWrapper>\n    );\n  }\n}\n\nexport default withKeycloak(EditVersionModal);\n","import React, { Component } from 'react';\r\nimport i18n from '../../../i18n';\r\nimport {\r\n  DataTable,\r\n  TableContainer,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableHeader,\r\n  TableBody,\r\n  TableCell,\r\n  Toggle,\r\n  Button,\r\n} from 'carbon-components-react';\r\nimport { apiProductVersionDelete, apiProductVersionsGet, apiUpdateProductVersionsStatus } from '../../../api/productVersion';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\nimport AddProductVersionModal from '../AddProductVersionModal';\r\nimport {authenticationChanged, isAuthenticated, isPortalAdminOrSupport} from '../../../api/helpers';\r\nimport EditVersionModal from '../EditVersionModal';\r\n\r\nclass ProductVersion extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      versions: '',\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (isPortalAdminOrSupport()) {\r\n      this.getProductVersions();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (authenticationChanged(this.props, prevProps)) {\r\n      if (isPortalAdminOrSupport()) {\r\n        this.getProductVersions();\r\n      }\r\n    }\r\n  }\r\n\r\n  async getProductVersions() {\r\n    if (isAuthenticated(this.props)) {\r\n      const productVersions = await apiProductVersionsGet(this.props.serviceUrl);\r\n\r\n      this.setState({\r\n        versions: productVersions.data,\r\n      });\r\n    }\r\n  }\r\n\r\n  async deleteVersion(id) {\r\n    if (isAuthenticated(this.props)) {\r\n      return await apiProductVersionDelete(this.props.serviceUrl, id);\r\n    }\r\n  }\r\n\r\n  handleDeleteVersion = (e, id) => {\r\n    e.preventDefault();\r\n    if (window.confirm('Are you sure you want to delete this Entando version?')) {\r\n      this.deleteVersion(id)\r\n        .then(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.deleted'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.updateProductVersions();\r\n        })\r\n        .catch(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  updateProductVersions = () => {\r\n    this.getProductVersions();\r\n  };\r\n\r\n  async handleToggleChange(id) {\r\n    return (await apiUpdateProductVersionsStatus(this.props.serviceUrl, id));\r\n  }\r\n\r\n  render() {\r\n    if (isPortalAdminOrSupport()) {\r\n      return (\r\n        <div>\r\n          <DataTable rows={rowData} headers={headerData}>\r\n            {({rows, headers, getHeaderProps, getTableProps}) => (\r\n              <TableContainer>\r\n                <Table {...getTableProps()}>\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      {headers.map(header => (\r\n                        <TableHeader {...getHeaderProps({header})}>{header.header}</TableHeader>\r\n                      ))}\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {Object.keys(this.state.versions).length !== 0\r\n                      ? this.state.versions.map((productVersion, index) => (\r\n                        <TableRow key={index}>\r\n                          <TableCell>{productVersion.name}</TableCell>\r\n                          <TableCell>\r\n                            <Toggle size=\"sm\"\r\n                                    onClick={() => this.handleToggleChange(productVersion.id)}\r\n                                    aria-label=\"toggle button\"\r\n                                    id={'toggle' + productVersion.id}\r\n                                    defaultToggled={productVersion.status}\r\n                            />\r\n                          </TableCell>\r\n                            <TableCell>{productVersion.startDate}</TableCell>\r\n                            <TableCell>{productVersion.endDate}</TableCell>\r\n                            <TableCell>\r\n                              <div style={{ display: 'flex' }}>\r\n                                <EditVersionModal\r\n                                  key={productVersion.id}\r\n                                  version={productVersion}\r\n                                  serviceUrl={this.props.serviceUrl}\r\n                                  updateProductVersions={this.updateProductVersions}\r\n                                />\r\n                                <Button\r\n                                  kind=\"ghost\"\r\n                                  onClick={e => this.handleDeleteVersion(e, productVersion.id)}\r\n                                  style={{ display: 'flex', width: '100%', color: 'red' }}\r\n                                >\r\n                                  {i18n.t('buttons.delete')}\r\n                                </Button>\r\n                              </div>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))\r\n                      : null}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            )}\r\n          </DataTable>\r\n          <br />\r\n          <AddProductVersionModal serviceUrl={this.props.serviceUrl} updateProductVersions={this.updateProductVersions} />\r\n        </div>\r\n      );\r\n    } else {\r\n      return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n    }\r\n  }\r\n}\r\n\r\nconst headerData = [\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.entandoVersion'),\r\n    key: 'entVersion',\r\n  },\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.status'),\r\n    key: 'status',\r\n  },\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.startDate'),\r\n    key: 'startDate',\r\n  },\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.supportEndDate'),\r\n    key: 'endDate',\r\n  },\r\n  {\r\n    header: i18n.t('customerDashboard.action'),\r\n    key: 'action',\r\n  },\r\n];\r\n\r\nconst rowData = [\r\n  {\r\n    id: 'a',\r\n    entVersion: '5.2',\r\n    status: <Toggle size=\"sm\" aria-label=\"toggle button\" defaultToggled id=\"status-1\" />,\r\n    startDate: 'April, 2018',\r\n    endDate: 'April, 2022',\r\n  },\r\n  {\r\n    id: 'b',\r\n    entVersion: '6.3',\r\n    status: <Toggle size=\"sm\"  aria-label=\"toggle button\" id=\"status-2\" />,\r\n    startDate: 'Jile, 2019',\r\n    endDate: 'April, 2023',\r\n  },\r\n  {\r\n    id: 'c',\r\n    entVersion: '6.2',\r\n    status: <Toggle size=\"sm\"  aria-label=\"toggle button\" defaultToggled id=\"status-3\" />,\r\n    startDate: 'September, 2020',\r\n    endDate: 'April, 2024',\r\n  },\r\n];\r\n\r\nexport default withKeycloak(ProductVersion);\r\n","import React from 'react';\r\nimport i18n from '../../../i18n';\r\nimport { Accordion, AccordionItem, Tile } from 'carbon-components-react';\r\nimport TicketingSystem from './TicketingSystem';\r\nimport ProductVersion from './ProductVersion';\r\nimport { isPortalAdmin } from '../../../api/helpers';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\n\r\nclass AdminConfiguration extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n    };\r\n    this.adminConfig = [\r\n      {\r\n        label: (\r\n          <div>\r\n            <p className=\"title\">{i18n.t('adminConfig.integrationTicketingSystem.title')}</p>\r\n            <p className=\"desc\">{i18n.t('adminConfig.integrationTicketingSystem.desc')}</p>\r\n          </div>\r\n        ),\r\n        content: <TicketingSystem serviceUrl={this.props.serviceUrl} />,\r\n      },\r\n      {\r\n        label: (\r\n          <div>\r\n            <p className=\"title\">{i18n.t('adminConfig.manageProductVersion.title')}</p>\r\n            <p className=\"desc\">{i18n.t('adminConfig.manageProductVersion.desc')}</p>\r\n          </div>\r\n        ),\r\n        content: <ProductVersion serviceUrl={this.props.serviceUrl} />,\r\n      },\r\n    ];\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.loading) {\r\n      // Authorized\r\n      if (isPortalAdmin()) {\r\n        return (\r\n          <div>\r\n            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\r\n            <div className=\"form-container\">\r\n              <Tile>\r\n                <p className=\"title\">{i18n.t('adminConfig.title')}</p>\r\n                <p className=\"desc\">{i18n.t('adminConfig.desc')}</p>\r\n              </Tile>\r\n              <Accordion>\r\n                {this.adminConfig.map((item, index) => (\r\n                  <AccordionItem key={index.toString()} index={index} title={item.label} description={item.description}>\r\n                    <div>{item.content}</div>\r\n                  </AccordionItem>\r\n                ))}\r\n              </Accordion>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      // Unauthorized\r\n      else {\r\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n      }\r\n    }\r\n    // Loading\r\n    else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\nexport default withKeycloak(AdminConfiguration);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AdminConfiguration from '../components/Admin/Configuration/AdminConfiguration';\r\nimport '../index.scss';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url'\r\n};\r\n\r\nclass AdminConfigurationElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AdminConfiguration serviceUrl={serviceUrl} locale={locale}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-configuration-widget', AdminConfigurationElement);\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/partners';\r\n\r\nexport const apiPartnerDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiPartnersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiPartnerPost = async (serviceUrl, partner) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: partner ? JSON.stringify(partner) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\n\nconst resource = 'api/projects';\n\nexport const apiProjectsDelete = async (serviceUrl, id) => {\n  const url = `${serviceUrl}/${resource}/${id}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiProjectsGet = async serviceUrl => {\n  const url = getUrl(`${serviceUrl}/${resource}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiProjectGet = async (serviceUrl, id) => {\n  const url = getUrl(`${serviceUrl}/${resource}/${id}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiProjectPost = async (serviceUrl, project) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: project ? JSON.stringify(project) : null,\n  };\n  return request(url, options);\n};\n\nexport const apiProjectPut = async (serviceUrl, project) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'PUT',\n    body: project ? JSON.stringify(project) : null,\n  };\n  return request(url, options);\n};\n\nexport const apiAddTicketToProject = async (serviceUrl, projectId, ticketId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/tickets/${ticketId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n  };\n  return request(url, options);\n};\n\nexport const apiAddSubscriptionToProject = async (serviceUrl, projectId, subscriptionId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/subscriptions/${subscriptionId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n  };\n  return request(url, options);\n};\n\nexport const apiAddUserToProject = async (serviceUrl, projectId, userId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/users/${userId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n  };\n  return request(url, options);\n};\n\nexport const apiDeletePartnerFromProject = async (serviceUrl, projectId, partnerId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/partners/${partnerId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiDeleteSubscriptionFromProject = async (serviceUrl, projectId, subscriptionId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/subscriptions/${subscriptionId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\n\nexport const apiDeleteUserFromProject = async (serviceUrl, projectId, userId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/users/${userId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiAddPartnerToProject = async (serviceUrl, projectId, partnerId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/partners/${partnerId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n  };\n  return request(url, options);\n};\n\nexport const apiGetProjectUsers = async (serviceUrl, projectId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/users/`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\nexport const apiGetProjectSubscriptions = async (serviceUrl, projectId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/subscriptions/`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\nexport const apiGetProjectIdsAndNames = async serviceUrl => {\n  const url = `${serviceUrl}/${resource}/nameId/`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\n//TODO: remove the my and admin-specific functions\nexport const apiGetMyProject = async (serviceUrl, projectId) => {\n  const url = `${serviceUrl}/${resource}/myproject/${projectId}/`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\nexport const apiGetMyProjectUsers = async (serviceUrl, projectId) => {\n  const url = `${serviceUrl}/${resource}/myproject/${projectId}/users`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\n// Endpoints for backend security\nconst adminResource = 'api/projects/admin';\nexport const apiAdminProjectsGet = async serviceUrl => {\n  const url = getUrl(`${serviceUrl}/${adminResource}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nconst myResource = 'api/projects/myprojects';\nexport const apiMyProjectsGet = async serviceUrl => {\n  const url = getUrl(`${serviceUrl}/${myResource}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n","export const AuthenticatedView = ({ children, keycloak }) => {\r\n  const authenticated = keycloak && keycloak.initialized && keycloak.authenticated;\r\n  return authenticated ? children : null;\r\n};\r\n\r\nexport const UnauthenticatedView = ({ children, keycloak }) => {\r\n  const authenticated = keycloak && keycloak.initialized && keycloak.authenticated;\r\n  return !authenticated ? children : null;\r\n};\r\n","import React, {Component} from 'react';\r\nimport i18n from '../../i18n';\r\nimport {ModalWrapper, Form, TextInput, Select, SelectItem, TextArea} from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport {apiPartnerPost} from '../../api/partners';\r\nimport {apiProjectsGet, apiAddPartnerToProject} from '../../api/projects';\r\nimport {authenticationChanged, isAuthenticated} from \"../../api/helpers\";\r\nimport {AuthenticatedView} from \"../../auth/KeycloakViews\";\r\n\r\nclass AddPartnerModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      projectList: {},\r\n      projectId: '',\r\n      name: '',\r\n      partnerNumber: '',\r\n      notes: '',\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (isAuthenticated(this.props)) {\r\n      this.getProjects();\r\n\r\n      const modalOpenButton = document.querySelector('.add-partner-button');\r\n      modalOpenButton.addEventListener('click', this.clearValues, false);\r\n    }\r\n  }\r\n\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (authenticationChanged(this.props, prevProps)) {\r\n      this.getProjects();\r\n    }\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //project\r\n    if (this.state.projectId === '' || this.state.projectId === 'project-list') {\r\n      formIsValid = false;\r\n      invalid['projectId'] = true;\r\n    }\r\n\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    if (this.state.partnerNumber === '') {\r\n      formIsValid = false;\r\n      invalid['partnerNumber'] = true;\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async getProjects() {\r\n    if (isAuthenticated(this.props)) {\r\n      const projects = await apiProjectsGet(this.props.serviceUrl);\r\n      this.setState({\r\n        projectList: projects.data\r\n      });\r\n    }\r\n  }\r\n\r\n  async partnerPost(partner) {\r\n    if (isAuthenticated(this.props)) {\r\n      const result = await apiPartnerPost(this.props.serviceUrl, partner);\r\n      return await apiAddPartnerToProject(this.props.serviceUrl, this.state.projectId, result.data.id);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = () => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const partner = {\r\n        name: this.state.name,\r\n        partnerNumber: this.state.partnerNumber,\r\n        notes: this.state.notes,\r\n      };\r\n      this.partnerPost(partner)\r\n        .then(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.added'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateCustomerList();\r\n        })\r\n        .catch(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  clearValues = () => {\r\n    const partnerModalElement = document.querySelector('#modal-form-partner');\r\n    if (!partnerModalElement.className.includes('is-visible')) {\r\n      this.setState({\r\n        projectId: '',\r\n        name: '',\r\n        partnerNumber: '',\r\n        notes: '',\r\n        invalid: {},\r\n        submitMsg: '',\r\n        submitColour: 'black',\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const modalConfirmation = (\r\n      <div className=\"bx--modal-header\">\r\n        <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\r\n      </div>\r\n    )\r\n    const {keycloak} = this.props;\r\n    const modalId = \"modal-form-partner\";\r\n    return (\r\n      <AuthenticatedView keycloak={keycloak}>\r\n        <ModalWrapper\r\n          buttonTriggerText={i18n.t('buttons.addPartner')}\r\n          modalHeading={i18n.t('adminDashboard.addPartner.title')}\r\n          buttonTriggerClassName=\"add-partner bx--btn bx--btn--tertiary add-partner-button\"\r\n          className=\"modal-form\"\r\n          id={modalId}\r\n          handleSubmit={this.handleFormSubmit}\r\n          primaryButtonText={i18n.t('modalText.save')}\r\n          secondaryButtonText={i18n.t('modalText.cancel')}\r\n        >\r\n          {modalConfirmation}\r\n          <div className=\"form-container\">\r\n            <Form onSubmit={this.handleFormSubmit}>\r\n              <Select\r\n                id={\"projectId\" + modalId}\r\n                name=\"projectId\"\r\n                labelText={i18n.t('adminDashboard.addPartner.projectList') + ' *'}\r\n                value={this.state.projectId}\r\n                onChange={this.handleChanges}\r\n                invalidText={i18n.t('validation.invalid.required')}\r\n                invalid={this.state.invalid['projectId']}\r\n              >\r\n                <SelectItem text={i18n.t('adminDashboard.addPartner.selectProject')} value=\"project-list\"/>\r\n                {Object.keys(this.state.projectList).length !== 0\r\n                  ? this.state.projectList.map((project, i) => (\r\n                    <SelectItem key={i} text={project.name} value={project.id}>\r\n                      {project.name}\r\n                    </SelectItem>\r\n                  ))\r\n                  : null}\r\n              </Select>\r\n\r\n              <TextInput\r\n                id={\"name\" + modalId}\r\n                name=\"name\"\r\n                labelText={i18n.t('adminDashboard.addPartner.partnerName') + ' *'}\r\n                value={this.state.name}\r\n                onChange={this.handleChanges}\r\n                invalidText={i18n.t('validation.invalid.required')}\r\n                invalid={this.state.invalid['name']}\r\n              />\r\n              <TextInput\r\n                id={\"partnerNumber\" + modalId}\r\n                name=\"partnerNumber\"\r\n                labelText={i18n.t('adminDashboard.addPartner.partnerNumber') + ' *'}\r\n                value={this.state.partnerNumber}\r\n                onChange={this.handleChanges}\r\n                invalidText={i18n.t('validation.invalid.required')}\r\n                invalid={this.state.invalid['partnerNumber']}\r\n              />\r\n              <TextArea\r\n                name=\"notes\"\r\n                labelText={i18n.t('adminDashboard.addPartner.notes')}\r\n                value={this.state.notes}\r\n                onChange={this.handleChanges}\r\n              />\r\n            </Form>\r\n          </div>\r\n          {modalConfirmation}\r\n        </ModalWrapper>\r\n      </AuthenticatedView>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AddPartnerModal);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, Select, SelectItem, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomersGet, apiAddProjectToCustomer } from '../../api/customers';\r\nimport { apiProjectPost, apiProjectsGet } from '../../api/projects';\r\n\r\nclass AddProjectModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      projects: {},\r\n      customerList: {},\r\n      customerId: '',\r\n      name: '',\r\n      description: '',\r\n      systemId: '',\r\n      contactName: '',\r\n      contactPhone: '',\r\n      contactEmail: '',\r\n      notes: '',\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //customer\r\n    if (this.state.customerId === '' || this.state.customerId === 'customer-list') {\r\n      formIsValid = false;\r\n      invalid['customerId'] = true;\r\n    }\r\n\r\n    //name\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    //description\r\n    if (this.state.description === '') {\r\n      formIsValid = false;\r\n      invalid['description'] = true;\r\n    }\r\n\r\n    //contactEmail\r\n    if (typeof this.state.contactEmail !== 'undefined') {\r\n      let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n      let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n      if (\r\n        !(\r\n          lastAtPos < lastDotPos &&\r\n          lastAtPos > 0 &&\r\n          this.state.contactEmail.indexOf('@@') === -1 &&\r\n          lastDotPos > 2 &&\r\n          this.state.contactEmail.length - lastDotPos > 2\r\n        )\r\n      ) {\r\n        formIsValid = false;\r\n        invalid['contactEmail'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  async getAllProjects() {\r\n    const projects = await apiProjectsGet(this.props.serviceUrl);\r\n    this.setState({\r\n      projects: projects.data,\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomers();\r\n      this.getAllProjects();\r\n    }\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async getCustomers() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const customers = await apiCustomersGet(this.props.serviceUrl);\r\n      this.setState({ customerList: customers });\r\n    }\r\n  }\r\n\r\n  async projectPost(project) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const result = await apiProjectPost(this.props.serviceUrl, project);\r\n      return await apiAddProjectToCustomer(this.props.serviceUrl, this.state.customerId, result.data.id);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = () => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const project = {\r\n        name: this.state.name,\r\n        description: this.state.description,\r\n        systemId: this.state.systemId,\r\n        contactName: this.state.contactName,\r\n        contactPhone: this.state.contactPhone,\r\n        contactEmail: this.state.contactEmail,\r\n        notes: this.state.notes,\r\n      };\r\n      for (var i = 0; i < this.state.projects.length; i++) {\r\n        if (project.systemId === this.state.projects[i].systemId && project.systemId.trim() !== '') {\r\n          window.alert('That system id is already in use in another project');\r\n          return;\r\n        }\r\n      }\r\n      this.projectPost(project)\r\n        .then(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.added'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateCustomerList();\r\n          this.getAllProjects();\r\n        })\r\n        .catch(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  clearValues = () => {\r\n    const projectModalElement = document.querySelector('#modal-form-project');\r\n    if (!projectModalElement.className.includes('is-visible')) {\r\n      this.setState({\r\n        customerId: '',\r\n        name: '',\r\n        description: '',\r\n        systemId: '',\r\n        contactName: '',\r\n        contactPhone: '',\r\n        contactEmail: '',\r\n        notes: '',\r\n        invalid: {},\r\n      });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getCustomers();\r\n    this.getAllProjects();\r\n\r\n    const modalOpenButton = document.querySelector('.add-project-button');\r\n    modalOpenButton.addEventListener('click', this.clearValues, false);\r\n  }\r\n\r\n  render() {\r\n    const modalConfirmation = (\r\n      <div className=\"bx--modal-header\">\r\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\r\n      </div>\r\n    )\r\n    const modalId = \"modal-form-project\"\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.addProject')}\r\n        modalHeading={i18n.t('adminDashboard.addProject.title')}\r\n        buttonTriggerClassName=\"add-project bx--btn bx--btn--tertiary add-project-button\"\r\n        className=\"modal-form\"\r\n        id={modalId}\r\n        handleSubmit={this.handleFormSubmit}\r\n        primaryButtonText={i18n.t('modalText.save')}\r\n        secondaryButtonText={i18n.t('modalText.cancel')}\r\n      >\r\n        {modalConfirmation}\r\n        <div className=\"form-container\">\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <Select\r\n              id={\"customerId\" + modalId}\r\n              name=\"customerId\"\r\n              labelText={i18n.t('adminDashboard.addProject.customerList') + ' *'}\r\n              value={this.state.customerId}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['customerId']}\r\n            >\r\n              <SelectItem text={i18n.t('adminDashboard.addProject.selectCustomer')} value=\"customer-list\" />\r\n              {Object.keys(this.props.allCustomers).length !== 0\r\n                ? this.props.allCustomers.map((customerList, i) => (\r\n                    <SelectItem key={i} text={customerList.name} value={customerList.id}>\r\n                      {customerList.name}\r\n                    </SelectItem>\r\n                  ))\r\n                : null}\r\n            </Select>\r\n\r\n            <TextInput\r\n              id={\"name\" + modalId}\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addProject.projectName') + ' *'}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <TextInput\r\n              id={\"description\" + modalId}\r\n              name=\"description\"\r\n              labelText={i18n.t('adminDashboard.addProject.projectDesc') + ' *'}\r\n              value={this.state.description}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['description']}\r\n            />\r\n            <TextInput\r\n              id={\"systemId\" + modalId}\r\n              name=\"systemId\"\r\n              labelText={i18n.t('adminDashboard.addProject.systemId')}\r\n              value={this.state.systemId}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              id={\"contactName\" + modalId}\r\n              name=\"contactName\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactName')}\r\n              value={this.state.contactName}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              id={\"contactPhone\" + modalId}\r\n              name=\"contactPhone\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactPhone')}\r\n              value={this.state.contactPhone}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              id={\"contactEmail\" + modalId}\r\n              name=\"contactEmail\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactEmail') + ' *'}\r\n              value={this.state.contactEmail}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.email')}\r\n              invalid={this.state.invalid['contactEmail']}\r\n            />\r\n            <TextArea\r\n              id={\"notes\" + modalId}\r\n              name=\"notes\"\r\n              labelText={i18n.t('adminDashboard.addProject.notes')}\r\n              value={this.state.notes}\r\n              onChange={this.handleChanges}\r\n            />\r\n          </Form>\r\n        </div>\r\n        {modalConfirmation}\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AddProjectModal);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomersGet } from '../../api/customers';\r\nimport { apiProjectGet, apiProjectPut, apiProjectsGet } from '../../api/projects';\r\n\r\nclass EditProjectModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      projects: {},\r\n      customerList: {},\r\n      customerId: '',\r\n      name: '',\r\n      description: '',\r\n      systemId: '',\r\n      contactName: '',\r\n      contactPhone: '',\r\n      contactEmail: '',\r\n      notes: '',\r\n      invalid: {},\r\n      modalId: '',\r\n      buttonId: '',\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //name\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    //description\r\n    if (this.state.description === '') {\r\n      formIsValid = false;\r\n      invalid['description'] = true;\r\n    }\r\n\r\n    //contactEmail\r\n    if (typeof this.state.contactEmail !== 'undefined') {\r\n      let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n      let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n      if (\r\n        !(\r\n          lastAtPos < lastDotPos &&\r\n          lastAtPos > 0 &&\r\n          this.state.contactEmail.indexOf('@@') === -1 &&\r\n          lastDotPos > 2 &&\r\n          this.state.contactEmail.length - lastDotPos > 2\r\n        )\r\n      ) {\r\n        formIsValid = false;\r\n        invalid['contactEmail'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomers();\r\n      this.getAllProjects();\r\n      this.getProjectDetails();\r\n    }\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async getCustomers() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const customers = await apiCustomersGet(this.props.serviceUrl);\r\n      this.setState({ customerList: customers });\r\n    }\r\n  }\r\n\r\n  async getProjectDetails() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const project = await apiProjectGet(this.props.serviceUrl, this.props.project.id);\r\n      this.setState({\r\n        name: project.data.name,\r\n        description: project.data.description,\r\n        systemId: project.data.systemId,\r\n        contactName: project.data.contactName,\r\n        contactPhone: project.data.contactPhone,\r\n        contactEmail: project.data.contactEmail,\r\n        notes: project.data.notes,\r\n        modalId: 'modal-form-project-edit-' + project.data.id,\r\n        buttonId: 'edit-project-button-' + project.data.id,\r\n      });\r\n    }\r\n  }\r\n\r\n  async getAllProjects() {\r\n    const projects = await apiProjectsGet(this.props.serviceUrl);\r\n    this.setState({\r\n      projects: projects.data,\r\n    });\r\n  }\r\n\r\n  async projectPut(project) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      return await apiProjectPut(this.props.serviceUrl, project);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = () => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const project = {\r\n        id: this.props.project.id,\r\n        customer: this.props.project.customer,\r\n        name: this.state.name,\r\n        description: this.state.description,\r\n        systemId: this.state.systemId,\r\n        contactName: this.state.contactName,\r\n        contactPhone: this.state.contactPhone,\r\n        contactEmail: this.state.contactEmail,\r\n        notes: this.state.notes,\r\n      };\r\n      for (var i = 0; i < this.props.allProjects.length; i++) {\r\n        if (\r\n          project.systemId === this.props.allProjects[i].systemId &&\r\n          project.id !== this.props.allProjects[i].id &&\r\n          project.systemId.trim() !== ''\r\n        ) {\r\n          window.alert('That system id is already in use in another project');\r\n          return;\r\n        }\r\n      }\r\n      this.projectPut(project)\r\n        .then(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.updated'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateProjectList();\r\n        })\r\n        .catch(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  clearValues = () => {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const customerModalElement = document.querySelector('#' + this.state.modalId);\r\n    if (!customerModalElement.className.includes('is-visible') && authenticated) {\r\n      this.setState({\r\n        name: this.props.project.name,\r\n        description: this.props.project.description,\r\n        systemId: this.props.project.systemId,\r\n        contactName: this.props.project.contactName,\r\n        contactPhone: this.props.project.contactPhone,\r\n        contactEmail: this.props.project.contactEmail,\r\n        notes: this.props.project.notes,\r\n        invalid: {},\r\n      });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.getCustomers();\r\n      this.getAllProjects();\r\n      this.getProjectDetails();\r\n\r\n      const modalOpenButton = document.querySelector('.edit-project-button-' + this.props.project.id);\r\n      modalOpenButton.addEventListener('click', this.clearValues, false);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const modalConfirmation = (\r\n      <div className=\"bx--modal-header\">\r\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\r\n      </div>\r\n    )\r\n    const buttonClassName = 'dropdown-button-button bx--btn bx--btn--ghost edit-project-button-' + this.props.project.id;\r\n    const modalId = this.state.modalId;\r\n    return (\r\n    <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.edit')}\r\n        modalHeading={i18n.t('adminDashboard.addProject.editTitle')}\r\n        buttonTriggerClassName={buttonClassName}\r\n        className=\"modal-form\"\r\n        id={this.state.modalId}\r\n        handleSubmit={this.handleFormSubmit}\r\n        primaryButtonText={i18n.t('modalText.save')}\r\n        secondaryButtonText={i18n.t('modalText.cancel')}\r\n      >\r\n        {modalConfirmation}\r\n        <div className=\"form-container\">\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <TextInput\r\n              id={\"name\" + modalId}\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addProject.projectName') + ' *'}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <TextInput\r\n              id={\"description\" + modalId}\r\n              name=\"description\"\r\n              labelText={i18n.t('adminDashboard.addProject.projectDesc') + ' *'}\r\n              value={this.state.description}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['description']}\r\n            />\r\n            <TextInput\r\n              id={\"systemId\" + modalId}\r\n              name=\"systemId\"\r\n              labelText={i18n.t('adminDashboard.addProject.systemId')}\r\n              value={this.state.systemId}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              id={\"contactName\" + modalId}\r\n              name=\"contactName\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactName')}\r\n              value={this.state.contactName}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              id={\"contactPhone\" + modalId}\r\n              name=\"contactPhone\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactPhone')}\r\n              value={this.state.contactPhone}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              id={\"contactEmail\" + modalId}\r\n              name=\"contactEmail\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactEmail') + ' *'}\r\n              value={this.state.contactEmail}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.email')}\r\n              invalid={this.state.invalid['contactEmail']}\r\n            />\r\n            <TextArea\r\n              name=\"notes\"\r\n              labelText={i18n.t('adminDashboard.addProject.notes')}\r\n              value={this.state.notes}\r\n              onChange={this.handleChanges}\r\n            />\r\n          </Form>\r\n        </div>\r\n      {modalConfirmation}\r\n    </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(EditProjectModal);\r\n","import React, {Component} from 'react';\r\nimport i18n from '../../i18n';\r\nimport {\r\n  Button,\r\n  DataTable,\r\n  ModalWrapper,\r\n  Table, TableBody,\r\n  TableCell, TableContainer, TableHead, TableHeader,\r\n  TableRow,\r\n} from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport {isPortalAdminOrSupport} from \"../../api/helpers\";\r\nimport {apiDeletePartnerFromProject} from \"../../api/projects\";\r\n\r\nclass ManagePartnersModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      projectId: this.props.project.id,\r\n      project: this.props.project,\r\n    }\r\n\r\n    this.headerData = [\r\n      {\r\n        header: i18n.t('adminDashboard.addPartner.partnerName'),\r\n        key: 'partner',\r\n      },\r\n      {\r\n        header: i18n.t('adminDashboard.addPartner.partnerNumber'),\r\n        key: 'partnerNumber',\r\n      },\r\n      {\r\n        header: i18n.t('adminDashboard.addPartner.notes'),\r\n        key: 'notes',\r\n      },\r\n      {\r\n        header: i18n.t('customerDashboard.action'),\r\n        key: 'action',\r\n      },\r\n    ];\r\n  }\r\n\r\n  async removePartner(projectId, partnerId) {\r\n    if (isPortalAdminOrSupport()) {\r\n      return await apiDeletePartnerFromProject(this.props.serviceUrl, projectId, partnerId);\r\n    }\r\n  }\r\n\r\n  handleRemovePartner = (e, projectId, partnerId) => {\r\n    e.preventDefault();\r\n    if (window.confirm('Are you sure you want to remove this partner from the project?')) {\r\n      this.removePartner(projectId, partnerId)\r\n        .then((result) => {\r\n          this.setState({\r\n            project: result.data,\r\n            submitMsg: i18n.t('submitMessages.deleted'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateProjectList();\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const modalConfirmation = (\r\n      <div className=\"bx--modal-header\">\r\n        <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\r\n      </div>\r\n    )\r\n    const modalId = \"modal-form-manage-partners\";\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.managePartners')}\r\n        modalHeading={i18n.t('adminDashboard.managePartners.title')}\r\n        buttonTriggerClassName=\"add-partner bx--btn bx--btn--tertiary add-partner-button\"\r\n        className=\"modal-form\"\r\n        id={modalId}\r\n        hasForm={false}\r\n        primaryButtonText={i18n.t('modalText.done')}\r\n        secondaryButtonText={null}\r\n      >\r\n        {modalConfirmation}\r\n        <div>\r\n          <DataTable rows={rowData} headers={this.headerData}>\r\n            {({rows, headers, getHeaderProps, getTableProps}) => (\r\n              <TableContainer description={i18n.t('customerDashboard.tableDesc')}>\r\n                <Table {...getTableProps()}>\r\n                  <TableHead>\r\n                    <TableRow key=\"headerRow\">\r\n                      {headers.map(header => {\r\n                        return <TableHeader {...getHeaderProps({header})}>\r\n                          {header.header}\r\n                        </TableHeader>\r\n                      })}\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {this.state.project.partners.map((partner, index) => {\r\n                      return (\r\n                        <TableRow key={\"partner\" + index}>\r\n                          <TableCell>\r\n                            {partner.name}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            {partner.partnerNumber}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            {partner.notes}\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <div>\r\n                              <Button\r\n                                kind=\"ghost\"\r\n                                onClick={e => this.handleRemovePartner(e, this.state.projectId, partner.id)}\r\n                                style={{display: 'block', width: '100%', color: 'red'}}\r\n                              >\r\n                                {i18n.t('buttons.delete')}\r\n                              </Button>\r\n                              <hr style={{margin: '0', border: 'none', borderTop: '1px solid lightgrey'}}/>\r\n                            </div>\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      )\r\n                    })\r\n                    }\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            )}\r\n          </DataTable>\r\n        </div>\r\n        {modalConfirmation}\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nconst rowData = [\r\n  {\r\n    id: 'a',\r\n    name: 'Partner 1',\r\n    partnerNumber: '123',\r\n  },\r\n  {\r\n    id: 'b',\r\n    name: 'Partner 2',\r\n    partnerNumber: '456',\r\n  },\r\n];\r\n\r\nexport default withKeycloak(ManagePartnersModal);\r\n","import React from 'react';\nimport i18n from '../../i18n';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { Button } from 'carbon-components-react';\nimport EditProjectModal from '../Admin/EditProjectModal';\nimport ManagePartnersModal from '../Admin/ManagePartnersModal';\nimport {isPortalAdmin} from '../../api/helpers';\nimport { Link } from 'react-router-dom';\n\nclass ProjectActionItems extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      showMenu: false,\n    };\n  }\n\n  handleClick = () => {\n    if (!this.state.showMenu) {\n      document.addEventListener('mousedown', this.handleOutsideClick, false);\n    } else {\n      document.removeEventListener('mousedown', this.handleOutsideClick, false);\n    }\n\n    this.setState(prevState => ({\n      showMenu: !prevState.showMenu,\n    }));\n  };\n\n  handleOutsideClick = e => {\n    if (this.node && !this.node.contains(e.target)) {\n      this.handleClick();\n    }\n  };\n\n  render() {\n    const isAdmin = isPortalAdmin();\n    const actionDivider = (\n      <hr style={{margin: '0', border: 'none', borderTop: '1px solid lightgrey'}}/>\n    );\n    const topButton = (\n      <Button onClick={this.handleClick} style={{padding: '10px 20px'}} kind=\"tertiary\">\n        +\n      </Button>\n    );\n    const editProjectSubscription = (\n      <div>\n        <EditProjectModal\n          key={this.props.project.id}\n          allProjects={this.props.allProjects}\n          project={this.props.project}\n          serviceUrl={this.props.serviceUrl}\n          updateProjectList={this.props.updateProjectList}\n        />\n        {actionDivider}\n      </div>\n    )\n    const subscriptionParam = this.props.subscription ? '&subscription=' + this.props.subscription.id : '';\n    const newOrRenewSubscription = (\n      <div>\n        <a\n          href={`/entando-de-app/${this.props.locale}/new_or_renew_subscription.page?project=${this.props.project.id}${subscriptionParam}`}\n          style={{textDecoration: 'none'}}\n        >\n          <Button kind=\"ghost\" style={{display: 'block', width: '100%'}} value=\"Subscription Request\">\n            {i18n.t('buttons.subscriptionRequest')}\n          </Button>\n        </a>\n        {actionDivider}\n      </div>\n    );\n    const manageUsers = (\n      <div>\n        <a\n          href={`/entando-de-app/${this.props.locale}/manage_users.page?project=${this.props.project.id}`}\n          style={{textDecoration: 'none'}}\n        >\n          <Button kind=\"ghost\" style={{display: 'block', width: '100%'}} value=\"Manage Users\">\n            {i18n.t('buttons.manageUsers')}\n          </Button>\n        </a>\n        {actionDivider}\n      </div>\n    );\n    const manageSubscriptions = (\n      <div>\n        <a\n          href={`/entando-de-app/${this.props.locale}/manage_subscriptions.page?project=${this.props.project.id}`}\n          style={{textDecoration: 'none'}}>\n          <Button kind=\"ghost\" style={{display: 'block', width: '100%'}} value=\"Manage Subscriptions\">\n            {i18n.t('buttons.manageSubscriptions')}\n          </Button>\n        </a>\n        {actionDivider}\n      </div>\n    );\n    const openTicket = (\n      <div>\n        <a\n          href={`/entando-de-app/${this.props.locale}/open_service_ticket.page?project=${this.props.project.id}`}\n          style={{textDecoration: 'none'}}\n        >\n          <Button kind=\"ghost\" style={{display: 'block', width: '100%'}} value=\"Open Ticket\">\n            {i18n.t('buttons.openTicket')}\n          </Button>\n        </a>\n        {actionDivider}\n      </div>\n    );\n    const viewAllTickets = (\n      <div>\n        <a\n          href={\n            this.props.ticketingSystem.url.substr(0, this.props.ticketingSystem.url.indexOf('/rest')) +\n            '/issues/?jql=Organizations=' + this.props.project.systemId}\n          style={{textDecoration: 'none'}}\n          target=\"_blank\" rel=\"noreferrer\"\n        >\n          <Button kind=\"ghost\" style={{display: 'block', width: '100%'}} value=\"View All Tickets\">\n            {i18n.t('buttons.viewAllTickets')}\n          </Button>\n        </a>\n        {actionDivider}\n      </div>\n    );\n    const deleteProject = (\n      <div>\n        <Button\n          kind=\"ghost\"\n          onClick={e => this.props.handleDeleteProject(e, this.props.project.id)}\n          style={{display: 'block', width: '100%', color: 'red'}}\n        >\n          {i18n.t('buttons.delete')}\n        </Button>\n        {actionDivider}\n      </div>\n    );\n    if (!this.props.subscription) {\n      return (\n        <div>\n          {topButton}\n          {this.state.showMenu && (\n            <div\n              className=\"menu\"\n              style={{zIndex: '100', position: 'absolute', backgroundColor: 'white'}}\n              ref={node => {\n                this.node = node;\n              }}\n            >\n              {actionDivider}\n              {isAdmin && editProjectSubscription}\n              {newOrRenewSubscription}\n              {isAdmin && openTicket}\n              {isAdmin && viewAllTickets}\n              {isAdmin && manageSubscriptions}\n              {isAdmin && manageUsers}\n              {isAdmin && deleteProject}\n            </div>\n          )}\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          {topButton}\n          {this.state.showMenu && (\n            <div\n              className=\"menu\"\n              style={{zIndex: '100', position: 'absolute', backgroundColor: 'white'}}\n              ref={node => {\n                this.node = node;\n              }}\n            >\n              {actionDivider}\n              {/*View Project Subscription*/}\n              <Link to={`/subscription-details/${this.props.subscription.id}`} style={{textDecoration: 'none'}}>\n                <Button kind=\"ghost\" style={{display: 'block', width: '100%'}} value=\"View\">\n                  {i18n.t('buttons.view')}\n                </Button>\n              </Link>\n              {actionDivider}\n              {isAdmin && editProjectSubscription}\n              {openTicket}\n              {viewAllTickets}\n              {!isAdmin && newOrRenewSubscription}\n              {isAdmin && (\n                <div>\n                  {/*Manage Partners*/}\n                  <ManagePartnersModal\n                    key={this.props.project.id}\n                    project={this.props.project}\n                    serviceUrl={this.props.serviceUrl}\n                    updateProjectList={this.props.updateProjectList}\n                  />\n                  {actionDivider}\n                  {manageSubscriptions}\n                  {manageUsers}\n                  {/*Delete Project*/}\n                  <Button\n                    kind=\"ghost\"\n                    onClick={e => this.props.handleDeleteProject(e, this.props.project.id)}\n                    className=\"button-warning\"\n                  >\n                    {i18n.t('buttons.delete')}\n                  </Button>\n                  {actionDivider}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      );\n    }\n  }\n}\n\nexport default withKeycloak(ProjectActionItems);\n","import {getDefaultOptions, request} from './helpers';\r\nimport moment from \"moment\";\r\n\r\nconst resource = 'api/project-subscriptions';\r\n\r\nexport const formatStartDate = (startDate) => {\r\n  return String(new Date(startDate).toDateString());\r\n}\r\n\r\nexport const formatEndDate = (startDate, lengthInMonths) => {\r\n  const endDate = new Date(startDate).setMonth(new Date(startDate).getMonth() + lengthInMonths);\r\n  return String(new Date(endDate).toDateString());\r\n}\r\n\r\nexport const stripTime = (date) => {\r\n  return moment(date).format('MM/DD/YYYY');\r\n}\r\n\r\nexport const apiSubscriptionGet = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n// Project Subscription creation consists of an object containing a projectSubscription, an entandoVersionId, and a\r\n// project id, see SubscriptionCreationRequest.\r\n/**\r\n * Called to create a new project subscription\r\n *\r\n * @param {string} serviceUrl\r\n * @param {ProjectSubscriptionCreation} projectSubscriptionCreation\r\n * @returns\r\n */\r\nexport const apiProjectSubscriptionPost = async (serviceUrl, projectSubscriptionCreation) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: projectSubscriptionCreation ? JSON.stringify(projectSubscriptionCreation) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectSubscriptionPut = async (serviceUrl, projectSubscriptionCreation) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: projectSubscriptionCreation ? JSON.stringify(projectSubscriptionCreation) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n// Same format as {projectSubscriptionCreation}\r\nexport const apiRenewSubscription = async (serviceUrl, projectSubscriptionRenew) => {\r\n  const url = `${serviceUrl}/${resource}/renew`;\r\n\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: projectSubscriptionRenew ? JSON.stringify(projectSubscriptionRenew) : null,\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\nimport { DataTable, TableContainer, Table, TableHead, TableRow, TableHeader, TableBody, TableCell } from 'carbon-components-react';\nimport '../../index.scss';\nimport { apiGetCustomersProjects, apiGetMyCustomersProjects, apiDeleteProjectFromCustomer } from '../../api/customers';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { Link } from 'react-router-dom';\nimport i18n from '../../i18n';\nimport {authenticationChanged, getActiveSubscription, isAuthenticated, isPortalAdminOrSupport} from '../../api/helpers';\nimport {apiCurrentTicketingSystemGet} from \"../../api/ticketingsystem\";\nimport ProjectActionItems from '../Admin/ProjectActionItems';\nimport {formatEndDate, formatStartDate} from \"../../api/subscriptions\";\n\nclass CustomerDataTable extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      projects: {},\n      ticketingSystem: {},\n      action: 'Edit',\n      showMenu: {},\n    };\n    this.headerData = [\n      {\n        header: i18n.t('customerDashboard.projectName'),\n        key: 'projectName',\n      },\n      {\n        header: i18n.t('customerDashboard.partners'),\n        key: 'partners',\n      },\n      {\n        header: i18n.t('customerDashboard.entandoVersion'),\n        key: 'entandoVersion',\n      },\n      {\n        header: i18n.t('customerDashboard.status'),\n        key: 'status',\n      },\n      {\n        header: i18n.t('customerDashboard.startDate'),\n        key: 'startDate',\n      },\n      {\n        header: i18n.t('customerDashboard.endDate'),\n        key: 'endDate',\n      },\n      {\n        header: i18n.t('customerDashboard.openTickets'),\n        key: 'openTickets',\n      },\n      {\n        header: i18n.t('customerDetails.notes'),\n        key: 'notes',\n      },\n      {\n        header: i18n.t('customerDashboard.action'),\n        key: 'action',\n      },\n    ];\n  }\n\n  async fetchData() {\n    if (isAuthenticated(this.props)) {\n      try {\n        let projects;\n        //TOOD: refactor\n        if (isPortalAdminOrSupport()) {\n          projects = await apiGetCustomersProjects(this.props.serviceUrl, this.props.customerNumber);\n        } else {\n          projects = await apiGetMyCustomersProjects(this.props.serviceUrl, this.props.customerNumber);\n        }\n\n        const ticketingSystem = await apiCurrentTicketingSystemGet(this.props.serviceUrl);\n\n        this.setState({\n          projects: projects,\n          ticketingSystem: ticketingSystem,\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    this.render();\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.fetchData();\n    }\n  }\n\n  updateProjectList = () => {\n    this.fetchData();\n  };\n\n  showMenu = (e, id) => {\n    var showMenu = {};\n    showMenu[String(id)] = !this.state.showMenu[String(id)];\n    this.setState({\n      showMenu: showMenu,\n    });\n  };\n\n  closeMenu = () => {\n    this.setState({\n      showMenu: false\n    }, () => {\n      document.removeEventListener('click', this.closeMenu);\n    });\n  };\n\n  async deleteProject(id) {\n    if (isAuthenticated(this.props)) {\n      return await apiDeleteProjectFromCustomer(this.props.serviceUrl, this.props.customerNumber, id);\n    }\n  }\n\n  handleDeleteProject = (e, id) => {\n    e.preventDefault();\n    if (window.confirm('Are you sure you want to delete this project?')) {\n      this.deleteProject(id)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.deleted'),\n            submitColour: '#24a148',\n          });\n          this.props.updateCustomerList();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <DataTable rows={rowData} headers={this.headerData}>\n          {({ rows, headers, getHeaderProps, getTableProps }) => (\n            <TableContainer description={i18n.t('customerDashboard.tableDesc')}>\n              <Table {...getTableProps()}>\n                <TableHead>\n                  <TableRow key=\"headerRow\">\n                    {headers.map(header => {\n                      let result;\n                      if (header.header === i18n.t('customerDetails.notes')) {\n                        if (isPortalAdminOrSupport()) {\n                          result = <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>;\n                        }\n                      } else {\n                        result = <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>;\n                      }\n                      return result;\n                    })}\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {Object.keys(this.state.projects).length !== 0\n                    ? this.state.projects.data.map((project, index) => {\n                      const subscription = getActiveSubscription(project);\n                      if (!subscription) {\n                        return (\n                          <TableRow key={index}>\n                            <TableCell>{project.name}</TableCell>\n                            {project.partners.length !== 0 ? (\n                              <TableCell>\n                                {project.partners.map((partner, partnerIndex) => (\n                                  <div key={partnerIndex}>{partner.name}</div>\n                                ))}\n                              </TableCell>\n                            ) : (\n                                <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              )}\n                              <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              <TableCell>{project.tickets.length}</TableCell>\n                              {isPortalAdminOrSupport() ? <TableCell style={{ width: '250px' }}>{project.notes}</TableCell> : null}\n                              <TableCell>\n                                <ProjectActionItems\n                                  serviceUrl={this.props.serviceUrl}\n                                  ticketingSystem={this.state.ticketingSystem}\n                                  locale={this.props.locale}\n                                  project={project}\n                                  allProjects={this.state.projects.data}\n                                  handleDeleteProject={this.handleDeleteProject}\n                                  updateProjectList={this.updateProjectList}\n                                />\n                              </TableCell>\n                            </TableRow>\n                          );\n                        } else {\n                          return (\n                            <TableRow key={index}>\n                              <TableCell>\n                                <Link to={`/subscription-details/${subscription.id}`}>{project.name}</Link>\n                              </TableCell>\n                              {project.partners.length !== 0 ? (\n                                <TableCell>\n                                  {project.partners.map((partner, partnerIndex) => (\n                                    <div key={partnerIndex}>{partner.name}</div>\n                                  ))}\n                                </TableCell>\n                              ) : (\n                                <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              )}\n                              {subscription.entandoVersion ? (\n                                <TableCell>{subscription.entandoVersion.name}</TableCell>\n                              ) : (\n                                <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              )}\n                              <TableCell>{subscription.status}</TableCell>\n                              <TableCell>{formatStartDate(subscription.startDate)}</TableCell>\n                              <TableCell>{formatEndDate(subscription.startDate, subscription.lengthInMonths)}</TableCell>\n                              <TableCell>{project.tickets.length}</TableCell>\n                              {isPortalAdminOrSupport() ?\n                                <TableCell style={{width: '250px'}}>{project.notes}</TableCell> : null\n                              }\n                              <TableCell>\n                                <ProjectActionItems\n                                  serviceUrl={this.props.serviceUrl}\n                                  ticketingSystem={this.state.ticketingSystem}\n                                  locale={this.props.locale}\n                                  subscription={subscription}\n                                  project={project}\n                                  allProjects={this.state.projects.data}\n                                  handleDeleteProject={this.handleDeleteProject}\n                                  updateProjectList={this.updateProjectList}\n                                />\n                              </TableCell>\n                            </TableRow>\n                          );\n                        }\n                      })\n                    : null}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          )}\n        </DataTable>\n      </div>\n    );\n  }\n}\n\nconst rowData = [{id: 'a'}];\n\nexport default withKeycloak(CustomerDataTable);\n","import React from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Tile } from 'carbon-components-react';\r\nimport { apiCustomerGet } from '../../api/customers';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\n\r\nclass CustomerDetails extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      customer: {},\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.getCustomer(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomer(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  async getCustomer() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      const customer = await apiCustomerGet(this.props.serviceUrl, this.props.customerNumber);\r\n      this.setState({\r\n        customer: customer.data,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"customer-details\">\r\n        <Tile>\r\n          <p>\r\n            <strong>{i18n.t('customerDashboard.customerName')}</strong> {this.state.customer.name}\r\n          </p>\r\n          <p>\r\n            <strong>{i18n.t('customerDashboard.customerId')}</strong> {this.state.customer.id}\r\n          </p>\r\n        </Tile>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(CustomerDetails);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport {apiCustomerGet, apiCustomerPut} from '../../api/customers';\r\nimport {authenticationChanged, isAuthenticated} from \"../../api/helpers\";\r\n\r\nclass EditCustomerModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      name: '',\r\n      customerNumber: '',\r\n      contactName: '',\r\n      contactPhone: '',\r\n      contactEmail: '',\r\n      notes: '',\r\n      invalid: {},\r\n      modalId: '',\r\n      buttonId: '',\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //name\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    //customerNumber\r\n    if (this.state.customerNumber === '') {\r\n      formIsValid = false;\r\n      invalid['customerNumber'] = true;\r\n    }\r\n\r\n    //contactEmail\r\n    if (typeof this.state.contactEmail !== 'undefined') {\r\n      let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n      let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n      if (\r\n        !(\r\n          lastAtPos < lastDotPos &&\r\n          lastAtPos > 0 &&\r\n          this.state.contactEmail.indexOf('@@') === -1 &&\r\n          lastDotPos > 2 &&\r\n          this.state.contactEmail.length - lastDotPos > 2\r\n        )\r\n      ) {\r\n        formIsValid = false;\r\n        invalid['contactEmail'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async updateCustomer(customer) {\r\n    if (isAuthenticated(this.props)) {\r\n      return await apiCustomerPut(this.props.serviceUrl, customer);\r\n    }\r\n  }\r\n\r\n  getCustomerDetails = customerId => {\r\n    this.getCustomer(customerId);\r\n  };\r\n\r\n  async getCustomer(customerId) {\r\n    if (isAuthenticated(this.props)) {\r\n      const customer = (await apiCustomerGet(this.props.serviceUrl, customerId)).data;\r\n      this.setState({\r\n        name: customer.name,\r\n        customerNumber: customer.customerNumber,\r\n        contactName: customer.contactName,\r\n        contactPhone: customer.contactPhone,\r\n        contactEmail: customer.contactEmail,\r\n        notes: customer.notes,\r\n        modalId: 'modal-form-customer-edit-' + customer.id,\r\n        buttonId: 'edit-customer-button-' + customer.id,\r\n      });\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = () => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const customer = {\r\n        id: this.props.customer.id,\r\n        name: this.state.name,\r\n        customerNumber: this.state.customerNumber,\r\n        contactName: this.state.contactName,\r\n        contactPhone: this.state.contactPhone,\r\n        contactEmail: this.state.contactEmail,\r\n        notes: this.state.notes,\r\n      };\r\n      this.updateCustomer(customer)\r\n        .then(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.updated'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateCustomerList();\r\n          this.getCustomerDetails(this.props.customer.id);\r\n        })\r\n        .catch(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  clearValues = () => {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const customerModalElement = document.querySelector('#' + this.state.modalId);\r\n    if (!customerModalElement.className.includes('is-visible') && authenticated) {\r\n      this.setState({\r\n        name: this.props.customer.name,\r\n        customerNumber: this.props.customer.customerNumber,\r\n        contactName: this.props.customer.contactName,\r\n        contactPhone: this.props.customer.contactPhone,\r\n        contactEmail: this.props.customer.contactEmail,\r\n        notes: this.props.customer.notes,\r\n        invalid: {},\r\n      });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (isAuthenticated(this.props)) {\r\n      if (this.props.customerId) {\r\n        this.getCustomerDetails(this.props.customerId);\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (authenticationChanged(this.props, prevProps)) {\r\n      this.getCustomerDetails(this.props.customerId);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const modalConfirmation = (\r\n      <div className=\"bx--modal-header\">\r\n        <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\r\n      </div>\r\n    )\r\n    const modalId = this.state.modalId;\r\n    const buttonClassName = 'bx--btn bx--btn--ghost edit-customer-button-' + this.props.customerId;\r\n    return (modalId &&\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.edit')}\r\n        modalHeading={i18n.t('adminDashboard.editCustomer.title')}\r\n        buttonTriggerClassName={buttonClassName}\r\n        className=\"modal-form\"\r\n        id={modalId}\r\n        handleSubmit={this.handleFormSubmit}\r\n        primaryButtonText={i18n.t('modalText.save')}\r\n        secondaryButtonText={i18n.t('modalText.cancel')}\r\n      >\r\n        {modalConfirmation}\r\n        <div className=\"form-container\">\r\n          <Form onSubmit={this.handleFormSubmit} id={\"form-\" + modalId}>\r\n            <TextInput\r\n              id={\"name\" + modalId}\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.customerName') + ' *'}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <TextInput\r\n              id={\"customerNumber\"+modalId}\r\n              name=\"customerNumber\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.customerNumber') + ' *'}\r\n              value={this.state.customerNumber}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['customerNumber']}\r\n            />\r\n            <TextInput\r\n              id={\"contactName\"+modalId}\r\n              name=\"contactName\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.contactName')}\r\n              value={this.state.contactName}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              id={\"contactPhone\"+modalId}\r\n              name=\"contactPhone\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.contactPhone')}\r\n              value={this.state.contactPhone}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              id={\"contactEmail\"+modalId}\r\n              name=\"contactEmail\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.contactEmail') + ' *'}\r\n              value={this.state.contactEmail}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.email')}\r\n              invalid={this.state.invalid['contactEmail']}\r\n            />\r\n            <TextArea\r\n              name=\"notes\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.notes')}\r\n              value={this.state.notes}\r\n              onChange={this.handleChanges}\r\n            />\r\n          </Form>\r\n        </div>\r\n        {modalConfirmation}\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(EditCustomerModal);\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {AccordionItem, Button} from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport {\r\n  apiCustomerGet,\r\n  apiCustomerDelete,\r\n  apiGetCustomersProjects,\r\n  apiGetMyCustomersProjects\r\n} from '../../api/customers';\r\nimport CustomerDataTable from './CustomerDataTable';\r\nimport CustomerDetails from './CustomerDetails';\r\nimport {\r\n  isPortalAdminOrSupport,\r\n  isPortalAdmin,\r\n  isPortalCustomer,\r\n  isAuthenticated,\r\n  authenticationChanged\r\n} from '../../api/helpers';\r\nimport EditCustomerModal from '../Admin/EditCustomerModal';\r\nimport i18n from '../../i18n';\r\n\r\nclass CustomerAccordian extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      projects: {},\r\n      customer: {},\r\n      authenticated: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (isAuthenticated(this.props)) {\r\n      this.getCustomersProjects(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (authenticationChanged(this.props, prevProps)) {\r\n      this.getCustomersProjects(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  async getCustomersProjects(id) {\r\n    if (isAuthenticated(this.props)) {\r\n      const customer = await apiCustomerGet(this.props.serviceUrl, id);\r\n\r\n      var projects;\r\n      try {\r\n        if (isPortalAdminOrSupport()) {\r\n          projects = await apiGetCustomersProjects(this.props.serviceUrl, id);\r\n        } else {\r\n          projects = await apiGetMyCustomersProjects(this.props.serviceUrl, id);\r\n        }\r\n\r\n        this.setState({\r\n          projects: projects.data,\r\n          customer: customer.data,\r\n        });\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  async deleteCustomer() {\r\n    return await apiCustomerDelete(this.props.serviceUrl, this.state.customer.id);\r\n  }\r\n\r\n  handleDelete() {\r\n    if (window.confirm('Are you sure you want to delete this customer?')) {\r\n      this.deleteCustomer().then(() => {\r\n        this.props.updateCustomerList();\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div>\r\n          {isPortalCustomer() ? <CustomerDetails serviceUrl={this.props.serviceUrl} customerNumber={this.props.customerNumber} /> : null}\r\n          <AccordionItem title={this.props.title} open={this.props.accordionOpened}>\r\n            <div style={{ display: 'flex' }}>\r\n              {isPortalAdminOrSupport() ? (\r\n                <Link style={{ textDecoration: 'none' }} to={`/customer-details/${this.state.customer.id}`}>\r\n                  <Button kind=\"ghost\">{i18n.t('buttons.viewDetails')}</Button>\r\n                </Link>\r\n              ) : null}\r\n              {isPortalAdmin() ? (\r\n                <div style={{ display: 'flex' }}>\r\n                  <EditCustomerModal\r\n                    serviceUrl={this.props.serviceUrl}\r\n                    customer={this.state.customer}\r\n                    key={this.state.customer.id}\r\n                    updateCustomerList={this.props.updateCustomerList}\r\n                    customerId={this.state.customer.id}\r\n                  />\r\n                  <Button kind=\"ghost\" style={{ color: 'red' }} onClick={() => this.handleDelete()}>\r\n                    {i18n.t('buttons.delete')}\r\n                  </Button>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n            <CustomerDataTable\r\n              key={new Date().getTime()}\r\n              serviceUrl={this.props.serviceUrl}\r\n              customerNumber={this.props.customerNumber}\r\n              locale={this.props.locale}\r\n              updateCustomerList={this.props.updateCustomerList}\r\n            />\r\n          </AccordionItem>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(CustomerAccordian);\r\n","import React from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Accordion, PaginationNav, Search, Tile } from 'carbon-components-react';\r\nimport AddCustomerModal from './AddCustomerModal';\r\nimport AddPartnerModal from './AddPartnerModal';\r\nimport AddProjectModal from './AddProjectModal';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiAdminCustomersGet, apiMyCustomersGet } from '../../api/customers';\r\nimport CustomerAccordian from '../Customer/CustomerAccordian';\r\nimport {\r\n  authenticationChanged,\r\n  isPortalAdmin,\r\n  isPortalSupport,\r\n  isPortalPartner,\r\n  isPortalCustomer,\r\n  isPortalAdminOrSupport,\r\n  isPortalUser,\r\n  isAuthenticated\r\n} from '../../api/helpers';\r\n\r\nclass AdminDashboard extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      customers: {},\r\n      role: '',\r\n      filteredCustomers: {},\r\n      currentPage: 0,\r\n      test: '',\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getCustomers();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (authenticationChanged(this.props, prevProps)) {\r\n      this.getCustomers();\r\n    }\r\n  }\r\n\r\n  async getCustomers() {\r\n    if (isAuthenticated(this.props)) {\r\n      var customers;\r\n      if (isPortalAdminOrSupport()) {\r\n        customers = await apiAdminCustomersGet(this.props.serviceUrl);\r\n      } else {\r\n        customers = await apiMyCustomersGet(this.props.serviceUrl);\r\n      }\r\n\r\n      this.setState({\r\n        customers: customers.data,\r\n        filteredCustomers: customers.data,\r\n      });\r\n    }\r\n  }\r\n\r\n  handleSearch = event => {\r\n    if (event.key === 'Enter') {\r\n      const newFilteredState = this.state.customers.filter(customer =>\r\n        customer.name.toLowerCase().includes(event.target.value.toLowerCase())\r\n      );\r\n      this.setState({\r\n        filteredCustomers: newFilteredState,\r\n        currentPage: 0,\r\n      });\r\n    } else {\r\n      if (event.target.value === '' || event.target.value === undefined) {\r\n        this.setState({\r\n          filteredCustomers: this.state.customers,\r\n        });\r\n      }\r\n    }\r\n    this.forceUpdate();\r\n  };\r\n\r\n  updateCustomerList = () => {\r\n    this.getCustomers();\r\n  };\r\n\r\n  render() {\r\n    var numberOfPages = 1;\r\n    if (Object.keys(this.state.filteredCustomers).length !== 0) {\r\n      numberOfPages = Math.ceil(this.state.filteredCustomers.length / 5);\r\n    } else {\r\n      numberOfPages = 1;\r\n    }\r\n\r\n    const props = () => ({\r\n      loop: Boolean(false),\r\n      page: Number(this.state.currentPage),\r\n      totalItems: Number(numberOfPages),\r\n      itemsShown: Number(1),\r\n      onChange: event => this.setState({ currentPage: event }),\r\n    });\r\n\r\n    return (\r\n      <div className=\"admin-dashboard\">\r\n        {isPortalAdmin() ? (\r\n          <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\r\n        ) : isPortalSupport() ? (\r\n          <h3 className=\"pageTitle\">{i18n.t('adminDashboard.supportTitle')}</h3>\r\n        ) : isPortalCustomer() ? (\r\n          <h3 className=\"pageTitle\">{i18n.t('adminDashboard.customerTitle')}</h3>\r\n        ) : isPortalPartner() ? (\r\n          <h3 className=\"pageTitle\">{i18n.t('adminDashboard.partnerTitle')}</h3>\r\n        ) : null}\r\n        {isPortalAdmin() || isPortalSupport() || isPortalPartner() ? (\r\n          <Tile>\r\n            <p className=\"title\">{i18n.t('adminDashboard.allCustomers')}</p>\r\n            <div className=\"bx--row\">\r\n              <div className=\"bx--col\">\r\n                <Search\r\n                  onChange={this.handleSearch}\r\n                  id=\"search\"\r\n                  placeholder={i18n.t('adminDashboard.searchText')}\r\n                  labelText={i18n.t('adminDashboard.searchLabel')}\r\n                  onKeyPress={this.handleSearch}\r\n                />\r\n              </div>\r\n              {isPortalAdmin() ? (\r\n                <div className=\"bx--col\">\r\n                  <div>\r\n                    <AddPartnerModal\r\n                      serviceUrl={this.props.serviceUrl}\r\n                      updateCustomerList={this.updateCustomerList}\r\n                    />\r\n                    <AddCustomerModal serviceUrl={this.props.serviceUrl} updateCustomerList={this.updateCustomerList} />\r\n                    <AddProjectModal\r\n                      serviceUrl={this.props.serviceUrl}\r\n                      updateCustomerList={this.updateCustomerList}\r\n                      allCustomers={this.state.customers}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </Tile>\r\n        ) : null}\r\n\r\n        <div className=\"form-container\">\r\n          <Accordion>\r\n            {Object.keys(this.state.customers).length !== 0\r\n              ? this.state.filteredCustomers.map((customer, index) => {\r\n                  // Pagination for Admin and Support roles (5 items per page)\r\n                  var indexOfLastItem = (this.state.currentPage + 1) * 5 - 1;\r\n                  var firstIndexOfCurrentPage = this.state.currentPage * 5;\r\n                  var accordionOpened = this.state.customers.length === 1;\r\n\r\n                  if (isPortalUser()) {\r\n                    if (index >= firstIndexOfCurrentPage && index <= indexOfLastItem) {\r\n                      return (\r\n                        <CustomerAccordian\r\n                          key={customer.id}\r\n                          serviceUrl={this.props.serviceUrl}\r\n                          customerNumber={customer.id}\r\n                          title={customer.name}\r\n                          updateCustomerList={this.updateCustomerList}\r\n                          locale={this.props.locale}\r\n                          accordionOpened={accordionOpened}\r\n                        />\r\n                      );\r\n                    } else {\r\n                      return null;\r\n                    }\r\n                  } else {\r\n                    return null;\r\n                  }\r\n                })\r\n              : null}\r\n          </Accordion>\r\n          <PaginationNav {...props()} className=\"pagination-right\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AdminDashboard);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AdminDashboard from '../components/Admin/AdminDashboard';\r\nimport '../index.scss';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport {KEYCLOAK_EVENT_TYPE} from '../custom-elements/widgetEventTypes';\r\nimport * as Locale from \"../i18n\";\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AdminDashboardElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AdminDashboard serviceUrl={serviceUrl} locale={locale}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-dashboard-widget', AdminDashboardElement);\r\n","import React, { Component } from 'react';\r\nimport {Select, SelectItem} from 'carbon-components-react';\r\nimport CustomerDetails from '../Customer/CustomerDetails';\r\nimport AdminDashboard from './AdminDashboard';\r\nimport '../../index.scss';\r\nimport CustomerDataTable from \"../Customer/CustomerDataTable\";\r\n\r\nexport default class RoleCheck extends Component {\r\n  state = {\r\n    roleType: 'customer',\r\n  };\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  render() {\r\n    const roleType = ['Admin', 'Customer'];\r\n    return (\r\n      <div className=\"role-check\">\r\n        <Select\r\n          defaultValue=\"role-type\"\r\n          id=\"roleType\"\r\n          name=\"roleType\"\r\n          labelText=\"Select Role(Testing)\"\r\n          value={this.state.roleType}\r\n          onChange={this.handleChanges}\r\n        >\r\n          <SelectItem text=\"Select Role\" value=\"role-type\" />\r\n          {roleType.map((roleType, i) => (\r\n            <SelectItem key={i} text={roleType} value={roleType.toLowerCase()}>\r\n              {roleType}\r\n            </SelectItem>\r\n          ))}\r\n        </Select>\r\n        {this.renderForm()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Render Dashboard based on role\r\n  renderForm() {\r\n    if (this.state.roleType === 'customer')\r\n      return (\r\n        <div>\r\n          <h3 className=\"pageTitle\">Welcome to Entando Customer Portal</h3>\r\n          <CustomerDetails />\r\n          <CustomerDataTable />\r\n        </div>\r\n      );\r\n    if (this.state.roleType === 'admin')\r\n      return (\r\n        <div>\r\n          <h3 className=\"pageTitle\">Welcome to Entando Admin View</h3>\r\n          <AdminDashboard />\r\n        </div>\r\n      );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport RoleCheck from '../components/Admin/RoleCheck';\r\nimport '../index.scss';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AdminRoleCheckElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <RoleCheck serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-rolecheck-widget', AdminRoleCheckElement);\r\n\r\n//export default AdminRoleCheckElement;\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\n\nconst resource = 'api/tickets';\n\nexport const apiTicketDelete = async (serviceUrl, id) => {\n  const url = `${serviceUrl}/${resource}/${id}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiTicketsGet = async serviceUrl => {\n  const url = getUrl(`${serviceUrl}/${resource}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiTicketPost = async (serviceUrl, ticket) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: ticket ? JSON.stringify(ticket) : null,\n  };\n  return request(url, options);\n};\n\nconst jiraResource = 'api/tickets/ticketingsystem';\n\nexport const apiJiraTicketsGet = async (serviceUrl, projectId) => {\n  const url = `${serviceUrl}/${jiraResource}/${projectId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiJiraTicketPost = async (serviceUrl, projectId, ticket) => {\n  const url = `${serviceUrl}/${jiraResource}/${projectId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: ticket ? JSON.stringify(ticket) : null,\n  };\n  return request(url, options);\n};\n","import React, { Component } from 'react';\r\nimport {\r\n  DataTable,\r\n  TableContainer,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableHeader,\r\n  TableBody,\r\n  TableCell,\r\n  PaginationNav, Button,\r\n} from 'carbon-components-react';\r\nimport {apiJiraTicketsGet} from '../../api/tickets';\r\nimport {apiCurrentTicketingSystemGet} from '../../api/ticketingsystem';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport {apiProjectGet} from '../../api/projects';\r\nimport {authenticationChanged, isAuthenticated, isPortalUser} from '../../api/helpers';\r\nimport i18n from '../../i18n';\r\n\r\nclass TicketList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tickets: {},\r\n      project: {},\r\n      ticketingSystem: {},\r\n      currentPage: 0,\r\n    };\r\n    this.headerData = [\r\n      {\r\n        header: i18n.t('ticketDetails.issue'),\r\n        key: 'issue',\r\n      },\r\n      {\r\n        header: i18n.t('ticketDetails.summary'),\r\n        key: 'summary',\r\n      },\r\n      {\r\n        header: i18n.t('ticketDetails.status'),\r\n        key: 'status',\r\n      },\r\n      {\r\n        header: i18n.t('ticketDetails.type'),\r\n        key: 'type',\r\n      },\r\n      {\r\n        header: i18n.t('ticketDetails.priority'),\r\n        key: 'priority',\r\n      },\r\n      {\r\n        header: i18n.t('ticketDetails.created'),\r\n        key: 'created',\r\n      },\r\n      {\r\n        header: i18n.t('ticketDetails.updated'),\r\n        key: 'updated',\r\n      },\r\n      {\r\n        header: i18n.t('ticketDetails.link'),\r\n        key: 'link',\r\n      },\r\n    ];\r\n  }\r\n\r\n  async fetchData() {\r\n    if (isPortalUser()) {\r\n      try {\r\n        const project = (await apiProjectGet(this.props.serviceUrl, this.props.projectId)).data;\r\n        const ticketingSystem = await apiCurrentTicketingSystemGet(this.props.serviceUrl);\r\n        const tickets = await apiJiraTicketsGet(this.props.serviceUrl, project.id);\r\n        this.setState({\r\n          tickets: tickets,\r\n          project: project,\r\n          ticketingSystem: ticketingSystem,\r\n        });\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (isAuthenticated(this.props)) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (authenticationChanged(this.props, prevProps)) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var numberOfPages = 1;\r\n    if (Object.keys(this.state.tickets).length !== 0) {\r\n      numberOfPages = Math.ceil(this.state.tickets.data.length / 10);\r\n    }\r\n\r\n    const paginationProps = () => ({\r\n      loop: Boolean(false),\r\n      page: Number(this.state.currentPage),\r\n      totalItems: Number(numberOfPages),\r\n      itemsShown: Number(1),\r\n      onChange: event => this.setState({currentPage: event}),\r\n    });\r\n    const ticketSystemUrl = this.state.ticketingSystem.url;\r\n    const ticketingSystemBaseUrl = (ticketSystemUrl != null) ?\r\n      ticketSystemUrl.substr(0, ticketSystemUrl.indexOf('/rest'))\r\n      : null;\r\n\r\n    return (\r\n      <div>\r\n        {this.state.project.id && (\r\n          <div>\r\n            {/*View All Ticket*/}\r\n            <a\r\n              href={ticketingSystemBaseUrl + '/issues/' +\r\n              '?jql=Organizations=' +\r\n              this.state.project.systemId\r\n              }\r\n              style={{textDecoration: 'none'}}\r\n              target=\"_blank\" rel=\"noreferrer\"\r\n            >\r\n              <Button kind=\"ghost\" style={{display: 'block', width: '100%'}} value=\"Open Ticket\">\r\n                {i18n.t('buttons.viewAllTickets')}\r\n              </Button>\r\n            </a>\r\n            {/*Open Ticket*/}\r\n            <a\r\n              href={`/entando-de-app/${this.props.locale}/open_service_ticket.page?project=${this.state.project.id}`}\r\n              style={{textDecoration: 'none'}}\r\n            >\r\n              <Button kind=\"ghost\" style={{display: 'block', width: '100%'}} value=\"Open Ticket\">\r\n                {i18n.t('buttons.openTicket')}\r\n              </Button>\r\n            </a>\r\n          </div>\r\n        )}\r\n        <DataTable rows={[{id: '1'}]} headers={this.headerData}>\r\n          {({rows, headers, getHeaderProps, getTableProps}) => (\r\n            <TableContainer\r\n              title={i18n.t('ticketDetails.listOfTickets')}\r\n            >\r\n              <Table {...getTableProps()}>\r\n                <TableHead>\r\n                  <TableRow>\r\n                    {headers.map(header => (\r\n                      <TableHeader {...getHeaderProps({header})}>{header.header}</TableHeader>\r\n                    ))}\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {Object.keys(this.state.tickets).length !== 0 ? (\r\n                    this.state.tickets.data.map((ticket, index) => {\r\n                      const indexOfLastItem = (this.state.currentPage + 1) * 10 - 1;\r\n                      const firstIndexOfCurrentPage = this.state.currentPage * 10;\r\n                      const ticketUrl = ticketingSystemBaseUrl +\r\n                        '/browse/' + ticket.systemId;\r\n\r\n                      if (index >= firstIndexOfCurrentPage && index <= indexOfLastItem) {\r\n                        return (\r\n                          <TableRow key={ticket.id}>\r\n                            <TableCell>\r\n                              <a href={ticketUrl} target=\"_blank\" rel=\"noreferrer\">\r\n                                {ticket.systemId}\r\n                              </a>\r\n                            </TableCell>\r\n                            <TableCell>{ticket.summary}</TableCell>\r\n                            <TableCell>{ticket.status}</TableCell>\r\n                            <TableCell>{ticket.type}</TableCell>\r\n                            <TableCell>{ticket.priority}</TableCell>\r\n                            <TableCell>{new Date(ticket.createDate).toDateString()}</TableCell>\r\n                            <TableCell>{new Date(ticket.updateDate).toDateString()}</TableCell>\r\n                            <TableCell>\r\n                              <a href={ticketUrl} target=\"_blank\" rel=\"noreferrer\">\r\n                                {i18n.t('ticketDetails.viewTicket')}\r\n                              </a>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        );\r\n                      } else {\r\n                        return null;\r\n                      }\r\n                    })\r\n                  ) : (\r\n                    <TableRow/>\r\n                  )}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          )}\r\n        </DataTable>\r\n        <PaginationNav {...paginationProps()} className=\"pagination-right\"/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(TicketList);\r\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport { ModalWrapper, Form, TextInput, TextArea, Select, SelectItem, DatePicker, DatePickerInput } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiProjectSubscriptionPut, apiSubscriptionGet } from '../../api/subscriptions';\nimport moment from 'moment';\n\nclass EditSubscriptionModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      level: '',\n      status: '',\n      lengthInMonths: '',\n      startDate: '',\n      notes: '',\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    if (this.state.level === 'level') {\n      formIsValid = false;\n      invalid['level'] = true;\n    }\n\n    if (this.state.status === 'status') {\n      formIsValid = false;\n      invalid['status'] = true;\n    }\n\n    if (this.state.lengthInMonths === '' || !this.isNumeric(String(this.state.lengthInMonths))) {\n      formIsValid = false;\n      invalid['lengthInMonths'] = true;\n    }\n\n    if (typeof this.state.startDate !== 'undefined') {\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n        formIsValid = false;\n        invalid['startDate'] = true;\n      }\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  isNumeric(str) {\n    if (typeof str != 'string') return false;\n    return !isNaN(str) && !isNaN(parseFloat(str));\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  handleFormSubmit = e => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const subscriptionRequest = {\n        projectSubscription: {\n          id: this.props.subscription.id,\n          level: this.state.level,\n          status: this.state.status,\n          lengthInMonths: this.state.lengthInMonths,\n          startDate: moment(this.state.startDate).format(),\n          notes: this.state.notes,\n          project: this.props.project,\n          entandoVersion: this.props.subscription.entandoVersion,\n        },\n      };\n      this.subscriptionPut(subscriptionRequest)\n        .then(result => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.updated'),\n            submitColour: '#24a148',\n          });\n          this.props.updateSubscription();\n        })\n        .catch(err => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      this.getSubscriptionDetails();\n    }\n  }\n\n  handleStartDateChange = date => {\n    this.setState({\n      startDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\n    });\n  };\n\n  async getSubscriptionDetails() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      const subscription = await apiSubscriptionGet(this.props.serviceUrl, this.props.subscription.id);\n      this.setState({\n        level: subscription.data.level,\n        status: subscription.data.status,\n        lengthInMonths: subscription.data.lengthInMonths,\n        startDate: moment(subscription.data.startDate).format('MM/DD/YYYY'),\n        notes: subscription.data.notes ? subscription.data.notes : '',\n        submitMsg: '',\n      });\n    }\n  }\n\n  async subscriptionPut(subscription) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      return await apiProjectSubscriptionPut(this.props.serviceUrl, subscription);\n    }\n  }\n  render() {\n    const levelList = ['GOLD', 'PLATINUM'];\n    const statusList = ['REQUESTED', 'PENDING', 'ACTIVE', 'EXPIRED'];\n    const modalId = \"modal-form-sub-edit\"\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n      </div>\n    )\n    return (\n      <ModalWrapper\n        buttonTriggerText={i18n.t('buttons.edit')}\n        modalHeading={i18n.t('editSubscription.title')}\n        buttonTriggerClassName=\"add-project bx--btn bx--btn--tertiary edit-sub-button\"\n        className=\"modal-form\"\n        id= {modalId}\n        handleSubmit={this.handleFormSubmit}\n        primaryButtonText={i18n.t('modalText.save')}\n        secondaryButtonText={i18n.t('modalText.cancel')}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit}>\n            <Select\n              id={\"level\"+modalId}\n              name=\"level\"\n              labelText={i18n.t('subscriptionDetails.level') + ' *'}\n              value={this.state.level}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['level']}\n            >\n              <SelectItem disabled text=\"Select Level\" value=\"level\" />\n              {levelList.map((level, i) => (\n                <SelectItem key={i} text={level} value={level}>\n                  {level}\n                </SelectItem>\n              ))}\n            </Select>\n            <Select\n              id={\"status\"+modalId}\n              name=\"status\"\n              labelText={i18n.t('subscriptionDetails.status') + ' *'}\n              value={this.state.status}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['status']}\n            >\n              <SelectItem disabled text=\"Select Status\" value=\"status\" />\n              {statusList.map((status, i) => (\n                <SelectItem key={i} text={status} value={status}>\n                  {status}\n                </SelectItem>\n              ))}\n            </Select>\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange} value={this.state.startDate}>\n              <DatePickerInput\n                id={\"startDate\"+modalId}\n                name=\"startDate\"\n                placeholder=\"mm/dd/yyyy\"\n                labelText={i18n.t('subscriptionDetails.startDate') + ' *'}\n                //onChange={this.handleChanges}\n                type=\"text\"\n                invalidText={i18n.t('validation.invalid.date')}\n                invalid={this.state.invalid['startDate']}\n              />\n            </DatePicker>\n            <TextInput\n              id={\"lengthInMonths\"+modalId}\n              name=\"lengthInMonths\"\n              labelText={i18n.t('subscriptionDetails.lengthInMonths') + ' *'}\n              value={this.state.lengthInMonths}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.number')}\n              invalid={this.state.invalid['lengthInMonths']}\n            />\n            <TextArea\n              id={\"notes\"+modalId}\n              name=\"notes\"\n              labelText={i18n.t('adminDashboard.addProject.notes')}\n              value={this.state.notes}\n              onChange={this.handleChanges}\n            />\n          </Form>\n        </div>\n        {modalConfirmation}\n      </ModalWrapper>\n    );\n  }\n}\n\nexport default withKeycloak(EditSubscriptionModal);\n","import React from 'react';\r\nimport TicketList from './TicketList';\r\nimport {Tile} from 'carbon-components-react';\r\nimport {apiSubscriptionGet, formatStartDate, formatEndDate} from '../../api/subscriptions';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport {apiGetProjectUsers, apiProjectGet} from '../../api/projects';\r\nimport {\r\n  isPortalAdminOrSupport,\r\n  isPortalUser,\r\n  isPortalAdmin,\r\n  authenticationChanged,\r\n} from '../../api/helpers';\r\nimport EditSubscriptionModal from '../Admin/EditSubscriptionModal';\r\nimport i18n from '../../i18n';\r\n\r\nconst subscriptionData = {\r\n  type: 'Product Support Subscription Entando Platform',\r\n  license: 'Free Commercial Open Source',\r\n};\r\n\r\nclass Subscription extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      subscription: {},\r\n      users: {},\r\n      project: {},\r\n      customer: {},\r\n    };\r\n  }\r\n\r\n  async fetchData() {\r\n    if (isPortalUser()) {\r\n      try {\r\n        let users = {};\r\n        let project = {};\r\n        const subscription = await apiSubscriptionGet(this.props.serviceUrl, this.props.match.params.id);\r\n        if (subscription.data.project) {\r\n          project = await apiProjectGet(this.props.serviceUrl, subscription.data.project.id);\r\n          users = await apiGetProjectUsers(this.props.serviceUrl, project.data.id);\r\n        }\r\n        this.setState({\r\n          subscription: subscription,\r\n          project: project,\r\n          customer: project.customer,\r\n          users: users,\r\n          loading: false,\r\n        });\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  }\r\n\r\n  updateSubscription = () => {\r\n    this.fetchData();\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (isPortalUser()) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (authenticationChanged(this.props, prevProps) && isPortalUser()) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { type, license } = subscriptionData;\r\n\r\n    if (!this.state.loading) {\r\n      if (isPortalUser()) {\r\n        if (Object.keys(this.state.subscription).length !== 0 && Object.keys(this.state.project).length !== 0) {\r\n          return (\r\n            <div className=\"subscription-details\">\r\n              <div>\r\n                <Tile>\r\n                  <div className=\"bx--grid\">\r\n                    <div className=\"bx--row\">\r\n                      <div className=\"bx--col\">\r\n                        <div>\r\n                          <strong>{i18n.t('customerDashboard.customerName')}:</strong> {this.state.project.data.customer.name}\r\n                        </div>\r\n                        <div>\r\n                          <strong>{i18n.t('customerDashboard.projectName')}:</strong> {this.state.project.data.name}\r\n                        </div>\r\n                        <div>\r\n                          <strong>{i18n.t('subscriptionDetails.description')}:</strong> {this.state.subscription.data.project.description}\r\n                        </div>\r\n                        <div>\r\n                          <strong>{i18n.t('subscriptionDetails.partners')}:</strong>\r\n                          {this.state.project.data !== '' && Object.keys(this.state.project.data.partners).length !== 0 ? (\r\n                            <>\r\n                              {this.state.project.data.partners.map((partner, index) => (\r\n                                <div\r\n                                  key={index}> {index === this.state.project.data.partners.length - 1 ? partner.name : partner.name + ', '} </div>\r\n                              ))}\r\n                            </>\r\n                          ) : (\r\n                            <> {i18n.t('userMessages.none')} </>\r\n                          )}\r\n                        </div>\r\n                        <div>\r\n                          <strong>{i18n.t('subscriptionDetails.type')}:</strong> {type}\r\n                        </div>\r\n                        {isPortalAdminOrSupport() ? (\r\n                          <div>\r\n                            <strong>{i18n.t('subscriptionDetails.notes')}:</strong> {this.state.subscription.data.notes}\r\n                          </div>\r\n                        ) : null}\r\n                      </div>\r\n                      <div className=\"bx--col\">\r\n                        <div>\r\n                          <strong>{i18n.t('subscriptionDetails.status')}:</strong> {this.state.subscription.data.status}\r\n                        </div>\r\n                        <div>\r\n                          <strong>{i18n.t('subscriptionDetails.level')}:</strong> {this.state.subscription.data.level}\r\n                        </div>\r\n                        <div>\r\n                          <strong>{i18n.t('subscriptionDetails.startDate')}:</strong>{' '}\r\n                          {formatStartDate(this.state.subscription.data.startDate)}\r\n                        </div>\r\n                        <div>\r\n                          <strong>{i18n.t('subscriptionDetails.endDate')}:</strong>{' '}\r\n                          {formatEndDate(this.state.subscription.data.startDate, this.state.subscription.data.lengthInMonths)}\r\n                        </div>\r\n                        <div>\r\n                          <strong>{i18n.t('subscriptionDetails.license')}:</strong> {license}\r\n                        </div>\r\n                        <div>\r\n                          <strong>{i18n.t('subscriptionDetails.assignedUsers')}:</strong>\r\n                          {this.state.project.data !== '' && Object.keys(this.state.users.data).length !== 0 ? (\r\n                            <>\r\n                              {this.state.users.data.map((user, index) => (\r\n                                <div\r\n                                  key={index}> {index === this.state.users.data.length - 1 ? user.username : user.username + ', '} </div>\r\n                              ))}\r\n                            </>\r\n                          ) : (\r\n                            <> {i18n.t('userMessages.none')} </>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  {isPortalAdmin() ? (\r\n                    <EditSubscriptionModal\r\n                      project={this.state.project.data}\r\n                      subscription={this.state.subscription.data}\r\n                      serviceUrl={this.props.serviceUrl}\r\n                      updateSubscription={this.updateSubscription}\r\n                    />\r\n                  ) : null}\r\n                </Tile>\r\n                <br/>\r\n                <TicketList projectId={this.state.project.data.id}\r\n                            serviceUrl={this.props.serviceUrl}\r\n                            locale={this.props.locale}/>\r\n              </div>\r\n            </div>\r\n          );\r\n        } else {\r\n          return <div>{i18n.t('userMessages.unauthorized')}</div>;\r\n        }\r\n      } else {\r\n        return <div>{i18n.t('userMessages.unauthorized')}</div>;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withKeycloak(Subscription);\r\n","import React from 'react';\r\nimport { Tile } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport {apiAdminCustomerGet, apiGetCustomersProjects} from '../../api/customers';\r\nimport {authenticationChanged, isAuthenticated, isPortalAdminOrSupport} from '../../api/helpers';\r\nimport i18n from '../../i18n';\r\nimport CustomerDataTable from \"./CustomerDataTable\";\r\n\r\nclass CustomerProjectList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      projects: {},\r\n      customer: {},\r\n    };\r\n  }\r\n\r\n  async getCustomer() {\r\n    if (isAuthenticated(this.props)) {\r\n      try {\r\n        const customer = await apiAdminCustomerGet(this.props.serviceUrl, this.props.match.params.id);\r\n        const projects = await apiGetCustomersProjects(this.props.serviceUrl, customer.data.id);\r\n        this.setState({\r\n          customer: customer.data,\r\n          projects: projects.data,\r\n          loading: false,\r\n        });\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  }\r\n\r\n  updateCustomer = () => {\r\n    this.getCustomer();\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (isPortalAdminOrSupport()) {\r\n      this.getCustomer();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (authenticationChanged(this.props, prevProps)) {\r\n      if (isPortalAdminOrSupport()) {\r\n        this.getCustomer();\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.loading) {\r\n      if (isPortalAdminOrSupport()) {\r\n        if (Object.keys(this.state.customer).length !== 0) {\r\n          return (\r\n            <div>\r\n              <Tile>\r\n                <div className=\"bx--grid\">\r\n                  <div className=\"bx--row\">\r\n                    <div className=\"bx--col\">\r\n                      <p>\r\n                        <strong>{i18n.t('customerDetails.id')}: </strong> {this.state.customer.id}\r\n                      </p>\r\n                      <p>\r\n                        <strong>{i18n.t('customerDetails.name')}: </strong> {this.state.customer.name}\r\n                      </p>\r\n                      <p>\r\n                        <strong>{i18n.t('customerDetails.notes')}: </strong> {this.state.customer.notes}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"bx--col\">\r\n                      <p>\r\n                        <strong>{i18n.t('customerDetails.contactName')}: </strong> {this.state.customer.contactName}\r\n                      </p>\r\n                      <p>\r\n                        <strong>{i18n.t('customerDetails.contactPhone')}: </strong> {this.state.customer.contactPhone}\r\n                      </p>\r\n                      <p>\r\n                        <strong>{i18n.t('customerDetails.contactEmail')}: </strong> {this.state.customer.contactEmail}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Tile>\r\n              <CustomerDataTable serviceUrl={this.props.serviceUrl} customerNumber={this.state.customer.id} locale={this.props.locale} />\r\n            </div>\r\n          );\r\n        } else {\r\n          return <p>{i18n.t('userMessages.loading')}...</p>;\r\n        }\r\n      } else {\r\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withKeycloak(CustomerProjectList);\r\n","import React, { Component } from 'react';\r\nimport { HashRouter, Route, Switch } from 'react-router-dom';\r\nimport AdminDashboard from './Admin/AdminDashboard';\r\nimport Subscription from './SubscriptionDetails/Subscription';\r\nimport withKeycloak from '../auth/withKeycloak';\r\nimport {AuthenticatedView, UnauthenticatedView} from '../auth/KeycloakViews';\r\nimport {authenticationChanged, isAuthenticated, isPortalUser} from '../api/helpers';\r\nimport CustomerProjectList from './Customer/CustomerProjectList';\r\nimport i18n from '../i18n';\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (isAuthenticated(this.props)) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (authenticationChanged(this.props, prevProps)) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var { keycloak } = this.props;\r\n\r\n    if (!this.state.loading) {\r\n      if (isPortalUser()) {\r\n        return (\r\n          <div id=\"entando-customer-portal\">\r\n            <AuthenticatedView keycloak={keycloak}>\r\n              <HashRouter>\r\n                <Switch>\r\n                  <Route\r\n                    path={'**/customer-details/:id'}\r\n                    render={props => <CustomerProjectList {...props} serviceUrl={this.props.serviceUrl} locale={this.props.locale} />}\r\n                  />\r\n                  <Route\r\n                    path={'**/subscription-details/:id'}\r\n                    render={props => <Subscription {...props} serviceUrl={this.props.serviceUrl} locale={this.props.locale} />}\r\n                  />\r\n                  <Route\r\n                    path=\"**/\"\r\n                    render={props => <AdminDashboard {...props} serviceUrl={this.props.serviceUrl} locale={this.props.locale} />}\r\n                  />\r\n                </Switch>\r\n              </HashRouter>\r\n            </AuthenticatedView>\r\n            <UnauthenticatedView keycloak={keycloak}>\r\n              <p>{i18n.t('userMessages.unauthorized')}</p>\r\n            </UnauthenticatedView>\r\n          </div>\r\n        );\r\n      } else {\r\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withKeycloak(App);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport '../index.scss';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport App from '../components/App';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AppElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <App serviceUrl={serviceUrl} locale={locale} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('app-element', AppElement);\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/portal-users';\r\n\r\nexport const apiUserDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUsersPut = async (serviceUrl, user) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: user ? JSON.stringify(user) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUsersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserGet = async (serviceUrl, userId) => {\r\n  const url = getUrl(`${serviceUrl}/${resource}/${userId}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserPost = async (serviceUrl, user) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: user ? JSON.stringify(user) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserGetByUsername = async (serviceUrl, username) => {\r\n  const url = getUrl(`${serviceUrl}/${resource}/username/${username}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};\r\n","import { getDefaultKeycloakOptions, request, getUrl } from './helpers';\r\n\r\nexport const apiKeycloakUserGet = async (serviceUrl, realm) => {\r\n  const usersResource = `admin/realms/${realm}/users`;\r\n  const url = `${serviceUrl}/${usersResource}`;\r\n  const options = {\r\n    ...getDefaultKeycloakOptions(),\r\n    method: 'GET',\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiKeycloakToken = async (serviceUrl, realm) => {\r\n  const tokenResource = `realms/${realm}/protocol/openid-connect/token`;\r\n  const url = getUrl(`${serviceUrl}/${tokenResource}`);\r\n  const keycloakBody = {\r\n    client_id: 'web_app',\r\n    username: 'admin',\r\n    password: 'admin',\r\n    grant_type: 'password',\r\n  };\r\n  const options = {\r\n    ...getDefaultKeycloakOptions(),\r\n    method: 'POST',\r\n    body: keycloakBody ? serialize(keycloakBody) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nfunction serialize(obj) {\r\n  var str = [];\r\n  for (var p in obj)\r\n    if (obj.hasOwnProperty(p)) {\r\n      str.push(encodeURIComponent(p) + '=' + encodeURIComponent(obj[p]));\r\n    }\r\n  return str.join('&');\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Form, Select, SelectItem, Button } from 'carbon-components-react';\r\nimport * as portalUserApi from '../../../api/portalusers';\r\nimport {apiAddUserToProject, apiProjectGet} from '../../../api/projects';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\nimport { apiKeycloakUserGet } from '../../../api/keycloak';\r\nimport i18n from '../../../i18n';\r\nclass AssignUser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      project: null,\r\n      projectId: '',\r\n      assignUser: '',\r\n      users: new Map(),\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      this.fetchData(keycloak.authServerUrl);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.fetchData(keycloak.authServerUrl);\r\n    }\r\n  }\r\n\r\n  async fetchData(keycloakUrl) {\r\n    const {keycloak} = this.props;\r\n    const users = this.mapKeycloakUserEmails((await apiKeycloakUserGet(keycloakUrl, keycloak.realm)).data);\r\n    const search = window.location.search;\r\n    const params = new URLSearchParams(search);\r\n    let projectId = params.get('project');\r\n    let project = null;\r\n    if (projectId != null) {\r\n      project = (await apiProjectGet(this.props.serviceUrl, projectId)).data;\r\n    } else {\r\n      projectId = '';\r\n    }\r\n\r\n    this.setState({\r\n      projectId: projectId,\r\n      project: project,\r\n      users: users\r\n    });\r\n  }\r\n\r\n  mapKeycloakUserEmails = keycloakUsers => {\r\n    const usernameEmailMap = new Map();\r\n    keycloakUsers.forEach(keycloakUser => usernameEmailMap.set(keycloakUser.username, keycloakUser.email));\r\n    return usernameEmailMap;\r\n  };\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleFormSubmit = event => {\r\n    event.preventDefault();\r\n    const { projectId, assignUser } = this.state;\r\n    const formIsValid = this.handleFormValidation();\r\n\r\n    if (formIsValid) {\r\n      this.assignUserToProject(projectId, assignUser).then(res => {\r\n        if (res.status === 201) {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.updated'),\r\n            submitColour: '#24a148',\r\n          });\r\n          window.dispatchEvent(new CustomEvent(\"cp-user-assigned\"));\r\n        } else {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  handleFormValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n    const { projectId, assignUser } = this.state;\r\n\r\n    //name\r\n    if (projectId === '') {\r\n      formIsValid = false;\r\n      invalid['projectId'] = true;\r\n    }\r\n\r\n    //customerNumber\r\n    if (assignUser === '') {\r\n      formIsValid = false;\r\n      invalid['assignUser'] = true;\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  assignUserToProject = async (projectId, username) => {\r\n    const portalUserId = await this.getPortalUserId({ username, email: this.state.users.get(username) });\r\n    return await apiAddUserToProject(this.props.serviceUrl, projectId, portalUserId);\r\n  };\r\n\r\n  getPortalUserId = async keycloakUser => {\r\n    let portalUserId = null;\r\n    try {\r\n      const portalUser = await portalUserApi.apiUserGetByUsername(this.props.serviceUrl, keycloakUser.username);\r\n      portalUserId = portalUser.data.id;\r\n    } catch (e) {\r\n      if (e.message.toLowerCase().includes('not found')) {\r\n        const portalUser = await this.createPortalUser(keycloakUser);\r\n        portalUserId = portalUser.data.id;\r\n      }\r\n    }\r\n\r\n    return portalUserId;\r\n  };\r\n\r\n  createPortalUser = async keycloakUser => {\r\n    return await portalUserApi.apiUserPost(this.props.serviceUrl, { username: keycloakUser.username, email: keycloakUser.email });\r\n  };\r\n\r\n  setupFormComponents() {\r\n    const users = this.state.users;\r\n    const project = this.state.project;\r\n    let userList = null;\r\n    let projectList = null;\r\n\r\n    if (users.size > 0) {\r\n      userList = [...users.keys()].map((assignUser, i) => (\r\n        <SelectItem key={i} text={assignUser} value={assignUser}>\r\n          {assignUser}\r\n        </SelectItem>\r\n      ));\r\n      userList.unshift(<SelectItem key=\"-1\" text={i18n.t('manageUsers.assign.userList')} value=\"\"/>);\r\n    } else {\r\n      userList = <SelectItem text={i18n.t('manageUsers.assign.noUsers')} value=\"\"/>;\r\n    }\r\n\r\n    if (project != null) {\r\n      projectList = <SelectItem key={project.id} text={project.name} value={project.id}/>;\r\n    } else {\r\n      projectList = <SelectItem text={i18n.t('manageUsers.assign.noProjects')} value=\"\"/>;\r\n    }\r\n\r\n    return {userList, projectList};\r\n  }\r\n\r\n  render() {\r\n    const { userList, projectList } = this.setupFormComponents();\r\n\r\n    return (\r\n      <div>\r\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\r\n        <Form onSubmit={this.handleFormSubmit}>\r\n          <div className=\"bx--grid\">\r\n            <div className=\"bx--row\">\r\n              <div className=\"bx--col\">\r\n                <Select\r\n                  id=\"projectId\"\r\n                  name=\"projectId\"\r\n                  labelText={i18n.t('manageUsers.assign.projectName')}\r\n                  value={this.state.projectId}\r\n                  onChange={this.handleChanges}\r\n                  invalidText={i18n.t('validation.invalid.required')}\r\n                  invalid={this.state.invalid['projectId']}\r\n                >\r\n                  {projectList}\r\n                </Select>\r\n              </div>\r\n            </div>\r\n            <div className=\"bx--row\">\r\n              <div className=\"bx--col\">\r\n                <Select\r\n                  id=\"assignUser\"\r\n                  name=\"assignUser\"\r\n                  labelText={i18n.t('manageUsers.assign.assignUser')}\r\n                  value={this.state.assignUser}\r\n                  onChange={this.handleChanges}\r\n                  invalidText={i18n.t('validation.invalid.required')}\r\n                  invalid={this.state.invalid['assignUser']}\r\n                >\r\n                  {userList}\r\n                </Select>\r\n              </div>\r\n            </div>\r\n            <Button kind=\"primary\" tabIndex={0} type=\"submit\">\r\n              {' '}\r\n              {i18n.t('buttons.submit')}{' '}\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AssignUser);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AssignUser from '../components/Admin/ManageUser/AssignUser';\r\nimport '../index.scss';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AssignUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AssignUser serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('assign-user-widget', AssignUserElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport CustomerDataTable from '../components/Customer/CustomerDataTable';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport '../index.scss';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass CustomerDataTableElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <CustomerDataTable serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('customer-datatable-widget', CustomerDataTableElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport CustomerDetails from '../components/Customer/CustomerDetails';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass CustomerDetailsElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <CustomerDetails serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\ncustomElements.define('customer-details-widget', CustomerDetailsElement);\r\n","import React, { Component } from 'react';\r\nimport {\r\n  DataTable,\r\n  TableContainer,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableHeader,\r\n  TableBody,\r\n  TableCell,\r\n  Button\r\n} from 'carbon-components-react';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\nimport i18n from '../../../i18n';\r\nimport {apiGetProjectUsers, apiDeleteUserFromProject} from \"../../../api/projects\";\r\n\r\nclass DeleteUser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      users: [],\r\n      displayUsers: [],\r\n      projectId: '',\r\n    };\r\n    this.headerData = [\r\n      {\r\n        header: i18n.t('manageUsers.delete.userName'),\r\n        key: 'username',\r\n      },\r\n      {\r\n        header: i18n.t('manageUsers.delete.userEmail'),\r\n        key: 'email',\r\n      },\r\n      {\r\n        header: i18n.t('manageUsers.delete.userAccess'),\r\n        key: 'userAccess',\r\n      },\r\n    ];\r\n    window.addEventListener(\"cp-user-assigned\", (event) => {\r\n      this.fetchData();\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  async fetchData() {\r\n    const {keycloak} = this.props;\r\n\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      let search = window.location.search;\r\n      const params = new URLSearchParams(search);\r\n      const projectId = params.get('project');\r\n      let users = [];\r\n      if (projectId != null) {\r\n        users = ((await apiGetProjectUsers(this.props.serviceUrl, projectId)).data);\r\n      }\r\n\r\n      this.setState({\r\n        users,\r\n        projectId\r\n      });\r\n\r\n      this.handleUserDisplay();\r\n    }\r\n  }\r\n\r\n  handleUserDisplay() {\r\n    const users = this.state.users;\r\n    const projectId = this.state.projectId;\r\n\r\n    const displayUsers = users.map(user => ({\r\n      id: user.username,\r\n      username: user.username,\r\n      email: user.email,\r\n      userAccess: (\r\n        <Button\r\n          kind=\"ghost\"\r\n          onClick={event => this.handleRemoveUser(user.id, projectId, event)}\r\n          className=\"button-warning\"\r\n        >\r\n          {i18n.t('manageUsers.delete.removeUser')}\r\n        </Button>\r\n      ),\r\n    }));\r\n\r\n    this.setState({\r\n      displayUsers,\r\n    });\r\n  }\r\n\r\n  handleRemoveUser = (userId, projectId, event) => {\r\n    event.preventDefault();\r\n\r\n    apiDeleteUserFromProject(this.props.serviceUrl, projectId, userId).then(res => {\r\n      if (res.status === 201) {\r\n        this.fetchData();\r\n      } else {\r\n        console.warn(\"Failed to delete user\", res);\r\n      }\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <DataTable rows={this.state.displayUsers} headers={this.headerData}>\r\n        {({ rows, headers, getHeaderProps, getTableProps }) => (\r\n          <TableContainer>\r\n            <Table {...getTableProps()}>\r\n              <TableHead>\r\n                <TableRow>\r\n                  {headers.map(header => (\r\n                    <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>\r\n                  ))}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {rows.map(row => (\r\n                  <TableRow key={row.id}>\r\n                    {row.cells.map(cell => (\r\n                      <TableCell key={cell.id}>{cell.value}</TableCell>\r\n                    ))}\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        )}\r\n      </DataTable>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(DeleteUser);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport DeleteUser from '../components/Admin/ManageUser/DeleteUser';\r\nimport '../index.scss';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass DeleteUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <DeleteUser serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('delete-user-widget', DeleteUserElement);\r\n","import React, { Component } from 'react';\r\nimport { Form, TextInput, TextArea, Button } from 'carbon-components-react';\r\nimport i18n from '../../i18n';\r\n\r\nexport default class EnhancementRequest extends Component {\r\n  state = {\r\n    ticketNo: '',\r\n    customerName: '',\r\n    projectName: '',\r\n    openedBy: '',\r\n    priority: '',\r\n    partnerName: '',\r\n    enhancementDescription: '',\r\n    invalid: {},\r\n  };\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    if (this.state.ticketNo === '') {\r\n      formIsValid = false;\r\n      invalid['ticketNo'] = true;\r\n    }\r\n\r\n    if (this.state.customerName === '') {\r\n      formIsValid = false;\r\n      invalid['customerName'] = true;\r\n    }\r\n\r\n    if (this.state.projectName === '') {\r\n      formIsValid = false;\r\n      invalid['projectName'] = true;\r\n    }\r\n\r\n    if (this.state.openedBy === '') {\r\n      formIsValid = false;\r\n      invalid['openedBy'] = true;\r\n    }\r\n\r\n    if (this.state.partnerName === '') {\r\n      formIsValid = false;\r\n      invalid['partnerName'] = true;\r\n    }\r\n\r\n    if (this.state.enhancementDescription === '') {\r\n      formIsValid = false;\r\n      invalid['enhancementDescription'] = true;\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleFormSubmit = event => {\r\n    console.log(this.state.ticketNo);\r\n    event.preventDefault();\r\n\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      // placeholder\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h3 className=\"pageTitle\">{i18n.t('enhancementForm.title')}</h3>\r\n        <div className=\"form-container\">\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <div className=\"form-desc\">\r\n              <h4>{i18n.t('enhancementForm.formTitle')}</h4>\r\n              <p>{i18n.t('enhancementForm.desc')}</p>\r\n            </div>\r\n            <div className=\"bx--grid\">\r\n              <div className=\"bx--row\">\r\n                <div className=\"bx--col\">\r\n                  <TextInput\r\n                    name=\"ticketNo\"\r\n                    labelText={i18n.t('enhancementForm.ticketNumber')}\r\n                    value={this.state.ticketNo}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['ticketNo']}\r\n                  />\r\n                  <TextInput\r\n                    name=\"projectName\"\r\n                    labelText={i18n.t('enhancementForm.projectName')}\r\n                    value={this.state.projectName}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['projectName']}\r\n                  />\r\n                  <TextInput\r\n                    name=\"priority\"\r\n                    labelText={i18n.t('enhancementForm.priority')}\r\n                    value={this.state.priority}\r\n                    onChange={this.handleChanges}\r\n                  />\r\n                </div>\r\n                <div className=\"bx--col\">\r\n                  <TextInput\r\n                    name=\"customerName\"\r\n                    labelText={i18n.t('enhancementForm.customerName')}\r\n                    value={this.state.customerName}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['customerName']}\r\n                  />\r\n                  <TextInput\r\n                    name=\"openedBy\"\r\n                    labelText={i18n.t('enhancementForm.ticketOpenedBy')}\r\n                    value={this.state.openedBy}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['openedBy']}\r\n                  />\r\n                  <TextInput\r\n                    name=\"partnerName\"\r\n                    labelText={i18n.t('enhancementForm.partnerName')}\r\n                    value={this.state.partnerName}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['partnerName']}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"bx--row\">\r\n                <div className=\"bx--col\">\r\n                  <TextArea\r\n                    labelText={i18n.t('enhancementForm.enhancementDescription')}\r\n                    placeholder={i18n.t('enhancementForm.addenhancementDescription')}\r\n                    name=\"enhancementDescription\"\r\n                    value={this.state.enhancementDescription}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['enhancementDescription']}\r\n                  />\r\n                  <Button kind=\"primary\" tabIndex={0} type=\"submit\">\r\n                    {' '}\r\n                    {i18n.t('buttons.submit')}{' '}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport EnhancementRequest from '../components/Forms/enhancementRequest';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass FormsEnhancementRequestElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <EnhancementRequest serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('forms-enhancement-request-widget', FormsEnhancementRequestElement);\r\n","import React, {Component} from 'react';\nimport i18n from '../../i18n';\nimport {Form, Select, SelectItem, Button, TextArea, TextInput} from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiProjectGet} from '../../api/projects';\nimport {apiJiraTicketPost} from '../../api/tickets';\nimport {\n  authenticationChanged, getActiveSubscription,\n  isAuthenticated,\n  isPortalUser,\n} from '../../api/helpers';\n\nclass OpenTicketForm extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: true,\n      project: {},\n      role: '',\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n      //form fields\n      type: 'Support',\n      priority: 'Medium',\n      status: 'To Do',\n      summary: '',\n      description: '',\n    };\n    this.types = ['Support', 'Feature Request'];\n    this.priorities = ['Critical', 'High', 'Medium', 'Low'];\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.fetchData();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n    }\n  }\n\n  async fetchData() {\n    if (!isPortalUser()) {\n      return;\n    }\n\n    let search = window.location.search;\n    let params = new URLSearchParams(search);\n    let projectId = params.get('project');\n    let project = (await apiProjectGet(this.props.serviceUrl, projectId)).data;\n\n    if (!project) {\n      console.error(\"Unable to retrieve projectId \", projectId)\n      project = {};\n    }\n\n    this.setState({\n      project: project,\n      loading: false,\n    });\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    if (this.state.type === '') {\n      formIsValid = false;\n      invalid['type'] = true;\n    }\n\n    if (this.state.summary === '') {\n      formIsValid = false;\n      invalid['summary'] = true;\n    }\n\n    if (this.state.description === '') {\n      formIsValid = false;\n      invalid['description'] = true;\n    }\n\n    if (this.state.priority === '') {\n      formIsValid = false;\n      invalid['priority'] = true;\n    }\n\n    this.setState({\n      invalid: invalid\n    });\n    return formIsValid;\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({\n        [name]: value\n      }\n    );\n  };\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const subscription = getActiveSubscription(this.state.project);\n      if (subscription) {\n        this.createTicket()\n          .then(() => {\n            this.setState({\n              submitMsg: i18n.t('submitMessages.created'),\n              submitColour: '#24a148',\n            });\n          })\n          .catch(() => {\n            this.setState({\n              submitMsg: i18n.t('submitMessages.ticketError'),\n              submitColour: '#da1e28',\n            });\n          });\n      }\n      // if no subscriptions, don't create ticket\n      else {\n        this.setState({\n          submitMsg: i18n.t('submitMessages.subscriptionRequired'),\n          submitColour: '#da1e28',\n        });\n      }\n    } else {\n      this.setState({\n        submitMsg: i18n.t('submitMessages.error'),\n        submitColour: '#da1e28',\n      });\n    }\n  }\n\n  async createTicket() {\n    if (isPortalUser()) {\n      const ticket = {\n        type: this.state.type,\n        summary: this.state.summary,\n        description: this.state.description,\n        priority: this.state.priority,\n        // these fields are just placeholders to validate the POST request (fields will be set in the backend)\n        systemId: '999',\n        status: 'To Do',\n        createDate: '2021-02-22T14:14:09-05:00',\n        updateDate: '2021-02-22T14:14:09-05:00',\n      };\n      return await apiJiraTicketPost(this.props.serviceUrl, this.state.project.id, ticket);\n    }\n  }\n\n  render() {\n    if (!this.state.loading) {\n      if (isPortalUser()) {\n        return (\n          <div>\n            <div className=\"form-container\">\n              <p style={{color: this.state.submitColour}}>{this.state.submitMsg}</p>\n              <Form onSubmit={this.handleFormSubmit}>\n                <div className=\"bx--grid\">\n                  <div className=\"bx--row\" style={{padding: '1em 0'}}>\n                    <div className=\"bx--col\">\n                      <div className=\"form-desc\">\n                        <h4>{i18n.t('supportTicketForm.formTitle')}</h4>\n                        <div>{i18n.t('supportTicketForm.desc')}</div>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      <div>\n                        <strong>{i18n.t('projectDetails.project')}:</strong> {this.state.project.name}\n                      </div>\n                      <Select\n                        id=\"type\"\n                        name=\"type\"\n                        labelText={i18n.t('supportTicketForm.type') + ' *'}\n                        value={this.state.type}\n                        onChange={this.handleChanges}\n                        invalidText={i18n.t('validation.invalid.required')}\n                        invalid={this.state.invalid['type']}\n                      >\n                        {this.types.map((type, i) => (\n                          <SelectItem key={i} text={type} value={type}>\n                            {type}\n                          </SelectItem>\n                        ))}\n                      </Select>\n                      <Select\n                        id=\"priority\"\n                        name=\"priority\"\n                        labelText={i18n.t('supportTicketForm.priority') + ' *'}\n                        value={this.state.priority}\n                        onChange={this.handleChanges}\n                        invalidText={i18n.t('validation.invalid.required')}\n                        invalid={this.state.invalid['priority']}\n                      >\n                        {this.priorities.map((priority, i) => (\n                          <SelectItem key={i} text={priority} value={priority}>\n                            {priority}\n                          </SelectItem>\n                        ))}\n                      </Select>\n                    </div>\n                  </div>\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      <TextInput\n                        labelText={i18n.t('supportTicketForm.ticketSummary') + ' *'}\n                        placeholder={i18n.t('supportTicketForm.addticketSummary')}\n                        id=\"summary\"\n                        name=\"summary\"\n                        value={this.state.summary}\n                        onChange={this.handleChanges}\n                        invalidText={i18n.t('validation.invalid.required')}\n                        invalid={this.state.invalid['summary']}\n                      />\n                    </div>\n                  </div>\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      <TextArea\n                        labelText={i18n.t('supportTicketForm.ticketDescription') + ' *'}\n                        placeholder={i18n.t('supportTicketForm.addticketDescription')}\n                        name=\"description\"\n                        value={this.state.description}\n                        onChange={this.handleChanges}\n                        invalidText={i18n.t('validation.invalid.required')}\n                        invalid={this.state.invalid['description']}\n                      />\n                      <Button kind=\"primary\" tabIndex={0} type=\"submit\">\n                        {' '}\n                        {i18n.t('buttons.submit')}{' '}\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              </Form>\n            </div>\n          </div>\n        );\n      } else {\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\n      }\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(OpenTicketForm);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport OpenTicketForm from '../components/Forms/OpenTicketForm';\nimport KeycloakContext from '../auth/KeycloakContext';\n\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\nimport {KEYCLOAK_EVENT_TYPE} from '../custom-elements/widgetEventTypes';\nimport * as Locale from \"../i18n\";\n\nconst getKeycloakInstance = () =>\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\n    initialized: false,\n  };\n\nconst ATTRIBUTES = {\n  hidden: 'hidden',\n  locale: 'locale',\n  paginationMode: 'pagination-mode',\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\n  serviceUrl: 'service-url',\n};\n\nclass FormsOpenTicketElement extends HTMLElement {\n  container;\n\n  mountPoint;\n\n  unsubscribeFromKeycloakEvent;\n\n  keycloak = getKeycloakInstance();\n\n  connectedCallback() {\n    this.mountPoint = document.createElement('div');\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\n\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\n      this.render();\n    });\n\n    this.render();\n\n    //retargetEvents(shadowRoot);\n    this.appendChild(this.mountPoint);\n  }\n\n  render() {\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\n    Locale.setLocale(locale);\n\n    ReactDOM.render(\n      <KeycloakContext.Provider value={this.keycloak}>\n        <OpenTicketForm serviceUrl={serviceUrl} locale={locale}/>\n      </KeycloakContext.Provider>,\n      this.mountPoint\n    );\n  }\n}\n\ncustomElements.define('forms-openticket-widget', FormsOpenTicketElement);\n","import React, {Component} from 'react';\r\nimport {\r\n  DataTable,\r\n  TableContainer,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableHeader,\r\n  TableBody,\r\n  TableCell,\r\n  Button\r\n} from 'carbon-components-react';\r\nimport '../../../index.scss';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\nimport i18n from '../../../i18n';\r\nimport {isAuthenticated, authenticationChanged} from \"../../../api/helpers\";\r\nimport {apiDeleteSubscriptionFromProject, apiGetProjectSubscriptions, apiProjectGet} from \"../../../api/projects\";\r\nimport {formatEndDate, formatStartDate} from \"../../../api/subscriptions\";\r\n\r\nclass ManageSubscriptions extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      projectId: '',\r\n      project: {},\r\n      subscriptions: []\r\n    }\r\n    ;\r\n    this.headerData = [\r\n      {\r\n        header: i18n.t('projectDetails.id'),\r\n        key: 'id',\r\n      },\r\n      {\r\n        header: i18n.t('projectDetails.status'),\r\n        key: 'status',\r\n      },\r\n      {\r\n        header: i18n.t('projectDetails.entandoVersion'),\r\n        key: 'entandoVersion',\r\n      },\r\n      {\r\n        header: i18n.t('projectDetails.level'),\r\n        key: 'level',\r\n      },\r\n      {\r\n        header: i18n.t('projectDetails.startDate'),\r\n        key: 'startDate',\r\n      },\r\n      {\r\n        header: i18n.t('projectDetails.endDate'),\r\n        key: 'endDate',\r\n      },\r\n      {\r\n        header: i18n.t('projectDetails.lengthInMonths'),\r\n        key: 'lengthInMonths',\r\n      },\r\n      {\r\n        header: i18n.t('customerDashboard.action'),\r\n        key: 'action',\r\n      },\r\n    ];\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (isAuthenticated(this.props)) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (authenticationChanged(this.props, prevProps)) {\r\n      this.fetchData();\r\n    }\r\n  }\r\n\r\n  async fetchData() {\r\n    if (isAuthenticated(this.props)) {\r\n      let search = window.location.search;\r\n      const params = new URLSearchParams(search);\r\n      const projectId = params.get('project');\r\n\r\n      let project = {};\r\n      let subscriptions = {};\r\n      if (projectId != null) {\r\n        project = ((await apiProjectGet(this.props.serviceUrl, projectId)).data);\r\n        subscriptions = ((await apiGetProjectSubscriptions(this.props.serviceUrl, projectId)).data);\r\n      }\r\n\r\n      this.setState({\r\n        projectId: projectId,\r\n        project: project,\r\n        subscriptions: subscriptions\r\n      });\r\n    }\r\n  }\r\n\r\n  async deleteSubscription(subscriptionId) {\r\n    if (isAuthenticated(this.props)) {\r\n      return await apiDeleteSubscriptionFromProject(this.props.serviceUrl, this.state.projectId, subscriptionId);\r\n    }\r\n  }\r\n\r\n  handleDeleteSubscription = (e, id) => {\r\n    e.preventDefault();\r\n    if (window.confirm(i18n.t('submitMessages.confirmDelete'))) {\r\n      console.log(\"confirmed to delete\", id);\r\n      this.deleteSubscription(id)\r\n        .then(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.deleted'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.fetchData();\r\n        })\r\n        .catch(() => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h5>{(this.state.project !== null) && this.state.project.name}</h5>\r\n        <a\r\n          href={`/entando-de-app/${this.props.locale}/new_or_renew_subscription.page?project=${this.state.projectId}`}\r\n          style={{textDecoration: 'none'}}\r\n        >\r\n          <Button kind=\"ghost\" style={{display: 'block', width: '100%'}} value=\"Add Subscription\">\r\n            {i18n.t('buttons.addSubscription')}\r\n          </Button>\r\n        </a>\r\n\r\n        <DataTable rows={[{id: \"1\"}]} headers={this.headerData}>\r\n          {({headers, getHeaderProps, getTableProps}) => (\r\n            <TableContainer>\r\n              <Table {...getTableProps()}>\r\n                <TableHead>\r\n                  <TableRow>\r\n                    {headers.map(header => (\r\n                      <TableHeader {...getHeaderProps({header})}>{header.header}</TableHeader>\r\n                    ))}\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {(Object.keys(this.state.subscriptions).length !== 0) &&\r\n                  this.state.subscriptions.map((subscription, index) => (\r\n                    <TableRow key={index}>\r\n                      <TableCell>{subscription.id}</TableCell>\r\n                      <TableCell>{subscription.status}</TableCell>\r\n                      <TableCell>{subscription.entandoVersion.name}</TableCell>\r\n                      <TableCell>{subscription.level}</TableCell>\r\n                      <TableCell>{formatStartDate(subscription.startDate)}</TableCell>\r\n                      <TableCell>{formatEndDate(subscription.startDate, subscription.lengthInMonths)}</TableCell>\r\n                      <TableCell>{subscription.lengthInMonths}</TableCell>\r\n                      <TableCell>\r\n                        <a\r\n                          href={`/entando-de-app/${this.props.locale}/new_or_renew_subscription.page?project=${this.state.projectId}&subscription=${subscription.id}`}\r\n                          style={{textDecoration: 'none'}}>\r\n                          <Button kind=\"ghost\" style={{display: 'block', width: '100%'}} value=\"Edit\">\r\n                            {i18n.t('buttons.edit')}\r\n                          </Button>\r\n                        </a>\r\n                        <Button\r\n                          kind=\"ghost\"\r\n                          onClick={(event) => this.handleDeleteSubscription(event, subscription.id)}\r\n                          className=\"button-warning\">\r\n                          {i18n.t('buttons.delete')}\r\n                        </Button>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          )}\r\n        </DataTable>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(ManageSubscriptions);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ManageSubscriptions from \"../components/Admin/ManageSubscriptions/ManageSubscriptions\";\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {subscribeToWidgetEvent} from '../helpers/widgetEvents';\r\nimport {KEYCLOAK_EVENT_TYPE} from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && {...window.entando.keycloak, initialized: true}) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url'\r\n};\r\n\r\nclass ManageSubscriptionsElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = {...getKeycloakInstance(), initialized: true};\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = {...getKeycloakInstance(), initialized: true};\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <ManageSubscriptions serviceUrl={serviceUrl} locale={locale}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('manage-subscriptions-widget', ManageSubscriptionsElement);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../../i18n';\r\nimport { Accordion, AccordionItem } from 'carbon-components-react';\r\nimport AssignUser from './AssignUser';\r\nimport DeleteUser from './DeleteUser';\r\nimport { isPortalAdmin } from '../../../api/helpers';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\n\r\nclass ManageUser extends Component {\r\n  userFunctionality;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n    };\r\n    this.userFunctionality = [\r\n      {\r\n        label: (\r\n          <div>\r\n            <p className=\"title\">{i18n.t('manageUsers.manage.title')}</p>\r\n            <p className=\"desc\">{i18n.t('manageUsers.manage.desc')}</p>\r\n          </div>\r\n        ),\r\n        content: <DeleteUser serviceUrl={this.props.serviceUrl}/>,\r\n        open: true,\r\n      },\r\n      {\r\n        label: (\r\n          <div>\r\n            <p className=\"title\">{i18n.t('manageUsers.assign.title')}</p>\r\n            <p className=\"desc\">{i18n.t('manageUsers.assign.desc')}</p>\r\n          </div>\r\n        ),\r\n        content: <AssignUser serviceUrl={this.props.serviceUrl}/>,\r\n        open: true,\r\n      }\r\n    ];\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.loading) {\r\n      if (isPortalAdmin()) {\r\n        return (\r\n          <div>\r\n            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\r\n            <div className=\"form-container\">\r\n              <Accordion>\r\n                {this.userFunctionality.map((item, index) => (\r\n                  <AccordionItem key={index.toString()} index={index} title={item.label} description={item.description} open={item.open}>\r\n                    {item.content}\r\n                  </AccordionItem>\r\n                ))}\r\n              </Accordion>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      // Unauthorized\r\n      else {\r\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n      }\r\n    }\r\n    // Loading\r\n    else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withKeycloak(ManageUser);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ManageUser from '../components/Admin/ManageUser/ManageUser';\r\nimport '../index.scss';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url'\r\n};\r\n\r\nclass ManageUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <ManageUser serviceUrl={serviceUrl} locale={locale}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('manage-user-widget', ManageUserElement);\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst Navigation = () => {\r\n  return (\r\n    <ul id=\"navigation\">\r\n      <li>\r\n        <NavLink to=\"/\">Home</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/subscription-details\">Subscription Details</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/subscription\">New or Renew Subscription</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/service-ticket\">Open Service Ticket</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/enhancement\">Request for Enhancement Process</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/manage-users\">Manage Users</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/configuration-settings\">Configuration Settings</NavLink>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Navigation from '../components/Navigation/Navigation';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass NavigationElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <Navigation serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('navigation-widget', NavigationElement);\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport OpenTicketForm from '../components/Forms/OpenTicketForm';\nimport '../index.scss';\nimport * as Locale from '../i18n';\n\nimport KeycloakContext from '../auth/KeycloakContext';\n\nimport {subscribeToWidgetEvent} from '../helpers/widgetEvents';\nimport {KEYCLOAK_EVENT_TYPE} from './widgetEventTypes';\n\nconst getKeycloakInstance = () =>\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\n    initialized: false,\n  };\n\nconst ATTRIBUTES = {\n  hidden: 'hidden',\n  locale: 'locale',\n  paginationMode: 'pagination-mode',\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\n  serviceUrl: 'service-url',\n};\n\nclass OpenTicketElement extends HTMLElement {\n  container;\n\n  mountPoint;\n\n  unsubscribeFromKeycloakEvent;\n\n  keycloak = getKeycloakInstance();\n\n  connectedCallback() {\n    this.mountPoint = document.createElement('div');\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\n\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\n      this.render();\n    });\n\n    this.render();\n\n    //retargetEvents(shadowRoot);\n    this.appendChild(this.mountPoint);\n  }\n\n  render() {\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\n    Locale.setLocale(locale);\n\n    ReactDOM.render(\n      <KeycloakContext.Provider value={this.keycloak}>\n        <OpenTicketForm serviceUrl={serviceUrl} locale={locale}/>\n      </KeycloakContext.Provider>,\n      this.mountPoint\n    );\n  }\n}\n\ncustomElements.define('open-ticket-widget', OpenTicketElement);\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ProductVersion from '../components/Admin/Configuration/ProductVersion';\r\nimport '../index.scss';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass ProductVersionElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <ProductVersion serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('product-version-widget', ProductVersionElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Subscription from '../components/SubscriptionDetails/Subscription';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport {subscribeToWidgetEvent} from '../helpers/widgetEvents';\r\nimport {KEYCLOAK_EVENT_TYPE} from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass SubscriptionElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <Subscription serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('subscription-widget', SubscriptionElement);\r\n","import React, {Component} from 'react';\nimport i18n from '../../i18n';\nimport {Form, TextInput, Select, SelectItem, Button, DatePicker, DatePickerInput} from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiProjectGet} from '../../api/projects';\nimport {\n  apiProjectSubscriptionPost,\n  apiProjectSubscriptionPut,\n  apiRenewSubscription,\n  apiSubscriptionGet,\n  stripTime\n} from '../../api/subscriptions';\nimport {apiProductVersionsGet} from '../../api/productVersion';\nimport {\n  authenticationChanged,\n  isAuthenticated,\n  isPortalAdmin,\n  isPortalUser\n} from '../../api/helpers';\nimport {apiAddSubscriptionToProject} from '../../api/projects';\nimport moment from \"moment\";\n\nconst FORM_TYPE = {\n  new: 'new',\n  renewal: 'renewal',\n  edit: 'edit'\n}\n\nconst SUBSCRIPTION_LEVEL = {\n  GOLD: 'GOLD',\n  PLATINUM: 'PLATINUM',\n};\n\nconst SUBSCRIPTION_STATUS = {\n  requested: 'REQUESTED',\n  pending: 'PENDING',\n  active: 'ACTIVE',\n  expired: 'EXPIRED',\n};\n\nclass SubscriptionForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      project: {},\n      projectId: '',\n      subscription: {},\n      startDate: '',\n      level: 'PLATINUM',\n      lengthInMonths: '',\n      entandoVersionId: '',\n      status: '',\n      formType: 'new',\n      invalid: {},\n      productVersions: [],\n      submitSuccess: false,\n      submitError: false,\n      submitColour: 'black',\n    };\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.fetchData();\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.fetchData();\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  async fetchData() {\n    if (!isPortalUser()) {\n      return;\n    }\n\n    const serviceUrl = this.props.serviceUrl;\n\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n\n    const subscriptionId = params.get('subscription');\n    let projectId = params.get('project');\n\n    let subscription = {};\n    let project = {};\n    let formType = FORM_TYPE.new;\n    let status = '';\n    const isAdmin = isPortalAdmin();\n\n    if (subscriptionId !== null) {\n      subscription = (await apiSubscriptionGet(serviceUrl, subscriptionId)).data;\n      status = isAdmin ? subscription.status : SUBSCRIPTION_STATUS.requested;\n      formType = isAdmin ? FORM_TYPE.edit : FORM_TYPE.renewal;\n      project = subscription.project;\n    } else if (projectId !== null) {\n      project = (await apiProjectGet(serviceUrl, projectId)).data;\n      status = isAdmin ? SUBSCRIPTION_STATUS.pending : SUBSCRIPTION_STATUS.requested;\n    } else {\n      console.log(\"Unable to load project and/or subscription\");\n      return;\n    }\n\n    const productVersions = (await apiProductVersionsGet(serviceUrl)).data;\n\n    this.setState({\n      subscription: subscription,\n      level: (subscription.level) ? subscription.level : '',\n      entandoVersionId: (subscription.entandoVersion) ? subscription.entandoVersion.id : '',\n      startDate: stripTime(subscription.startDate),\n      lengthInMonths: (subscription.lengthInMonths) ? subscription.lengthInMonths : '',\n      status: status,\n      formType: formType,\n      project: project,\n      projectId: projectId,\n      productVersions: productVersions\n    });\n  }\n\n  isNumeric(str) {\n    return !isNaN(str) && !isNaN(parseInt(str));\n  }\n\n  handleValidation() {\n    let invalid = {};\n\n    if (!this.state.startDate || !this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n      invalid['startDate'] = true;\n    }\n\n    if (!this.state.lengthInMonths || !this.isNumeric(this.state.lengthInMonths)) {\n      invalid['lengthInMonths'] = true;\n    }\n\n    if (!this.state.level) {\n      invalid['level'] = true;\n    }\n\n    if (this.state.entandoVersionId === '') {\n      invalid['entandoVersionId'] = true;\n    }\n\n    this.setState({ invalid: invalid });\n    return (Object.keys(invalid).length === 0);\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n    this.setState({\n      submitSuccess: false,\n      submitError: false,\n    });\n  };\n\n  handleStartDateChange = date => {\n    let formatted = '';\n    if (date && date[0]) {\n      formatted = moment(date[0].toISOString()).format('MM/DD/YYYY');\n    }\n    this.setState({\n      startDate: formatted\n    });\n  };\n\n  updateStateForSuccess(success) {\n    if (success) {\n      this.setState({\n        submitSuccess: true,\n        submitError: false,\n        submitColour: '#24a148',\n      })\n    } else {\n      this.setState({\n        submitSuccess: false,\n        submitError: true,\n        submitColour: '#da1e28',\n      });\n    }\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    this.setState({\n      submitSuccess: false,\n      submitError: false,\n    });\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const formType = this.state.formType;\n      const serviceUrl = this.props.serviceUrl;\n      const subscriptionRequest = this.stateToSubscription();\n\n      if (formType === FORM_TYPE.edit) {\n        apiProjectSubscriptionPut(serviceUrl, subscriptionRequest)\n          .then(() => {\n            this.updateStateForSuccess(true);\n          })\n          .catch(() => {\n            this.updateStateForSuccess(false);\n          });\n      } else if (formType === FORM_TYPE.new) {\n        this.newSubscription(subscriptionRequest)\n          .then(res => {\n            apiAddSubscriptionToProject(serviceUrl, this.state.projectId, res.data.id);\n            this.updateStateForSuccess(true);\n          })\n          .catch(() => {\n            this.updateStateForSuccess(false);\n          });\n      } else if (formType === FORM_TYPE.renewal) {\n        this.renewSubscription(subscriptionRequest)\n          .then(res => {\n            apiAddSubscriptionToProject(serviceUrl, this.state.projectId, res.data.id);\n            this.updateStateForSuccess(true);\n          })\n          .catch(() => {\n            this.updateStateForSuccess(false);\n          });\n      } else {\n        console.log(\"Illegal operation\");\n      }\n    }\n  };\n\n  stateToSubscription() {\n    return {\n      entandoVersionId: this.state.entandoVersionId,\n      projectId: this.state.projectId,\n      renewal: (this.state.formType === FORM_TYPE.renewal),\n      projectSubscription: {\n        id: this.state.subscription.id,\n        startDate: new Date(this.state.startDate),\n        lengthInMonths: this.state.lengthInMonths,\n        level: this.state.level,\n        status: this.state.status.toUpperCase(),\n      },\n    };\n  };\n\n  async newSubscription(request) {\n    return await apiProjectSubscriptionPost(this.props.serviceUrl, request);\n  }\n\n  async renewSubscription(request) {\n    return await apiRenewSubscription(this.props.serviceUrl, request);\n  }\n\n  setupFormComponents() {\n    const subscriptionLevelList = Object.entries(SUBSCRIPTION_LEVEL).map(([key, value]) => (\n      <SelectItem key={key} text={value} value={key}>\n        {value}\n      </SelectItem>\n    ));\n    subscriptionLevelList.unshift(<SelectItem key=\"-1\" text={i18n.t('subscriptionForm.chooseLevel')} value=\"\"/>);\n\n    const versionList = this.state.productVersions.map(version => {\n      // only allow the user to choose from active entando versions\n      if (version.status) {\n        return (\n          <SelectItem key={version.id} text={version.name} value={version.id}>\n            {version.name}\n          </SelectItem>\n        );\n      } else {\n        return null;\n      }\n    });\n    versionList.unshift(<SelectItem key=\"-1\" text={i18n.t('subscriptionForm.chooseVersion')} value=\"\"/>);\n\n    const statusList = Object.entries(SUBSCRIPTION_STATUS).map(([key, value]) => (\n      <SelectItem key={key} text={value} value={value}>\n        {value}\n      </SelectItem>\n    ));\n\n    return {subscriptionLevelList, versionList, statusList};\n  }\n\n  renderForm() {\n    const {subscriptionLevelList, versionList, statusList} = this.setupFormComponents();\n    return (\n      <div>\n        <div className=\"bx--row\">\n          <div className=\"bx--col\">\n            <div>\n              <span>{i18n.t('subscriptionForm.projectName')}:</span> {this.state.project.name}\n            </div>\n            <Select\n              id=\"status\"\n              name=\"status\"\n              labelText={i18n.t('subscriptionForm.subscriptionStatus')}\n              value={this.state.status}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['status']}\n              disabled={!isPortalAdmin()}\n            >\n              {statusList}\n            </Select>\n            <Select\n              id=\"level\"\n              name=\"level\"\n              labelText={i18n.t('subscriptionForm.subscriptionLevel') + ' *'}\n              value={this.state.level || ''}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['level']}\n            >\n              {subscriptionLevelList}\n            </Select>\n            <Select\n              id=\"entandoVersionId\"\n              name=\"entandoVersionId\"\n              labelText={i18n.t('subscriptionForm.entandoVersion') + ' *'}\n              value={this.state.entandoVersionId}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['entandoVersionId']}\n            >\n              {versionList}\n            </Select>\n          </div>\n          <div className=\"bx--col\">\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" value={this.state.startDate}\n                        onChange={this.handleStartDateChange}>\n              <DatePickerInput\n                id=\"startDate\"\n                name=\"startDate\"\n                placeholder=\"mm/dd/yyyy\"\n                labelText={i18n.t('subscriptionForm.subscriptionStartDate')}\n                type=\"text\"\n                invalidText={i18n.t('validation.invalid.date')}\n                invalid={this.state.invalid['startDate']}\n              />\n            </DatePicker>\n            <TextInput\n              id=\"lengthInMonths\"\n              name=\"lengthInMonths\"\n              labelText={i18n.t('subscriptionForm.subscriptionLength') + ' *'}\n              value={this.state.lengthInMonths}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.number')}\n              invalid={this.state.invalid['lengthInMonths']}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  successErrorMessage() {\n    const isAdmin = isPortalAdmin();\n    const { subscriptionType, submitSuccess, submitError } = this.state;\n\n    if (subscriptionType === 'new') {\n      if (submitSuccess) {\n        return isAdmin ? this.createFormMessage('adminSubmitNewSuccess') : this.createFormMessage('customerSubmitSuccess');\n      } else if (submitError) {\n        return this.createFormMessage('newSubError');\n      }\n    } else {\n      if (submitSuccess) {\n        return isAdmin ? this.createFormMessage('adminRenewNewSuccess') : this.createFormMessage('customerSubmitSuccess');\n      } else if (submitError) {\n        return this.createFormMessage('renewSubError');\n      }\n    }\n  }\n\n  createFormMessage(subMessageKey) {\n    return <p style={{ color: this.state.submitColour }}>{i18n.t(`subscriptionForm.${subMessageKey}`)}</p>;\n  }\n\n  render() {\n    const titleKey = isPortalAdmin() ? \"subscriptionForm.adminTitle\" : \"subscriptionForm.formTitle\";\n    const formType = this.state.formType;\n    let formLabelKey = \"subscriptionForm.newSubscription\";\n    if (formType !== 'new') {\n      formLabelKey = isPortalAdmin() ? \"subscriptionForm.editSubscription\" : \"subscriptionForm.renewSubscription\";\n    }\n\n    if (!this.state.loading) {\n      if (isPortalUser()) {\n        return (\n          <div>\n            <h3 className=\"pageTitle\">{i18n.t(titleKey)}</h3>\n            <div className=\"form-container\">\n              {this.successErrorMessage()}\n              <Form onSubmit={this.handleFormSubmit}>\n                <div className=\"bx--grid\">\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      <strong>{i18n.t(formLabelKey)}</strong>\n                    </div>\n                  </div>\n                  {this.renderForm()}\n                  <Button kind=\"primary\" tabIndex={0} type=\"submit\">\n                    {' '}\n                    {i18n.t('buttons.submit')}\n                  </Button>\n                </div>\n              </Form>\n            </div>\n          </div>\n        );\n      } else {\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\n      }\n    }\n    // Loading\n    else {\n      return null;\n    }\n\n  }\n}\n\nexport default withKeycloak(SubscriptionForm);\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport SubscriptionForm from '../components/Forms/SubscriptionForm';\r\nimport '../index.scss';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url'\r\n};\r\n\r\nclass SubscriptionFormElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <SubscriptionForm serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('subscription-form-widget', SubscriptionFormElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport TicketList from '../components/SubscriptionDetails/TicketList';\r\nimport '../index.scss';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass TicketListCustomerElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <TicketList serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('ticket-list-widget', TicketListCustomerElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport TicketingSystem from '../components/Admin/Configuration/TicketingSystem';\r\nimport '../index.scss';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass TicketingSystemElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <TicketingSystem serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('ticketing-system-widget', TicketingSystemElement);\r\n","import React, {Component} from 'react';\nimport {BrowserRouter, Route, Switch, Link} from 'react-router-dom';\nimport App from '../components/App';\nimport withKeycloak from '../auth/withKeycloak';\nimport SubscriptionForm from \"../components/Forms/SubscriptionForm\";\nimport AdminConfiguration from \"../components/Admin/Configuration/AdminConfiguration\";\nimport OpenTicketForm from \"../components/Forms/OpenTicketForm\";\nimport ManageUser from \"../components/Admin/ManageUser/ManageUser\";\nimport ManageSubscriptions from \"../components/Admin/ManageSubscriptions/ManageSubscriptions\";\nimport {authenticationChanged, isAuthenticated, isPortalAdminOrSupport} from \"../api/helpers\";\n\nclass LocalApp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n    };\n  }\n\n  componentDidMount() {\n    if (isAuthenticated(this.props)) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (authenticationChanged(this.props, prevProps)) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  logout() {\n    window.entando.keycloak.logout();\n  }\n\n  render() {\n    if (!this.state.loading) {\n      return (\n        <div>\n          <BrowserRouter forceRefresh={true}>\n            {/*Simple Menu for switching to page-based elements*/}\n            <div>\n              <ul>\n                <li><Link to={'/'}>Home</Link></li>\n                {/*TODO: rework the entando-de-app-based paths so the application name and locale are more general*/}\n                {isPortalAdminOrSupport() &&\n                <li><Link to={'/entando-de-app/en/admin.page'}>Admin</Link></li>\n                }\n                <li><a href=\"/\" onClick={this.logout}>Logout</a></li>\n              </ul>\n            </div>\n            <Switch>\n              <Route path=\"/entando-de-app/en/admin.page\">\n                <AdminConfiguration serviceUrl={this.props.serviceUrl} locale={this.props.locale}/>\n              </Route>\n              <Route path=\"/entando-de-app/en/manage_subscriptions.page\">\n                <ManageSubscriptions serviceUrl={this.props.serviceUrl} locale={this.props.locale}/>\n              </Route>\n              <Route path=\"/entando-de-app/en/manage_users.page\">\n                <ManageUser serviceUrl={this.props.serviceUrl} locale={this.props.locale}/>\n              </Route>\n              <Route path=\"/entando-de-app/en/new_or_renew_subscription.page\">\n                <SubscriptionForm serviceUrl={this.props.serviceUrl} locale={this.props.locale}/>\n              </Route>\n              <Route path=\"/entando-de-app/en/open_service_ticket.page\">\n                <OpenTicketForm serviceUrl={this.props.serviceUrl} locale={this.props.locale}/>\n              </Route>\n              <Route path=\"/\" exact={true}>\n                <App serviceUrl={this.props.serviceUrl} locale={this.props.locale}/>\n              </Route>\n            </Switch>\n          </BrowserRouter>\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(LocalApp);\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport '../index.scss';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport LocalApp from '../local/LocalApp';\r\n\r\nimport {subscribeToWidgetEvent} from '../helpers/widgetEvents';\r\nimport {KEYCLOAK_EVENT_TYPE} from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && {...window.entando.keycloak, initialized: true}) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass LocalAppElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = {...getKeycloakInstance(), initialized: true};\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = {...getKeycloakInstance(), initialized: true};\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <LocalApp serviceUrl={serviceUrl} locale={locale}/>\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('local-app-element', LocalAppElement);\r\n"],"sourceRoot":""}