(this["webpackJsonpcp-widgets"]=this["webpackJsonpcp-widgets"]||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);a(23);var n=a(8),r=a(9),s=a(10),i=a(11),c=a(14),o=a(4),u=a(0),l=a.n(u),d=a(13),h=a.n(d),p=a(5),m=a.n(p),b=a(6),j=a(17),v=a(39),f=a.n(v),O=a(77),g=a(78);f.a.defaultLocale="en",f.a.locale="en",f.a.fallbacks=!0,f.a.translations={en:O,it:g};var x=function(e){f.a.locale=e},k=f.a,y=a(127),w=a(115),D=a(126),S=a(116),C=a(83),T=a(2),P=a.n(T),N=(P.a.oneOfType([P.a.func,P.a.shape({current:P.a.elementType}),P.a.shape(null)]),l.a.createContext(null)),E=a(3);function U(e){var t=function(t){Object(s.a)(c,t);var a=Object(i.a)(c);function c(){var t;Object(n.a)(this,c);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(t=a.call.apply(a,[this].concat(s))).renderWrappedComponent=function(a){var n=t.props,r=n.forwardedRef,s=Object(C.a)(n,["forwardedRef"]);return Object(E.jsx)(e,Object(o.a)(Object(o.a)({},s),{},{ref:r,keycloak:a}))},t}return Object(r.a)(c,[{key:"render",value:function(){return Object(E.jsx)(N.Consumer,{children:this.renderWrappedComponent})}}]),c}(u.Component);return t.defaultProps={forwardedRef:function(){}},Object(u.forwardRef)((function(e,a){return Object(E.jsx)(t,Object(o.a)(Object(o.a)({},e),{},{forwardedRef:a}))}))}var M=function(){return window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""},I=function(e){var t=e.keycloak;return t.initialized&&t.authenticated},z=function(e,t){var a=I(e),n=t.keycloak.authenticated!==a;return a&&n},A=function(){return B("cp-admin")},V=function(){return B("cp-support")},L=function(){return B("cp-partner")},F=function(){return B("cp-customer")},q=function(){return A()||V()},R=function(){return q()||F()||L()},B=function(e){if(M()){var t=window.entando.keycloak.resourceAccess;if(t)for(var a in t){var n=t[a];if(n.roles&&n.roles.includes(e))return!0}}return!1},Y=function(){return{headers:new Headers({Authorization:"Bearer ".concat(M()),"Content-Type":"application/json"})}},H=function(){return{headers:new Headers({Authorization:"Bearer ".concat(M()),"Content-Type":"application/x-www-form-urlencoded"})}},G=function(e){return e&&e.projectSubscriptions&&e.projectSubscriptions.find((function(e){return"ACTIVE"===e.status?e:null}))},_=function(e){return"".concat(e)},J=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a);case 2:if(n=e.sent,r=Object(o.a)({},n.headers.has("X-Total-Count")?{"X-Total-Count":parseInt(n.headers.get("X-Total-Count"),10)}:{}),204!==n.status){e.next=6;break}return e.abrupt("return",{data:"",status:n.status});case 6:if(!(n.status>=200&&n.status<300)){e.next=15;break}return e.next=9,n.json();case 9:e.t1=e.sent,e.t2=r,e.t3=n.status,e.t0={data:e.t1,headers:e.t2,status:e.t3},e.next=16;break;case 15:e.t0=Promise.reject(new Error(n.statusText||n.status));case 16:return e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),K="api/customers",W=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(K,"/").concat(a),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"DELETE"}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Q=function(){var e=Object(b.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_("".concat(t,"/").concat(K)),n=Object(o.a)(Object(o.a)({},Y()),{},{method:"GET"}),e.abrupt("return",J(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_("".concat(t,"/").concat(K,"/").concat(a)),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"GET"}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),X=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(K),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Z=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(K),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ee=function(){var e=Object(b.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(K,"/").concat(a,"/projects/").concat(n),s=Object(o.a)(Object(o.a)({},Y()),{},{method:"POST"}),e.abrupt("return",J(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),te=function(){var e=Object(b.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(K,"/").concat(a,"/projects/").concat(n),s=Object(o.a)(Object(o.a)({},Y()),{},{method:"DELETE"}),e.abrupt("return",J(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ae=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(j.a)({},a,n))},r.handleFormSubmit=function(){if(r.handleValidation()){var e={name:r.state.name,customerNumber:r.state.customerNumber,contactName:r.state.contactName,contactPhone:r.state.contactPhone,contactEmail:r.state.contactEmail,notes:r.state.notes};r.customerPost(e).then((function(){r.setState({submitMsg:k.t("submitMessages.added"),submitColour:"#24a148"}),r.props.updateCustomerList()})).catch((function(){r.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})}))}},r.clearValues=function(){document.querySelector("#modal-form-customer").className.includes("is-visible")||r.setState(r.baseState)},r.state={name:"",customerNumber:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"},r.baseState=r.state,r}return Object(r.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;if(""===this.state.name&&(t=!1,e.name=!0),""===this.state.customerNumber&&(t=!1,e.customerNumber=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1===this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(t=!1,e.contactEmail=!0)}return this.setState({invalid:e}),t}},{key:"customerPost",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.keycloak,!(a.initialized&&a.authenticated)){e.next=6;break}return e.next=5,X(this.props.serviceUrl,t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){document.querySelector(".add-customer-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){var e=Object(E.jsx)("div",{className:"bx--modal-header",children:Object(E.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),t="modal-form-customer";return Object(E.jsxs)(y.a,{buttonTriggerText:k.t("buttons.addCustomer"),modalHeading:k.t("adminDashboard.addCustomer.title"),buttonTriggerClassName:"add-customer bx--btn bx--btn--tertiary add-customer-button",className:"modal-form",id:t,handleSubmit:this.handleFormSubmit,primaryButtonText:k.t("modalText.save"),secondaryButtonText:k.t("modalText.cancel"),children:[e,Object(E.jsx)("div",{className:"form-container",children:Object(E.jsxs)(w.a,{onSubmit:this.handleFormSubmit,children:[Object(E.jsx)(D.a,{id:"name"+t,name:"name",labelText:k.t("adminDashboard.addCustomer.customerName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(E.jsx)(D.a,{id:"customerNumber"+t,name:"customerNumber",labelText:k.t("adminDashboard.addCustomer.customerNumber")+" *",value:this.state.customerNumber,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.customerNumber}),Object(E.jsx)(D.a,{id:"contactName"+t,name:"contactName",labelText:k.t("adminDashboard.addCustomer.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(E.jsx)(D.a,{id:"contactPhone"+t,name:"contactPhone",labelText:k.t("adminDashboard.addCustomer.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(E.jsx)(D.a,{id:"contactEmail"+t,name:"contactEmail",labelText:k.t("adminDashboard.addCustomer.contactEmail")+" *",value:this.state.contactEmail,onChange:this.handleChanges,invalidText:k.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(E.jsx)(S.a,{id:"notes"+t,name:"notes",labelText:k.t("adminDashboard.addCustomer.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),e]})}}]),a}(u.Component)),ne=function(e,t){return window.addEventListener(e,t),function(){window.removeEventListener(e,t)}},re="keycloak",se=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},ie="locale",ce="service-url",oe=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=se(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},se()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},se()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(ce)||"",t=this.getAttribute(ie)||"";x(t),h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(ae,{serviceUrl:e,locale:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("admin-add-customer-widget",oe);var ue=a(128),le=a(103),de=a(122),he=a(117),pe=a(118),me=a(104),be="api/ticketing-systems",je=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(be,"/").concat(a),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"DELETE"}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ve=function(){var e=Object(b.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(t);case 2:return a=e.sent.data,e.abrupt("return",a&&a.length?a[a.length-1]:null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(b.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"/").concat(be),n=Object(o.a)(Object(o.a)({},Y()),{},{method:"GET"}),e.abrupt("return",J(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(b.a)(m.a.mark((function e(t,a,n){var r,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(be),s={ticketingSystem:a,secret:n},i=Object(o.a)(Object(o.a)({},Y()),{},{method:"POST",body:JSON.stringify(s)}),e.abrupt("return",J(r,i));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ge=function(){var e=Object(b.a)(m.a.mark((function e(t,a,n){var r,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(be),s={ticketingSystem:a,secret:n},i=Object(o.a)(Object(o.a)({},Y()),{},{method:"PUT",body:JSON.stringify(s)}),e.abrupt("return",J(r,i));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),xe=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(j.a)({},a,n))},r.handleFormSubmit=function(e){e.preventDefault(),r.state.ticketingSystem?r.updateTicketingSystem().then((function(){r.setState({submitMsg:k.t("submitMessages.updated"),submitColour:"#24a148"})})).catch((function(){r.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})})):r.createTicketingSystem().then((function(){r.setState({submitMsg:k.t("submitMessages.created"),submitColour:"#24a148"})})).catch((function(){r.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})}))},r.state={ticketingSystem:{},ticketingSystemType:"Jira",url:"",serviceAccount:"",serviceAccountSecret:"",systemId:"",submitMsg:"",submitColour:"black"},r}return Object(r.a)(a,[{key:"createTicketingSystem",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:this.state.url,serviceAccount:this.state.serviceAccount,systemId:this.state.systemId},e.next=3,Oe(this.props.serviceUrl,t,this.state.serviceAccountSecret);case 3:a=e.sent.data,this.setState({ticketingSystem:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateTicketingSystem",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:this.state.ticketingSystem.id,url:this.state.url,serviceAccount:this.state.serviceAccount,systemId:this.state.systemId},e.next=3,ge(this.props.serviceUrl,t,this.state.serviceAccountSecret);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(this.props.serviceUrl);case 2:t=e.sent,this.setState({ticketingSystem:t,url:t?t.url:"",serviceAccount:t?t.serviceAccount:"",systemId:t?t.systemId:""});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){I(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"deleteTicketingSystem",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(this.props.serviceUrl,this.state.ticketingSystem.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=this;window.confirm("Are you sure you want to delete this ticketing system?")&&this.deleteTicketingSystem().then((function(){e.setState({submitMsg:k.t("submitMessages.deleted"),submitColour:"#24a148"}),e.fetchData()})).catch((function(){e.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})}))}},{key:"render",value:function(){var e=this;return A()?Object(E.jsxs)("div",{className:"cp-form",children:[Object(E.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),Object(E.jsx)(w.a,{onSubmit:this.handleFormSubmit,children:Object(E.jsxs)("div",{className:"bx--grid",children:[Object(E.jsxs)("div",{className:"bx--row",children:[Object(E.jsxs)("div",{className:"bx--col",children:[Object(E.jsxs)(he.a,{id:"ticketingSystemType",name:"ticketingSystemType",labelText:k.t("adminConfig.integrationTicketingSystem.selectBackendTicketingSystem"),value:this.state.ticketingSystemType,onChange:this.handleChanges,children:[Object(E.jsx)(pe.a,{text:k.t("adminConfig.integrationTicketingSystem.select"),value:"ticketing-system"}),["Jira"].map((function(e,t){return Object(E.jsx)(pe.a,{text:e,value:e,children:e},t)}))]}),Object(E.jsx)(D.a,{id:"serviceAccount",name:"serviceAccount",labelText:k.t("adminConfig.integrationTicketingSystem.userName"),value:this.state.serviceAccount,onChange:this.handleChanges}),Object(E.jsx)(D.a,{id:"systemId",name:"systemId",labelText:k.t("adminConfig.integrationTicketingSystem.projectName"),value:this.state.systemId,onChange:this.handleChanges})]}),Object(E.jsxs)("div",{className:"bx--col",children:[Object(E.jsx)(D.a,{id:"url",name:"url",labelText:k.t("adminConfig.integrationTicketingSystem.url"),value:this.state.url,onChange:this.handleChanges}),Object(E.jsx)(D.a,{id:"serviceAccountSecret",name:"serviceAccountSecret",type:"password",labelText:k.t("adminConfig.integrationTicketingSystem.password"),value:this.state.serviceAccountSecret,onChange:this.handleChanges})]})]}),Object(E.jsxs)(me.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",k.t("buttons.submit")," "]}),this.state.ticketingSystem?Object(E.jsxs)(me.a,{kind:"danger",onClick:function(){return e.handleDelete()},children:[" ","Delete"," "]}):null]})})]}):Object(E.jsx)("p",{children:k.t("userMessages.unauthorized")})}}]),a}(u.Component)),ke=a(124),ye=a(68),we=a(66),De=a(69),Se=a(70),Ce=a(72),Te=a(67),Pe=a(36),Ne=a(121),Ee="api/entando-versions",Ue=function(){var e=Object(b.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"/").concat(Ee),n=Object(o.a)(Object(o.a)({},Y()),{},{method:"GET"}),e.abrupt("return",J(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Ee,"/").concat(a),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"GET"}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Ee,"/").concat(a),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"PUT"}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ze=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Ee),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Ee),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ve=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Ee,"/").concat(a),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"DELETE"}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Le=a(125),Fe=a(119),qe=a(24),Re=a.n(qe),Be=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(j.a)({},a,n))},r.handleFormSubmit=function(){r.handleValidation()&&r.addProductVersion().then((function(){r.setState({submitMsg:k.t("submitMessages.added"),submitColour:"#24a148"}),r.props.updateProductVersions()})).catch((function(){r.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})}))},r.clearValues=function(){document.querySelector("#modal-form-product-version").className.includes("is-visible")||r.setState(r.baseState)},r.handleStartDateChange=function(e){r.setState({startDate:Re()(e[0].toISOString()).format("MM/DD/YYYY")})},r.handleEndDateChange=function(e){r.setState({endDate:Re()(e[0].toISOString()).format("MM/DD/YYYY")})},r.state={name:"",startDate:"",endDate:"",invalid:{},submitMsg:"",submitColour:"black"},r.baseState=r.state,r}return Object(r.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;return""===this.state.name&&(t=!1,e.name=!0),"undefined"!==typeof this.state.startDate&&(this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(t=!1,e.startDate=!0)),"undefined"!==typeof this.state.endDate&&(this.state.endDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(t=!1,e.endDate=!0)),this.setState({invalid:e}),t}},{key:"addProductVersion",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.keycloak,!(t.initialized&&t.authenticated)){e.next=6;break}return e.next=5,ze(this.props.serviceUrl,this.state);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){document.querySelector(".add-product-version-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){var e=Object(E.jsx)("div",{className:"bx--modal-header",children:Object(E.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),t="modal-form-product-version";return Object(E.jsxs)(y.a,{buttonTriggerText:k.t("buttons.addProductVersion"),modalHeading:k.t("adminDashboard.addProductVersion.title"),buttonTriggerClassName:"add-product-version bx--btn bx--btn--tertiary add-product-version-button",className:"modal-form",id:t,handleSubmit:this.handleFormSubmit,children:[e,Object(E.jsx)("div",{className:"form-container",children:Object(E.jsxs)(w.a,{onSubmit:this.handleFormSubmit,children:[Object(E.jsx)(D.a,{id:"name"+t,name:"name",labelText:k.t("adminDashboard.addProductVersion.productVersion"),value:this.state.name,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(E.jsx)(Le.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleStartDateChange,children:Object(E.jsx)(Fe.a,{id:"startDate"+t,name:"startDate",placeholder:"mm/dd/yyyy",labelText:k.t("adminDashboard.addProductVersion.productVersionStartDate"),value:this.state.startDate,type:"text",invalidText:k.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(E.jsx)(Le.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleEndDateChange,children:Object(E.jsx)(Fe.a,{id:"endDate"+t,name:"endDate",placeholder:"mm/dd/yyyy",labelText:k.t("adminDashboard.addProductVersion.productVersionEndDate"),value:this.state.endDate,type:"text",invalidText:k.t("validation.invalid.date"),invalid:this.state.invalid.endDate})})]})}),e]})}}]),a}(u.Component)),Ye=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(j.a)({},a,n))},r.handleStartDateChange=function(e){r.setState({startDate:Re()(e[0].toISOString()).format("MM/DD/YYYY")})},r.handleEndDateChange=function(e){r.setState({endDate:Re()(e[0].toISOString()).format("MM/DD/YYYY")})},r.handleFormSubmit=function(){if(r.handleValidation()){var e={id:r.props.version.id,name:r.state.name,startDate:Re()(r.state.startDate).format(),endDate:Re()(r.state.endDate).format()};r.versionPut(e).then((function(){r.setState({submitMsg:k.t("submitMessages.updated"),submitColour:"#24a148"}),r.props.updateProductVersions()})).catch((function(){r.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})}))}},r.state={name:"",startDate:"",endDate:"",invalid:{},modalId:"",buttonId:"",submitMsg:"",submitColour:"black"},r}return Object(r.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;return""===this.state.name&&(t=!1,e.name=!0),"undefined"!==typeof this.state.startDate&&(this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(t=!1,e.startDate=!0)),"undefined"!==typeof this.state.endDate&&(this.state.endDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(t=!1,e.endDate=!0)),this.setState({invalid:e}),t}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.getVersionDetails()}},{key:"getVersionDetails",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.keycloak,!(t.initialized&&t.authenticated)){e.next=7;break}return e.next=5,Me(this.props.serviceUrl,this.props.version.id);case 5:a=e.sent,this.setState({name:a.data.name,startDate:Re()(a.data.startDate).format("MM/DD/YYYY"),endDate:Re()(a.data.endDate).format("MM/DD/YYYY"),modalId:"modal-form-version-edit-"+a.data.id,buttonId:"edit-version-button-"+a.data.id});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"versionPut",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.keycloak,!(a.initialized&&a.authenticated)){e.next=6;break}return e.next=5,Ae(this.props.serviceUrl,t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this.props.keycloak;e.initialized&&e.authenticated&&(this.getVersionDetails(),document.querySelector(".edit-version-button-"+this.props.version.id).addEventListener("click",this.clearValues,!1))}},{key:"render",value:function(){var e=Object(E.jsx)("div",{className:"bx--modal-header",children:Object(E.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),t="bx--btn bx--btn--ghost edit-version-button-"+this.props.version.id,a=this.state.modalId;return Object(E.jsxs)(y.a,{buttonTriggerText:k.t("buttons.edit"),modalHeading:k.t("adminDashboard.addProject.editTitle"),buttonTriggerClassName:t,className:"modal-form",id:this.state.modalId,handleSubmit:this.handleFormSubmit,primaryButtonText:k.t("modalText.save"),secondaryButtonText:k.t("modalText.cancel"),children:[e,Object(E.jsx)("div",{className:"form-container",children:Object(E.jsxs)(w.a,{onSubmit:this.handleFormSubmit,id:"form"+a,children:[Object(E.jsx)(D.a,{id:"name"+a,name:"name",labelText:k.t("adminDashboard.addProject.projectName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(E.jsx)(Le.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleStartDateChange,value:this.state.startDate,children:Object(E.jsx)(Fe.a,{id:"startDate"+a,name:"startDate",placeholder:"mm/dd/yyyy",labelText:k.t("subscriptionDetails.startDate")+" *",onChange:this.handleChanges,type:"text",invalidText:k.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(E.jsx)(Le.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleEndDateChange,id:"endDate"+a,name:"endDate",value:this.state.endDate,children:Object(E.jsx)(Fe.a,{id:"endDate"+a,name:"endDate",placeholder:"mm/dd/yyyy",labelText:k.t("subscriptionDetails.endDate")+" *",onChange:this.handleChanges,type:"text",invalidText:k.t("validation.invalid.date"),invalid:this.state.invalid.endDate})})]})}),e]})}}]),a}(u.Component)),He=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleDeleteVersion=function(t,a){t.preventDefault(),window.confirm("Are you sure you want to delete this Entando version?")&&e.deleteVersion(a).then((function(){e.setState({submitMsg:k.t("submitMessages.deleted"),submitColour:"#24a148"}),e.updateProductVersions()})).catch((function(){e.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})}))},e.updateProductVersions=function(){e.getProductVersions()},e.state={versions:""},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){q()&&this.getProductVersions()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&q()&&this.getProductVersions()}},{key:"getProductVersions",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(this.props)){e.next=5;break}return e.next=3,Ue(this.props.serviceUrl);case 3:t=e.sent,this.setState({versions:t.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteVersion",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(this.props)){e.next=4;break}return e.next=3,Ve(this.props.serviceUrl,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleToggleChange",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(this.props.serviceUrl,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return q()?Object(E.jsxs)("div",{children:[Object(E.jsx)(ke.a,{rows:_e,headers:Ge,children:function(t){t.rows;var a=t.headers,n=t.getHeaderProps,r=t.getTableProps;return Object(E.jsx)(ye.a,{children:Object(E.jsxs)(we.a,Object(o.a)(Object(o.a)({},r()),{},{children:[Object(E.jsx)(De.a,{children:Object(E.jsx)(Se.a,{children:a.map((function(e){return Object(E.jsx)(Ce.a,Object(o.a)(Object(o.a)({},n({header:e})),{},{children:e.header}))}))})}),Object(E.jsx)(Te.a,{children:0!==Object.keys(e.state.versions).length?e.state.versions.map((function(t,a){return Object(E.jsxs)(Se.a,{children:[Object(E.jsx)(Pe.a,{children:t.name}),Object(E.jsx)(Pe.a,{children:Object(E.jsx)(Ne.a,{size:"sm",onClick:function(){return e.handleToggleChange(t.id)},"aria-label":"toggle button",id:"toggle"+t.id,defaultToggled:t.status})}),Object(E.jsx)(Pe.a,{children:t.startDate}),Object(E.jsx)(Pe.a,{children:t.endDate}),Object(E.jsx)(Pe.a,{children:Object(E.jsxs)("div",{style:{display:"flex"},children:[Object(E.jsx)(Ye,{version:t,serviceUrl:e.props.serviceUrl,updateProductVersions:e.updateProductVersions},t.id),Object(E.jsx)(me.a,{kind:"ghost",onClick:function(a){return e.handleDeleteVersion(a,t.id)},style:{display:"flex",width:"100%",color:"red"},children:k.t("buttons.delete")})]})})]},a)})):null})]}))})}}),Object(E.jsx)("br",{}),Object(E.jsx)(Be,{serviceUrl:this.props.serviceUrl,updateProductVersions:this.updateProductVersions})]}):Object(E.jsx)("p",{children:k.t("userMessages.unauthorized")})}}]),a}(u.Component),Ge=[{header:k.t("adminConfig.manageProductVersion.entandoVersion"),key:"entVersion"},{header:k.t("adminConfig.manageProductVersion.status"),key:"status"},{header:k.t("adminConfig.manageProductVersion.startDate"),key:"startDate"},{header:k.t("adminConfig.manageProductVersion.supportEndDate"),key:"endDate"},{header:k.t("customerDashboard.action"),key:"action"}],_e=[{id:"a",entVersion:"5.2",status:Object(E.jsx)(Ne.a,{size:"sm","aria-label":"toggle button",defaultToggled:!0,id:"status-1"}),startDate:"April, 2018",endDate:"April, 2022"},{id:"b",entVersion:"6.3",status:Object(E.jsx)(Ne.a,{size:"sm","aria-label":"toggle button",id:"status-2"}),startDate:"Jile, 2019",endDate:"April, 2023"},{id:"c",entVersion:"6.2",status:Object(E.jsx)(Ne.a,{size:"sm","aria-label":"toggle button",defaultToggled:!0,id:"status-3"}),startDate:"September, 2020",endDate:"April, 2024"}],Je=U(He),Ke=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0},r.adminConfig=[{label:Object(E.jsxs)("div",{children:[Object(E.jsx)("p",{className:"title",children:k.t("adminConfig.integrationTicketingSystem.title")}),Object(E.jsx)("p",{className:"desc",children:k.t("adminConfig.integrationTicketingSystem.desc")})]}),content:Object(E.jsx)(xe,{serviceUrl:r.props.serviceUrl})},{label:Object(E.jsxs)("div",{children:[Object(E.jsx)("p",{className:"title",children:k.t("adminConfig.manageProductVersion.title")}),Object(E.jsx)("p",{className:"desc",children:k.t("adminConfig.manageProductVersion.desc")})]}),content:Object(E.jsx)(Je,{serviceUrl:r.props.serviceUrl})}],r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.keycloak;e.initialized&&e.authenticated&&this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?null:A()?Object(E.jsxs)("div",{children:[Object(E.jsx)("h3",{className:"pageTitle",children:k.t("adminDashboard.adminTitle")}),Object(E.jsxs)("div",{className:"form-container",children:[Object(E.jsxs)(ue.a,{children:[Object(E.jsx)("p",{className:"title",children:k.t("adminConfig.title")}),Object(E.jsx)("p",{className:"desc",children:k.t("adminConfig.desc")})]}),Object(E.jsx)(le.a,{children:this.adminConfig.map((function(e,t){return Object(E.jsx)(de.a,{index:t,title:e.label,description:e.description,children:Object(E.jsx)("div",{children:e.content})},t.toString())}))})]})]}):Object(E.jsx)("p",{children:k.t("userMessages.unauthorized")})}}]),a}(l.a.Component)),We=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Qe="locale",$e="service-url",Xe=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=We(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},We()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},We()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute($e)||"",t=this.getAttribute(Qe)||"";x(t),h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(Ke,{serviceUrl:e,locale:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("admin-configuration-widget",Xe);var Ze=a(120),et=a(123),tt="api/partners",at=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(tt),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),nt="api/projects",rt=function(){var e=Object(b.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_("".concat(t,"/").concat(nt)),n=Object(o.a)(Object(o.a)({},Y()),{},{method:"GET"}),e.abrupt("return",J(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_("".concat(t,"/").concat(nt,"/").concat(a)),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"GET"}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),it=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(nt),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ct=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(nt),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ot=function(){var e=Object(b.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(nt,"/").concat(a,"/subscriptions/").concat(n),s=Object(o.a)(Object(o.a)({},Y()),{},{method:"POST"}),e.abrupt("return",J(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ut=function(){var e=Object(b.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(nt,"/").concat(a,"/users/").concat(n),s=Object(o.a)(Object(o.a)({},Y()),{},{method:"POST"}),e.abrupt("return",J(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),lt=function(){var e=Object(b.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(nt,"/").concat(a,"/partners/").concat(n),s=Object(o.a)(Object(o.a)({},Y()),{},{method:"DELETE"}),e.abrupt("return",J(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),dt=function(){var e=Object(b.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(nt,"/").concat(a,"/subscriptions/").concat(n),s=Object(o.a)(Object(o.a)({},Y()),{},{method:"DELETE"}),e.abrupt("return",J(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ht=function(){var e=Object(b.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(nt,"/").concat(a,"/users/").concat(n),s=Object(o.a)(Object(o.a)({},Y()),{},{method:"DELETE"}),e.abrupt("return",J(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),pt=function(){var e=Object(b.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(nt,"/").concat(a,"/partners/").concat(n),s=Object(o.a)(Object(o.a)({},Y()),{},{method:"POST"}),e.abrupt("return",J(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),mt=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(nt,"/").concat(a,"/users/"),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"GET"}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),bt=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(nt,"/").concat(a,"/subscriptions/"),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"GET"}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),jt=function(e){var t=e.children,a=e.keycloak;return a&&a.initialized&&a.authenticated?t:null},vt=function(e){var t=e.children,a=e.keycloak;return a&&a.initialized&&a.authenticated?null:t},ft=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(j.a)({},a,n))},r.handleFormSubmit=function(){if(r.handleValidation()){var e={name:r.state.name,partnerNumber:r.state.partnerNumber,notes:r.state.notes};r.partnerPost(e).then((function(){r.setState({submitMsg:k.t("submitMessages.added"),submitColour:"#24a148"}),r.props.updateCustomerList()})).catch((function(){r.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})}))}},r.clearValues=function(){document.querySelector("#modal-form-partner").className.includes("is-visible")||r.setState({projectId:"",name:"",partnerNumber:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"})},r.state={projectList:{},projectId:"",name:"",partnerNumber:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){I(this.props)&&(this.fetchData(),document.querySelector(".add-partner-button").addEventListener("click",this.clearValues,!1))}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"handleValidation",value:function(){var e={},t=!0;return""!==this.state.projectId&&"project-list"!==this.state.projectId||(t=!1,e.projectId=!0),""===this.state.name&&(t=!1,e.name=!0),""===this.state.partnerNumber&&(t=!1,e.partnerNumber=!0),this.setState({invalid:e}),t}},{key:"fetchData",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(this.props)){e.next=5;break}return e.next=3,rt(this.props.serviceUrl);case 3:t=e.sent,this.setState({projectList:t.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"partnerPost",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(this.props)){e.next=7;break}return e.next=3,at(this.props.serviceUrl,t);case 3:return a=e.sent,e.next=6,pt(this.props.serviceUrl,this.state.projectId,a.data.id);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=Object(E.jsx)("div",{className:"bx--modal-header",children:Object(E.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),t=this.props.keycloak,a="modal-form-partner";return Object(E.jsx)(jt,{keycloak:t,children:Object(E.jsxs)(y.a,{buttonTriggerText:k.t("buttons.addPartner"),modalHeading:k.t("adminDashboard.addPartner.title"),buttonTriggerClassName:"add-partner bx--btn bx--btn--tertiary add-partner-button",className:"modal-form",id:a,handleSubmit:this.handleFormSubmit,primaryButtonText:k.t("modalText.save"),secondaryButtonText:k.t("modalText.cancel"),children:[e,Object(E.jsx)("div",{className:"form-container",children:Object(E.jsxs)(w.a,{onSubmit:this.handleFormSubmit,children:[Object(E.jsxs)(he.a,{id:"projectId"+a,name:"projectId",labelText:k.t("adminDashboard.addPartner.projectList")+" *",value:this.state.projectId,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.projectId,children:[Object(E.jsx)(pe.a,{text:k.t("adminDashboard.addPartner.selectProject"),value:"project-list"}),0!==Object.keys(this.state.projectList).length?this.state.projectList.map((function(e,t){return Object(E.jsx)(pe.a,{text:e.name,value:e.id,children:e.name},t)})):null]}),Object(E.jsx)(D.a,{id:"name"+a,name:"name",labelText:k.t("adminDashboard.addPartner.partnerName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(E.jsx)(D.a,{id:"partnerNumber"+a,name:"partnerNumber",labelText:k.t("adminDashboard.addPartner.partnerNumber")+" *",value:this.state.partnerNumber,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.partnerNumber}),Object(E.jsx)(S.a,{name:"notes",labelText:k.t("adminDashboard.addPartner.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),e]})})}}]),a}(u.Component)),Ot=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(j.a)({},a,n))},r.handleFormSubmit=function(){if(r.handleValidation()){for(var e={name:r.state.name,description:r.state.description,systemId:r.state.systemId,contactName:r.state.contactName,contactPhone:r.state.contactPhone,contactEmail:r.state.contactEmail,notes:r.state.notes},t=0;t<r.state.projects.length;t++)if(e.systemId===r.state.projects[t].systemId&&""!==e.systemId.trim())return void window.alert("That system id is already in use in another project");r.projectPost(e).then((function(){r.setState({submitMsg:k.t("submitMessages.added"),submitColour:"#24a148"}),r.props.updateCustomerList(),r.getAllProjects()})).catch((function(){r.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})}))}},r.clearValues=function(){document.querySelector("#modal-form-project").className.includes("is-visible")||r.setState({customerId:"",name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{}})},r.state={projects:{},customerList:{},customerId:"",name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"},r}return Object(r.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;if(""!==this.state.customerId&&"customer-list"!==this.state.customerId||(t=!1,e.customerId=!0),""===this.state.name&&(t=!1,e.name=!0),""===this.state.description&&(t=!1,e.description=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1===this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(t=!1,e.contactEmail=!0)}return this.setState({invalid:e}),t}},{key:"getAllProjects",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(this.props.serviceUrl);case 2:t=e.sent,this.setState({projects:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&(this.getCustomers(),this.getAllProjects())}},{key:"getCustomers",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.keycloak,!(t.initialized&&t.authenticated)){e.next=7;break}return e.next=5,Q(this.props.serviceUrl);case 5:a=e.sent,this.setState({customerList:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"projectPost",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.keycloak,!(a.initialized&&a.authenticated)){e.next=9;break}return e.next=5,it(this.props.serviceUrl,t);case 5:return n=e.sent,e.next=8,ee(this.props.serviceUrl,this.state.customerId,n.data.id);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getCustomers(),this.getAllProjects(),document.querySelector(".add-project-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){var e=Object(E.jsx)("div",{className:"bx--modal-header",children:Object(E.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),t="modal-form-project";return Object(E.jsxs)(y.a,{buttonTriggerText:k.t("buttons.addProject"),modalHeading:k.t("adminDashboard.addProject.title"),buttonTriggerClassName:"add-project bx--btn bx--btn--tertiary add-project-button",className:"modal-form",id:t,handleSubmit:this.handleFormSubmit,primaryButtonText:k.t("modalText.save"),secondaryButtonText:k.t("modalText.cancel"),children:[e,Object(E.jsx)("div",{className:"form-container",children:Object(E.jsxs)(w.a,{onSubmit:this.handleFormSubmit,children:[Object(E.jsxs)(he.a,{id:"customerId"+t,name:"customerId",labelText:k.t("adminDashboard.addProject.customerList")+" *",value:this.state.customerId,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.customerId,children:[Object(E.jsx)(pe.a,{text:k.t("adminDashboard.addProject.selectCustomer"),value:"customer-list"}),0!==Object.keys(this.props.allCustomers).length?this.props.allCustomers.map((function(e,t){return Object(E.jsx)(pe.a,{text:e.name,value:e.id,children:e.name},t)})):null]}),Object(E.jsx)(D.a,{id:"name"+t,name:"name",labelText:k.t("adminDashboard.addProject.projectName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(E.jsx)(D.a,{id:"description"+t,name:"description",labelText:k.t("adminDashboard.addProject.projectDesc")+" *",value:this.state.description,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(E.jsx)(D.a,{id:"systemId"+t,name:"systemId",labelText:k.t("adminDashboard.addProject.systemId"),value:this.state.systemId,onChange:this.handleChanges}),Object(E.jsx)(D.a,{id:"contactName"+t,name:"contactName",labelText:k.t("adminDashboard.addProject.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(E.jsx)(D.a,{id:"contactPhone"+t,name:"contactPhone",labelText:k.t("adminDashboard.addProject.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(E.jsx)(D.a,{id:"contactEmail"+t,name:"contactEmail",labelText:k.t("adminDashboard.addProject.contactEmail")+" *",value:this.state.contactEmail,onChange:this.handleChanges,invalidText:k.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(E.jsx)(S.a,{id:"notes"+t,name:"notes",labelText:k.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),e]})}}]),a}(u.Component)),gt=a(20),xt=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(j.a)({},a,n))},r.handleFormSubmit=function(){if(r.handleValidation()){for(var e={id:r.props.project.id,customer:r.props.project.customer,name:r.state.name,description:r.state.description,systemId:r.state.systemId,contactName:r.state.contactName,contactPhone:r.state.contactPhone,contactEmail:r.state.contactEmail,notes:r.state.notes},t=0;t<r.props.allProjects.length;t++)if(e.systemId===r.props.allProjects[t].systemId&&e.id!==r.props.allProjects[t].id&&""!==e.systemId.trim())return void window.alert("That system id is already in use in another project");r.projectPut(e).then((function(){r.setState({submitMsg:k.t("submitMessages.updated"),submitColour:"#24a148"}),r.props.updateProjectList()})).catch((function(){r.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})}))}},r.clearValues=function(){var e=r.props.keycloak,t=e.initialized&&e.authenticated;!document.querySelector("#"+r.state.modalId).className.includes("is-visible")&&t&&r.setState({name:r.props.project.name,description:r.props.project.description,systemId:r.props.project.systemId,contactName:r.props.project.contactName,contactPhone:r.props.project.contactPhone,contactEmail:r.props.project.contactEmail,notes:r.props.project.notes,invalid:{}})},r.state={projects:{},customerList:{},customerId:"",name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},modalId:"",buttonId:"",submitMsg:"",submitColour:"black"},r}return Object(r.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;if(""===this.state.name&&(t=!1,e.name=!0),""===this.state.description&&(t=!1,e.description=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1===this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(t=!1,e.contactEmail=!0)}return this.setState({invalid:e}),t}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&(this.getCustomers(),this.getAllProjects(),this.getProjectDetails())}},{key:"getCustomers",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(this.props)){e.next=5;break}return e.next=3,Q(this.props.serviceUrl);case 3:t=e.sent,this.setState({customerList:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProjectDetails",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.keycloak,!(t.initialized&&t.authenticated)){e.next=7;break}return e.next=5,st(this.props.serviceUrl,this.props.project.id);case 5:a=e.sent,this.setState({name:a.data.name,description:a.data.description,systemId:a.data.systemId,contactName:a.data.contactName,contactPhone:a.data.contactPhone,contactEmail:a.data.contactEmail,notes:a.data.notes,modalId:"modal-form-project-edit-"+a.data.id,buttonId:"edit-project-button-"+a.data.id});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllProjects",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(this.props.serviceUrl);case 2:t=e.sent,this.setState({projects:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"projectPut",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(this.props)){e.next=4;break}return e.next=3,ct(this.props.serviceUrl,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this.props.keycloak;e.initialized&&e.authenticated&&(this.getCustomers(),this.getAllProjects(),this.getProjectDetails(),document.querySelector(".edit-project-button-"+this.props.project.id).addEventListener("click",this.clearValues,!1))}},{key:"render",value:function(){var e=Object(E.jsx)("div",{className:"bx--modal-header",children:Object(E.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),t="dropdown-button-button bx--btn bx--btn--ghost edit-project-button-"+this.props.project.id,a=this.state.modalId;return Object(E.jsxs)(y.a,{buttonTriggerText:k.t("buttons.edit"),modalHeading:k.t("adminDashboard.addProject.editTitle"),buttonTriggerClassName:t,className:"modal-form",id:this.state.modalId,handleSubmit:this.handleFormSubmit,primaryButtonText:k.t("modalText.save"),secondaryButtonText:k.t("modalText.cancel"),children:[e,Object(E.jsx)("div",{className:"form-container",children:Object(E.jsxs)(w.a,{onSubmit:this.handleFormSubmit,children:[Object(E.jsx)(D.a,{id:"name"+a,name:"name",labelText:k.t("adminDashboard.addProject.projectName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(E.jsx)(D.a,{id:"description"+a,name:"description",labelText:k.t("adminDashboard.addProject.projectDesc")+" *",value:this.state.description,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(E.jsx)(D.a,{id:"systemId"+a,name:"systemId",labelText:k.t("adminDashboard.addProject.systemId"),value:this.state.systemId,onChange:this.handleChanges}),Object(E.jsx)(D.a,{id:"contactName"+a,name:"contactName",labelText:k.t("adminDashboard.addProject.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(E.jsx)(D.a,{id:"contactPhone"+a,name:"contactPhone",labelText:k.t("adminDashboard.addProject.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(E.jsx)(D.a,{id:"contactEmail"+a,name:"contactEmail",labelText:k.t("adminDashboard.addProject.contactEmail")+" *",value:this.state.contactEmail,onChange:this.handleChanges,invalidText:k.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(E.jsx)(S.a,{name:"notes",labelText:k.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),e]})}}]),a}(u.Component)),kt=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleRemovePartner=function(e,t,a){e.preventDefault(),window.confirm("Are you sure you want to remove this partner from the project?")&&r.removePartner(t,a).then((function(e){r.setState({project:e.data,submitMsg:k.t("submitMessages.deleted"),submitColour:"#24a148"}),r.props.updateProjectList()})).catch((function(e){console.log(e),r.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})}))},r.state={projectId:r.props.project.id,project:r.props.project},r.headerData=[{header:k.t("adminDashboard.addPartner.partnerName"),key:"partner"},{header:k.t("adminDashboard.addPartner.partnerNumber"),key:"partnerNumber"},{header:k.t("adminDashboard.addPartner.notes"),key:"notes"},{header:k.t("customerDashboard.action"),key:"action"}],r}return Object(r.a)(a,[{key:"removePartner",value:function(){var e=Object(b.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q()){e.next=4;break}return e.next=3,lt(this.props.serviceUrl,t,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=Object(E.jsx)("div",{className:"bx--modal-header",children:Object(E.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})});return Object(E.jsxs)(y.a,{buttonTriggerText:k.t("buttons.managePartners"),modalHeading:k.t("adminDashboard.managePartners.title"),buttonTriggerClassName:"add-partner bx--btn bx--btn--tertiary add-partner-button",className:"modal-form",id:"modal-form-manage-partners",hasForm:!1,primaryButtonText:k.t("modalText.done"),secondaryButtonText:null,children:[t,Object(E.jsx)("div",{children:Object(E.jsx)(ke.a,{rows:yt,headers:this.headerData,children:function(t){t.rows;var a=t.headers,n=t.getHeaderProps,r=t.getTableProps;return Object(E.jsx)(ye.a,{description:k.t("customerDashboard.tableDesc"),children:Object(E.jsxs)(we.a,Object(o.a)(Object(o.a)({},r()),{},{children:[Object(E.jsx)(De.a,{children:Object(E.jsx)(Se.a,{children:a.map((function(e){return Object(E.jsx)(Ce.a,Object(o.a)(Object(o.a)({},n({header:e})),{},{children:e.header}))}))},"headerRow")}),Object(E.jsx)(Te.a,{children:e.state.project.partners.map((function(t,a){return Object(E.jsxs)(Se.a,{children:[Object(E.jsx)(Pe.a,{children:t.name}),Object(E.jsx)(Pe.a,{children:t.partnerNumber}),Object(E.jsx)(Pe.a,{children:t.notes}),Object(E.jsx)(Pe.a,{children:Object(E.jsxs)("div",{children:[Object(E.jsx)(me.a,{kind:"ghost",onClick:function(a){return e.handleRemovePartner(a,e.state.projectId,t.id)},style:{display:"block",width:"100%",color:"red"},children:k.t("buttons.delete")}),Object(E.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}})]})})]},"partner"+a)}))})]}))})}})}),t]})}}]),a}(u.Component),yt=[{id:"a",name:"Partner 1",partnerNumber:"123"},{id:"b",name:"Partner 2",partnerNumber:"456"}],wt=U(kt),Dt=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleClick=function(){e.state.showMenu?document.removeEventListener("mousedown",e.handleOutsideClick,!1):document.addEventListener("mousedown",e.handleOutsideClick,!1),e.setState((function(e){return{showMenu:!e.showMenu}}))},e.handleOutsideClick=function(t){e.node&&!e.node.contains(t.target)&&e.handleClick()},e.state={showMenu:!1},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=A(),a=Object(E.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}}),n=Object(E.jsx)(me.a,{onClick:this.handleClick,style:{padding:"10px 20px"},kind:"tertiary",children:"+"}),r=Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(xt,{allProjects:this.props.allProjects,project:this.props.project,serviceUrl:this.props.serviceUrl,updateProjectList:this.props.updateProjectList},this.props.project.id),a]}),s=this.props.subscription?"&subscription="+this.props.subscription.id:"",i=Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("a",{href:"/entando-de-app/".concat(this.props.locale,"/new_or_renew_subscription.page?project=").concat(this.props.project.id).concat(s),style:{textDecoration:"none"},children:Object(E.jsx)(me.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Subscription Request",children:k.t("buttons.subscriptionRequest")})}),a]}),c=Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(wt,{project:this.props.project,serviceUrl:this.props.serviceUrl,updateProjectList:this.props.updateProjectList},this.props.project.id),a]}),o=Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("a",{href:"/entando-de-app/".concat(this.props.locale,"/manage_users.page?project=").concat(this.props.project.id),style:{textDecoration:"none"},children:Object(E.jsx)(me.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Manage Users",children:k.t("buttons.manageUsers")})}),a]}),u=Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("a",{href:"/entando-de-app/".concat(this.props.locale,"/manage_subscriptions.page?project=").concat(this.props.project.id),style:{textDecoration:"none"},children:Object(E.jsx)(me.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Manage Subscriptions",children:k.t("buttons.manageSubscriptions")})}),a]}),l=Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("a",{href:"/entando-de-app/".concat(this.props.locale,"/open_service_ticket.page?project=").concat(this.props.project.id),style:{textDecoration:"none"},children:Object(E.jsx)(me.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Open Ticket",children:k.t("buttons.openTicket")})}),a]}),d=Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("a",{href:this.props.ticketingSystem.url.substr(0,this.props.ticketingSystem.url.indexOf("/rest"))+"/issues/?jql=Organizations="+this.props.project.systemId,style:{textDecoration:"none"},target:"_blank",rel:"noreferrer",children:Object(E.jsx)(me.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"View All Tickets",children:k.t("buttons.viewAllTickets")})}),a]}),h=Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(me.a,{kind:"ghost",onClick:function(t){return e.props.handleDeleteProject(t,e.props.project.id)},style:{display:"block",width:"100%",color:"red"},children:k.t("buttons.delete")}),a]});return this.props.subscription?Object(E.jsxs)(E.Fragment,{children:[n,this.state.showMenu&&Object(E.jsxs)("div",{className:"menu",style:{zIndex:"100",position:"absolute",backgroundColor:"white"},ref:function(t){e.node=t},children:[a,Object(E.jsx)(gt.c,{to:"/subscription-details/".concat(this.props.subscription.id),style:{textDecoration:"none"},children:Object(E.jsx)(me.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"View",children:k.t("buttons.view")})}),a,t&&r,l,d,!t&&i,t&&Object(E.jsxs)(E.Fragment,{children:[u,o,c,h]})]})]}):Object(E.jsxs)(E.Fragment,{children:[n,this.state.showMenu&&Object(E.jsxs)("div",{className:"menu",style:{zIndex:"100",position:"absolute",backgroundColor:"white"},ref:function(t){e.node=t},children:[a,t&&r,i,t&&Object(E.jsxs)(E.Fragment,{children:[l,d,u,o,c,h]})]})]})}}]),a}(l.a.Component)),St="api/project-subscriptions",Ct=function(e){return String(new Date(e).toDateString())},Tt=function(e,t){var a=new Date(e).setMonth(new Date(e).getMonth()+t);return String(new Date(a).toDateString())},Pt=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(St,"/").concat(a),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"GET"}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Nt=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(St),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Et=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(St),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ut=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(St,"/renew"),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Mt=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).updateProjectList=function(){r.fetchData()},r.handleDeleteProject=function(e,t){e.preventDefault(),window.confirm("Are you sure you want to delete this project?")&&r.deleteProject(t).then((function(){r.setState({submitMsg:k.t("submitMessages.deleted"),submitColour:"#24a148"}),r.props.updateCustomerList()})).catch((function(){r.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})}))},r.state={projects:{},ticketingSystem:{},action:"Edit",showMenu:{}},r.headerData=[{header:k.t("customerDashboard.projectName"),key:"projectName"},{header:k.t("customerDashboard.partners"),key:"partners"},{header:k.t("customerDashboard.entandoVersion"),key:"entandoVersion"},{header:k.t("customerDashboard.status"),key:"status"},{header:k.t("customerDashboard.startDate"),key:"startDate"},{header:k.t("customerDashboard.endDate"),key:"endDate"},{header:k.t("customerDashboard.openTickets"),key:"openTickets"},{header:k.t("customerDetails.notes"),key:"notes"},{header:k.t("customerDashboard.action"),key:"action"}],r}return Object(r.a)(a,[{key:"fetchData",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(this.props)){e.next=15;break}return e.prev=1,e.next=4,$(this.props.serviceUrl,this.props.customerId);case 4:return t=e.sent,a=t.data.projects,e.next=8,ve(this.props.serviceUrl);case 8:n=e.sent,this.setState({projects:a,ticketingSystem:n}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:this.render();case 16:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){I(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"deleteProject",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(this.props)){e.next=4;break}return e.next=3,te(this.props.serviceUrl,this.props.customerId,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(E.jsx)("div",{children:Object(E.jsx)(ke.a,{rows:[{id:"1"}],headers:this.headerData,children:function(t){t.rows;var a=t.headers,n=t.getHeaderProps,r=t.getTableProps;return Object(E.jsx)(ye.a,{description:k.t("customerDashboard.tableDesc"),children:Object(E.jsxs)(we.a,Object(o.a)(Object(o.a)({},r()),{},{children:[Object(E.jsx)(De.a,{children:Object(E.jsx)(Se.a,{children:a.map((function(e){var t;return e.header===k.t("customerDetails.notes")?q()&&(t=Object(E.jsx)(Ce.a,Object(o.a)(Object(o.a)({},n({header:e})),{},{children:e.header}))):t=Object(E.jsx)(Ce.a,Object(o.a)(Object(o.a)({},n({header:e})),{},{children:e.header})),t}))},"headerRow")}),Object(E.jsx)(Te.a,{children:0!==Object.keys(e.state.projects).length?e.state.projects.map((function(t,a){var n=G(t);return n?Object(E.jsxs)(Se.a,{children:[Object(E.jsx)(Pe.a,{children:Object(E.jsx)(gt.c,{to:"/subscription-details/".concat(n.id),children:t.name})}),0!==t.partners.length?Object(E.jsx)(Pe.a,{children:t.partners.map((function(e,t){return Object(E.jsx)("div",{children:e.name},t)}))}):Object(E.jsx)(Pe.a,{children:k.t("userMessages.none")}),n.entandoVersion?Object(E.jsx)(Pe.a,{children:n.entandoVersion.name}):Object(E.jsx)(Pe.a,{children:k.t("userMessages.none")}),Object(E.jsx)(Pe.a,{children:n.status}),Object(E.jsx)(Pe.a,{children:Ct(n.startDate)}),Object(E.jsx)(Pe.a,{children:Tt(n.startDate,n.lengthInMonths)}),Object(E.jsx)(Pe.a,{children:t.tickets&&t.tickets.length}),q()?Object(E.jsx)(Pe.a,{style:{width:"250px"},children:t.notes}):null,Object(E.jsx)(Pe.a,{children:Object(E.jsx)(Dt,{serviceUrl:e.props.serviceUrl,ticketingSystem:e.state.ticketingSystem,locale:e.props.locale,subscription:n,project:t,allProjects:e.state.projects,handleDeleteProject:e.handleDeleteProject,updateProjectList:e.updateProjectList})})]},a):Object(E.jsxs)(Se.a,{children:[Object(E.jsx)(Pe.a,{children:t.name}),0!==t.partners.length?Object(E.jsx)(Pe.a,{children:t.partners.map((function(e,t){return Object(E.jsx)("div",{children:e.name},t)}))}):Object(E.jsx)(Pe.a,{children:k.t("userMessages.none")}),Object(E.jsx)(Pe.a,{children:k.t("userMessages.none")}),Object(E.jsx)(Pe.a,{children:k.t("userMessages.none")}),Object(E.jsx)(Pe.a,{children:k.t("userMessages.none")}),Object(E.jsx)(Pe.a,{children:k.t("userMessages.none")}),Object(E.jsx)(Pe.a,{children:t.tickets&&t.tickets.length}),q()?Object(E.jsx)(Pe.a,{style:{width:"250px"},children:t.notes}):null,Object(E.jsx)(Pe.a,{children:Object(E.jsx)(Dt,{serviceUrl:e.props.serviceUrl,ticketingSystem:e.state.ticketingSystem,locale:e.props.locale,project:t,allProjects:e.state.projects,handleDeleteProject:e.handleDeleteProject,updateProjectList:e.updateProjectList})})]},a)})):null})]}))})}})})}}]),a}(u.Component)),It=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={customer:{}},e}return Object(r.a)(a,[{key:"render",value:function(){return Object(E.jsx)("div",{className:"customer-details",children:Object(E.jsxs)(ue.a,{style:{margin:"2em 0",minHeight:"0",paddingBottom:"0"},children:[Object(E.jsxs)("div",{children:[Object(E.jsx)("strong",{children:k.t("customerDashboard.customerId")})," ",this.props.customer.id]}),Object(E.jsxs)("div",{children:[Object(E.jsx)("strong",{children:k.t("customerDashboard.customerName")})," ",this.props.customer.name]})]})})}}]),a}(u.Component)),zt=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(j.a)({},a,n))},r.getCustomerDetails=function(e){r.getCustomer(e)},r.handleFormSubmit=function(){if(r.handleValidation()){var e={id:r.props.customer.id,name:r.state.name,customerNumber:r.state.customerNumber,contactName:r.state.contactName,contactPhone:r.state.contactPhone,contactEmail:r.state.contactEmail,notes:r.state.notes};r.updateCustomer(e).then((function(){r.setState({submitMsg:k.t("submitMessages.updated"),submitColour:"#24a148"}),r.props.updateCustomerList(),r.getCustomerDetails(r.props.customer.id)})).catch((function(){r.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})}))}},r.clearValues=function(){var e=r.props.keycloak,t=e.initialized&&e.authenticated;!document.querySelector("#"+r.state.modalId).className.includes("is-visible")&&t&&r.setState({name:r.props.customer.name,customerNumber:r.props.customer.customerNumber,contactName:r.props.customer.contactName,contactPhone:r.props.customer.contactPhone,contactEmail:r.props.customer.contactEmail,notes:r.props.customer.notes,invalid:{}})},r.state={name:"",customerNumber:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},modalId:"",buttonId:"",submitMsg:"",submitColour:"black"},r}return Object(r.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;if(""===this.state.name&&(t=!1,e.name=!0),""===this.state.customerNumber&&(t=!1,e.customerNumber=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1===this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(t=!1,e.contactEmail=!0)}return this.setState({invalid:e}),t}},{key:"updateCustomer",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(this.props)){e.next=4;break}return e.next=3,Z(this.props.serviceUrl,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCustomer",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(this.props)){e.next=5;break}return e.next=3,$(this.props.serviceUrl,t);case 3:a=e.sent.data,this.setState({name:a.name,customerNumber:a.customerNumber,contactName:a.contactName,contactPhone:a.contactPhone,contactEmail:a.contactEmail,notes:a.notes,modalId:"modal-form-customer-edit-"+a.id,buttonId:"edit-customer-button-"+a.id});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){I(this.props)&&this.props.customerId&&this.getCustomerDetails(this.props.customerId)}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.getCustomerDetails(this.props.customerId)}},{key:"render",value:function(){var e=Object(E.jsx)("div",{className:"bx--modal-header",children:Object(E.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),t=this.state.modalId,a="bx--btn bx--btn--ghost edit-customer-button-"+this.props.customerId;return t&&Object(E.jsxs)(y.a,{buttonTriggerText:k.t("buttons.edit"),modalHeading:k.t("adminDashboard.editCustomer.title"),buttonTriggerClassName:a,className:"modal-form",id:t,handleSubmit:this.handleFormSubmit,primaryButtonText:k.t("modalText.save"),secondaryButtonText:k.t("modalText.cancel"),children:[e,Object(E.jsx)("div",{className:"form-container",children:Object(E.jsxs)(w.a,{onSubmit:this.handleFormSubmit,id:"form-"+t,children:[Object(E.jsx)(D.a,{id:"name"+t,name:"name",labelText:k.t("adminDashboard.addCustomer.customerName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(E.jsx)(D.a,{id:"customerNumber"+t,name:"customerNumber",labelText:k.t("adminDashboard.addCustomer.customerNumber")+" *",value:this.state.customerNumber,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.customerNumber}),Object(E.jsx)(D.a,{id:"contactName"+t,name:"contactName",labelText:k.t("adminDashboard.addCustomer.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(E.jsx)(D.a,{id:"contactPhone"+t,name:"contactPhone",labelText:k.t("adminDashboard.addCustomer.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(E.jsx)(D.a,{id:"contactEmail"+t,name:"contactEmail",labelText:k.t("adminDashboard.addCustomer.contactEmail")+" *",value:this.state.contactEmail,onChange:this.handleChanges,invalidText:k.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(E.jsx)(S.a,{name:"notes",labelText:k.t("adminDashboard.addCustomer.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),e]})}}]),a}(u.Component)),At=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={projects:{},customer:{},authenticated:!1},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){I(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"fetchData",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.customerId,e.prev=1,e.next=4,$(this.props.serviceUrl,t);case 4:a=e.sent,this.setState({customer:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"deleteCustomer",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(this.props.serviceUrl,this.state.customer.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=this;window.confirm("Are you sure you want to delete this customer?")&&this.deleteCustomer().then((function(){e.props.updateCustomerList()}))}},{key:"render",value:function(){var e=this;return Object(E.jsx)("div",{children:Object(E.jsxs)("div",{children:[F()&&Object(E.jsx)(It,{serviceUrl:this.props.serviceUrl,customer:this.state.customer}),Object(E.jsxs)(de.a,{title:this.props.title,open:this.props.accordionOpened,children:[Object(E.jsxs)("div",{style:{display:"flex"},children:[q()&&Object(E.jsx)(gt.c,{style:{textDecoration:"none"},to:"/customer-details/".concat(this.state.customer.id),children:Object(E.jsx)(me.a,{kind:"ghost",children:k.t("buttons.viewDetails")})}),A()&&Object(E.jsxs)("div",{style:{display:"flex"},children:[Object(E.jsx)(zt,{serviceUrl:this.props.serviceUrl,customer:this.state.customer,updateCustomerList:this.props.updateCustomerList,customerId:this.state.customer.id},this.state.customer.id),Object(E.jsx)(me.a,{kind:"ghost",style:{color:"red"},onClick:function(){return e.handleDelete()},children:k.t("buttons.delete")})]})]}),Object(E.jsx)(Mt,{serviceUrl:this.props.serviceUrl,customerId:this.props.customerId,locale:this.props.locale,updateCustomerList:this.props.updateCustomerList},(new Date).getTime())]})]})})}}]),a}(u.Component)),Vt=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleSearch=function(t){if("Enter"===t.key){var a=e.state.customers.filter((function(e){return e.name.toLowerCase().includes(t.target.value.toLowerCase())}));e.setState({filteredCustomers:a,currentPage:0})}else""!==t.target.value&&void 0!==t.target.value||e.setState({filteredCustomers:e.state.customers});e.forceUpdate()},e.updateCustomerList=function(){e.fetchData()},e.state={customers:{},role:"",filteredCustomers:{},currentPage:0,test:""},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"fetchData",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(this.props)){e.next=5;break}return e.next=3,Q(this.props.serviceUrl);case 3:t=e.sent,this.setState({customers:t.data,filteredCustomers:t.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=1;t=0!==Object.keys(this.state.filteredCustomers).length?Math.ceil(this.state.filteredCustomers.length/5):1;return Object(E.jsxs)("div",{className:"admin-dashboard",children:[A()?Object(E.jsx)("h3",{className:"pageTitle",children:k.t("adminDashboard.adminTitle")}):V()?Object(E.jsx)("h3",{className:"pageTitle",children:k.t("adminDashboard.supportTitle")}):F()?Object(E.jsx)("h3",{className:"pageTitle",children:k.t("adminDashboard.customerTitle")}):L()?Object(E.jsx)("h3",{className:"pageTitle",children:k.t("adminDashboard.partnerTitle")}):null,A()||V()||L()?Object(E.jsxs)(ue.a,{children:[Object(E.jsx)("p",{className:"title",children:k.t("adminDashboard.allCustomers")}),Object(E.jsxs)("div",{className:"bx--row",children:[Object(E.jsx)("div",{className:"bx--col",children:Object(E.jsx)(Ze.a,{onChange:this.handleSearch,id:"search",placeholder:k.t("adminDashboard.searchText"),labelText:k.t("adminDashboard.searchLabel"),onKeyPress:this.handleSearch})}),A()?Object(E.jsx)("div",{className:"bx--col",children:Object(E.jsxs)("div",{children:[Object(E.jsx)(ft,{serviceUrl:this.props.serviceUrl,updateCustomerList:this.updateCustomerList}),Object(E.jsx)(ae,{serviceUrl:this.props.serviceUrl,updateCustomerList:this.updateCustomerList}),Object(E.jsx)(Ot,{serviceUrl:this.props.serviceUrl,updateCustomerList:this.updateCustomerList,allCustomers:this.state.customers})]})}):null]})]}):null,Object(E.jsxs)("div",{className:"form-container",children:[Object(E.jsx)(le.a,{children:0!==Object.keys(this.state.customers).length?this.state.filteredCustomers.map((function(t,a){var n=5*(e.state.currentPage+1)-1,r=5*e.state.currentPage,s=1===e.state.customers.length;return R()&&a>=r&&a<=n?Object(E.jsx)(At,{serviceUrl:e.props.serviceUrl,customerId:t.id,title:t.name,updateCustomerList:e.updateCustomerList,locale:e.props.locale,accordionOpened:s},t.id):null})):null}),Object(E.jsx)(et.a,Object(o.a)(Object(o.a)({},{loop:Boolean(!1),page:Number(e.state.currentPage),totalItems:Number(t),itemsShown:Number(1),onChange:function(t){return e.setState({currentPage:t})}}),{},{className:"pagination-right"}))]})]})}}]),a}(l.a.Component)),Lt=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Ft="locale",qt="service-url",Rt=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=Lt(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Lt()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Lt()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(qt)||"",t=this.getAttribute(Ft)||"";x(t),h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(Vt,{serviceUrl:e,locale:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("admin-dashboard-widget",Rt);var Bt=a(18),Yt="api/tickets/ticketingsystem",Ht=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Yt,"/").concat(a),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"GET"}),e.abrupt("return",J(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Gt=function(){var e=Object(b.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(Yt,"/").concat(a),s=Object(o.a)(Object(o.a)({},Y()),{},{method:"POST",body:n?JSON.stringify(n):null}),e.abrupt("return",J(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),_t=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={tickets:{},project:{},ticketingSystem:{},currentPage:0},r.headerData=[{header:k.t("ticketDetails.issue"),key:"issue"},{header:k.t("ticketDetails.summary"),key:"summary"},{header:k.t("ticketDetails.status"),key:"status"},{header:k.t("ticketDetails.type"),key:"type"},{header:k.t("ticketDetails.priority"),key:"priority"},{header:k.t("ticketDetails.created"),key:"created"},{header:k.t("ticketDetails.updated"),key:"updated"},{header:k.t("ticketDetails.link"),key:"link"}],r}return Object(r.a)(a,[{key:"fetchData",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R()){e.next=17;break}return e.prev=1,e.next=4,st(this.props.serviceUrl,this.props.projectId);case 4:return t=e.sent.data,e.next=7,ve(this.props.serviceUrl);case 7:return a=e.sent,e.next=10,Ht(this.props.serviceUrl,t.id);case 10:n=e.sent,this.setState({tickets:n,project:t,ticketingSystem:a}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){I(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"render",value:function(){var e=this,t=1;0!==Object.keys(this.state.tickets).length&&(t=Math.ceil(this.state.tickets.data.length/10));var a=this.state.ticketingSystem.url,n=null!=a?a.substr(0,a.indexOf("/rest")):null;return Object(E.jsxs)("div",{children:[this.state.project.id&&Object(E.jsxs)("div",{children:[Object(E.jsx)("a",{href:n+"/issues/?jql=Organizations="+this.state.project.systemId,style:{textDecoration:"none"},target:"_blank",rel:"noreferrer",children:Object(E.jsx)(me.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Open Ticket",children:k.t("buttons.viewAllTickets")})}),Object(E.jsx)("a",{href:"/entando-de-app/".concat(this.props.locale,"/open_service_ticket.page?project=").concat(this.state.project.id),style:{textDecoration:"none"},children:Object(E.jsx)(me.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Open Ticket",children:k.t("buttons.openTicket")})})]}),Object(E.jsx)(ke.a,{rows:[{id:"1"}],headers:this.headerData,children:function(t){t.rows;var a=t.headers,r=t.getHeaderProps,s=t.getTableProps;return Object(E.jsx)(ye.a,{title:k.t("ticketDetails.listOfTickets"),children:Object(E.jsxs)(we.a,Object(o.a)(Object(o.a)({},s()),{},{children:[Object(E.jsx)(De.a,{children:Object(E.jsx)(Se.a,{children:a.map((function(e){return Object(E.jsx)(Ce.a,Object(o.a)(Object(o.a)({},r({header:e})),{},{children:e.header}))}))})}),Object(E.jsx)(Te.a,{children:0!==Object.keys(e.state.tickets).length?e.state.tickets.data.map((function(t,a){var r=10*(e.state.currentPage+1)-1,s=10*e.state.currentPage,i=n+"/browse/"+t.systemId;return a>=s&&a<=r?Object(E.jsxs)(Se.a,{children:[Object(E.jsx)(Pe.a,{children:Object(E.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",children:t.systemId})}),Object(E.jsx)(Pe.a,{children:t.summary}),Object(E.jsx)(Pe.a,{children:t.status}),Object(E.jsx)(Pe.a,{children:t.type}),Object(E.jsx)(Pe.a,{children:t.priority}),Object(E.jsx)(Pe.a,{children:new Date(t.createDate).toDateString()}),Object(E.jsx)(Pe.a,{children:new Date(t.updateDate).toDateString()}),Object(E.jsx)(Pe.a,{children:Object(E.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",children:k.t("ticketDetails.viewTicket")})})]},t.id):null})):Object(E.jsx)(Se.a,{})})]}))})}}),Object(E.jsx)(et.a,Object(o.a)(Object(o.a)({},{loop:Boolean(!1),page:Number(e.state.currentPage),totalItems:Number(t),itemsShown:Number(1),onChange:function(t){return e.setState({currentPage:t})}}),{},{className:"pagination-right"}))]})}}]),a}(u.Component)),Jt="Product Support Subscription Entando Platform",Kt="Free Commercial Open Source",Wt=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).updateSubscription=function(){r.fetchData()},r.state={loading:!0,subscription:{},users:{},project:{},customer:{}},r}return Object(r.a)(a,[{key:"fetchData",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R()){e.next=20;break}return e.prev=1,t={},a={},e.next=6,Pt(this.props.serviceUrl,this.props.match.params.id);case 6:if(!(n=e.sent).data.project){e.next=14;break}return e.next=10,st(this.props.serviceUrl,n.data.project.id);case 10:return a=e.sent,e.next=13,mt(this.props.serviceUrl,a.data.id);case 13:t=e.sent;case 14:this.setState({subscription:n,project:a,customer:a.customer,users:t,loading:!1}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:case"end":return e.stop()}}),e,this,[[1,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){R()&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&R()&&this.fetchData()}},{key:"render",value:function(){var e=this,t=Jt,a=Kt;return this.state.loading?null:R()&&0!==Object.keys(this.state.subscription).length&&0!==Object.keys(this.state.project).length?Object(E.jsx)("div",{className:"subscription-details",children:Object(E.jsxs)("div",{children:[Object(E.jsx)(ue.a,{children:Object(E.jsx)("div",{className:"bx--grid",children:Object(E.jsxs)("div",{className:"bx--row",children:[Object(E.jsxs)("div",{className:"bx--col",children:[Object(E.jsxs)("div",{children:[Object(E.jsxs)("strong",{children:[k.t("customerDashboard.customerName"),":"]})," ",this.state.project.data.customer.name]}),Object(E.jsxs)("div",{children:[Object(E.jsxs)("strong",{children:[k.t("customerDashboard.projectName"),":"]})," ",this.state.project.data.name]}),Object(E.jsxs)("div",{children:[Object(E.jsxs)("strong",{children:[k.t("subscriptionDetails.description"),":"]})," ",this.state.subscription.data.project.description]}),Object(E.jsxs)("div",{children:[Object(E.jsxs)("strong",{children:[k.t("subscriptionDetails.partners"),":"]}),""!==this.state.project.data&&0!==Object.keys(this.state.project.data.partners).length?Object(E.jsx)(E.Fragment,{children:this.state.project.data.partners.map((function(t,a){return Object(E.jsxs)("div",{children:[" ",a===e.state.project.data.partners.length-1?t.name:t.name+", "," "]},a)}))}):Object(E.jsxs)(E.Fragment,{children:[" ",k.t("userMessages.none")," "]})]}),Object(E.jsxs)("div",{children:[Object(E.jsxs)("strong",{children:[k.t("subscriptionDetails.type"),":"]})," ",t]}),q()?Object(E.jsxs)("div",{children:[Object(E.jsxs)("strong",{children:[k.t("subscriptionDetails.notes"),":"]})," ",this.state.subscription.data.notes]}):null]}),Object(E.jsxs)("div",{className:"bx--col",children:[Object(E.jsxs)("div",{children:[Object(E.jsxs)("strong",{children:[k.t("subscriptionDetails.status"),":"]})," ",this.state.subscription.data.status]}),Object(E.jsxs)("div",{children:[Object(E.jsxs)("strong",{children:[k.t("subscriptionDetails.level"),":"]})," ",this.state.subscription.data.level]}),Object(E.jsxs)("div",{children:[Object(E.jsxs)("strong",{children:[k.t("subscriptionDetails.startDate"),":"]})," ",Ct(this.state.subscription.data.startDate)]}),Object(E.jsxs)("div",{children:[Object(E.jsxs)("strong",{children:[k.t("subscriptionDetails.endDate"),":"]})," ",Tt(this.state.subscription.data.startDate,this.state.subscription.data.lengthInMonths)]}),Object(E.jsxs)("div",{children:[Object(E.jsxs)("strong",{children:[k.t("subscriptionDetails.license"),":"]})," ",a]}),Object(E.jsxs)("div",{children:[Object(E.jsxs)("strong",{children:[k.t("subscriptionDetails.assignedUsers"),":"]}),""!==this.state.project.data&&0!==Object.keys(this.state.users.data).length?Object(E.jsx)(E.Fragment,{children:this.state.users.data.map((function(t,a){return Object(E.jsxs)("div",{children:[" ",a===e.state.users.data.length-1?t.username:t.username+", "," "]},a)}))}):Object(E.jsxs)(E.Fragment,{children:[" ",k.t("userMessages.none")," "]})]})]})]})})}),Object(E.jsx)("br",{}),Object(E.jsx)(_t,{projectId:this.state.project.data.id,serviceUrl:this.props.serviceUrl,locale:this.props.locale})]})}):Object(E.jsx)("div",{children:k.t("userMessages.unauthorized")})}}]),a}(l.a.Component)),Qt=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0,customer:{}},r}return Object(r.a)(a,[{key:"fetchData",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(this.props)){e.next=11;break}return e.prev=1,e.next=4,$(this.props.serviceUrl,this.props.match.params.id);case 4:t=e.sent,this.setState({customer:t.data,loading:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){q()&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&q()&&this.fetchData()}},{key:"render",value:function(){if(this.state.loading)return null;if(q()){var e=this.state.customer;return e?Object(E.jsxs)("div",{children:[Object(E.jsx)(ue.a,{children:Object(E.jsx)("div",{className:"bx--grid",children:Object(E.jsxs)("div",{className:"bx--row",children:[Object(E.jsxs)("div",{className:"bx--col",children:[Object(E.jsxs)("p",{children:[Object(E.jsxs)("strong",{children:[k.t("customerDetails.id"),": "]})," ",e.id]}),Object(E.jsxs)("p",{children:[Object(E.jsxs)("strong",{children:[k.t("customerDetails.name"),": "]})," ",e.name]}),Object(E.jsxs)("p",{children:[Object(E.jsxs)("strong",{children:[k.t("customerDetails.notes"),": "]})," ",e.notes]})]}),Object(E.jsxs)("div",{className:"bx--col",children:[Object(E.jsxs)("p",{children:[Object(E.jsxs)("strong",{children:[k.t("customerDetails.contactName"),": "]})," ",e.contactName]}),Object(E.jsxs)("p",{children:[Object(E.jsxs)("strong",{children:[k.t("customerDetails.contactPhone"),": "]})," ",e.contactPhone]}),Object(E.jsxs)("p",{children:[Object(E.jsxs)("strong",{children:[k.t("customerDetails.contactEmail"),": "]})," ",e.contactEmail]})]})]})})}),Object(E.jsx)(Mt,{serviceUrl:this.props.serviceUrl,customerId:e.id,locale:this.props.locale})]}):Object(E.jsxs)("p",{children:[k.t("userMessages.loading"),"..."]})}return Object(E.jsx)("p",{children:k.t("userMessages.unauthorized")})}}]),a}(l.a.Component)),$t=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){I(this.props)&&this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.setState({loading:!1})}},{key:"render",value:function(){var e=this,t=this.props.keycloak;return this.state.loading?null:R()?Object(E.jsxs)("div",{id:"entando-customer-portal",children:[Object(E.jsx)(jt,{keycloak:t,children:Object(E.jsx)(gt.b,{children:Object(E.jsxs)(Bt.c,{children:[Object(E.jsx)(Bt.a,{path:"**/customer-details/:id",render:function(t){return Object(E.jsx)(Qt,Object(o.a)(Object(o.a)({},t),{},{serviceUrl:e.props.serviceUrl,locale:e.props.locale}))}}),Object(E.jsx)(Bt.a,{path:"**/subscription-details/:id",render:function(t){return Object(E.jsx)(Wt,Object(o.a)(Object(o.a)({},t),{},{serviceUrl:e.props.serviceUrl,locale:e.props.locale}))}}),Object(E.jsx)(Bt.a,{path:"**/",render:function(t){return Object(E.jsx)(Vt,Object(o.a)(Object(o.a)({},t),{},{serviceUrl:e.props.serviceUrl,locale:e.props.locale}))}})]})})}),Object(E.jsx)(vt,{keycloak:t,children:Object(E.jsx)("p",{children:k.t("userMessages.unauthorized")})})]}):Object(E.jsx)("p",{children:k.t("userMessages.unauthorized")})}}]),a}(u.Component)),Xt=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Zt="locale",ea="service-url",ta=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=Xt(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Xt()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Xt()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(ea)||"",t=this.getAttribute(Zt)||"";x(t),h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)($t,{serviceUrl:e,locale:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("app-element",ta);var aa=a(47),na="api/portal-users",ra=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(na),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.next=4,J(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),sa=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_("".concat(t,"/").concat(na,"/username/").concat(a)),r=Object(o.a)(Object(o.a)({},Y()),{},{method:"GET"}),e.next=4,J(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ia=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="admin/realms/".concat(a,"/users"),r="".concat(t,"/").concat(n),s=Object(o.a)(Object(o.a)({},H()),{},{method:"GET"}),e.next=5,J(r,s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var ca=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).mapKeycloakUserEmails=function(e){var t=new Map;return e.forEach((function(e){return t.set(e.username,e.email)})),t},r.handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(j.a)({},a,n))},r.handleFormSubmit=function(e){e.preventDefault();var t=r.state,a=t.projectId,n=t.assignUser;r.handleFormValidation()&&r.assignUserToProject(a,n).then((function(e){201===e.status?(r.setState({submitMsg:k.t("submitMessages.updated"),submitColour:"#24a148"}),window.dispatchEvent(new CustomEvent("cp-user-assigned"))):r.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})}))},r.assignUserToProject=function(){var e=Object(b.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getPortalUserId({username:a,email:r.state.users.get(a)});case 2:return n=e.sent,e.next=5,ut(r.props.serviceUrl,t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.getPortalUserId=function(){var e=Object(b.a)(m.a.mark((function e(t){var a,n,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,sa(r.props.serviceUrl,t.username);case 4:n=e.sent,a=n.data.id,e.next=15;break;case 8:if(e.prev=8,e.t0=e.catch(1),!e.t0.message.toLowerCase().includes("not found")){e.next=15;break}return e.next=13,r.createPortalUser(t);case 13:s=e.sent,a=s.data.id;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),r.createPortalUser=function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra(r.props.serviceUrl,{username:t.username,email:t.email});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={project:null,projectId:"",assignUser:"",users:new Map,invalid:{},submitMsg:"",submitColour:"black"},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.keycloak;e.initialized&&e.authenticated&&this.fetchData(e.authServerUrl)}},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&this.fetchData(t.authServerUrl)}},{key:"fetchData",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var a,n,r,s,i,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.keycloak,e.t0=this,e.next=4,ia(t,a.realm);case 4:if(e.t1=e.sent.data,n=e.t0.mapKeycloakUserEmails.call(e.t0,e.t1),r=window.location.search,s=new URLSearchParams(r),i=s.get("project"),c=null,null==i){e.next=16;break}return e.next=13,st(this.props.serviceUrl,i);case 13:c=e.sent.data,e.next=17;break;case 16:i="";case 17:this.setState({projectId:i,project:c,users:n});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleFormValidation",value:function(){var e={},t=!0,a=this.state,n=a.projectId,r=a.assignUser;return""===n&&(t=!1,e.projectId=!0),""===r&&(t=!1,e.assignUser=!0),this.setState({invalid:e}),t}},{key:"setupFormComponents",value:function(){var e=this.state.users,t=this.state.project,a=null;return e.size>0?(a=Object(aa.a)(e.keys()).map((function(e,t){return Object(E.jsx)(pe.a,{text:e,value:e,children:e},t)}))).unshift(Object(E.jsx)(pe.a,{text:k.t("manageUsers.assign.userList"),value:""},"-1")):a=Object(E.jsx)(pe.a,{text:k.t("manageUsers.assign.noUsers"),value:""}),{userList:a,projectList:null!=t?Object(E.jsx)(pe.a,{text:t.name,value:t.id},t.id):Object(E.jsx)(pe.a,{text:k.t("manageUsers.assign.noProjects"),value:""})}}},{key:"render",value:function(){var e=this.setupFormComponents(),t=e.userList,a=e.projectList;return Object(E.jsxs)("div",{children:[Object(E.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),Object(E.jsx)(w.a,{onSubmit:this.handleFormSubmit,children:Object(E.jsxs)("div",{className:"bx--grid",children:[Object(E.jsx)("div",{className:"bx--row",children:Object(E.jsx)("div",{className:"bx--col",children:Object(E.jsx)(he.a,{id:"projectId",name:"projectId",labelText:k.t("manageUsers.assign.projectName"),value:this.state.projectId,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.projectId,children:a})})}),Object(E.jsx)("div",{className:"bx--row",children:Object(E.jsx)("div",{className:"bx--col",children:Object(E.jsx)(he.a,{id:"assignUser",name:"assignUser",labelText:k.t("manageUsers.assign.assignUser"),value:this.state.assignUser,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.assignUser,children:t})})}),Object(E.jsxs)(me.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",k.t("buttons.submit")," "]})]})})]})}}]),a}(u.Component)),oa=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},ua="service-url",la=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=oa(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},oa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},oa()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(ua)||"";h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(ca,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("assign-user-widget",la);var da=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleRemoveUser=function(e,t,a){a.preventDefault(),ht(r.props.serviceUrl,t,e).then((function(e){201===e.status?r.fetchData():console.warn("Failed to delete user",e)}))},r.state={users:[],displayUsers:[],projectId:""},r.headerData=[{header:k.t("manageUsers.delete.userName"),key:"username"},{header:k.t("manageUsers.delete.userEmail"),key:"email"},{header:k.t("manageUsers.delete.userAccess"),key:"userAccess"}],window.addEventListener("cp-user-assigned",(function(e){r.fetchData()})),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.keycloak;e.initialized&&e.authenticated&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&this.fetchData()}},{key:"fetchData",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,a,n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.keycloak,!(t.initialized&&t.authenticated)){e.next=13;break}if(a=window.location.search,n=new URLSearchParams(a),r=n.get("project"),s=[],null==r){e.next=11;break}return e.next=10,mt(this.props.serviceUrl,r);case 10:s=e.sent.data;case 11:this.setState({users:s,projectId:r}),this.handleUserDisplay();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleUserDisplay",value:function(){var e=this,t=this.state.users,a=this.state.projectId,n=t.map((function(t){return{id:t.username,username:t.username,email:t.email,userAccess:Object(E.jsx)(me.a,{kind:"ghost",onClick:function(n){return e.handleRemoveUser(t.id,a,n)},className:"button-warning",children:k.t("manageUsers.delete.removeUser")})}}));this.setState({displayUsers:n})}},{key:"render",value:function(){return Object(E.jsx)(ke.a,{rows:this.state.displayUsers,headers:this.headerData,children:function(e){var t=e.rows,a=e.headers,n=e.getHeaderProps,r=e.getTableProps;return Object(E.jsx)(ye.a,{children:Object(E.jsxs)(we.a,Object(o.a)(Object(o.a)({},r()),{},{children:[Object(E.jsx)(De.a,{children:Object(E.jsx)(Se.a,{children:a.map((function(e){return Object(E.jsx)(Ce.a,Object(o.a)(Object(o.a)({},n({header:e})),{},{children:e.header}))}))})}),Object(E.jsx)(Te.a,{children:t.map((function(e){return Object(E.jsx)(Se.a,{children:e.cells.map((function(e){return Object(E.jsx)(Pe.a,{children:e.value},e.id)}))},e.id)}))})]}))})}})}}]),a}(u.Component)),ha=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},pa="service-url",ma=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=ha(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},ha()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},ha()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(pa)||"";h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(da,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("delete-user-widget",ma);var ba=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleChanges=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(j.a)({},n,r))},e.handleFormSubmit=function(t){(t.preventDefault(),e.handleValidation())?G(e.state.project)?e.createTicket().then((function(){e.setState({submitMsg:k.t("submitMessages.created"),submitColour:"#24a148"})})).catch((function(){e.setState({submitMsg:k.t("submitMessages.ticketError"),submitColour:"#da1e28"})})):e.setState({submitMsg:k.t("submitMessages.subscriptionRequired"),submitColour:"#da1e28"}):e.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})},e.state={loading:!0,project:{},role:"",invalid:{},submitMsg:"",submitColour:"black",type:"Support",priority:"Medium",status:"To Do",summary:"",description:""},e.types=["Support","Feature Request"],e.priorities=["Critical","High","Medium","Low"],e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){I(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"fetchData",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R()){e.next=2;break}return e.abrupt("return");case 2:return t=window.location.search,a=new URLSearchParams(t),n=a.get("project"),e.next=7,st(this.props.serviceUrl,n);case 7:(r=e.sent.data)||(console.error("Unable to retrieve projectId ",n),r={}),this.setState({project:r,loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleValidation",value:function(){var e={},t=!0;return""===this.state.type&&(t=!1,e.type=!0),""===this.state.summary&&(t=!1,e.summary=!0),""===this.state.description&&(t=!1,e.description=!0),""===this.state.priority&&(t=!1,e.priority=!0),this.setState({invalid:e}),t}},{key:"createTicket",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R()){e.next=5;break}return t={type:this.state.type,summary:this.state.summary,description:this.state.description,priority:this.state.priority,systemId:"999",status:"To Do",createDate:"2021-02-22T14:14:09-05:00",updateDate:"2021-02-22T14:14:09-05:00"},e.next=4,Gt(this.props.serviceUrl,this.state.project.id,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?null:R()?Object(E.jsx)("div",{children:Object(E.jsxs)("div",{className:"form-container",children:[Object(E.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),Object(E.jsx)(w.a,{onSubmit:this.handleFormSubmit,children:Object(E.jsxs)("div",{className:"bx--grid",children:[Object(E.jsx)("div",{className:"bx--row",style:{padding:"1em 0"},children:Object(E.jsx)("div",{className:"bx--col",children:Object(E.jsxs)("div",{className:"form-desc",children:[Object(E.jsx)("h4",{children:k.t("supportTicketForm.formTitle")}),Object(E.jsx)("div",{children:k.t("supportTicketForm.desc")})]})})}),Object(E.jsx)("div",{className:"bx--row",children:Object(E.jsxs)("div",{className:"bx--col",children:[Object(E.jsxs)("div",{children:[Object(E.jsxs)("strong",{children:[k.t("projectDetails.project"),":"]})," ",this.state.project.name]}),Object(E.jsx)(he.a,{id:"type",name:"type",labelText:k.t("supportTicketForm.type")+" *",value:this.state.type,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.type,children:this.types.map((function(e,t){return Object(E.jsx)(pe.a,{text:e,value:e,children:e},t)}))}),Object(E.jsx)(he.a,{id:"priority",name:"priority",labelText:k.t("supportTicketForm.priority")+" *",value:this.state.priority,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.priority,children:this.priorities.map((function(e,t){return Object(E.jsx)(pe.a,{text:e,value:e,children:e},t)}))})]})}),Object(E.jsx)("div",{className:"bx--row",children:Object(E.jsx)("div",{className:"bx--col",children:Object(E.jsx)(D.a,{labelText:k.t("supportTicketForm.ticketSummary")+" *",placeholder:k.t("supportTicketForm.addticketSummary"),id:"summary",name:"summary",value:this.state.summary,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.summary})})}),Object(E.jsx)("div",{className:"bx--row",children:Object(E.jsxs)("div",{className:"bx--col",children:[Object(E.jsx)(S.a,{labelText:k.t("supportTicketForm.ticketDescription")+" *",placeholder:k.t("supportTicketForm.addticketDescription"),name:"description",value:this.state.description,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(E.jsxs)(me.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",k.t("buttons.submit")," "]})]})})]})})]})}):Object(E.jsx)("p",{children:k.t("userMessages.unauthorized")})}}]),a}(u.Component)),ja=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},va="locale",fa="service-url",Oa=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=ja(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},ja()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},ja()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(fa)||"",t=this.getAttribute(va)||"";x(t),h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(ba,{serviceUrl:e,locale:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("forms-openticket-widget",Oa);var ga=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleDeleteSubscription=function(e,t){e.preventDefault(),window.confirm(k.t("submitMessages.confirmDelete"))&&(console.log("confirmed to delete",t),r.deleteSubscription(t).then((function(){r.setState({submitMsg:k.t("submitMessages.deleted"),submitColour:"#24a148"}),r.fetchData()})).catch((function(){r.setState({submitMsg:k.t("submitMessages.error"),submitColour:"#da1e28"})})))},r.state={projectId:"",project:{},subscriptions:[]},r.headerData=[{header:k.t("projectDetails.id"),key:"id"},{header:k.t("subscriptionDetails.status"),key:"status"},{header:k.t("projectDetails.entandoVersion"),key:"entandoVersion"},{header:k.t("subscriptionDetails.level"),key:"level"},{header:k.t("subscriptionDetails.startDate"),key:"startDate"},{header:k.t("subscriptionDetails.endDate"),key:"endDate"},{header:k.t("subscriptionDetails.lengthInMonths"),key:"lengthInMonths"},{header:k.t("subscriptionDetails.notes"),key:"notes"},{header:k.t("customerDashboard.action"),key:"action"}],r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){I(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"fetchData",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,a,n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(this.props)){e.next=14;break}if(t=window.location.search,a=new URLSearchParams(t),n=a.get("project"),r={},s={},null==n){e.next=13;break}return e.next=9,st(this.props.serviceUrl,n);case 9:return r=e.sent.data,e.next=12,bt(this.props.serviceUrl,n);case 12:s=e.sent.data;case 13:this.setState({projectId:n,project:r,subscriptions:s});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteSubscription",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I(this.props)){e.next=4;break}return e.next=3,dt(this.props.serviceUrl,this.state.projectId,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(E.jsxs)("div",{children:[Object(E.jsx)("h5",{children:null!==this.state.project&&this.state.project.name}),Object(E.jsx)("a",{href:"/entando-de-app/".concat(this.props.locale,"/new_or_renew_subscription.page?project=").concat(this.state.projectId),style:{textDecoration:"none"},children:Object(E.jsx)(me.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Add Subscription",children:k.t("buttons.addSubscription")})}),Object(E.jsx)(ke.a,{rows:[{id:"1"}],headers:this.headerData,children:function(t){var a=t.headers,n=t.getHeaderProps,r=t.getTableProps;return Object(E.jsx)(ye.a,{children:Object(E.jsxs)(we.a,Object(o.a)(Object(o.a)({},r()),{},{children:[Object(E.jsx)(De.a,{children:Object(E.jsx)(Se.a,{children:a.map((function(e){return Object(E.jsx)(Ce.a,Object(o.a)(Object(o.a)({},n({header:e})),{},{children:e.header}))}))})}),Object(E.jsx)(Te.a,{children:0!==Object.keys(e.state.subscriptions).length&&e.state.subscriptions.map((function(t,a){return Object(E.jsxs)(Se.a,{children:[Object(E.jsx)(Pe.a,{children:t.id}),Object(E.jsx)(Pe.a,{children:t.status}),Object(E.jsx)(Pe.a,{children:t.entandoVersion.name}),Object(E.jsx)(Pe.a,{children:t.level}),Object(E.jsx)(Pe.a,{children:Ct(t.startDate)}),Object(E.jsx)(Pe.a,{children:Tt(t.startDate,t.lengthInMonths)}),Object(E.jsx)(Pe.a,{children:t.lengthInMonths}),Object(E.jsx)(Pe.a,{children:t.notes}),Object(E.jsxs)(Pe.a,{children:[Object(E.jsx)("a",{href:"/entando-de-app/".concat(e.props.locale,"/new_or_renew_subscription.page?project=").concat(e.state.projectId,"&subscription=").concat(t.id),style:{textDecoration:"none"},children:Object(E.jsx)(me.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Edit",children:k.t("buttons.edit")})}),Object(E.jsx)(me.a,{kind:"ghost",onClick:function(a){return e.handleDeleteSubscription(a,t.id)},className:"button-warning",children:k.t("buttons.delete")})]})]},a)}))})]}))})}})]})}}]),a}(u.Component)),xa=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},ka="locale",ya="service-url",wa=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=xa(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},xa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},xa()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(ya)||"",t=this.getAttribute(ka)||"";x(t),h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(ga,{serviceUrl:e,locale:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("manage-subscriptions-widget",wa);var Da=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0},r.userFunctionality=[{label:Object(E.jsxs)("div",{children:[Object(E.jsx)("p",{className:"title",children:k.t("manageUsers.manage.title")}),Object(E.jsx)("p",{className:"desc",children:k.t("manageUsers.manage.desc")})]}),content:Object(E.jsx)(da,{serviceUrl:r.props.serviceUrl}),open:!0},{label:Object(E.jsxs)("div",{children:[Object(E.jsx)("p",{className:"title",children:k.t("manageUsers.assign.title")}),Object(E.jsx)("p",{className:"desc",children:k.t("manageUsers.assign.desc")})]}),content:Object(E.jsx)(ca,{serviceUrl:r.props.serviceUrl}),open:!0}],r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.keycloak;e.initialized&&e.authenticated&&this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(e){var t=this.props.keycloak,a=t.initialized&&t.authenticated,n=e.keycloak.authenticated!==a;a&&n&&this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?null:A()?Object(E.jsxs)("div",{children:[Object(E.jsx)("h3",{className:"pageTitle",children:k.t("adminDashboard.adminTitle")}),Object(E.jsx)("div",{className:"form-container",children:Object(E.jsx)(le.a,{children:this.userFunctionality.map((function(e,t){return Object(E.jsx)(de.a,{index:t,title:e.label,description:e.description,open:e.open,children:e.content},t.toString())}))})})]}):Object(E.jsx)("p",{children:k.t("userMessages.unauthorized")})}}]),a}(u.Component)),Sa=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Ca="locale",Ta="service-url",Pa=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=Sa(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Sa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Sa()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Ta)||"",t=this.getAttribute(Ca)||"";x(t),h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(Da,{serviceUrl:e,locale:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("manage-user-widget",Pa);var Na=function(){return Object(E.jsxs)("ul",{id:"navigation",children:[Object(E.jsx)("li",{children:Object(E.jsx)(gt.d,{to:"/",children:"Home"})}),Object(E.jsx)("li",{children:Object(E.jsx)(gt.d,{to:"/subscription-details",children:"Subscription Details"})}),Object(E.jsx)("li",{children:Object(E.jsx)(gt.d,{to:"/subscription",children:"New or Renew Subscription"})}),Object(E.jsx)("li",{children:Object(E.jsx)(gt.d,{to:"/service-ticket",children:"Open Service Ticket"})}),Object(E.jsx)("li",{children:Object(E.jsx)(gt.d,{to:"/enhancement",children:"Request for Enhancement Process"})}),Object(E.jsx)("li",{children:Object(E.jsx)(gt.d,{to:"/manage-users",children:"Manage Users"})}),Object(E.jsx)("li",{children:Object(E.jsx)(gt.d,{to:"/configuration-settings",children:"Configuration Settings"})})]})},Ea=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Ua="service-url",Ma=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=Ea(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Ea()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Ea()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Ua)||"";h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(Na,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("navigation-widget",Ma);var Ia=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},za="locale",Aa="service-url",Va=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=Ia(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Ia()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Ia()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Aa)||"",t=this.getAttribute(za)||"";x(t),h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(ba,{serviceUrl:e,locale:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("open-ticket-widget",Va);var La=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Fa="service-url",qa=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=La(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},La()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},La()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Fa)||"";h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(Je,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("product-version-widget",qa);var Ra=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Ba="service-url",Ya=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=Ra(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Ra()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Ra()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Ba)||"";h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(Wt,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("subscription-widget",Ya);var Ha=a(53),Ga="new",_a="renewal",Ja="edit",Ka={GOLD:"GOLD",PLATINUM:"PLATINUM"},Wa={requested:"REQUESTED",pending:"PENDING",active:"ACTIVE",expired:"EXPIRED"},Qa=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(j.a)({},a,n)),r.setState({submitSuccess:!1,submitError:!1})},r.handleStartDateChange=function(e){var t="";e&&e[0]&&(t=Re()(e[0].toISOString()).format("MM/DD/YYYY")),r.setState({startDate:t})},r.handleFormSubmit=function(e){if(e.preventDefault(),r.setState({submitSuccess:!1,submitError:!1}),r.handleValidation()){var t=r.state.formType,a=r.props.serviceUrl,n=r.stateToSubscription();t===Ja?Et(a,n).then((function(){r.updateStateForSuccess(!0)})).catch((function(){r.updateStateForSuccess(!1)})):t===Ga?r.newSubscription(n).then((function(e){ot(a,r.state.projectId,e.data.id),r.updateStateForSuccess(!0)})).catch((function(){r.updateStateForSuccess(!1)})):t===_a?r.renewSubscription(n).then((function(e){ot(a,r.state.projectId,e.data.id),r.updateStateForSuccess(!0)})).catch((function(){r.updateStateForSuccess(!1)})):console.log("Illegal operation")}},r.state={loading:!0,project:{},projectId:"",subscription:{},startDate:"",level:"PLATINUM",lengthInMonths:"",notes:"",entandoVersionId:"",status:"",formType:"new",invalid:{},productVersions:[],submitSuccess:!1,submitError:!1,submitColour:"black"},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){I(this.props)&&(this.fetchData(),this.setState({loading:!1}))}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&(this.fetchData(),this.setState({loading:!1}))}},{key:"fetchData",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t,a,n,r,s,i,c,o,u,l,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R()){e.next=2;break}return e.abrupt("return");case 2:if(t=this.props.serviceUrl,a=window.location.search,n=new URLSearchParams(a),r=n.get("subscription"),s=n.get("project"),i={},c={},o=Ga,u="",l=A(),null===r){e.next=21;break}return e.next=15,Pt(t,r);case 15:i=e.sent.data,u=l?i.status:Wa.requested,o=l?Ja:_a,c=i.project,e.next=30;break;case 21:if(null===s){e.next=28;break}return e.next=24,st(t,s);case 24:c=e.sent.data,u=l?Wa.pending:Wa.requested,e.next=30;break;case 28:return console.log("Unable to load project and/or subscription"),e.abrupt("return");case 30:return e.next=32,Ue(t);case 32:d=e.sent.data,this.setState({subscription:i,level:i.level?i.level:"",entandoVersionId:i.entandoVersion?i.entandoVersion.id:"",startDate:(h=i.startDate,Re()(h).format("MM/DD/YYYY")),lengthInMonths:i.lengthInMonths?i.lengthInMonths:"",notes:i.ntes?i.notes:"",status:u,formType:o,project:c,projectId:s,productVersions:d});case 34:case"end":return e.stop()}var h}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isNumeric",value:function(e){return!isNaN(e)&&!isNaN(parseInt(e))}},{key:"handleValidation",value:function(){var e={};return this.state.startDate&&this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(e.startDate=!0),this.state.lengthInMonths&&this.isNumeric(this.state.lengthInMonths)||(e.lengthInMonths=!0),this.state.level||(e.level=!0),""===this.state.entandoVersionId&&(e.entandoVersionId=!0),this.setState({invalid:e}),0===Object.keys(e).length}},{key:"updateStateForSuccess",value:function(e){e?this.setState({submitSuccess:!0,submitError:!1,submitColour:"#24a148"}):this.setState({submitSuccess:!1,submitError:!0,submitColour:"#da1e28"})}},{key:"stateToSubscription",value:function(){return{entandoVersionId:this.state.entandoVersionId,projectId:this.state.projectId,renewal:this.state.formType===_a,projectSubscription:{id:this.state.subscription.id,startDate:new Date(this.state.startDate),lengthInMonths:this.state.lengthInMonths,level:this.state.level,status:this.state.status.toUpperCase(),notes:this.state.notes}}}},{key:"newSubscription",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt(this.props.serviceUrl,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renewSubscription",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(this.props.serviceUrl,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupFormComponents",value:function(){var e=Object.entries(Ka).map((function(e){var t=Object(Ha.a)(e,2),a=t[0],n=t[1];return Object(E.jsx)(pe.a,{text:n,value:a,children:n},a)}));e.unshift(Object(E.jsx)(pe.a,{text:k.t("subscriptionForm.chooseLevel"),value:""},"-1"));var t=this.state.productVersions.map((function(e){return e.status?Object(E.jsx)(pe.a,{text:e.name,value:e.id,children:e.name},e.id):null}));return t.unshift(Object(E.jsx)(pe.a,{text:k.t("subscriptionForm.chooseVersion"),value:""},"-1")),{subscriptionLevelList:e,versionList:t,statusList:Object.entries(Wa).map((function(e){var t=Object(Ha.a)(e,2),a=t[0],n=t[1];return Object(E.jsx)(pe.a,{text:n,value:n,children:n},a)}))}}},{key:"renderForm",value:function(){var e=this.setupFormComponents(),t=e.subscriptionLevelList,a=e.versionList,n=e.statusList;return Object(E.jsx)("div",{children:Object(E.jsxs)("div",{className:"bx--row",children:[Object(E.jsxs)("div",{className:"bx--col",children:[Object(E.jsxs)("div",{children:[Object(E.jsxs)("span",{children:[k.t("subscriptionForm.projectName"),":"]})," ",this.state.project.name]}),Object(E.jsx)(he.a,{id:"status",name:"status",labelText:k.t("subscriptionForm.subscriptionStatus"),value:this.state.status,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.status,disabled:!A(),children:n}),Object(E.jsx)(he.a,{id:"level",name:"level",labelText:k.t("subscriptionForm.subscriptionLevel")+" *",value:this.state.level||"",onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.level,children:t}),Object(E.jsx)(he.a,{id:"entandoVersionId",name:"entandoVersionId",labelText:k.t("subscriptionForm.entandoVersion")+" *",value:this.state.entandoVersionId,onChange:this.handleChanges,invalidText:k.t("validation.invalid.required"),invalid:this.state.invalid.entandoVersionId,children:a})]}),Object(E.jsxs)("div",{className:"bx--col",children:[Object(E.jsx)(Le.a,{dateFormat:"m/d/Y",datePickerType:"single",value:this.state.startDate,onChange:this.handleStartDateChange,children:Object(E.jsx)(Fe.a,{id:"startDate",name:"startDate",placeholder:"mm/dd/yyyy",labelText:k.t("subscriptionForm.subscriptionStartDate"),type:"text",invalidText:k.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(E.jsx)(D.a,{id:"lengthInMonths",name:"lengthInMonths",labelText:k.t("subscriptionForm.subscriptionLength")+" *",value:this.state.lengthInMonths,onChange:this.handleChanges,invalidText:k.t("validation.invalid.number"),invalid:this.state.invalid.lengthInMonths}),A()&&Object(E.jsx)(S.a,{id:"notes",name:"notes",labelText:k.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})]})})}},{key:"successErrorMessage",value:function(){var e=A(),t=this.state,a=t.subscriptionType,n=t.submitSuccess,r=t.submitError;if("new"===a){if(n)return e?this.createFormMessage("adminSubmitNewSuccess"):this.createFormMessage("customerSubmitSuccess");if(r)return this.createFormMessage("newSubError")}else{if(n)return e?this.createFormMessage("adminRenewNewSuccess"):this.createFormMessage("customerSubmitSuccess");if(r)return this.createFormMessage("renewSubError")}}},{key:"createFormMessage",value:function(e){return Object(E.jsx)("p",{style:{color:this.state.submitColour},children:k.t("subscriptionForm.".concat(e))})}},{key:"render",value:function(){var e=A()?"subscriptionForm.adminTitle":"subscriptionForm.formTitle",t="subscriptionForm.newSubscription";return"new"!==this.state.formType&&(t=A()?"subscriptionForm.editSubscription":"subscriptionForm.renewSubscription"),this.state.loading?null:R()?Object(E.jsxs)("div",{children:[Object(E.jsx)("h3",{className:"pageTitle",children:k.t(e)}),Object(E.jsxs)("div",{className:"form-container",children:[this.successErrorMessage(),Object(E.jsx)(w.a,{onSubmit:this.handleFormSubmit,children:Object(E.jsxs)("div",{className:"bx--grid",children:[Object(E.jsx)("div",{className:"bx--row",children:Object(E.jsx)("div",{className:"bx--col",children:Object(E.jsx)("strong",{children:k.t(t)})})}),this.renderForm(),Object(E.jsxs)(me.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",k.t("buttons.submit")]})]})})]})]}):Object(E.jsx)("p",{children:k.t("userMessages.unauthorized")})}}]),a}(u.Component)),$a=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Xa="locale",Za="service-url",en=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=$a(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},$a()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},$a()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Za)||"",t=this.getAttribute(Xa)||"";x(t),h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(Qa,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("subscription-form-widget",en);var tn=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},an="service-url",nn=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=tn(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},tn()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},tn()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(an)||"";h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(_t,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("ticket-list-widget",nn);var rn=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},sn="service-url",cn=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=rn(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},rn()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},rn()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(sn)||"";h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(xe,{serviceUrl:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("ticketing-system-widget",cn);var on=U(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){I(this.props)&&this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.setState({loading:!1})}},{key:"logout",value:function(){window.entando.keycloak.logout()}},{key:"render",value:function(){return this.state.loading?null:Object(E.jsx)("div",{children:Object(E.jsxs)(gt.a,{forceRefresh:!0,children:[Object(E.jsx)("div",{children:Object(E.jsxs)("ul",{children:[Object(E.jsx)("li",{children:Object(E.jsx)(gt.c,{to:"/",children:"Home"})}),A()&&Object(E.jsx)("li",{children:Object(E.jsx)(gt.c,{to:"/entando-de-app/en/admin.page",children:"Admin"})}),Object(E.jsx)("li",{children:Object(E.jsx)("a",{href:"/",onClick:this.logout,children:"Logout"})})]})}),Object(E.jsxs)(Bt.c,{children:[Object(E.jsx)(Bt.a,{path:"/entando-de-app/en/admin.page",children:Object(E.jsx)(Ke,{serviceUrl:this.props.serviceUrl,locale:this.props.locale})}),Object(E.jsx)(Bt.a,{path:"/entando-de-app/en/manage_subscriptions.page",children:Object(E.jsx)(ga,{serviceUrl:this.props.serviceUrl,locale:this.props.locale})}),Object(E.jsx)(Bt.a,{path:"/entando-de-app/en/manage_users.page",children:Object(E.jsx)(Da,{serviceUrl:this.props.serviceUrl,locale:this.props.locale})}),Object(E.jsx)(Bt.a,{path:"/entando-de-app/en/new_or_renew_subscription.page",children:Object(E.jsx)(Qa,{serviceUrl:this.props.serviceUrl,locale:this.props.locale})}),Object(E.jsx)(Bt.a,{path:"/entando-de-app/en/open_service_ticket.page",children:Object(E.jsx)(ba,{serviceUrl:this.props.serviceUrl,locale:this.props.locale})}),Object(E.jsx)(Bt.a,{path:"/",exact:!0,children:Object(E.jsx)($t,{serviceUrl:this.props.serviceUrl,locale:this.props.locale})})]})]})})}}]),a}(u.Component)),un=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},ln="locale",dn="service-url",hn=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=un(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},un()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ne(re,(function(){e.keycloak=Object(o.a)(Object(o.a)({},un()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(dn)||"",t=this.getAttribute(ln)||"";x(t),h.a.render(Object(E.jsx)(N.Provider,{value:this.keycloak,children:Object(E.jsx)(on,{serviceUrl:e,locale:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("local-app-element",hn)},23:function(e,t,a){},77:function(e){e.exports=JSON.parse('{"roles":{"admin":"Admin","customer":"Customer","partner":"Partner","support":"Support"},"buttons":{"addCustomer":"Add a Customer +","addPartner":"Add a Partner +","addProject":"Add a Project +","addProductVersion":"Add product version +","addSubscription":"Add a Subscription","cancel":"Cancel","delete":"Delete","edit":"Edit","managePartners":"Manage Partners","manageSubscriptions":"Manage Subscriptions","manageUsers":"Manage Users","openTicket":"Open Ticket","save":"Save","submit":"Submit","subscriptionRequest":"Subscription Request","view":"View","viewAllTickets":"View All Tickets","viewTickets":"View Tickets","viewDetails":"View Details"},"customerDashboard":{"title":"Welcome to Entando Customer Portal","customerName":"Customer Name","customerId":"Customer Id","startDate":"Start Date","endDate":"End Date","projectName":"Project Name","partnerName":"Partner Name","entandoVersion":"Entando Version","openTickets":"Open Tickets","subscriptions":"Subscriptions","tableDesc":"In this table there are open subscriptions","partners":"Partners","status":"Status","action":"Action"},"adminDashboard":{"title":"Welcome to Entando","adminTitle":"Welcome to Entando Admin View","customerTitle":"Welcome to Entando Customer View","partnerTitle":"Welcome to Entando Partner View","supportTitle":"Welcome to Entando Support View","allCustomers":"All Customers","searchLabel":"Customer Search","searchText":"Which customer are you looking for?","view":"View","addProject":{"title":"Add a Project","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","customerList":"Customer List","selectCustomer":"Select Customer","projectName":"Project Name","projectDesc":"Project Description","systemId":"System Id","contactName":"Contact Name","contactPhone":"Contact Phone","contactEmail":"Contact Email","notes":"Notes","editTitle":"Edit Project"},"addCustomer":{"title":"Add a Customer","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","customerName":"Customer Name","customerNumber":"Customer Number","contactName":"Contact Name","contactPhone":"Contact Phone","contactEmail":"Contact Email","notes":"Notes"},"addPartner":{"title":"Add a Partner","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","projectList":"Project List","selectProject":"Select Project","partnerName":"Partner Name","partnerNumber":"Partner Number","notes":"Notes"},"addProductVersion":{"title":"Add a new product version","productVersion":"Product Version","productVersionStartDate":"Product Version Start Date","productVersionEndDate":"Product Version End Date"},"editCustomer":{"title":"Edit Customer","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis."},"managePartners":{"title":"Manage Partners"}},"projectDetails":{"description":"Description:","type":"Type:","quantityRequest":"Quantity Request:","components":"Components","id":"ID","status":"Status","level":"Level","startDate":"Start Date","endDate":"End Date","lengthInMonths":"Length (months)","license":"License","listOfTickets":"List of Tickets","tickets":"Tickets","project":"Project","entandoVersion":"Entando Version","creationDate":"Creation Date","goToTicket":"Go to Ticket"},"ticketDetails":{"listOfTickets":"List of Tickets","tickets":"Tickets","issue":"Issue","project":"Project","summary":"Summary","description":"Description","type":"Type","status":"Status","created":"Created","link":"Link","priority":"Priority","updated":"Updated","viewTicket":"View Ticket"},"supportTicketForm":{"title":"Entando Admin View","formTitle":"Create new support ticket","desc":"Create a support ticket for an existing project.","select":"Select","type":"Type","selectProject":"Select Project","ticketNumber":"Ticket Number","customerName":"Customer Name","projectName":"ProjectName","ticketOpenedBy":"Ticket Opened By:","priority":"Priority","partnerName":"Partner Name","ticketSummary":"Ticket Summary","addticketSummary":"Add Ticket Summary","ticketDescription":"Ticket Description","addticketDescription":"Add Ticket Description"},"enhancementForm":{"title":"Welcome to Entando Customer Portal","formTitle":"Request for Enhancement","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","customerName":"Customer Name","ticketNumber":"Ticket Number","projectName":"ProjectName","ticketOpenedBy":"Ticket Opened By:","partnerName":"Partner Name","priority":"Priority","enhancementDescription":"Enhancement Description","addenhancementDescription":"Add Enhancement Description"},"customerDetails":{"id":"Customer Id","name":"Customer Name","contactName":"Contact Name","contactPhone":"Contact Phone","contactEmail":"Contact Email","notes":"Notes"},"subscriptionDetails":{"description":"Description","commitment":"Commitment","partners":"Partners","type":"Type","status":"Status","level":"Level","startDate":"Start Date","endDate":"End Date","license":"License","lengthInMonths":"Length In Months","notes":"Notes","assignedUsers":"Assigned Users"},"subscriptionForm":{"adminTitle":"Admin Subscription Form","formTitle":"Subscription Request","subscriptionType":"Subscription Type *","editSubscription":"Edit Subscription","newSubscription":"New Subscription","renewSubscription":"Renew Subscription","selectType":"Select Subscription Type","chooseLevel":"Choose a level","customerName":"Customer Name *","customerNumber":"Customer Number *","customerEmail":"Customer Email*","projectName":"Project Name*","subscriptionStartDate":"Subscription Start Date *","subscriptionStatus":"Subscription Status *","subscriptionLevel":"Subscription Level","subscriptionLength":"Subscription Length (months)","contactName":"Contact Name *","contactEmail":"Contact Email *","contactNumber":"Contact Phone Number","chooseVersion":"Choose Entando version","entandoVersion":"Entando Version","adminSubmitNewSuccess":"Successfully added a project subscription.","adminRenewNewSuccess":"Successfully renewed the latest project subscription.","customerSubmitSuccess":"You will be contacted by an Entando Sales representative to finalize the subscription.","newSubError":"Error in adding a project subscription.","renewSubError":"Error in renewing a project subscription."},"modalText":{"cancel":"Cancel","done":"Done","save":"Save"},"adminConfig":{"title":"Entando Admin View","formTitle":"All Customers","desc":"Configure the Ticketing System and Entando Versions below.","integrationTicketingSystem":{"title":"Integration with Ticketing System","desc":"This allows you to manage the ticketing system","selectBackendTicketingSystem":"Select Backend Ticketing System","select":"Select","url":"URL","userName":"User Name","password":"Password","projectName":"Project Name"},"manageProductVersion":{"title":"Manage Product Version","desc":"Manage the Entando Product Versions","entandoVersion":"Entando Version","status":"Status *","startDate":"Start Date","supportEndDate":"Support End Date"}},"manageUsers":{"title":"Entando Admin View","assign":{"title":"Assign a new User","desc":"Assign a user to an existing project.","projectName":"Project Name","assignUser":"Assign User","selectRole":"Select Role","projectList":"Projects List","userList":"Users List","noUsers":"There are currently no users in the system","noProjects":"There are currently no projects in the system"},"manage":{"title":"Manage all Users","desc":"View and delete existing users."},"delete":{"desc":"View and delete existing users","userName":"User Name","userEmail":"User Email","dateAdded":"Date Added","userAccess":"User Access","removeUser":"Remove User"}},"editSubscription":{"title":"Edit Subscription","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","description":"Description","commitment":"Commitment","type":"Type","quantityRequest":"QuantityRequest","components":"Components","level":"Level"},"validation":{"invalid":{"required":"This field is required.","email":"Email is not valid.","date":"Please enter a date in \'mm/dd/yyyy\' format.","number":"This field must be a number."}},"submitMessages":{"subscriptionRequired":"A subscription is required to create tickets for this project","created":"Successfully created","updated":"Successfully updated","added":"Successfully added","confirmDelete":"Are you sure you want to delete this item?","deleted":"Successfully deleted","error":"An error occurred","ticketError":"An error occurred. Make sure this project has a corresponding organization in Jira."},"userMessages":{"unauthorized":"Unauthorized","loading":"Loading","none":"None"}}')},78:function(e){e.exports=JSON.parse('{"roles":{"admin":"Amministratore","customer":"Cliente","partner":"Socio","support":"Supporto"},"buttons":{"addCustomer":"Aggiungi un cliente +","addPartner":"Aggiungi un partner +","addProject":"Aggiungi un progetto +","addSubscription":"Aggiungi un abbonamento","addProductVersion":"Aggiungi la versione del prodotto +","cancel":"Annulla","delete":"Elimina","edit":"Modificare","managePartners":"Gestire i partner","manageSubscriptions":"Gestisci le iscrizioni","manageUsers":"Gestisci utenti","openTicket":"Apri un ticket","save":"Salva","submit":"Invia","subscriptionRequest":"Richiesta di abbonamento","view":"Visualizza","viewAllTickets":"Visualizza tutti i biglietti","viewTickets":"Visualizzare i biglietti","viewDetails":"Visualizza dettagli"},"customerDashboard":{"title":"Benvenuto nel Portale Clienti Entando","customerName":"Nome del cliente","customerId":"Identificativo del cliente","startDate":"Data d\'inizio","endDate":"Data di fine","projectName":"Nome del progetto","partnerName":"Nome partner","entandoVersion":"Versione Entando","openTickets":"Biglietti aperti","subscriptions":"Abbonamenti","tableDesc":"In questa tabella ci sono iscrizioni aperte","partners":"Partner","status":"Stato","action":"Azione"},"adminDashboard":{"title":"Benvenuti a Entando","adminTitle":"Benvenuti a Entando Visualizza dell\'Amministratore","customerTitle":"Benvenuti a Entando Visualizza del Cliente","partnerTitle":"Benvenuti a Entando Visualizza del Socio","supportTitle":"Benvenuti a Entando Visualizza del Supporto","allCustomers":"Tutti i clienti","searchLabel":"Ricerca dei clienti","searchText":"Quale cliente stai cercando?","view":"Visualizza","addProject":{"title":"Aggiungi un progetto","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","customerList":"Elenco clienti","selectCustomer":"Seleziona cliente","projectName":"Nome del progetto","projectDesc":"descrizione del progetto","systemId":"ID sistema","contactName":"Nome del contatto","contactPhone":"Contatto telefonico","contactEmail":"Contatto email","notes":"Appunti","editTitle":"Modifica progetto"},"addCustomer":{"title":"Aggiungi un cliente","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","customerName":"Nome del cliente","customerNumber":"Numero cliente","contactName":"Nome del contatto","contactPhone":"Contatto telefonico","contactEmail":"Contatto email","notes":"Appunti"},"addPartner":{"title":"Aggiungi un partner","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","projectList":"Elenco progetti","selectProject":"Seleziona Progetto","partnerName":"Nome partner","partnerNumber":"Numero partner","notes":"Appunti"},"addProductVersion":{"title":"Aggiungi una nuova versione del prodotto","productVersion":"Versione del prodotto","productVersionStartDate":"Data di inizio della versione del prodotto","productVersionEndDate":"Data di fine della versione del prodotto"},"editCustomer":{"title":"Modifica cliente","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis."},"managePartners":{"title":"Gestire i partner"}},"supportTicketForm":{"title":"Entando Visualizza dell\'Amministratore","formTitle":"Creare un nuovo biglietto di supporto","desc":"Creare un nuovo biglietto di supporto per un progetto esistente.","select":"Seleziona","type":"Genere","selectProject":"Seleziona progetto","ticketNumber":"Ticket Number","customerName":"Customer Name","projectName":"ProjectName","ticketOpenedBy":"Ticket Opened By:","priority":"Priorit\xe0","partnerName":"Partner Name","ticketSummary":"Riepiliogo del biglietto","addticketSummary":"Aggiungi il riepilogo del biglietto","ticketDescription":"Descrizione del biglietto","addticketDescription":"Aggiungi una descrizione del biglietto"},"customerDetails":{"id":"Identificativo del cliente","name":"Nome del cliente","contactName":"Nome del contatto","contactPhone":"Contatto telefonico","contactEmail":"Contatto email","notes":"Appunti"},"subscriptionDetails":{"description":"Descrizione","commitment":"Impegno","partners":"Socio","type":"Genere","status":"Stato","level":"Livello","startDate":"Data d\'inizio","endDate":"Data di fine","license":"Licenza","lengthInMonths":"Durata in mesi","notes":"Appunti","assignedUsers":"Utenti assegnati"},"projectDetails":{"description":"Description","type":"Type","quantityRequest":"Quantity Request:","components":"Components","id":"ID","status":"Stato","level":"Level","startDate":"Start Date","endDate":"End Date","lengthInMonths":"Length (months)","license":"License","listOfTickets":"List of Tickets","tickets":"Tickets","project":"Project","entandoVersion":"Entando Version","creationDate":"Creation Date","goToTicket":"Go to Ticket"},"ticketDetails":{"listOfTickets":"Elenco dei biglietti","tickets":"Biglietti","issue":"Problema","project":"Progetto","summary":"Sommario","description":"Descrizione","type":"Genere","status":"Stato","created":"Creato","updated":"Aggiornato","link":"Collegamento","viewTicket":"visualizza il biglietto"},"subscriptionForm":{"adminTitle":"Entando Visualizza dell\'Amministratore","formTitle":"Nuovo o rinnova abbonamento","customerType":"Tipo di cliente *","subscriptionType":"Genere di abbonamento *","newSubscription":"Nuovo abbonamento","renewSubscription":"Rinnova l\'abbonamento","selectType":"Seleziona il tipo di cliente","chooseOption":"Scegliere un\'opzione","customerName":"Nome del cliente *","customerNumber":"Numero cliente *","customerEmail":"Email del cliente *","projectName":"Nome del progetto *","subscriptionStartDate":"Data di inizio dell\'abbonamento *","subscriptionStatus":"Stato dell\'abbonamento","subscriptionLevel":"Livello di abbonamento","subscriptionLength":"Durata dell\'abbonamento","contactName":"Nome del contatto *","contactEmail":"Contatto email *","contactNumber":"numero di contatto telefonico"},"editSubscription":{"title":"Modifica abbonamento","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","description":"Descrizione","commitment":"Impegno","type":"genere","quantityRequest":"Quantit\xe0Richiesta","components":"Componenti","level":"Livello"},"adminConfig":{"title":"Entando Visualizza dell\'Amministratore","formTitle":"Tutti i clienti","desc":"Configura il sistema di biglietteria e la versione di Entando di seguito.","integrationTicketingSystem":{"title":"Integrazione con il sistema di biglietteria","desc":"Questo ti permette di gestire il sistema di biglietteria","selectBackendTicketingSystem":"Seleziona Backend Ticketing System","select":"Selezionare","url":"URL","userName":"Nome utente","password":"Parola d\'ordine","projectName":"Nome del progetto"},"manageProductVersion":{"title":"Gestisci versione prodotto","desc":"Ci\xf2 consente di gestire le versioni del prodotto Entando","entandoVersion":"Versione Entando","status":"Stato *","startDate":"data d\'inizio","supportEndDate":"Data di fine del supporto"}},"modalText":{"cancel":"Annulla","done":"Finito","save":"Salva"},"manageUsers":{"title":"Entando Visualizza dell\'Amministratore","assign":{"title":"Assegna un nuovo utente","desc":"Assegnare un utente a un progetto esistente.","projectName":"Nome del progetto","projectList":"Elenco dei progetti","userList":"Elenco degli utenti","assignUser":"Assegna utente","selectRole":"Seleziona ruolo"},"manage":{"title":"Gestisci tutti gli utenti","desc":"Visualizzare ed eliminare gli utenti esistenti."},"delete":{"desc":"View and delete existing users","userName":"Nome atente","userEmail":"Email dell\'utente","dateAdded":"Data aggiunta","userAccess":"Accesso utente","removeUser":"Rimuovere l\'utente"}},"validation":{"invalid":{"required":"Questo campo \xe8 obbligatorio.","email":"L\'email non \xe8 valida.","date":"Inserisci una data nel formato \'mm / gg / aaaa\'.","number":"Questo campo deve essere un numero."}},"submitMessages":{"subscriptionRequired":"A subscription is required to create tickets for this project","created":"Creato con successo","updated":"Aggiornato con successo","added":"Aggiunto con successo","confirmDelete":"Sei sicuro di voler eliminare questo articolo?","deleted":"Cancellato con successo","error":"Si \xe8 verificato un errore","ticketError":"Si \xe8 verificato un errore. Assicurarsi che questo progetto abbia un\'organizzazione corrispondente a Jira."},"userMessages":{"unauthorized":"Non autorizzato","loading":"Caricamento in corso","none":"Nessuna"}}')}},[[102,1,2]]]);
//# sourceMappingURL=main.490fc7fc.chunk.js.map