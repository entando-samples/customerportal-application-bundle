(this["webpackJsonpcp-widgets"]=this["webpackJsonpcp-widgets"]||[]).push([[0],{110:function(e,t,a){"use strict";a.r(t);a(41);var n=a(8),r=a(9),s=a(10),i=a(11),c=a(36),o=a(5),u=a(0),l=a.n(u),d=a(30),p=a.n(d),h=a(4),m=a.n(h),b=a(15),j=a(6),v=a(46),f=a.n(v),g=a(80),O=a(81);f.a.defaultLocale="en",f.a.locale="en",f.a.fallbacks=!0,f.a.translations={en:g,it:O};var x=function(e){f.a.locale=e},y=f.a,k=a(133),C=a(111),S=a(134),D=a(121),T=a(122),w=a(123),N=a(139),P=a(40),E=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_KEYCLOAK_CLIENT_ID:"web_app",REACT_APP_KEYCLOAK_REALM:"jhipster",REACT_APP_KEYCLOAK_URL:"http://localhost:9080/auth",REACT_APP_SERVICE_URL:"http://localhost:8081/services/custportApp"}).REACT_APP_PATH,"customer_portal.page"),M="cp_admin_config.page",I={TICKET_TYPE:"TICKET_TYPE",SUBSCRIPTION_LEVEL:"SUBSCRIPTION_LEVEL",PRODUCT_NAME:"PRODUCT_NAME",JIRA_CUSTOM_FIELD:"JIRA_CUSTOM_FIELD"};Object.freeze(I);var L=2e3,U=3,V=100,A=function(){return window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""},F=function(e){var t=e.keycloak;return t.initialized&&t.authenticated},z=function(e,t){var a=F(e),n=t.keycloak.authenticated!==a;return a&&n},R=function(){return Y("cp-admin")},q=function(){return Y("cp-support")},H=function(){return Y("cp-partner")},J=function(){return Y("cp-customer")},B=function(){return R()||q()},_=function(){return B()||J()||H()},Y=function(e){if(A()){var t=window.entando.keycloak.resourceAccess;if(t)for(var a in t){var n=t[a];if(n.roles&&n.roles.includes(e))return!0}}return!1},G=function(){return{headers:new Headers({Authorization:"Bearer ".concat(A()),"Content-Type":"application/json"})}},K=function(){return{headers:new Headers({Authorization:"Bearer ".concat(A()),"Content-Type":"application/x-www-form-urlencoded"})}},W=function(e){return e&&e.projectSubscriptions&&e.projectSubscriptions.find((function(e){return"ACTIVE"===e.status?e:null}))},Z=function(e){var t=e.indexOf("cmsresources"),a={appContext:"/"};t>0&&(a.appContext=e.substring(0,t)),window.entando=Object(o.a)(Object(o.a)({},window.entando||{}),{},{cp:a})},Q=function(e,t){var a=window.entando.cp.appContext,n="".concat(a).concat(t,"/").concat(e);return $(n)},$=function(e){return"".concat(e)},X=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,a);case 2:if(n=e.sent,r=Object(o.a)({},n.headers.has("X-Total-Count")?{"X-Total-Count":parseInt(n.headers.get("X-Total-Count"),10)}:{}),204!==n.status){e.next=6;break}return e.abrupt("return",{data:"",status:n.status});case 6:if(!(n.status>=200&&n.status<300)){e.next=15;break}return e.next=9,n.json();case 9:e.t1=e.sent,e.t2=r,e.t3=n.status,e.t0={data:e.t1,headers:e.t2,status:e.t3},e.next=16;break;case 15:e.t0=Promise.reject(new Error(n.statusText||n.status));case 16:return e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ee="api/ticketing-systems",te=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(ee,"/").concat(a),r=Object(o.a)(Object(o.a)({},G()),{},{method:"DELETE"}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ae=function(){var e=Object(j.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=window.entando.currentTicketingSystem){e.next=5;break}return e.next=3,ne(t);case 3:a=e.sent.data,window.entando.currentTicketingSystem=a&&a.length?a[a.length-1]:null;case 5:return e.abrupt("return",window.entando.currentTicketingSystem);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(j.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"/").concat(ee),n=Object(o.a)(Object(o.a)({},G()),{},{method:"GET"}),e.abrupt("return",X(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(j.a)(m.a.mark((function e(t,a,n){var r,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(ee),s={ticketingSystem:a,secret:n},i=Object(o.a)(Object(o.a)({},G()),{},{method:"POST",body:JSON.stringify(s)}),e.abrupt("return",X(r,i));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),se=function(){var e=Object(j.a)(m.a.mark((function e(t,a,n){var r,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(ee),s={ticketingSystem:a,secret:n},i=Object(o.a)(Object(o.a)({},G()),{},{method:"PUT",body:JSON.stringify(s)}),e.abrupt("return",X(r,i));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ie=a(86),ce=a(2),oe=a.n(ce),ue=(oe.a.oneOfType([oe.a.func,oe.a.shape({current:oe.a.elementType}),oe.a.shape(null)]),l.a.createContext(null)),le=a(3);function de(e){var t=function(t){Object(s.a)(c,t);var a=Object(i.a)(c);function c(){var t;Object(n.a)(this,c);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(t=a.call.apply(a,[this].concat(s))).renderWrappedComponent=function(a){var n=t.props,r=n.forwardedRef,s=Object(ie.a)(n,["forwardedRef"]);return Object(le.jsx)(e,Object(o.a)(Object(o.a)({},s),{},{ref:r,keycloak:a}))},t}return Object(r.a)(c,[{key:"render",value:function(){return Object(le.jsx)(ue.Consumer,{children:this.renderWrappedComponent})}}]),c}(u.Component);return t.defaultProps={forwardedRef:function(){}},Object(u.forwardRef)((function(e,a){return Object(le.jsx)(t,Object(o.a)(Object(o.a)({},e),{},{forwardedRef:a}))}))}var pe=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(b.a)({},a,n))},r.handleFormSubmit=function(e){e.preventDefault(),r.state.ticketingSystem?r.updateTicketingSystem().then((function(){r.setState({submitMsg:y.t("submitMessages.updated"),submitColour:"#24a148"})})).catch((function(){r.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})})):r.createTicketingSystem().then((function(){r.setState({submitMsg:y.t("submitMessages.created"),submitColour:"#24a148"})})).catch((function(){r.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})}))},r.state={ticketingSystem:{},ticketingSystemType:"Jira",url:"",serviceAccount:"",serviceAccountSecret:"",systemId:"",submitMsg:"",submitColour:"black"},r}return Object(r.a)(a,[{key:"createTicketingSystem",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:this.state.url,serviceAccount:this.state.serviceAccount,systemId:this.state.systemId},e.next=3,re(this.props.serviceUrl,t,this.state.serviceAccountSecret);case 3:a=e.sent.data,this.setState({ticketingSystem:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateTicketingSystem",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:this.state.ticketingSystem.id,url:this.state.url,serviceAccount:this.state.serviceAccount,systemId:this.state.systemId},e.next=3,se(this.props.serviceUrl,t,this.state.serviceAccountSecret);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(this.props.serviceUrl);case 2:t=e.sent,this.setState({ticketingSystem:t,url:t?t.url:"",serviceAccount:t?t.serviceAccount:"",systemId:t?t.systemId:""});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){F(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"deleteTicketingSystem",value:function(){var e=Object(j.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(this.props.serviceUrl,this.state.ticketingSystem.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=this;window.confirm("Are you sure you want to delete this ticketing system?")&&this.deleteTicketingSystem().then((function(){e.setState({submitMsg:y.t("submitMessages.deleted"),submitColour:"#24a148"}),e.fetchData()})).catch((function(){e.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})}))}},{key:"render",value:function(){var e=this;return R()?Object(le.jsxs)("div",{className:"cp-form",children:[Object(le.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),Object(le.jsx)(D.a,{onSubmit:this.handleFormSubmit,children:Object(le.jsxs)("div",{className:"bx--grid",children:[Object(le.jsxs)("div",{className:"bx--row",children:[Object(le.jsxs)("div",{className:"bx--col",children:[Object(le.jsxs)(T.a,{id:"ticketingSystemType",name:"ticketingSystemType",labelText:y.t("adminConfig.integrationTicketingSystem.selectBackendTicketingSystem"),value:this.state.ticketingSystemType,onChange:this.handleChanges,children:[Object(le.jsx)(w.a,{text:y.t("adminConfig.integrationTicketingSystem.select"),value:"ticketing-system"}),["Jira"].map((function(e,t){return Object(le.jsx)(w.a,{text:e,value:e,children:e},t)}))]}),Object(le.jsx)(N.a,{id:"serviceAccount",name:"serviceAccount",labelText:y.t("adminConfig.integrationTicketingSystem.userName"),value:this.state.serviceAccount,onChange:this.handleChanges}),Object(le.jsx)(N.a,{id:"systemId",name:"systemId",labelText:y.t("adminConfig.integrationTicketingSystem.projectName"),value:this.state.systemId,onChange:this.handleChanges})]}),Object(le.jsxs)("div",{className:"bx--col",children:[Object(le.jsx)(N.a,{id:"url",name:"url",labelText:y.t("adminConfig.integrationTicketingSystem.url"),value:this.state.url,onChange:this.handleChanges}),Object(le.jsx)(N.a,{id:"serviceAccountSecret",name:"serviceAccountSecret",type:"password",labelText:y.t("adminConfig.integrationTicketingSystem.password"),value:this.state.serviceAccountSecret,onChange:this.handleChanges})]})]}),Object(le.jsxs)(P.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",y.t("buttons.submit")," "]}),this.state.ticketingSystem?Object(le.jsxs)(P.a,{kind:"danger",onClick:function(){return e.handleDelete()},children:[" ","Delete"," "]}):null]})})]}):Object(le.jsx)("p",{children:y.t("userMessages.unauthorized")})}}]),a}(u.Component)),he=a(137),me=a(72),be=a(70),je=a(73),ve=a(74),fe=a(76),ge=a(71),Oe=a(42),xe=a(129),ye="api/entando-versions",ke=function(){var e=Object(j.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"/").concat(ye),n=Object(o.a)(Object(o.a)({},G()),{},{method:"GET"}),e.abrupt("return",X(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(ye,"/").concat(a),r=Object(o.a)(Object(o.a)({},G()),{},{method:"GET"}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Se=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(ye,"/").concat(a),r=Object(o.a)(Object(o.a)({},G()),{},{method:"PUT"}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),De=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(ye),r=Object(o.a)(Object(o.a)({},G()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Te=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(ye),r=Object(o.a)(Object(o.a)({},G()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),we=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(ye,"/").concat(a),r=Object(o.a)(Object(o.a)({},G()),{},{method:"DELETE"}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ne=a(124),Pe=a(138),Ee=a(126),Me=a(23),Ie=a.n(Me),Le=a(125),Ue=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(b.a)({},a,n))},r.handleFormSubmit=function(){r.handleValidation()&&r.addProductVersion().then((function(){r.setState({submitMsg:y.t("submitMessages.added"),submitColour:"#24a148"}),r.props.updateProductVersions()})).catch((function(){r.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})}))},r.clearValues=function(){document.querySelector("#modal-form-product-version").className.includes("is-visible")||r.setState(r.baseState)},r.handleStartDateChange=function(e){r.setState({startDate:Ie()(e[0].toISOString()).format("MM/DD/YYYY")})},r.handleEndDateChange=function(e){r.setState({endDate:Ie()(e[0].toISOString()).format("MM/DD/YYYY")})},r.state={name:"",startDate:"",endDate:"",invalid:{},submitMsg:"",submitColour:"black"},r.baseState=r.state,r}return Object(r.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;return""===this.state.name&&(t=!1,e.name=!0),"undefined"!==typeof this.state.startDate&&(this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(t=!1,e.startDate=!0)),"undefined"!==typeof this.state.endDate&&(this.state.endDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(t=!1,e.endDate=!0)),this.setState({invalid:e}),t}},{key:"addProductVersion",value:function(){var e=Object(j.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=4;break}return e.next=3,De(this.props.serviceUrl,this.state);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){document.querySelector(".add-product-version-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){var e=Object(le.jsx)("div",{className:"bx--modal-header",children:Object(le.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),t="modal-form-product-version";return Object(le.jsxs)(Ne.a,{buttonTriggerText:y.t("buttons.addProductVersion"),renderTriggerButtonIcon:Le.a,modalHeading:y.t("adminDashboard.addProductVersion.title"),buttonTriggerClassName:"add-product-version bx--btn bx--btn--tertiary add-product-version-button",className:"modal-form",id:t,handleSubmit:this.handleFormSubmit,children:[e,Object(le.jsx)("div",{className:"form-container",children:Object(le.jsxs)(D.a,{onSubmit:this.handleFormSubmit,children:[Object(le.jsx)(N.a,{id:"name"+t,name:"name",labelText:y.t("adminDashboard.addProductVersion.productVersion"),value:this.state.name,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(le.jsx)(Pe.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleStartDateChange,children:Object(le.jsx)(Ee.a,{id:"startDate"+t,name:"startDate",placeholder:"mm/dd/yyyy",labelText:y.t("adminDashboard.addProductVersion.productVersionStartDate"),value:this.state.startDate,type:"text",invalidText:y.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(le.jsx)(Pe.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleEndDateChange,children:Object(le.jsx)(Ee.a,{id:"endDate"+t,name:"endDate",placeholder:"mm/dd/yyyy",labelText:y.t("adminDashboard.addProductVersion.productVersionEndDate"),value:this.state.endDate,type:"text",invalidText:y.t("validation.invalid.date"),invalid:this.state.invalid.endDate})})]})}),e]})}}]),a}(u.Component)),Ve=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(b.a)({},a,n))},r.handleStartDateChange=function(e){r.setState({startDate:Ie()(e[0].toISOString()).format("MM/DD/YYYY")})},r.handleEndDateChange=function(e){r.setState({endDate:Ie()(e[0].toISOString()).format("MM/DD/YYYY")})},r.handleFormSubmit=function(){if(r.handleValidation()){var e={id:r.props.version.id,name:r.state.name,startDate:Ie()(r.state.startDate).format(),endDate:Ie()(r.state.endDate).format()};r.versionPut(e).then((function(){r.setState({submitMsg:y.t("submitMessages.updated"),submitColour:"#24a148"}),r.props.updateProductVersions()})).catch((function(){r.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})}))}},r.state={name:"",startDate:"",endDate:"",invalid:{},modalId:"",buttonId:"",submitMsg:"",submitColour:"black"},r}return Object(r.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;return""===this.state.name&&(t=!1,e.name=!0),"undefined"!==typeof this.state.startDate&&(this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(t=!1,e.startDate=!0)),"undefined"!==typeof this.state.endDate&&(this.state.endDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(t=!1,e.endDate=!0)),this.setState({invalid:e}),t}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.getVersionDetails()}},{key:"getVersionDetails",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce(this.props.serviceUrl,this.props.version.id);case 2:t=e.sent,this.setState({name:t.data.name,startDate:Ie()(t.data.startDate).format("MM/DD/YYYY"),endDate:Ie()(t.data.endDate).format("MM/DD/YYYY"),modalId:"modal-form-version-edit-"+t.data.id,buttonId:"edit-version-button-"+t.data.id});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"versionPut",value:function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(this.props.serviceUrl,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){F(this.props)&&(this.getVersionDetails(),document.querySelector(".edit-version-button-"+this.props.version.id).addEventListener("click",this.clearValues,!1))}},{key:"render",value:function(){var e=Object(le.jsx)("div",{className:"bx--modal-header",children:Object(le.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),t="bx--btn bx--btn--ghost edit-version-button-"+this.props.version.id,a=this.state.modalId;return Object(le.jsxs)(Ne.a,{buttonTriggerText:y.t("buttons.edit"),modalHeading:y.t("adminDashboard.addProject.editTitle"),buttonTriggerClassName:t,className:"modal-form",id:this.state.modalId,handleSubmit:this.handleFormSubmit,primaryButtonText:y.t("modalText.save"),secondaryButtonText:y.t("modalText.cancel"),children:[e,Object(le.jsx)("div",{className:"form-container",children:Object(le.jsxs)(D.a,{onSubmit:this.handleFormSubmit,id:"form"+a,children:[Object(le.jsx)(N.a,{id:"name"+a,name:"name",labelText:y.t("adminDashboard.addProject.projectName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(le.jsx)(Pe.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleStartDateChange,value:this.state.startDate,children:Object(le.jsx)(Ee.a,{id:"startDate"+a,name:"startDate",placeholder:"mm/dd/yyyy",labelText:y.t("subscriptionDetails.startDate")+" *",onChange:this.handleChanges,type:"text",invalidText:y.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(le.jsx)(Pe.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleEndDateChange,id:"endDate"+a,name:"endDate",value:this.state.endDate,children:Object(le.jsx)(Ee.a,{id:"endDate"+a,name:"endDate",placeholder:"mm/dd/yyyy",labelText:y.t("subscriptionDetails.endDate")+" *",onChange:this.handleChanges,type:"text",invalidText:y.t("validation.invalid.date"),invalid:this.state.invalid.endDate})})]})}),e]})}}]),a}(u.Component)),Ae=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleDeleteVersion=function(t,a){t.preventDefault(),window.confirm("Are you sure you want to delete this Entando version?")&&e.deleteVersion(a).then((function(){e.setState({submitMsg:y.t("submitMessages.deleted"),submitColour:"#24a148"}),e.updateProductVersions()})).catch((function(){e.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})}))},e.updateProductVersions=function(){e.getProductVersions()},e.state={versions:""},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){B()&&this.getProductVersions()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&B()&&this.getProductVersions()}},{key:"getProductVersions",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=5;break}return e.next=3,ke(this.props.serviceUrl);case 3:t=e.sent,this.setState({versions:t.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteVersion",value:function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=4;break}return e.next=3,we(this.props.serviceUrl,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleToggleChange",value:function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(this.props.serviceUrl,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return B()?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(he.a,{rows:ze,headers:Fe,children:function(t){t.rows;var a=t.headers,n=t.getHeaderProps,r=t.getTableProps;return Object(le.jsx)(me.a,{children:Object(le.jsxs)(be.a,Object(o.a)(Object(o.a)({},r()),{},{children:[Object(le.jsx)(je.a,{children:Object(le.jsx)(ve.a,{children:a.map((function(t){return Object(le.jsx)(fe.a,Object(o.a)(Object(o.a)({},n({header:t})),{},{children:"entVersion"===t.key?"".concat(e.props.productName," Version"):t.header}))}))})}),Object(le.jsx)(ge.a,{children:0!==Object.keys(e.state.versions).length?e.state.versions.map((function(t,a){return Object(le.jsxs)(ve.a,{children:[Object(le.jsx)(Oe.a,{children:t.name}),Object(le.jsx)(Oe.a,{children:Object(le.jsx)(xe.a,{size:"sm",onClick:function(){return e.handleToggleChange(t.id)},"aria-label":"toggle button",id:"toggle"+t.id,defaultToggled:t.status})}),Object(le.jsx)(Oe.a,{children:t.startDate}),Object(le.jsx)(Oe.a,{children:t.endDate}),Object(le.jsx)(Oe.a,{children:Object(le.jsxs)("div",{style:{display:"flex"},children:[Object(le.jsx)(Ve,{version:t,serviceUrl:e.props.serviceUrl,updateProductVersions:e.updateProductVersions},t.id),Object(le.jsx)(P.a,{kind:"ghost",onClick:function(a){return e.handleDeleteVersion(a,t.id)},style:{display:"flex",width:"100%",color:"red"},children:y.t("buttons.delete")})]})})]},a)})):null})]}))})}}),Object(le.jsx)("br",{}),Object(le.jsx)(Ue,{serviceUrl:this.props.serviceUrl,updateProductVersions:this.updateProductVersions})]}):Object(le.jsx)("p",{children:y.t("userMessages.unauthorized")})}}]),a}(u.Component),Fe=[{header:y.t("adminConfig.manageProductVersion.entandoVersion"),key:"entVersion"},{header:y.t("adminConfig.manageProductVersion.status"),key:"status"},{header:y.t("adminConfig.manageProductVersion.startDate"),key:"startDate"},{header:y.t("adminConfig.manageProductVersion.supportEndDate"),key:"endDate"},{header:y.t("customerDashboard.action"),key:"action"}],ze=[{id:"a",entVersion:"5.2",status:Object(le.jsx)(xe.a,{size:"sm","aria-label":"toggle button",defaultToggled:!0,id:"status-1"}),startDate:"April, 2018",endDate:"April, 2022"},{id:"b",entVersion:"6.3",status:Object(le.jsx)(xe.a,{size:"sm","aria-label":"toggle button",id:"status-2"}),startDate:"Jile, 2019",endDate:"April, 2023"},{id:"c",entVersion:"6.2",status:Object(le.jsx)(xe.a,{size:"sm","aria-label":"toggle button",defaultToggled:!0,id:"status-3"}),startDate:"September, 2020",endDate:"April, 2024"}],Re=de(Ae),qe=a(130),He=a(131),Je=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=Q(E,this.props.locale),t=this.props.customer||{},a=this.props.project;a&&(t=a.customer||{});var n=this.props.subscription?this.props.subscription:W(a);return Object(le.jsxs)(qe.a,{style:{margin:"1em 0"},children:[Object(le.jsx)(He.a,{href:"".concat(e,"#"),children:y.t("customerDashboard.customerPortal")}),t&&t.name&&Object(le.jsx)(He.a,{href:"".concat(e,"#/customer-details/").concat(t.id),children:t.name}),a&&a.name&&n&&n.id&&Object(le.jsx)(He.a,{href:"".concat(e,"#/subscription-details/").concat(n.id),children:a.name})]})}}]),a}(u.Component)),Be=a(29),_e="api/ticketing-system-config/",Ye=function(){var e=Object(j.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$("".concat(t,"/").concat(_e)),n=Object(o.a)(Object(o.a)({},G()),{},{method:"GET"}),e.abrupt("return",X(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(j.a)(m.a.mark((function e(t,a,n){var r,s,i,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(_e),s=a===I.JIRA_CUSTOM_FIELD?"jiraCustomFields":"values",i=Object(b.a)({flag:a},s,n),c=Object(o.a)(Object(o.a)({},G()),{},{method:"PUT",body:JSON.stringify(i)}),e.abrupt("return",X(r,c));case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ke=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleFormSubmit=function(){var t=Object(j.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.ticketName.length&&!(e.state.ticketName.length<U)){t.next=4;break}return e.setState({validations:{isError:!0,errorMsg:y.t("validation.invalid.ticketTypeMinChar")}}),t.abrupt("return");case 4:if(!e.state.ticketTypeRowData.find((function(t){return t.name.toLocaleLowerCase()===e.state.ticketName.toLocaleLowerCase()}))){t.next=7;break}return e.setState({validations:{isError:!0,errorMsg:y.t("validation.invalid.ticketDupCheck")}}),t.abrupt("return");case 7:return n=[].concat(Object(Be.a)(e.state.ticketTypeRowData),[{name:e.state.ticketName}]),t.prev=8,t.next=11,Ge(e.props.serviceUrl,I.TICKET_TYPE,n).then((function(){e.props.getTicketAndSubLevel()}));case 11:r=n,e.setState({ticketTypeRowData:[r],ticketName:""}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(8),console.error("Error handleFormSubmit: ",t.t0);case 18:case"end":return t.stop()}}),t,null,[[8,15]])})));return function(e){return t.apply(this,arguments)}}(),e.setFormData=function(t){if(t.target||t.target.value){if(!(t.target.value.length<=V))return e.state.ticketName.length>=V?(e.setState({validations:{isError:!0,errorMsg:y.t("validation.invalid.ticketTypeMaxChar")}}),void(e.timeoutId||setTimeout((function(){e.setState({validations:{isError:!1,errorMsg:""}}),e.timeoutId=null}),L))):void 0;t.target.value.length&&t.target.value.length<U?e.setState({validations:{isError:!0,errorMsg:y.t("validation.invalid.ticketTypeMinChar")},ticketName:t.target.value.trimStart()}):e.setState({validations:{isError:!1,errorMsg:""},ticketName:t.target.value.trimStart()})}},e.handleDeleteTicketType=function(){var t=Object(j.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm(y.t("submitMessages.confirmDeleteTicketType"))){t.next=12;break}return n=[],n=e.state.ticketTypeRowData.filter((function(e){return a.name!==e.name})),t.prev=3,t.next=6,Ge(e.props.serviceUrl,I.TICKET_TYPE,n).then((function(){e.props.getTicketAndSubLevel()}));case 6:e.setState({ticketTypeRowData:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.error("Error handleDeleteTicketType: ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.state={ticketName:"",ticketTypeRowData:[],validations:[{isError:!1,errorMsg:""}]},e.timeoutId=null,e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){B()&&this.getProductVersions(),this.props.ticketType.length&&this.getTicketTypes()}},{key:"componentDidUpdate",value:function(e){e.ticketType.length!==this.props.ticketType.length&&this.getTicketTypes(),z(this.props,e)&&B()&&this.getProductVersions()}},{key:"getTicketTypes",value:function(){this.props.ticketType.length&&this.setState({ticketTypeRowData:this.props.ticketType})}},{key:"getProductVersions",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=5;break}return e.next=3,ke(this.props.serviceUrl);case 3:t=e.sent,this.setState({versions:t.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ticketTypeRecord",value:function(){var e=this,t=[];return this.state.ticketTypeRowData.forEach((function(a,n){t.push(Object(le.jsxs)(ve.a,{id:a.name,children:[Object(le.jsx)(Oe.a,{children:a.name}),Object(le.jsx)(Oe.a,{children:Object(le.jsx)(P.a,{kind:"ghost",onClick:function(){return e.handleDeleteTicketType(a)},style:{display:"flex",width:"100%",color:"red"},children:y.t("buttons.delete")})})]},n))})),t}},{key:"render",value:function(){var e=this;return B()?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("h4",{children:y.t("adminConfig.manageFieldConfigurations.ticketTypeConfigurations")}),Object(le.jsx)(me.a,{children:Object(le.jsxs)(be.a,{children:[Object(le.jsx)(je.a,{children:Object(le.jsx)(ve.a,{children:We.map((function(e){return Object(le.jsxs)(fe.a,{style:{width:"50%"},children:[" ",e.header]},e.key)}))})}),Object(le.jsx)(ge.a,{children:this.ticketTypeRecord()})]})}),Object(le.jsx)("div",{className:"bx--grid",style:{margin:"0rem",padding:"0rem"},children:Object(le.jsxs)(D.a,{className:"bx--row",style:{margin:"2rem 0rem",padding:"0rem"},onSubmit:this.handleFormSubmit,children:[Object(le.jsx)("div",{className:"bx--col-lg-6",style:{paddingLeft:"0rem"},children:Object(le.jsx)(N.a,{id:"tickettype",labelText:y.t("adminConfig.manageFieldConfigurations.ticketType"),type:"text",value:this.state.ticketName,onChange:this.setFormData,invalid:this.state.validations.isError,invalidText:this.state.validations.errorMsg,onBlur:function(){e.setState({ticketName:e.state.ticketName.trimEnd()})}})}),Object(le.jsx)("div",{className:"bx--col-lg-6",children:Object(le.jsx)(P.a,{size:"lg",kind:"tertiary",tabIndex:0,type:"submit",renderIcon:Le.a,style:{paddingRight:"2.5rem",paddingTop:"0.5rem",alignItems:"center"},children:y.t("adminConfig.manageFieldConfigurations.addTicketTypeButton")})})]})}),Object(le.jsx)("hr",{})]}):Object(le.jsx)("p",{children:y.t("userMessages.unauthorized")})}}]),a}(u.Component),We=[{header:y.t("adminConfig.manageFieldConfigurations.ticketType"),key:"ticketType"},{header:y.t("customerDashboard.action"),key:"action"}],Ze=de(Ke),Qe=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleFormSubmit=function(){var t=Object(j.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.subscriptionLevel.length&&!(e.state.subscriptionLevel.length<U)){t.next=4;break}return e.setState({validations:{isError:!0,errorMsg:y.t("validation.invalid.subscrLevelMinChar")}}),t.abrupt("return");case 4:if(!e.state.serviceSubTypeRowData.find((function(t){return t.name.toLocaleLowerCase()===e.state.subscriptionLevel.toLocaleLowerCase()}))){t.next=7;break}return e.setState({validations:{isError:!0,errorMsg:y.t("validation.invalid.subscrDupCheck")}}),t.abrupt("return");case 7:return n=[].concat(Object(Be.a)(e.state.serviceSubTypeRowData),[{name:e.state.subscriptionLevel}]),t.prev=8,t.next=11,Ge(e.props.serviceUrl,I.SUBSCRIPTION_LEVEL,n).then((function(){e.props.getTicketAndSubLevel()}));case 11:r=[].concat(Object(Be.a)(e.state.serviceSubTypeRowData),[{levelName:e.state.subscriptionLevel}]),e.setState({serviceSubTypeRowData:r,subscriptionLevel:""}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(8),console.error("Error handleFormSubmit: ",t.t0);case 18:case"end":return t.stop()}}),t,null,[[8,15]])})));return function(e){return t.apply(this,arguments)}}(),e.setFormData=function(t){if(t.target||t.target.value){if(!(t.target.value.length<=V))return e.state.subscriptionLevel.length>=V?(e.setState({validations:{isError:!0,errorMsg:y.t("validation.invalid.subscrLevelMaxChar")}}),void(e.timeoutId||(e.timeoutId=setTimeout((function(){e.setState({validations:{isError:!1,errorMsg:""}}),e.timeoutId=null}),L)))):void 0;t.target.value.length&&t.target.value.length<U?e.setState({validations:{isError:!0,errorMsg:y.t("validation.invalid.subscrLevelMinChar")},subscriptionLevel:t.target.value.trimStart()}):e.setState({validations:{isError:!1,errorMsg:""},subscriptionLevel:t.target.value.trimStart()})}},e.handleDeleteServiceSubType=function(){var t=Object(j.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm(y.t("submitMessages.confirmDeleteSubscrLevel"))){t.next=12;break}return n=[],n=e.state.serviceSubTypeRowData.filter((function(e){return a.name!==e.name})),t.prev=3,t.next=6,Ge(e.props.serviceUrl,I.SUBSCRIPTION_LEVEL,n).then((function(){e.props.getTicketAndSubLevel()}));case 6:e.setState({serviceSubTypeRowData:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.error("Error handleDeleteServiceSubType: ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.state={subscriptionLevel:"",serviceSubTypeRowData:[],validations:[{isError:!1,errorMsg:""}]},e.timeoutId=null,e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){B()&&this.getProductVersions(),this.props.subLevel.length&&this.getSubscription()}},{key:"componentDidUpdate",value:function(e){e.subLevel.length!==this.props.subLevel.length&&this.getSubscription(),z(this.props,e)&&B()&&this.getProductVersions()}},{key:"getSubscription",value:function(){this.props.subLevel.length&&this.setState({serviceSubTypeRowData:this.props.subLevel})}},{key:"getProductVersions",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=5;break}return e.next=3,ke(this.props.serviceUrl);case 3:t=e.sent,this.setState({versions:t.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"subLeveRecord",value:function(){var e=this,t=[];return this.state.serviceSubTypeRowData.forEach((function(a,n){t.push(Object(le.jsxs)(ve.a,{id:a.name,children:[Object(le.jsx)(Oe.a,{children:a.name}),Object(le.jsx)(Oe.a,{children:Object(le.jsx)(P.a,{kind:"ghost",onClick:function(){return e.handleDeleteServiceSubType(a)},style:{display:"flex",width:"100%",color:"red"},children:y.t("buttons.delete")})})]},n))})),t}},{key:"render",value:function(){var e=this;return B()?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("h4",{children:y.t("adminConfig.manageFieldConfigurations.subscriptionLevelConfiguration")}),Object(le.jsx)(me.a,{children:Object(le.jsxs)(be.a,{children:[Object(le.jsx)(je.a,{children:Object(le.jsx)(ve.a,{children:$e.map((function(e,t){return Object(le.jsxs)(fe.a,{style:{width:"50%"},id:t,children:[" ",e.header]},e.key)}))})}),Object(le.jsx)(ge.a,{children:this.subLeveRecord()})]})}),Object(le.jsx)("div",{className:"bx--grid",style:{margin:"0rem",padding:"0rem"},children:Object(le.jsxs)(D.a,{className:"bx--row",style:{margin:"2rem 0rem",padding:"0rem"},onSubmit:this.handleFormSubmit,children:[Object(le.jsx)("div",{className:"bx--col-lg-6",style:{paddingLeft:"0rem"},children:Object(le.jsx)(N.a,{id:"sublevel",labelText:y.t("adminConfig.manageFieldConfigurations.subscriptionLevel"),type:"text",value:this.state.subscriptionLevel,onChange:this.setFormData,invalid:this.state.validations.isError,invalidText:this.state.validations.errorMsg,onBlur:function(){e.setState({subscriptionLevel:e.state.subscriptionLevel.trimEnd()})}})}),Object(le.jsx)("div",{className:"bx--col-lg-6",children:Object(le.jsx)(P.a,{size:"lg",kind:"tertiary",tabIndex:0,type:"submit",renderIcon:Le.a,style:{paddingRight:"2.5rem",paddingTop:"0.5rem",alignItems:"center"},children:y.t("adminConfig.manageFieldConfigurations.addSubscriptionLevelButton")})})]})}),Object(le.jsx)("hr",{})]}):Object(le.jsx)("p",{children:y.t("userMessages.unauthorized")})}}]),a}(u.Component),$e=[{header:y.t("adminConfig.manageFieldConfigurations.subscriptionLevel"),key:"sublevel"},{header:y.t("customerDashboard.action"),key:"action"}],Xe=de(Qe),et=a(132),tt=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).onEditProductNameHandle=function(){e.setState({validations:{isError:!1,errorMsg:""},changedProductName:e.props.productName,open:!0})},e.onEditProductNameSave=Object(j.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.changedProductName){t.next=3;break}return e.setState({validations:{isError:!0,errorMsg:y.t("validation.invalid.required")}}),t.abrupt("return");case 3:if(!(e.state.changedProductName.length<U)){t.next=6;break}return e.setState({validations:{isError:!0,errorMsg:y.t("validation.invalid.productNameMinChar")}}),t.abrupt("return");case 6:return e.setState({open:!1}),a=[{name:e.state.changedProductName}],t.prev=8,t.next=11,Ge(e.props.serviceUrl,I.PRODUCT_NAME,a).then((function(){e.props.getTicketAndSubLevel()}));case 11:e.setState({changedProductName:e.props.productName}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8),console.error("Error onEditProductNameSave: ",t.t0);case 17:case"end":return t.stop()}}),t,null,[[8,14]])}))),e.productOnChangeHandler=function(t){if(t.target||t.target.value){if(!(t.target.value.length<=V))return t.target.value.length>=V?(e.setState({validations:{isError:!0,errorMsg:y.t("validation.invalid.productNameMaxChar")}}),void(e.timeoutId||setTimeout((function(){e.setState({validations:{isError:!1,errorMsg:""}}),e.timeoutId=null}),L))):void 0;t.target.value.length?t.target.value.length&&t.target.value.length<U?e.setState({validations:{isError:!0,errorMsg:y.t("validation.invalid.productNameMinChar")},changedProductName:t.target.value}):e.setState({validations:{isError:!1,errorMsg:""},changedProductName:t.target.value}):e.setState({validations:{isError:!0,errorMsg:y.t("validation.invalid.required")},changedProductName:t.target.value})}},e.state={open:!1,validations:[{isError:!1,errorMsg:""}],changedProductName:""},e.timeoutId=null,e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.setState({changedProductName:this.props.productName}),B()&&this.getProductVersions()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&B()&&this.getProductVersions()}},{key:"getProductVersions",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=5;break}return e.next=3,ke(this.props.serviceUrl);case 3:t=e.sent,this.setState({versions:t.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return B()?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("h4",{children:y.t("adminConfig.productNameConfigurations.title")}),Object(le.jsx)(me.a,{children:Object(le.jsxs)(be.a,{children:[Object(le.jsx)(je.a,{children:Object(le.jsx)(ve.a,{children:at.map((function(e,t){return Object(le.jsxs)(fe.a,{style:{width:"50%"},id:t,children:[" ",e.header]},e.key)}))})}),Object(le.jsx)(ge.a,{children:Object(le.jsxs)(ve.a,{id:1,children:[Object(le.jsx)(Oe.a,{children:this.props.productName}),Object(le.jsx)(Oe.a,{children:Object(le.jsx)(P.a,{kind:"ghost",onClick:this.onEditProductNameHandle,style:{display:"flex",width:"100%",color:"red"},children:y.t("buttons.edit")})})]},1)})]})}),Object(le.jsxs)(et.d,{open:this.state.open,onClose:function(){e.setState({open:!1})},children:[Object(le.jsx)(et.c,{title:y.t("buttons.edit")}),Object(le.jsx)(et.a,{children:Object(le.jsx)(N.a,{"data-modal-primary-focus":!0,id:"text-input-1",labelText:"Product Name*",value:this.state.changedProductName,invalid:this.state.validations.isError,invalidText:this.state.validations.errorMsg,onChange:function(t){e.productOnChangeHandler(t)}})}),Object(le.jsxs)(et.b,{children:[Object(le.jsx)(P.a,{kind:"secondary",onMouseDown:function(){e.setState({open:!1})},children:y.t("buttons.cancel")}),Object(le.jsx)(P.a,{kind:"primary",onClick:function(){e.onEditProductNameSave()},children:y.t("buttons.save")})]})]})]}):Object(le.jsx)("p",{children:y.t("userMessages.unauthorized")})}}]),a}(u.Component),at=[{header:y.t("adminConfig.productNameConfigurations.table.prodName"),key:"productName"},{header:y.t("customerDashboard.action"),key:"action"}],nt=de(tt),rt=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).onClickJiraConfigEdit=function(){e.setState({validations:{isError:!1,errorMsg:""},changedProductName:e.props.productName,open:!0})},e.onClickJiraConfigSave=Object(j.a)(m.a.mark((function t(){var a,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=m.a.keys(e.state.jiraOnChangedValue);case 1:if((t.t1=t.t0()).done){t.next=7;break}if(a=t.t1.value,e.state.jiraOnChangedValue[a]){t.next=5;break}return t.abrupt("return");case 5:t.next=1;break;case 7:for(r in n=[],e.state.jiraOnChangedValue)n.push(Object(b.a)({},r,e.state.jiraOnChangedValue[r]));return t.prev=9,t.next=12,Ge(e.props.serviceUrl,I.JIRA_CUSTOM_FIELD,[e.state.jiraOnChangedValue]).then((function(){e.props.getTicketAndSubLevel(),e.setState({jiraConfig:n})}));case 12:t.next=17;break;case 14:t.prev=14,t.t2=t.catch(9),console.error("Error onClickJiraConfigSave: ",t.t2);case 17:e.setState({open:!1});case 18:case"end":return t.stop()}}),t,null,[[9,14]])}))),e.jiraConfigOnChangeHandler=function(t){var a=t.target.id,n=t.target.value,r=e.state.jiraOnChangedValue,s=e.state.validations;n.length?(s["".concat(a,"IsValid")]=!1,e.updateStateOfJiraConfig(a,r,n)):(s["".concat(a,"IsValid")]=!0,e.updateStateOfJiraConfig(a,r,n))},e.onClickCloseModal=function(){var t=e.initializeJiraConfigObj();e.state.jiraConfig.forEach((function(e){t[Object.keys(e)[0]]=parseInt(e[Object.keys(e)[0]].toString(),10)})),e.setState({jiraOnChangedValue:t})},e.getJiraConfigValues=function(){var t=[];return e.state.jiraConfig.length&&e.state.jiraConfig.forEach((function(e,a){t.push(Object(le.jsx)(Oe.a,{children:e[Object.keys(e)[0]]},Object.keys(e)[0]))})),t},e.state={open:!1,validations:{versionIdIsValid:!0,organizationIdIsValid:!0,subscriptionLevelIdIsValid:!0,errMsg:""},changedProductName:"",jiraConfig:[],jiraOnChangedValue:e.initializeJiraConfigObj()},e.timeoutId=null,e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){B()&&(this.setState({changedProductName:this.props.productName,jiraConfig:this.props.jiraCustomField}),this.getProductVersions(),this.getJiraConfig())}},{key:"componentDidUpdate",value:function(e){e.jiraCustomField.length!==this.props.jiraCustomField.length&&this.getJiraConfig(),z(this.props,e)&&B()&&this.getProductVersions()}},{key:"getJiraConfig",value:function(){this.setState({changedProductName:this.props.productName,jiraConfig:this.props.jiraCustomField});var e=this.initializeJiraConfigObj();this.props.jiraCustomField.forEach((function(t){e[Object.keys(t)[0]]=t[Object.keys(t)[0]]})),this.setState({jiraOnChangedValue:e})}},{key:"initializeJiraConfigObj",value:function(){return{versionId:0,organizationId:0,subscriptionLevelId:0}}},{key:"getProductVersions",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=5;break}return e.next=3,ke(this.props.serviceUrl);case 3:t=e.sent,this.setState({versions:t.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateStateOfJiraConfig",value:function(e,t,a){for(var n=0;n<this.state.jiraConfig.length;n++)e===Object.keys(this.state.jiraConfig[n])[0]&&(t["".concat(Object.keys(this.state.jiraConfig[n]))]=a);this.setState({jiraOnChangedValue:t})}},{key:"render",value:function(){var e=this;return B()?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(me.a,{children:Object(le.jsxs)(be.a,{children:[Object(le.jsx)(je.a,{children:Object(le.jsx)(ve.a,{children:st.map((function(e,t){return Object(le.jsxs)(fe.a,{id:t,children:[" ",e.header]},e.key)}))})}),Object(le.jsx)(ge.a,{children:Object(le.jsxs)(ve.a,{id:1,children:[this.getJiraConfigValues(),Object(le.jsx)(Oe.a,{children:Object(le.jsx)(P.a,{kind:"ghost",onClick:this.onClickJiraConfigEdit,style:{display:"flex",width:"100%",color:"red"},children:y.t("buttons.edit")})})]},1)})]})}),Object(le.jsxs)(et.d,{open:this.state.open,onClose:function(){e.onClickCloseModal(),e.setState({open:!1})},children:[Object(le.jsx)(et.c,{title:y.t("buttons.edit")}),Object(le.jsxs)(et.a,{children:[Object(le.jsx)(N.a,{"data-modal-primary-focus":!0,id:"versionId",labelText:"".concat(y.t("adminConfig.jiraFieldsConfigurations.versionIDLabel"),"*"),type:"number",value:this.state.jiraOnChangedValue.versionId,invalid:this.state.validations.versionIdIsValid,invalidText:y.t("validation.invalid.required"),onChange:function(t){e.jiraConfigOnChangeHandler(t)}},"versionId"),Object(le.jsx)(N.a,{"data-modal-primary-focus":!0,id:"organizationId",labelText:"".concat(y.t("adminConfig.jiraFieldsConfigurations.organizatoinIDLabel"),"*"),type:"number",value:this.state.jiraOnChangedValue.organizationId,invalid:this.state.validations.organizationIdIsValid,invalidText:y.t("validation.invalid.required"),onChange:function(t){e.jiraConfigOnChangeHandler(t)}},"organizationId"),Object(le.jsx)(N.a,{"data-modal-primary-focus":!0,id:"subscriptionLevelId",labelText:"".concat(y.t("adminConfig.jiraFieldsConfigurations.SubscriptionLevelIDLabel"),"*"),type:"number",value:this.state.jiraOnChangedValue.subscriptionLevelId,invalid:this.state.validations.subscriptionLevelIdIsValid,invalidText:y.t("validation.invalid.required"),onChange:function(t){e.jiraConfigOnChangeHandler(t)}},"subscriptionLevelId")]}),Object(le.jsxs)(et.b,{children:[Object(le.jsx)(P.a,{kind:"secondary",onMouseDown:function(){e.setState({open:!1})},onClick:this.onClickCloseModal,children:y.t("buttons.cancel")}),Object(le.jsx)(P.a,{kind:"primary",onClick:function(){e.onClickJiraConfigSave()},children:y.t("buttons.save")})]})]})]}):Object(le.jsx)("p",{children:y.t("userMessages.unauthorized")})}}]),a}(u.Component),st=[{header:y.t("adminConfig.jiraFieldsConfigurations.versionIDLabel"),key:"versionId"},{header:y.t("adminConfig.jiraFieldsConfigurations.organizatoinIDLabel"),key:"orgId"},{header:y.t("adminConfig.jiraFieldsConfigurations.SubscriptionLevelIDLabel"),key:"subscrId"},{header:y.t("customerDashboard.action"),key:"actn"}],it=de(rt),ct=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).getTicketingSystemConfig=Object(j.a)(m.a.mark((function e(){var t,a,n,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ye(r.props.serviceUrl);case 3:if(t=e.sent,(a=t.data)&&a.length){if("jiraCustomField","productName",(n=a[0]).ticketType&&r.setState({refinedTicketType:JSON.parse(n.ticketType)}),n.subscriptionLevel&&r.setState({refinedSubLevel:JSON.parse(n.subscriptionLevel)}),n.hasOwnProperty("jiraCustomField")){for(i in s=[],JSON.parse(n.jiraCustomField)[0])s.push(Object(b.a)({},i,JSON.parse(n.jiraCustomField)[0][i]));r.setState({refinedJiraCustomField:s})}n.hasOwnProperty("productName")&&r.setState({productName:JSON.parse(n.productName)[0].name})}e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error getTicketingSystemConfig: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),r.initAdminConfig=function(){var e=[{label:Object(le.jsxs)("div",{children:[Object(le.jsx)("p",{className:"title",children:y.t("adminConfig.integrationTicketingSystem.title")}),Object(le.jsx)("p",{className:"desc",children:y.t("adminConfig.integrationTicketingSystem.desc")})]}),content:Object(le.jsx)("div",{className:"admin-config-child",children:Object(le.jsx)(pe,{serviceUrl:r.props.serviceUrl})})},{label:Object(le.jsxs)("div",{children:[Object(le.jsx)("p",{className:"title",children:y.t("adminConfig.manageProductVersion.title")}),Object(le.jsx)("p",{className:"desc",children:y.t("adminConfig.manageProductVersion.desc")})]}),content:Object(le.jsx)("div",{className:"admin-config-child",children:Object(le.jsx)(Re,{serviceUrl:r.props.serviceUrl,productName:r.state.productName})})},{label:Object(le.jsxs)("div",{children:[Object(le.jsx)("p",{className:"title",children:y.t("adminConfig.manageFieldConfigurations.title")}),Object(le.jsx)("p",{className:"desc",children:y.t("adminConfig.manageFieldConfigurations.manageFieldConfigurationsDesc")})]}),content:Object(le.jsx)(le.Fragment,{children:Object(le.jsxs)("div",{className:"admin-config-child",children:[Object(le.jsx)(Ze,{serviceUrl:r.props.serviceUrl,ticketType:r.state.refinedTicketType,getTicketAndSubLevel:r.getTicketingSystemConfig}),Object(le.jsx)(Xe,{serviceUrl:r.props.serviceUrl,subLevel:r.state.refinedSubLevel,getTicketAndSubLevel:r.getTicketingSystemConfig}),Object(le.jsx)(nt,{serviceUrl:r.props.serviceUrl,productName:r.state.productName,getTicketAndSubLevel:r.getTicketingSystemConfig})]})})},{label:Object(le.jsxs)("div",{children:[Object(le.jsx)("p",{className:"title",children:"Jira Field Configuration"}),Object(le.jsx)("p",{className:"desc",children:"This allows you to manage jira custom field configuration"})]}),content:Object(le.jsx)(le.Fragment,{children:Object(le.jsx)("div",{className:"admin-config-child",children:Object(le.jsx)(it,{serviceUrl:r.props.serviceUrl,productName:r.state.productName,jiraCustomField:r.state.refinedJiraCustomField,getTicketAndSubLevel:r.getTicketingSystemConfig})})})}];r.setState({adminConfig:e})},r.state={loading:!0,refinedTicketType:[],refinedSubLevel:[],adminConfig:[],refinedJiraCustomField:[],productName:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){F(this.props)&&(this.setState({loading:!1}),this.getTicketingSystemConfig(),this.initAdminConfig())}},{key:"componentDidUpdate",value:function(e,t){z(this.props,e)&&this.setState({loading:!1}),t.refinedTicketType.length===this.state.refinedTicketType.length&&t.refinedSubLevel.length===this.state.refinedSubLevel.length&&t.productName===this.state.productName||this.initAdminConfig()}},{key:"render",value:function(){return this.state.loading?null:R()?Object(le.jsxs)("div",{id:"entando-customer-portal",children:[Object(le.jsx)(Je,{locale:this.props.locale}),Object(le.jsxs)("div",{className:"form-container",children:[Object(le.jsxs)(k.a,{children:[Object(le.jsx)("p",{className:"title",children:y.t("adminConfig.title")}),Object(le.jsx)("p",{className:"desc",children:y.t("adminConfig.desc")})]}),Object(le.jsx)(C.a,{children:this.state.adminConfig.map((function(e,t){return Object(le.jsx)(S.a,{index:t,title:e.label,description:e.description,children:Object(le.jsx)("div",{children:e.content})},t.toString())}))})]})]}):Object(le.jsx)("p",{children:y.t("userMessages.unauthorized")})}}]),a}(l.a.Component)),ot=function(e,t){return window.addEventListener(e,t),function(){window.removeEventListener(e,t)}},ut="keycloak",lt=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},dt="locale",pt="service-url",ht="base-url",mt=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=lt(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},lt()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ot(ut,(function(){e.keycloak=Object(o.a)(Object(o.a)({},lt()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(ht)||"",t=this.getAttribute(pt)||"",a=this.getAttribute(dt)||"";x(a),Z(e),p.a.render(Object(le.jsx)(ue.Provider,{value:this.keycloak,children:Object(le.jsx)(ct,{serviceUrl:t,locale:a})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.get("cp-admin-configuration")||customElements.define("cp-admin-configuration",mt);var bt=a(22),jt=a(16),vt=a(128),ft=a(141),gt=a(136),Ot=a(135),xt="api/customers",yt=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(xt,"/").concat(a),r=Object(o.a)(Object(o.a)({},G()),{},{method:"DELETE"}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),kt=function(){var e=Object(j.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$("".concat(t,"/").concat(xt)),n=Object(o.a)(Object(o.a)({},G()),{},{method:"GET"}),e.abrupt("return",X(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ct=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$("".concat(t,"/").concat(xt,"/").concat(a)),r=Object(o.a)(Object(o.a)({},G()),{},{method:"GET"}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),St=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(xt),r=Object(o.a)(Object(o.a)({},G()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(xt),r=Object(o.a)(Object(o.a)({},G()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Tt=function(){var e=Object(j.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(xt,"/").concat(a,"/projects/").concat(n),s=Object(o.a)(Object(o.a)({},G()),{},{method:"POST"}),e.abrupt("return",X(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),wt=function(){var e=Object(j.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(xt,"/").concat(a,"/projects/").concat(n),s=Object(o.a)(Object(o.a)({},G()),{},{method:"DELETE"}),e.abrupt("return",X(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Nt=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(b.a)({},a,n))},r.handleFormSubmit=function(){if(r.handleValidation()){var e={name:r.state.name,customerNumber:r.state.customerNumber,contactName:r.state.contactName,contactPhone:r.state.contactPhone,contactEmail:r.state.contactEmail,notes:r.state.notes};r.customerPost(e).then((function(){r.setState({submitMsg:y.t("submitMessages.added"),submitColour:"#24a148"}),r.props.updateCustomerList()})).catch((function(){r.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})}))}},r.clearValues=function(){document.querySelector("#modal-form-customer").className.includes("is-visible")||r.setState(r.baseState)},r.state={name:"",customerNumber:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"},r.baseState=r.state,r}return Object(r.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;return""===this.state.name&&(t=!1,e.name=!0),""===this.state.customerNumber&&(t=!1,e.customerNumber=!0),this.setState({invalid:e}),t}},{key:"customerPost",value:function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=4;break}return e.next=3,St(this.props.serviceUrl,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){document.querySelector(".add-customer-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){var e=Object(le.jsx)("div",{className:"bx--modal-header",children:Object(le.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),t="modal-form-customer";return Object(le.jsxs)(Ne.a,{buttonTriggerText:y.t("buttons.addCustomer"),modalHeading:y.t("adminDashboard.addCustomer.title"),buttonTriggerClassName:"add-customer bx--btn bx--btn--tertiary add-customer-button",className:"modal-form",id:t,handleSubmit:this.handleFormSubmit,primaryButtonText:y.t("modalText.save"),secondaryButtonText:y.t("modalText.cancel"),children:[e,Object(le.jsx)("div",{className:"form-container",children:Object(le.jsxs)(D.a,{onSubmit:this.handleFormSubmit,children:[Object(le.jsx)(N.a,{id:"name"+t,name:"name",labelText:y.t("adminDashboard.addCustomer.customerName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(le.jsx)(N.a,{id:"customerNumber"+t,name:"customerNumber",labelText:y.t("adminDashboard.addCustomer.customerNumber")+" *",value:this.state.customerNumber,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.customerNumber}),Object(le.jsx)(N.a,{id:"contactName"+t,name:"contactName",labelText:y.t("adminDashboard.addCustomer.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(le.jsx)(N.a,{id:"contactPhone"+t,name:"contactPhone",labelText:y.t("adminDashboard.addCustomer.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(le.jsx)(N.a,{id:"contactEmail"+t,name:"contactEmail",labelText:y.t("adminDashboard.addCustomer.contactEmail"),value:this.state.contactEmail,onChange:this.handleChanges,invalidText:y.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(le.jsx)(Ot.a,{id:"notes"+t,name:"notes",labelText:y.t("adminDashboard.addCustomer.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),e]})}}]),a}(u.Component)),Pt="api/partners",Et=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Pt),r=Object(o.a)(Object(o.a)({},G()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Mt="api/projects",It=function(){var e=Object(j.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$("".concat(t,"/").concat(Mt)),n=Object(o.a)(Object(o.a)({},G()),{},{method:"GET"}),e.abrupt("return",X(a,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$("".concat(t,"/").concat(Mt,"/customer/").concat(a)),r=Object(o.a)(Object(o.a)({},G()),{},{method:"GET"}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ut=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$("".concat(t,"/").concat(Mt,"/").concat(a)),r=Object(o.a)(Object(o.a)({},G()),{},{method:"GET"}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Vt=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Mt),r=Object(o.a)(Object(o.a)({},G()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),At=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Mt),r=Object(o.a)(Object(o.a)({},G()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ft=function(){var e=Object(j.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(Mt,"/").concat(a,"/subscriptions/").concat(n),s=Object(o.a)(Object(o.a)({},G()),{},{method:"POST"}),e.abrupt("return",X(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),zt=function(){var e=Object(j.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(Mt,"/").concat(a,"/users/").concat(n),s=Object(o.a)(Object(o.a)({},G()),{},{method:"POST"}),e.abrupt("return",X(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(j.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(Mt,"/").concat(a,"/partners/").concat(n),s=Object(o.a)(Object(o.a)({},G()),{},{method:"DELETE"}),e.abrupt("return",X(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),qt=function(){var e=Object(j.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(Mt,"/").concat(a,"/subscriptions/").concat(n),s=Object(o.a)(Object(o.a)({},G()),{},{method:"DELETE"}),e.abrupt("return",X(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(j.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(Mt,"/").concat(a,"/users/").concat(n),s=Object(o.a)(Object(o.a)({},G()),{},{method:"DELETE"}),e.abrupt("return",X(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Jt=function(){var e=Object(j.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(Mt,"/").concat(a,"/partners/").concat(n),s=Object(o.a)(Object(o.a)({},G()),{},{method:"POST"}),e.abrupt("return",X(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Mt,"/").concat(a,"/users/"),r=Object(o.a)(Object(o.a)({},G()),{},{method:"GET"}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_t=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(Mt,"/").concat(a,"/subscriptions/"),r=Object(o.a)(Object(o.a)({},G()),{},{method:"GET"}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Yt=function(e){var t=e.children,a=e.keycloak;return a&&a.initialized&&a.authenticated?t:null},Gt=function(e){var t=e.children,a=e.keycloak;return a&&a.initialized&&a.authenticated?null:t},Kt=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(b.a)({},a,n))},r.handleFormSubmit=function(){if(r.handleValidation()){var e={name:r.state.name,partnerNumber:r.state.partnerNumber,notes:r.state.notes};r.partnerPost(e).then((function(){r.setState({submitMsg:y.t("submitMessages.added"),submitColour:"#24a148"}),r.props.updateCustomerList()})).catch((function(){r.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})}))}},r.clearValues=function(){r.componentDidMount(),document.querySelector("#modal-form-partner").className.includes("is-visible")||r.setState({projectId:"",name:"",partnerNumber:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"})},r.state={projectList:{},projectId:"",name:"",partnerNumber:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){F(this.props)&&(this.fetchData(),document.querySelector(".add-partner-button").addEventListener("click",this.clearValues,!1))}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"handleValidation",value:function(){var e={},t=!0;return""!==this.state.projectId&&"project-list"!==this.state.projectId||(t=!1,e.projectId=!0),""===this.state.name&&(t=!1,e.name=!0),""===this.state.partnerNumber&&(t=!1,e.partnerNumber=!0),this.setState({invalid:e}),t}},{key:"fetchData",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=12;break}return t={},e.prev=2,e.next=5,It(this.props.serviceUrl);case 5:t=e.sent.data,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:this.setState({projectList:t||{}});case 12:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"partnerPost",value:function(){var e=Object(j.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=7;break}return e.next=3,Et(this.props.serviceUrl,t);case 3:return a=e.sent,e.next=6,Jt(this.props.serviceUrl,this.state.projectId,a.data.id);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=Object(le.jsx)("div",{className:"bx--modal-header",children:Object(le.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),t=this.props.keycloak,a="modal-form-partner";return Object(le.jsx)(Yt,{keycloak:t,children:Object(le.jsxs)(Ne.a,{buttonTriggerText:y.t("buttons.addPartner"),modalHeading:y.t("adminDashboard.addPartner.title"),buttonTriggerClassName:"add-partner bx--btn bx--btn--tertiary add-partner-button",className:"modal-form",id:a,handleSubmit:this.handleFormSubmit,primaryButtonText:y.t("modalText.save"),secondaryButtonText:y.t("modalText.cancel"),children:[e,Object(le.jsx)("div",{className:"form-container",children:Object(le.jsxs)(D.a,{onSubmit:this.handleFormSubmit,children:[Object(le.jsxs)(T.a,{id:"projectId"+a,name:"projectId",labelText:y.t("adminDashboard.addPartner.projectList")+" *",value:this.state.projectId,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.projectId,children:[Object(le.jsx)(w.a,{text:y.t("adminDashboard.addPartner.selectProject"),value:"project-list"}),0!==Object.keys(this.state.projectList).length?this.state.projectList.map((function(e,t){return Object(le.jsx)(w.a,{text:e.name,value:e.id,children:e.name},t)})):null]}),Object(le.jsx)(N.a,{id:"name"+a,name:"name",labelText:y.t("adminDashboard.addPartner.partnerName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(le.jsx)(N.a,{id:"partnerNumber"+a,name:"partnerNumber",labelText:y.t("adminDashboard.addPartner.partnerNumber")+" *",value:this.state.partnerNumber,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.partnerNumber}),Object(le.jsx)(Ot.a,{name:"notes",labelText:y.t("adminDashboard.addPartner.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),e]})})}}]),a}(u.Component)),Wt=a(127),Zt=a(140),Qt=a(112),$t=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(b.a)({},a,n))},r.handleFormSubmit=function(){if(r.handleValidation()){for(var e={id:r.props.project.id,customer:r.props.project.customer,name:r.state.name,description:r.state.description,systemId:r.state.systemId,contactName:r.state.contactName,contactPhone:r.state.contactPhone,contactEmail:r.state.contactEmail,notes:r.state.notes},t=0;t<r.props.allProjects.length;t++)if(e.systemId===r.props.allProjects[t].systemId&&e.id!==r.props.allProjects[t].id&&""!==e.systemId.trim())return void window.alert("That system id is already in use in another project");r.projectPut(e).then((function(){r.setState({submitMsg:y.t("submitMessages.updated"),submitColour:"#24a148"}),r.props.updateProjectList()})).catch((function(e){console.log(e),r.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})}))}},r.state={projects:{},customerList:{},customerId:"",name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},modalId:"",buttonId:"",submitMsg:"",submitColour:"black"},r}return Object(r.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;return""===this.state.name&&(t=!1,e.name=!0),""===this.state.description&&(t=!1,e.description=!0),this.setState({invalid:e}),t}},{key:"getCustomers",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=5;break}return e.next=3,kt(this.props.serviceUrl);case 3:t=e.sent,this.setState({customerList:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProjectDetails",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=5;break}return e.next=3,Ut(this.props.serviceUrl,this.props.project.id);case 3:t=e.sent,this.setState({name:t.data.name,description:t.data.description,systemId:t.data.systemId,contactName:t.data.contactName,contactPhone:t.data.contactPhone,contactEmail:t.data.contactEmail,notes:t.data.notes,modalId:"modal-form-project-edit-"+t.data.id,buttonId:"edit-project-button-"+t.data.id});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllProjects",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It(this.props.serviceUrl);case 2:t=e.sent,this.setState({projects:t.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"projectPut",value:function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=4;break}return e.next=3,At(this.props.serviceUrl,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){F(this.props)&&(this.getCustomers(),this.getAllProjects(),this.getProjectDetails())}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&(this.getCustomers(),this.getAllProjects(),this.getProjectDetails())}},{key:"render",value:function(){var e=Object(le.jsx)("div",{className:"bx--modal-header",children:Object(le.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),t=this.state.modalId;return Object(le.jsxs)(Qt.a,{id:this.state.modalId,className:"modal-form",open:this.props.open,onRequestClose:this.props.closeModal,onRequestSubmit:this.handleFormSubmit,modalHeading:y.t("adminDashboard.addProject.editTitle"),primaryButtonText:y.t("modalText.save"),secondaryButtonText:y.t("modalText.cancel"),children:[e,Object(le.jsx)("div",{className:"form-container",children:Object(le.jsxs)(D.a,{onSubmit:this.handleFormSubmit,children:[Object(le.jsx)(N.a,{id:"name"+t,name:"name",labelText:y.t("adminDashboard.addProject.projectName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(le.jsx)(N.a,{id:"description"+t,name:"description",labelText:y.t("adminDashboard.addProject.projectDesc")+" *",value:this.state.description,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(le.jsx)(N.a,{id:"systemId"+t,name:"systemId",labelText:y.t("adminDashboard.addProject.systemId"),value:this.state.systemId,onChange:this.handleChanges}),Object(le.jsx)(N.a,{id:"contactName"+t,name:"contactName",labelText:y.t("adminDashboard.addProject.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(le.jsx)(N.a,{id:"contactPhone"+t,name:"contactPhone",labelText:y.t("adminDashboard.addProject.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(le.jsx)(N.a,{id:"contactEmail"+t,name:"contactEmail",labelText:y.t("adminDashboard.addProject.contactEmail"),value:this.state.contactEmail,onChange:this.handleChanges,invalidText:y.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(le.jsx)(Ot.a,{name:"notes",labelText:y.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),e]})}}]),a}(u.Component)),Xt=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleRemovePartner=function(e,t,a){e.preventDefault(),window.confirm("Are you sure you want to remove this partner from the project?")&&r.removePartner(t,a).then((function(e){r.setState({project:e.data,submitMsg:y.t("submitMessages.deleted"),submitColour:"#24a148"}),r.props.updateProjectList()})).catch((function(e){console.log(e),r.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})}))},r.state={projectId:r.props.project.id,project:r.props.project},r.headerData=[{header:y.t("adminDashboard.addPartner.partnerName"),key:"partner"},{header:y.t("adminDashboard.addPartner.partnerNumber"),key:"partnerNumber"},{header:y.t("adminDashboard.addPartner.notes"),key:"notes"},{header:y.t("customerDashboard.action"),key:"action"}],r}return Object(r.a)(a,[{key:"removePartner",value:function(){var e=Object(j.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B()){e.next=4;break}return e.next=3,Rt(this.props.serviceUrl,t,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=Object(le.jsx)("div",{className:"bx--modal-header",children:Object(le.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})});return Object(le.jsxs)(Qt.a,{id:"modal-form-manage-partners",className:"modal-form",open:this.props.open,onRequestClose:this.props.closeModal,onRequestSubmit:this.props.closeModal,modalHeading:y.t("adminDashboard.managePartners.title"),primaryButtonText:y.t("modalText.done"),children:[t,Object(le.jsx)("div",{children:Object(le.jsx)(he.a,{rows:ea,headers:this.headerData,children:function(t){t.rows;var a=t.headers,n=t.getHeaderProps,r=t.getTableProps;return Object(le.jsx)(me.a,{description:y.t("customerDashboard.tableDesc"),children:Object(le.jsxs)(be.a,Object(o.a)(Object(o.a)({},r()),{},{children:[Object(le.jsx)(je.a,{children:Object(le.jsx)(ve.a,{children:a.map((function(e){return Object(le.jsx)(fe.a,Object(o.a)(Object(o.a)({},n({header:e})),{},{children:e.header}))}))},"headerRow")}),Object(le.jsx)(ge.a,{children:e.state.project.partners.map((function(t,a){return Object(le.jsxs)(ve.a,{children:[Object(le.jsx)(Oe.a,{children:t.name}),Object(le.jsx)(Oe.a,{children:t.partnerNumber}),Object(le.jsx)(Oe.a,{children:t.notes}),Object(le.jsx)(Oe.a,{children:Object(le.jsxs)("div",{children:[Object(le.jsx)(P.a,{kind:"ghost",onClick:function(a){return e.handleRemovePartner(a,e.state.projectId,t.id)},style:{display:"block",width:"100%",color:"red"},children:y.t("buttons.delete")}),Object(le.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}})]})})]},"partner"+a)}))})]}))})}})}),t]})}}]),a}(u.Component),ea=[{id:"a",name:"Partner 1",partnerNumber:"123"},{id:"b",name:"Partner 2",partnerNumber:"456"}],ta=de(Xt),aa=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleCloseModal=function(t){t&&t.preventDefault(),e.setState({openEditProject:!1,openManagePartners:!1})},e.state={openEditProject:!1,openManagePartners:!1},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=R(),a=this.props.history,n=t&&Object(le.jsx)(Wt.a,{itemText:y.t("buttons.delete"),onClick:function(t){return e.props.handleDeleteProject(t,e.props.project.id)},isDelete:!0}),r=t&&Object(le.jsx)(Wt.a,{itemText:y.t("buttons.edit"),onClick:function(){return e.setState({openEditProject:!0})}}),s=t&&Object(le.jsx)($t,{open:this.state.openEditProject,closeModal:this.handleCloseModal,allProjects:this.props.allProjects,project:this.props.project,serviceUrl:this.props.serviceUrl,updateProjectList:this.props.updateProjectList}),i=t&&Object(le.jsx)(Wt.a,{itemText:y.t("buttons.managePartners"),onClick:function(){return e.setState({openManagePartners:!0})}}),c=t&&Object(le.jsx)(ta,{open:this.state.openManagePartners,closeModal:this.handleCloseModal,project:this.props.project,serviceUrl:this.props.serviceUrl,updateProjectList:this.props.updateProjectList}),o=t&&Object(le.jsx)(Wt.a,{itemText:y.t("buttons.manageSubscriptions"),onClick:function(){return a.push("/manage-subscriptions/".concat(e.props.project.id))}}),u=t&&Object(le.jsx)(Wt.a,{itemText:y.t("buttons.manageUsers"),onClick:function(){return a.push("/manage-users/".concat(e.props.project.id))}}),l=this.props.subscription?"/"+this.props.subscription.id:"",d=(!this.props.subscription||!t)&&Object(le.jsx)(Wt.a,{itemText:y.t("buttons.subscriptionRequest"),onClick:function(){return a.push("/subscription/".concat(e.props.project.id).concat(l))}}),p=this.props.subscription&&Object(le.jsx)(Wt.a,{itemText:y.t("buttons.openTicket"),onClick:function(){return a.push("/ticket/".concat(e.props.project.id))}}),h=Object(le.jsx)(le.Fragment,{}),m=this.props.ticketingSystem;if(this.props.subscription&&m&&m.url){var b=m.url.substr(0,m.url.indexOf("/rest"))+"/issues/?jql=Organizations="+this.props.project.systemId;h=Object(le.jsx)(Wt.a,{itemText:y.t("buttons.viewAllTickets"),onClick:function(){return window.open(b)}})}var j=this.props.subscription&&Object(le.jsx)(Wt.a,{itemText:y.t("buttons.view"),onClick:function(){return a.push("/subscription-details/".concat(e.props.subscription.id))}}),v=Object(le.jsxs)(le.Fragment,{children:[s,c]});return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)(Zt.a,{flipped:!0,menuOptionsClass:"entando-customer-portal",children:[j,r,d,p,h,o,u,i,n]}),v]})}}]),a}(u.Component),na=de(Object(jt.f)(aa)),ra="api/project-subscriptions",sa=function(e){return String(new Date(e).toDateString())},ia=function(e,t){var a=new Date(e).setMonth(new Date(e).getMonth()+t);return String(new Date(a).toDateString())},ca=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(ra,"/").concat(a),r=Object(o.a)(Object(o.a)({},G()),{},{method:"GET"}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),oa=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(ra),r=Object(o.a)(Object(o.a)({},G()),{},{method:"POST",body:a?JSON.stringify(a):null}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ua=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(ra),r=Object(o.a)(Object(o.a)({},G()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),la=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(ra,"/renew"),r=Object(o.a)(Object(o.a)({},G()),{},{method:"PUT",body:a?JSON.stringify(a):null}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),da=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).updateProjectList=function(){r.fetchData()},r.handleDeleteProject=function(e,t){e.preventDefault(),window.confirm("Are you sure you want to delete this project?")&&r.deleteProject(t).then((function(){r.setState({submitMsg:y.t("submitMessages.deleted"),submitColour:"#24a148"}),r.props.updateCustomerList()})).catch((function(){r.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})}))},r.state={projects:{},ticketingSystem:{},action:"Edit",showMenu:{},productName:""},r.props.productName&&r.props.productName[0].name&&r.initializeHeaderData(),r}return Object(r.a)(a,[{key:"fetchData",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t,a,n,r,s,i=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=20;break}if(t=this.props,a=t.customer,n=t.serviceUrl,e.prev=2,r={},s={},!a||!a.id){e.next=14;break}return e.next=8,Lt(n,a.id);case 8:return r=e.sent.data,e.next=11,ae(n);case 11:return s=e.sent,e.next=14,Ye(n).then((function(e){var t=e.data;i.props.productName&&!i.props.productName[0].name||(i.setState({productName:JSON.parse(t[0].productName)[0].name}),i.initializeHeaderData())}));case 14:this.setState({projects:r,ticketingSystem:s}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),console.error("Error fetchData: ",e.t0);case 20:this.render();case 21:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"initializeHeaderData",value:function(){this.headerData=[{header:y.t("customerDashboard.projectName"),key:"projectName"},{header:y.t("customerDashboard.partners"),key:"partners"},{header:this.props.productName&&this.props.productName[0].name?"".concat(this.props.productName[0].name," Version"):"".concat(this.state.productName," Version"),key:"entandoVersion"},{header:y.t("customerDashboard.status"),key:"status"},{header:y.t("customerDashboard.startDate"),key:"startDate"},{header:y.t("customerDashboard.endDate"),key:"endDate"},{header:y.t("customerDetails.notes"),key:"notes"},{header:y.t("customerDashboard.action"),key:"action"}]}},{key:"componentDidMount",value:function(){F(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"deleteProject",value:function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=4;break}return e.next=3,wt(this.props.serviceUrl,this.props.customer.id,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(le.jsx)("div",{children:this.state.projects&&0!==Object.keys(this.state.projects).length&&Object(le.jsx)(he.a,{rows:[{id:"1"}],headers:this.headerData,children:function(t){t.rows;var a=t.headers,n=t.getHeaderProps,r=t.getTableProps;return Object(le.jsx)(me.a,{description:y.t("customerDashboard.tableDesc"),children:Object(le.jsxs)(be.a,Object(o.a)(Object(o.a)({},r()),{},{children:[Object(le.jsx)(je.a,{children:Object(le.jsx)(ve.a,{children:a.map((function(e){var t;return e.header===y.t("customerDetails.notes")?B()&&(t=Object(le.jsx)(fe.a,Object(o.a)(Object(o.a)({},n({header:e})),{},{children:e.header}))):t=Object(le.jsx)(fe.a,Object(o.a)(Object(o.a)({},n({header:e})),{},{children:e.header})),t}))},"headerRow")}),Object(le.jsx)(ge.a,{children:e.state.projects.map((function(t,a){var n=W(t);return n?Object(le.jsxs)(ve.a,{children:[Object(le.jsx)(Oe.a,{children:Object(le.jsx)(bt.c,{to:"/subscription-details/".concat(n.id),style:{fontWeight:"bold"},children:t.name})}),0!==t.partners.length?Object(le.jsx)(Oe.a,{children:t.partners.map((function(e,t){return Object(le.jsx)("div",{children:e.name},t)}))}):Object(le.jsx)(Oe.a,{children:y.t("userMessages.none")}),n.entandoVersion?Object(le.jsx)(Oe.a,{children:n.entandoVersion.name}):Object(le.jsx)(Oe.a,{children:y.t("userMessages.none")}),Object(le.jsx)(Oe.a,{children:n.status}),Object(le.jsx)(Oe.a,{children:sa(n.startDate)}),Object(le.jsx)(Oe.a,{children:ia(n.startDate,n.lengthInMonths)}),B()?Object(le.jsx)(Oe.a,{style:{width:"250px"},children:t.notes}):null,Object(le.jsx)(Oe.a,{children:Object(le.jsx)(na,{serviceUrl:e.props.serviceUrl,ticketingSystem:e.state.ticketingSystem,locale:e.props.locale,subscription:n,project:t,allProjects:e.state.projects,handleDeleteProject:e.handleDeleteProject,updateProjectList:e.updateProjectList})})]},a):Object(le.jsxs)(ve.a,{children:[Object(le.jsx)(Oe.a,{style:{fontWeight:"bold"},children:t.name}),0!==t.partners.length?Object(le.jsx)(Oe.a,{children:t.partners.map((function(e,t){return Object(le.jsx)("div",{children:e.name},t)}))}):Object(le.jsx)(Oe.a,{children:y.t("userMessages.none")}),Object(le.jsx)(Oe.a,{children:y.t("userMessages.none")}),Object(le.jsx)(Oe.a,{children:y.t("userMessages.none")}),Object(le.jsx)(Oe.a,{children:y.t("userMessages.none")}),Object(le.jsx)(Oe.a,{children:y.t("userMessages.none")}),B()?Object(le.jsx)(Oe.a,{style:{width:"250px"},children:t.notes}):null,Object(le.jsx)(Oe.a,{children:Object(le.jsx)(na,{serviceUrl:e.props.serviceUrl,ticketingSystem:e.state.ticketingSystem,locale:e.props.locale,project:t,allProjects:e.state.projects,handleDeleteProject:e.handleDeleteProject,updateProjectList:e.updateProjectList})})]},a)}))})]}))})}})})}}]),a}(u.Component)),pa=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={customer:{}},e}return Object(r.a)(a,[{key:"render",value:function(){return Object(le.jsx)("div",{className:"customer-details",children:Object(le.jsxs)(k.a,{style:{margin:"2em 0",minHeight:"0",paddingBottom:"0"},children:[Object(le.jsxs)("div",{children:[Object(le.jsx)("strong",{children:y.t("customerDashboard.customerId")})," ",this.props.customer.id]}),Object(le.jsxs)("div",{children:[Object(le.jsx)("strong",{children:y.t("customerDashboard.customerName")})," ",this.props.customer.name]})]})})}}]),a}(u.Component)),ha=function(e){var t=e.label,a=e.icon;return Object(le.jsxs)(le.Fragment,{children:[y.t(t),a]})},ma=Object(le.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(le.jsx)("path",{d:"M7 6H6V12H7V6Z",fill:"#0F62FE"}),Object(le.jsx)("path",{d:"M10 6H9V12H10V6Z",fill:"#0F62FE"}),Object(le.jsx)("path",{d:"M2 3V4H3V14C3 14.2652 3.10536 14.5196 3.29289 14.7071C3.48043 14.8946 3.73478 15 4 15H12C12.2652 15 12.5196 14.8946 12.7071 14.7071C12.8946 14.5196 13 14.2652 13 14V4H14V3H2ZM4 14V4H12V14H4Z",fill:"#0F62FE"}),Object(le.jsx)("path",{d:"M10 1H6V2H10V1Z",fill:"#0F62FE"})]}),ba=Object(le.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(le.jsx)("path",{d:"M15.47 7.83C14.8819 6.30882 13.861 4.99331 12.5334 4.04604C11.2058 3.09878 9.62971 2.56129 7.99997 2.5C6.37023 2.56129 4.79416 3.09878 3.46657 4.04604C2.13898 4.99331 1.11805 6.30882 0.52997 7.83C0.490254 7.93985 0.490254 8.06015 0.52997 8.17C1.11805 9.69118 2.13898 11.0067 3.46657 11.954C4.79416 12.9012 6.37023 13.4387 7.99997 13.5C9.62971 13.4387 11.2058 12.9012 12.5334 11.954C13.861 11.0067 14.8819 9.69118 15.47 8.17C15.5097 8.06015 15.5097 7.93985 15.47 7.83ZM7.99997 12.5C5.34997 12.5 2.54997 10.535 1.53497 8C2.54997 5.465 5.34997 3.5 7.99997 3.5C10.65 3.5 13.45 5.465 14.465 8C13.45 10.535 10.65 12.5 7.99997 12.5Z",fill:"#0F62FE"}),Object(le.jsx)("path",{d:"M8 5C7.40666 5 6.82664 5.17595 6.33329 5.50559C5.83994 5.83524 5.45543 6.30377 5.22836 6.85195C5.0013 7.40013 4.94189 8.00333 5.05765 8.58527C5.1734 9.16721 5.45912 9.70176 5.87868 10.1213C6.29824 10.5409 6.83279 10.8266 7.41473 10.9424C7.99667 11.0581 8.59987 10.9987 9.14805 10.7716C9.69623 10.5446 10.1648 10.1601 10.4944 9.66671C10.8241 9.17336 11 8.59334 11 8C11 7.20435 10.6839 6.44129 10.1213 5.87868C9.55871 5.31607 8.79565 5 8 5ZM8 10C7.60444 10 7.21776 9.8827 6.88886 9.66294C6.55996 9.44318 6.30362 9.13082 6.15224 8.76537C6.00087 8.39991 5.96126 7.99778 6.03843 7.60982C6.1156 7.22186 6.30608 6.86549 6.58579 6.58579C6.86549 6.30608 7.22186 6.1156 7.60982 6.03843C7.99778 5.96126 8.39992 6.00087 8.76537 6.15224C9.13082 6.30362 9.44318 6.55996 9.66294 6.88886C9.8827 7.21776 10 7.60444 10 8C10 8.53043 9.78929 9.03914 9.41421 9.41421C9.03914 9.78929 8.53043 10 8 10Z",fill:"#0F62FE"})]}),ja=Object(le.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(le.jsx)("path",{d:"M15 13H1V14H15V13Z",fill:"#0F62FE"}),Object(le.jsx)("path",{d:"M12.7 4.5C13.1 4.1 13.1 3.5 12.7 3.1L10.9 1.3C10.5 0.9 9.9 0.9 9.5 1.3L2 8.8V12H5.2L12.7 4.5ZM10.2 2L12 3.8L10.5 5.3L8.7 3.5L10.2 2ZM3 11V9.2L8 4.2L9.8 6L4.8 11H3Z",fill:"#0F62FE"})]}),va=Object(le.jsxs)("svg",{width:"15",height:"16",viewBox:"0 0 15 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(le.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.96875 7.5V3.5H7.03125V7.5H3.28125V8.5H7.03125V12.5H7.96875V8.5H11.7188V7.5H7.96875Z",fill:"#002F87"}),Object(le.jsx)("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"3",y:"3",width:"9",height:"10",children:Object(le.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.96875 7.5V3.5H7.03125V7.5H3.28125V8.5H7.03125V12.5H7.96875V8.5H11.7188V7.5H7.96875Z",fill:"white"})}),Object(le.jsx)("g",{mask:"url(#mask0)"})]}),fa=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(b.a)({},a,n))},r.getCustomerDetails=function(e){r.getCustomer(e)},r.handleFormSubmit=function(){if(r.handleValidation()){var e={id:r.props.customer.id,name:r.state.name,customerNumber:r.state.customerNumber,contactName:r.state.contactName,contactPhone:r.state.contactPhone,contactEmail:r.state.contactEmail,notes:r.state.notes};r.updateCustomer(e).then((function(){r.setState({submitMsg:y.t("submitMessages.updated"),submitColour:"#24a148"}),r.props.updateCustomerList(),r.getCustomerDetails(r.props.customer.id)})).catch((function(){r.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})}))}},r.clearValues=function(){document.querySelector("#"+r.state.modalId).className.includes("is-visible")||r.setState({name:r.props.customer.name,customerNumber:r.props.customer.customerNumber,contactName:r.props.customer.contactName,contactPhone:r.props.customer.contactPhone,contactEmail:r.props.customer.contactEmail,notes:r.props.customer.notes,invalid:{}})},r.state={name:"",customerNumber:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},modalId:"",buttonId:"",submitMsg:"",submitColour:"black"},r}return Object(r.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;return""===this.state.name&&(t=!1,e.name=!0),""===this.state.customerNumber&&(t=!1,e.customerNumber=!0),this.setState({invalid:e}),t}},{key:"updateCustomer",value:function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=4;break}return e.next=3,Dt(this.props.serviceUrl,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCustomer",value:function(){var e=Object(j.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=5;break}return e.next=3,Ct(this.props.serviceUrl,t);case 3:a=e.sent.data,this.setState({name:a.name,customerNumber:a.customerNumber,contactName:a.contactName,contactPhone:a.contactPhone,contactEmail:a.contactEmail,notes:a.notes,modalId:"modal-form-customer-edit-"+a.id,buttonId:"edit-customer-button-"+a.id});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){F(this.props)&&this.props.customerId&&this.getCustomerDetails(this.props.customerId)}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.getCustomerDetails(this.props.customerId)}},{key:"render",value:function(){var e=Object(le.jsx)("div",{className:"bx--modal-header",children:Object(le.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),t=this.state.modalId,a="bx--btn bx--btn--ghost edit-customer-button-"+this.props.customerId;return t&&Object(le.jsxs)(Ne.a,{buttonTriggerText:Object(le.jsx)(ha,{label:"buttons.edit",icon:ja}),modalHeading:y.t("adminDashboard.editCustomer.title"),buttonTriggerClassName:a,className:"modal-form",id:t,handleSubmit:this.handleFormSubmit,primaryButtonText:y.t("modalText.save"),secondaryButtonText:y.t("modalText.cancel"),children:[e,Object(le.jsx)("div",{className:"form-container",children:Object(le.jsxs)(D.a,{onSubmit:this.handleFormSubmit,id:"form-"+t,children:[Object(le.jsx)(N.a,{id:"name"+t,name:"name",labelText:y.t("adminDashboard.addCustomer.customerName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(le.jsx)(N.a,{id:"customerNumber"+t,name:"customerNumber",labelText:y.t("adminDashboard.addCustomer.customerNumber")+" *",value:this.state.customerNumber,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.customerNumber}),Object(le.jsx)(N.a,{id:"contactName"+t,name:"contactName",labelText:y.t("adminDashboard.addCustomer.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(le.jsx)(N.a,{id:"contactPhone"+t,name:"contactPhone",labelText:y.t("adminDashboard.addCustomer.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(le.jsx)(N.a,{id:"contactEmail"+t,name:"contactEmail",labelText:y.t("adminDashboard.addCustomer.contactEmail"),value:this.state.contactEmail,onChange:this.handleChanges,invalidText:y.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(le.jsx)(Ot.a,{name:"notes",labelText:y.t("adminDashboard.addCustomer.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),e]})}}]),a}(u.Component)),ga=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(b.a)({},a,n))},r.handleFormSubmit=function(){if(r.handleValidation()){for(var e={name:r.state.name,description:r.state.description,systemId:r.state.systemId,contactName:r.state.contactName,contactPhone:r.state.contactPhone,contactEmail:r.state.contactEmail,notes:r.state.notes},t=0;t<r.state.projects.length;t++)if(e.systemId===r.state.projects[t].systemId&&""!==e.systemId.trim())return void window.alert("That system id is already in use in another project");r.projectPost(e).then((function(){r.setState({submitMsg:y.t("submitMessages.added"),submitColour:"#24a148"}),r.props.updateCustomerList(),r.getAllProjects()})).catch((function(){r.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})}))}},r.clearValues=function(){document.querySelector("#"+r.state.modalId).className.includes("is-visible")||r.setState({name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{}})},r.state={modalId:"modal-form-project-"+e.customerId,projects:{},name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"},r}return Object(r.a)(a,[{key:"handleValidation",value:function(){var e={},t=!0;return""===this.state.name&&(t=!1,e.name=!0),""===this.state.description&&(t=!1,e.description=!0),this.setState({invalid:e}),t}},{key:"getAllProjects",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,It(this.props.serviceUrl);case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:this.setState({projects:t.data?t.data:{}});case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.getAllProjects()}},{key:"projectPost",value:function(){var e=Object(j.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=7;break}return e.next=3,Vt(this.props.serviceUrl,t);case 3:return a=e.sent,e.next=6,Tt(this.props.serviceUrl,this.props.customer.id,a.data.id);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getAllProjects(),document.querySelector(".add-project-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){var e=Object(le.jsx)("div",{className:"bx--modal-header",children:Object(le.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),t=this.state.modalId;return Object(le.jsxs)(Ne.a,{buttonTriggerText:Object(le.jsx)(ha,{label:"buttons.addProject",icon:va}),modalHeading:y.t("adminDashboard.addProject.title"),buttonTriggerClassName:"bx--btn bx--btn--ghost add-project-button",className:"modal-form",id:t,handleSubmit:this.handleFormSubmit,primaryButtonText:y.t("modalText.save"),secondaryButtonText:y.t("modalText.cancel"),children:[e,Object(le.jsx)("div",{className:"form-container",children:Object(le.jsxs)(D.a,{onSubmit:this.handleFormSubmit,children:[Object(le.jsxs)("div",{children:[Object(le.jsxs)("span",{children:[y.t("adminDashboard.addCustomer.customerName"),":"]})," ",this.props.customer.name]}),Object(le.jsx)(N.a,{id:"name"+t,name:"name",labelText:y.t("adminDashboard.addProject.projectName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(le.jsx)(N.a,{id:"description"+t,name:"description",labelText:y.t("adminDashboard.addProject.projectDesc")+" *",value:this.state.description,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(le.jsx)(N.a,{id:"systemId"+t,name:"systemId",labelText:y.t("adminDashboard.addProject.systemId"),value:this.state.systemId,onChange:this.handleChanges}),Object(le.jsx)(N.a,{id:"contactName"+t,name:"contactName",labelText:y.t("adminDashboard.addProject.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(le.jsx)(N.a,{id:"contactPhone"+t,name:"contactPhone",labelText:y.t("adminDashboard.addProject.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(le.jsx)(N.a,{id:"contactEmail"+t,name:"contactEmail",labelText:y.t("adminDashboard.addProject.contactEmail"),value:this.state.contactEmail,onChange:this.handleChanges,invalidText:y.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(le.jsx)(Ot.a,{id:"notes"+t,name:"notes",labelText:y.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),e]})}}]),a}(u.Component)),Oa=function(e){var t=e.label,a=e.icon,n=e.onClick;return Object(le.jsx)(P.a,{kind:"ghost",onClick:n,children:Object(le.jsx)(ha,{label:t,icon:a})})},xa=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleDelete=function(){window.confirm("Are you sure you want to delete this customer?")&&r.deleteCustomer().then((function(){r.props.updateCustomerList()}))},r.state={projects:{},customer:{}},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){F(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"fetchData",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.customerId,e.prev=1,e.next=4,Ct(this.props.serviceUrl,t);case 4:a=e.sent,this.setState({customer:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"deleteCustomer",value:function(){var e=Object(j.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yt(this.props.serviceUrl,this.state.customer.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(le.jsx)("div",{children:Object(le.jsxs)("div",{children:[J()&&Object(le.jsx)(pa,{serviceUrl:this.props.serviceUrl,customer:this.state.customer}),Object(le.jsxs)(S.a,{title:this.props.title,open:this.props.accordionOpened,children:[Object(le.jsxs)("div",{style:{display:"flex"},children:[B()&&Object(le.jsx)(bt.c,{style:{textDecoration:"none"},to:"/customer-details/".concat(this.state.customer.id),children:Object(le.jsx)(Oa,{label:"buttons.viewDetails",icon:ba})}),R()&&Object(le.jsxs)("div",{style:{display:"flex"},children:[Object(le.jsx)(fa,{serviceUrl:this.props.serviceUrl,customer:this.state.customer,updateCustomerList:this.props.updateCustomerList,customerId:this.state.customer.id},this.state.customer.id),Object(le.jsx)(ga,{serviceUrl:this.props.serviceUrl,customerId:this.props.customerId,customer:this.state.customer,updateCustomerList:this.props.updateCustomerList}),Object(le.jsx)(Oa,{label:"buttons.delete",icon:ma,onClick:this.handleDelete})]})]}),Object(le.jsx)(da,{serviceUrl:this.props.serviceUrl,customer:this.state.customer,locale:this.props.locale,updateCustomerList:this.props.updateCustomerList,productName:this.props.ticketSystemConfig&&this.props.ticketSystemConfig.productName?JSON.parse(this.props.ticketSystemConfig.productName):""},(new Date).getTime())]})]})})}}]),a}(u.Component)),ya=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleSearch=function(t){if("Enter"===t.key){var a=e.state.customers.filter((function(e){return e.name.toLowerCase().includes(t.target.value.toLowerCase())}));e.setState({filteredCustomers:a,currentPage:0})}else""!==t.target.value&&void 0!==t.target.value||e.setState({filteredCustomers:e.state.customers})},e.updateCustomerList=function(){e.fetchData()},e.state={customers:{},role:"",filteredCustomers:{},currentPage:0,test:"",loading:!0,ticketSystemConfig:{}},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"fetchData",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=17;break}return t={},e.prev=2,e.next=5,kt(this.props.serviceUrl);case 5:return t=e.sent,e.next=8,Ye(this.props.serviceUrl);case 8:a=e.sent,n=a.data,this.setState({ticketSystemConfig:n[0]}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:this.setState({customers:t.data?t.data:{},filteredCustomers:t.data?t.data:{},loading:!1});case 17:case"end":return e.stop()}}),e,this,[[2,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=1;t=0!==Object.keys(this.state.filteredCustomers).length?Math.ceil(this.state.filteredCustomers.length/5):1;var a=Object.keys(this.state.customers).length;return Object(le.jsxs)("div",{className:"admin-dashboard",children:[R()||q()||H()?Object(le.jsxs)(k.a,{children:[Object(le.jsx)("p",{className:"title",children:y.t("adminDashboard.allCustomers")}),Object(le.jsxs)("div",{className:"bx--row",children:[Object(le.jsx)("div",{className:"bx--col",children:Object(le.jsx)(vt.a,{onChange:this.handleSearch,id:"search",placeholder:y.t("adminDashboard.searchText"),labelText:y.t("adminDashboard.searchLabel"),onKeyPress:this.handleSearch})}),R()?Object(le.jsx)("div",{className:"bx--col",children:Object(le.jsxs)("div",{children:[Object(le.jsx)(Kt,{serviceUrl:this.props.serviceUrl,updateCustomerList:this.updateCustomerList}),Object(le.jsx)(Nt,{serviceUrl:this.props.serviceUrl,updateCustomerList:this.updateCustomerList})]})}):null]})]}):null,this.state.loading&&Object(le.jsx)(ft.a,{}),!this.state.loading&&Object(le.jsxs)("div",{className:"form-container",children:[Object(le.jsx)(C.a,{children:0!==a?this.state.filteredCustomers.map((function(t,a){var n=5*(e.state.currentPage+1)-1,r=5*e.state.currentPage,s=1===e.state.customers.length;return _()&&a>=r&&a<=n?Object(le.jsx)(xa,{serviceUrl:e.props.serviceUrl,customerId:t.id,title:t.name,updateCustomerList:e.updateCustomerList,locale:e.props.locale,accordionOpened:s,ticketSystemConfig:e.state.ticketSystemConfig},t.id):null})):null}),a>1&&Object(le.jsx)(gt.a,Object(o.a)(Object(o.a)({},{loop:Boolean(!1),page:Number(e.state.currentPage),totalItems:Number(t),itemsShown:Number(1),onChange:function(t){return e.setState({currentPage:t})}}),{},{className:"pagination-right"}))]})]})}}]),a}(l.a.Component)),ka="api/tickets/ticketingsystem",Ca=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat(ka,"/").concat(a),r=Object(o.a)(Object(o.a)({},G()),{},{method:"GET"}),e.abrupt("return",X(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Sa=function(){var e=Object(j.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/").concat(ka,"/").concat(a),s=Object(o.a)(Object(o.a)({},G()),{},{method:"POST",body:n?JSON.stringify(n):null}),e.abrupt("return",X(r,s));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Da=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={tickets:{},project:{},ticketingSystem:{},currentPage:0,loading:!0},r.headerData=[{header:y.t("ticketDetails.issue"),key:"issue"},{header:y.t("ticketDetails.summary"),key:"summary"},{header:y.t("ticketDetails.status"),key:"status"},{header:y.t("ticketDetails.type"),key:"type"},{header:y.t("ticketDetails.priority"),key:"priority"},{header:y.t("ticketDetails.created"),key:"created"},{header:y.t("ticketDetails.updated"),key:"updated"},{header:y.t("ticketDetails.link"),key:"link"}],r}return Object(r.a)(a,[{key:"fetchData",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_()){e.next=17;break}return e.prev=1,e.next=4,Ut(this.props.serviceUrl,this.props.projectId);case 4:return t=e.sent.data,e.next=7,ae(this.props.serviceUrl);case 7:return a=e.sent,e.next=10,Ca(this.props.serviceUrl,t.id);case 10:n=e.sent,this.setState({tickets:n,project:t,ticketingSystem:a,loading:!1}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){F(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"render",value:function(){var e=this,t=1;0!==Object.keys(this.state.tickets).length&&(t=Math.ceil(this.state.tickets.data.length/10));var a=this.state.ticketingSystem.url,n=null!=a?a.substr(0,a.indexOf("/rest")):null,r=Object.keys(this.state.tickets).length;return Object(le.jsxs)("div",{className:"bx--tile",children:[this.state.project.id&&Object(le.jsxs)("div",{children:[Object(le.jsx)("a",{href:n+"/issues/?jql=Organizations="+this.state.project.systemId,style:{textDecoration:"none"},target:"_blank",rel:"noreferrer",children:Object(le.jsx)(Oa,{label:"buttons.viewAllTickets",icon:ba})}),Object(le.jsx)(bt.c,{style:{textDecoration:"none"},to:"/ticket/".concat(this.state.project.id),children:Object(le.jsx)(Oa,{label:"buttons.openTicket",icon:va})})]}),this.state.loading&&Object(le.jsx)(ft.a,{}),!this.state.loading&&Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(he.a,{rows:[{id:"1"}],headers:this.headerData,children:function(t){t.rows;var a=t.headers,s=t.getHeaderProps,i=t.getTableProps;return Object(le.jsx)(me.a,{title:y.t("ticketDetails.listOfTickets"),children:Object(le.jsxs)(be.a,Object(o.a)(Object(o.a)({},i()),{},{children:[Object(le.jsx)(je.a,{children:Object(le.jsx)(ve.a,{children:a.map((function(e){return Object(le.jsx)(fe.a,Object(o.a)(Object(o.a)({},s({header:e})),{},{children:e.header}))}))})}),Object(le.jsx)(ge.a,{children:0!==r?e.state.tickets.data.map((function(t,a){var r=10*(e.state.currentPage+1)-1,s=10*e.state.currentPage,i=n+"/browse/"+t.systemId;return a>=s&&a<=r?Object(le.jsxs)(ve.a,{children:[Object(le.jsx)(Oe.a,{children:Object(le.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",children:t.systemId})}),Object(le.jsx)(Oe.a,{children:t.summary}),Object(le.jsx)(Oe.a,{children:t.status}),Object(le.jsx)(Oe.a,{children:t.type}),Object(le.jsx)(Oe.a,{children:t.priority}),Object(le.jsx)(Oe.a,{children:new Date(t.createDate).toDateString()}),Object(le.jsx)(Oe.a,{children:new Date(t.updateDate).toDateString()}),Object(le.jsx)(Oe.a,{children:Object(le.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",children:y.t("ticketDetails.viewTicket")})})]},t.id):null})):Object(le.jsx)(ve.a,{})})]}))})}}),r>10&&Object(le.jsx)(gt.a,Object(o.a)(Object(o.a)({},{loop:Boolean(!1),page:Number(e.state.currentPage),totalItems:Number(t),itemsShown:Number(1),onChange:function(t){return e.setState({currentPage:t})}}),{},{className:"pagination-right"}))]})]})}}]),a}(u.Component)),Ta="Product Support Subscription Entando Platform",wa="Free Commercial Open Source",Na=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).updateSubscription=function(){r.fetchData()},r.state={loading:!0,subscription:{},users:{},project:{},customer:{}},r}return Object(r.a)(a,[{key:"fetchData",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_()){e.next=20;break}return e.prev=1,t={},a={},e.next=6,ca(this.props.serviceUrl,this.props.match.params.id);case 6:if(!(n=e.sent).data.project){e.next=14;break}return e.next=10,Ut(this.props.serviceUrl,n.data.project.id);case 10:return a=e.sent,e.next=13,Bt(this.props.serviceUrl,a.data.id);case 13:t=e.sent;case 14:this.setState({subscription:n,project:a,customer:a.customer,users:t,loading:!1}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:case"end":return e.stop()}}),e,this,[[1,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){_()&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&_()&&this.fetchData()}},{key:"render",value:function(){var e=this,t=Ta,a=wa;if(this.state.loading)return null;if(_()){if(0!==Object.keys(this.state.subscription).length&&0!==Object.keys(this.state.project).length){var n=this.state.project.data,r=this.state.subscription.data;return Object(le.jsx)("div",{className:"subscription-details",children:Object(le.jsxs)("div",{children:[Object(le.jsx)(Je,{project:n,subscription:r,locale:this.props.locale}),Object(le.jsx)(k.a,{children:Object(le.jsx)("div",{className:"bx--grid",children:Object(le.jsxs)("div",{className:"bx--row",children:[Object(le.jsxs)("div",{className:"bx--col",children:[Object(le.jsxs)("div",{children:[Object(le.jsxs)("strong",{children:[y.t("customerDashboard.customerName"),":"]})," ",n.customer.name]}),Object(le.jsxs)("div",{children:[Object(le.jsxs)("strong",{children:[y.t("customerDashboard.projectName"),":"]})," ",n.name]}),Object(le.jsxs)("div",{children:[Object(le.jsxs)("strong",{children:[y.t("subscriptionDetails.description"),":"]})," ",r.project.description]}),Object(le.jsxs)("div",{children:[Object(le.jsxs)("strong",{children:[y.t("subscriptionDetails.partners"),":"]}),""!==n&&0!==Object.keys(n.partners).length?Object(le.jsx)(le.Fragment,{children:n.partners.map((function(e,t){return Object(le.jsxs)("div",{children:[" ",t===n.partners.length-1?e.name:e.name+", "," "]},t)}))}):Object(le.jsxs)(le.Fragment,{children:[" ",y.t("userMessages.none")," "]})]}),Object(le.jsxs)("div",{children:[Object(le.jsxs)("strong",{children:[y.t("subscriptionDetails.type"),":"]})," ",t]}),B()?Object(le.jsxs)("div",{children:[Object(le.jsxs)("strong",{children:[y.t("subscriptionDetails.notes"),":"]})," ",r.notes]}):null]}),Object(le.jsxs)("div",{className:"bx--col",children:[Object(le.jsxs)("div",{children:[Object(le.jsxs)("strong",{children:[y.t("subscriptionDetails.status"),":"]})," ",r.status]}),Object(le.jsxs)("div",{children:[Object(le.jsxs)("strong",{children:[y.t("subscriptionDetails.level"),":"]})," ",r.level]}),Object(le.jsxs)("div",{children:[Object(le.jsxs)("strong",{children:[y.t("subscriptionDetails.startDate"),":"]})," ",sa(r.startDate)]}),Object(le.jsxs)("div",{children:[Object(le.jsxs)("strong",{children:[y.t("subscriptionDetails.endDate"),":"]})," ",ia(r.startDate,r.lengthInMonths)]}),Object(le.jsxs)("div",{children:[Object(le.jsxs)("strong",{children:[y.t("subscriptionDetails.license"),":"]})," ",a]}),Object(le.jsxs)("div",{children:[Object(le.jsxs)("strong",{children:[y.t("subscriptionDetails.assignedUsers"),":"]}),""!==this.state.users.data&&0!==Object.keys(this.state.users.data).length?Object(le.jsx)(le.Fragment,{children:this.state.users.data.map((function(t,a){return Object(le.jsxs)("div",{children:[" ",a===e.state.users.data.length-1?t.username:t.username+", "," "]},a)}))}):Object(le.jsxs)(le.Fragment,{children:[" ",y.t("userMessages.none")," "]})]})]})]})})}),Object(le.jsx)("br",{}),Object(le.jsx)(Da,{projectId:n.id,serviceUrl:this.props.serviceUrl,locale:this.props.locale})]})})}return Object(le.jsx)("div",{children:y.t("userMessages.unauthorized")})}return Object(le.jsx)("div",{children:y.t("userMessages.unauthorized")})}}]),a}(l.a.Component)),Pa=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0,customer:{}},r}return Object(r.a)(a,[{key:"fetchData",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=11;break}return e.prev=1,e.next=4,Ct(this.props.serviceUrl,this.props.match.params.id);case 4:t=e.sent,this.setState({customer:t.data,loading:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&B()&&this.fetchData()}},{key:"render",value:function(){if(this.state.loading)return null;var e=this.state.customer;return e?Object(le.jsxs)("div",{className:"project-list",children:[Object(le.jsx)(Je,{customer:e,locale:this.props.locale}),Object(le.jsx)(k.a,{children:Object(le.jsx)("div",{className:"bx--grid",children:Object(le.jsxs)("div",{className:"bx--row",children:[Object(le.jsxs)("div",{className:"bx--col",children:[Object(le.jsxs)("p",{children:[Object(le.jsxs)("strong",{children:[y.t("customerDetails.id"),": "]})," ",e.id]}),Object(le.jsxs)("p",{children:[Object(le.jsxs)("strong",{children:[y.t("customerDetails.name"),": "]})," ",e.name]}),B()&&Object(le.jsxs)("p",{children:[Object(le.jsxs)("strong",{children:[y.t("customerDetails.notes"),": "]})," ",e.notes]})]}),Object(le.jsxs)("div",{className:"bx--col",children:[Object(le.jsxs)("p",{children:[Object(le.jsxs)("strong",{children:[y.t("customerDetails.contactName"),": "]})," ",e.contactName]}),Object(le.jsxs)("p",{children:[Object(le.jsxs)("strong",{children:[y.t("customerDetails.contactPhone"),": "]})," ",e.contactPhone]}),Object(le.jsxs)("p",{children:[Object(le.jsxs)("strong",{children:[y.t("customerDetails.contactEmail"),": "]})," ",e.contactEmail]})]})]})})}),Object(le.jsx)(da,{serviceUrl:this.props.serviceUrl,customer:e,locale:this.props.locale})]}):Object(le.jsxs)("p",{children:[y.t("userMessages.loading"),"..."]})}}]),a}(l.a.Component)),Ea=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleDeleteSubscription=function(e,t){e.preventDefault(),window.confirm(y.t("submitMessages.confirmDelete"))&&(console.log("confirmed to delete",t),r.deleteSubscription(t).then((function(){r.setState({submitMsg:y.t("submitMessages.deleted"),submitColour:"#24a148"}),r.fetchData()})).catch((function(){r.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})})))},r.state={projectId:"",project:{},subscriptions:[],productName:""},r.headerData=[{header:y.t("projectDetails.id"),key:"id"},{header:y.t("subscriptionDetails.status"),key:"status"},{header:y.t("projectDetails.entandoVersion"),key:"entandoVersion"},{header:y.t("subscriptionDetails.level"),key:"level"},{header:y.t("subscriptionDetails.startDate"),key:"startDate"},{header:y.t("subscriptionDetails.endDate"),key:"endDate"},{header:y.t("subscriptionDetails.lengthInMonths"),key:"lengthInMonths"},{header:y.t("subscriptionDetails.notes"),key:"notes"},{header:y.t("customerDashboard.action"),key:"action"}],r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){F(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"fetchData",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=16;break}if(t=this.props.match.params.id,a={},n={},null==t){e.next=11;break}return e.next=7,Ut(this.props.serviceUrl,t);case 7:return a=e.sent.data,e.next=10,_t(this.props.serviceUrl,t);case 10:n=e.sent.data;case 11:return e.next=13,Ye(this.props.serviceUrl);case 13:(r=e.sent)&&r.data&&r.data.length&&r.data[0].hasOwnProperty("subscriptionLevel")&&this.setState({productName:JSON.parse(r.data[0].productName)[0].name}),this.setState({projectId:t,project:a,subscriptions:n,productName:r&&r.data&&r.data.length&&r.data[0].productName?JSON.parse(r.data[0].productName)[0].name:""});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteSubscription",value:function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=4;break}return e.next=3,qt(this.props.serviceUrl,this.state.projectId,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.project;return Object(le.jsxs)("div",{id:"entando-customer-portal",children:[Object(le.jsx)(Je,{project:t,locale:this.props.locale}),Object(le.jsx)("h5",{children:t.name}),Object(le.jsx)(bt.c,{to:"/subscription/".concat(this.state.projectId),style:{textDecoration:"none"},children:Object(le.jsx)(P.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Add Subscription",children:y.t("buttons.addSubscription")})}),Object(le.jsx)(he.a,{rows:[{id:"1"}],headers:this.headerData,children:function(t){var a=t.headers,n=t.getHeaderProps,r=t.getTableProps;return Object(le.jsx)(me.a,{children:Object(le.jsxs)(be.a,Object(o.a)(Object(o.a)({},r()),{},{children:[Object(le.jsx)(je.a,{children:Object(le.jsx)(ve.a,{children:a.map((function(t){return Object(le.jsx)(fe.a,Object(o.a)(Object(o.a)({},n({header:t})),{},{children:"entandoVersion"===t.key?"".concat(e.state.productName," Version"):t.header}))}))})}),Object(le.jsx)(ge.a,{children:0!==Object.keys(e.state.subscriptions).length&&e.state.subscriptions.map((function(t,a){return Object(le.jsxs)(ve.a,{children:[Object(le.jsx)(Oe.a,{children:t.id}),Object(le.jsx)(Oe.a,{children:t.status}),Object(le.jsx)(Oe.a,{children:t.entandoVersion&&t.entandoVersion.name}),Object(le.jsx)(Oe.a,{children:t.level}),Object(le.jsx)(Oe.a,{children:sa(t.startDate)}),Object(le.jsx)(Oe.a,{children:ia(t.startDate,t.lengthInMonths)}),Object(le.jsx)(Oe.a,{children:t.lengthInMonths}),Object(le.jsx)(Oe.a,{children:t.notes}),Object(le.jsxs)(Oe.a,{children:[Object(le.jsx)(bt.c,{to:"/subscription/".concat(e.state.projectId,"/").concat(t.id),style:{textDecoration:"none"},children:Object(le.jsx)(P.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Edit",children:y.t("buttons.edit")})}),Object(le.jsx)(P.a,{kind:"ghost",onClick:function(a){return e.handleDeleteSubscription(a,t.id)},className:"button-warning",children:y.t("buttons.delete")})]})]},a)}))})]}))})}})]})}}]),a}(u.Component)),Ma=a(63),Ia="new",La="renewal",Ua="edit",Va={requested:"REQUESTED",pending:"PENDING",active:"ACTIVE",expired:"EXPIRED"},Aa=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(b.a)({},a,n)),r.setState({submitSuccess:!1,submitError:!1})},r.handleStartDateChange=function(e){var t="";e&&e[0]&&(t=Ie()(e[0].toISOString()).format("MM/DD/YYYY")),r.setState({startDate:t})},r.handleFormSubmit=function(e){if(e.preventDefault(),r.setState({submitSuccess:!1,submitError:!1}),r.handleValidation()){var t=r.state.formType,a=r.props.serviceUrl,n=r.stateToSubscription();t===Ua?ua(a,n).then((function(){r.updateStateForSuccess(!0)})).catch((function(){r.updateStateForSuccess(!1)})):t===Ia?r.newSubscription(n).then((function(e){Ft(a,r.state.projectId,e.data.id),r.updateStateForSuccess(!0)})).catch((function(){r.updateStateForSuccess(!1)})):t===La?r.renewSubscription(n).then((function(e){Ft(a,r.state.projectId,e.data.id),r.updateStateForSuccess(!0)})).catch((function(){r.updateStateForSuccess(!1)})):console.log("Illegal operation")}},r.state={loading:!0,project:{},projectId:"",subscription:{},startDate:"",level:"PLATINUM",lengthInMonths:"",notes:"",entandoVersionId:"",status:"",formType:"new",invalid:{},productVersions:[],submitSuccess:!1,submitError:!1,submitColour:"black",subsList:[],productName:""},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){F(this.props)&&(this.fetchData(),this.getLevelList(),this.setState({loading:!1}))}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&(this.fetchData(),this.setState({loading:!1}))}},{key:"getLevelList",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ye(this.props.serviceUrl);case 3:(t=e.sent)&&t.data&&t.data.length&&t.data[0].hasOwnProperty("subscriptionLevel")&&(a=JSON.parse(t.data[0].subscriptionLevel),this.setState({subsList:a,productName:t.data[0].productName?JSON.parse(t.data[0].productName)[0].name:""})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error getLevelList: ",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t,a,n,r,s,i,c,o,u,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_()){e.next=2;break}return e.abrupt("return");case 2:if(t=this.props.serviceUrl,a=this.props.match.params,n=a.subscriptionId,r=a.projectId,s={},i={},c=Ia,o="",u=R(),"undefined"===typeof n){e.next=20;break}return e.next=14,ca(t,n);case 14:s=e.sent.data,o=u?s.status:Va.requested,c=u?Ua:La,i=s.project,e.next=29;break;case 20:if(null===r){e.next=27;break}return e.next=23,Ut(t,r);case 23:i=e.sent.data,o=u?Va.pending:Va.requested,e.next=29;break;case 27:return console.log("Unable to load project and/or subscription"),e.abrupt("return");case 29:return e.next=31,ke(t);case 31:l=e.sent.data,this.setState({subscription:s,level:s.level?s.level:"",entandoVersionId:s.entandoVersion?s.entandoVersion.id:"",startDate:(d=s.startDate,Ie()(d).format("MM/DD/YYYY")),lengthInMonths:s.lengthInMonths?s.lengthInMonths:"",notes:s.notes?s.notes:"",status:o,formType:c,project:i,projectId:r,productVersions:l});case 33:case"end":return e.stop()}var d}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isNumeric",value:function(e){return!isNaN(e)&&!isNaN(parseInt(e))}},{key:"handleValidation",value:function(){var e={};return this.state.startDate&&this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(e.startDate=!0),this.state.lengthInMonths&&this.isNumeric(this.state.lengthInMonths)||(e.lengthInMonths=!0),this.state.level||(e.level=!0),""===this.state.entandoVersionId&&(e.entandoVersionId=!0),this.setState({invalid:e}),0===Object.keys(e).length}},{key:"updateStateForSuccess",value:function(e){e?this.setState({submitSuccess:!0,submitError:!1,submitColour:"#24a148"}):this.setState({submitSuccess:!1,submitError:!0,submitColour:"#da1e28"})}},{key:"stateToSubscription",value:function(){return{entandoVersionId:this.state.entandoVersionId,projectId:this.state.projectId,renewal:this.state.formType===La,projectSubscription:{id:this.state.subscription.id,startDate:new Date(this.state.startDate),lengthInMonths:this.state.lengthInMonths,level:this.state.level,status:this.state.status.toUpperCase(),notes:this.state.notes}}}},{key:"newSubscription",value:function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oa(this.props.serviceUrl,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renewSubscription",value:function(){var e=Object(j.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,la(this.props.serviceUrl,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupFormComponents",value:function(){var e=this.state.subsList.map((function(e,t){return Object(le.jsx)(w.a,{text:e.name,value:e.name,children:e.name},t)}));e.unshift(Object(le.jsx)(w.a,{text:y.t("subscriptionForm.chooseLevel"),value:""},"-1"));var t=this.state.productVersions.map((function(e){return e.status?Object(le.jsx)(w.a,{text:e.name,value:e.id,children:e.name},e.id):null}));return t.unshift(Object(le.jsx)(w.a,{text:y.t("subscriptionForm.chooseVersion"),value:""},"-1")),{subscriptionLevelList:e,versionList:t,statusList:Object.entries(Va).map((function(e){var t=Object(Ma.a)(e,2),a=t[0],n=t[1];return Object(le.jsx)(w.a,{text:n,value:n,children:n},a)}))}}},{key:"renderForm",value:function(){var e=this.setupFormComponents(),t=e.subscriptionLevelList,a=e.versionList,n=e.statusList;return Object(le.jsx)("div",{children:Object(le.jsxs)("div",{className:"bx--row",children:[Object(le.jsxs)("div",{className:"bx--col",children:[Object(le.jsxs)("div",{children:[Object(le.jsxs)("span",{children:[y.t("subscriptionForm.projectName"),":"]})," ",this.state.project.name]}),Object(le.jsx)(T.a,{id:"status",name:"status",labelText:y.t("subscriptionForm.subscriptionStatus"),value:this.state.status,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.status,disabled:!R(),children:n}),Object(le.jsx)(T.a,{id:"level",name:"level",labelText:y.t("subscriptionForm.subscriptionLevel")+" *",value:this.state.level||"",onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.level,children:t}),Object(le.jsx)(T.a,{id:"entandoVersionId",name:"entandoVersionId",labelText:"".concat(this.state.productName," Version *"),value:this.state.entandoVersionId,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.entandoVersionId,children:a})]}),Object(le.jsxs)("div",{className:"bx--col",children:[Object(le.jsx)(Pe.a,{dateFormat:"m/d/Y",datePickerType:"single",value:this.state.startDate,onChange:this.handleStartDateChange,children:Object(le.jsx)(Ee.a,{id:"startDate",name:"startDate",placeholder:"mm/dd/yyyy",labelText:y.t("subscriptionForm.subscriptionStartDate"),type:"text",invalidText:y.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(le.jsx)(N.a,{id:"lengthInMonths",name:"lengthInMonths",labelText:y.t("subscriptionForm.subscriptionLength")+" *",value:this.state.lengthInMonths,onChange:this.handleChanges,invalidText:y.t("validation.invalid.number"),invalid:this.state.invalid.lengthInMonths}),R()&&Object(le.jsx)(Ot.a,{id:"notes",name:"notes",labelText:y.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})]})})}},{key:"successErrorMessage",value:function(){var e=R(),t=this.state,a=t.subscriptionType,n=t.submitSuccess,r=t.submitError;if("new"===a){if(n)return e?this.createFormMessage("adminSubmitNewSuccess"):this.createFormMessage("customerSubmitSuccess");if(r)return this.createFormMessage("newSubError")}else{if(n)return e?this.createFormMessage("adminRenewNewSuccess"):this.createFormMessage("customerSubmitSuccess");if(r)return this.createFormMessage("renewSubError")}}},{key:"createFormMessage",value:function(e){return Object(le.jsx)("p",{style:{color:this.state.submitColour},children:y.t("subscriptionForm.".concat(e))})}},{key:"render",value:function(){var e="subscriptionForm.newSubscription";return"new"!==this.state.formType&&(e=R()?"subscriptionForm.editSubscription":"subscriptionForm.renewSubscription"),this.state.loading?null:_()?Object(le.jsxs)("div",{id:"entando-customer-portal",children:[Object(le.jsx)(Je,{project:this.state.project,subscription:this.state.subscription,locale:this.props.locale}),Object(le.jsxs)("div",{className:"form-container",children:[this.successErrorMessage(),Object(le.jsx)(D.a,{onSubmit:this.handleFormSubmit,children:Object(le.jsxs)("div",{className:"bx--grid",children:[Object(le.jsx)("div",{className:"bx--row",children:Object(le.jsx)("div",{className:"bx--col",children:Object(le.jsx)("strong",{children:y.t(e)})})}),this.renderForm(),Object(le.jsxs)(P.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",y.t("buttons.submit")]})]})})]})]}):Object(le.jsx)("p",{children:y.t("userMessages.unauthorized")})}}]),a}(u.Component)),Fa=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).handleChanges=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(b.a)({},n,r))},e.handleFormSubmit=function(t){(t.preventDefault(),e.handleValidation())?W(e.state.project)?e.createTicket().then((function(){e.setState({submitMsg:y.t("submitMessages.created"),submitColour:"#24a148"})})).catch((function(){e.setState({submitMsg:y.t("submitMessages.ticketError"),submitColour:"#da1e28"})})):e.setState({submitMsg:y.t("submitMessages.subscriptionRequired"),submitColour:"#da1e28"}):e.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})},e.state={loading:!0,project:{},role:"",invalid:{},submitMsg:"",submitColour:"black",type:"Support",priority:"Medium",status:"To Do",summary:"",description:"",types:[]},e.types=["Support","New Feature","Bug"],e.priorities=["Critical","High","Medium","Low"],e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){F(this.props)&&(this.fetchData(),this.getTicketingSystem())}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"getTicketingSystem",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ye(this.props.serviceUrl);case 3:t=e.sent,(a=t.data)&&a[0].hasOwnProperty("ticketType")&&((n=JSON.parse(a[0].ticketType)).sort((function(e,t){return String(e.name).localeCompare(t.name)})),this.setState({types:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error getTicketingSystem:",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchData",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_()){e.next=2;break}return e.abrupt("return");case 2:return t=this.props.match.params.id,e.next=5,Ut(this.props.serviceUrl,t);case 5:(a=e.sent.data)||(console.error("Unable to retrieve projectId ",t),a={}),this.setState({project:a,loading:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleValidation",value:function(){var e={},t=!0;return""===this.state.type&&(t=!1,e.type=!0),""===this.state.summary&&(t=!1,e.summary=!0),""===this.state.description&&(t=!1,e.description=!0),""===this.state.priority&&(t=!1,e.priority=!0),this.setState({invalid:e}),t}},{key:"createTicket",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_()){e.next=5;break}return t={type:this.state.type,summary:this.state.summary,description:this.state.description,priority:this.state.priority,systemId:"999",status:"To Do",createDate:"2021-02-22T14:14:09-05:00",updateDate:"2021-02-22T14:14:09-05:00"},e.next=4,Sa(this.props.serviceUrl,this.state.project.id,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?null:_()?Object(le.jsxs)("div",{id:"entando-customer-portal",children:[Object(le.jsx)(Je,{project:this.state.project,locale:this.props.locale}),Object(le.jsxs)("div",{className:"form-container",children:[Object(le.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),Object(le.jsx)(D.a,{onSubmit:this.handleFormSubmit,children:Object(le.jsxs)("div",{className:"bx--grid",children:[Object(le.jsx)("div",{className:"bx--row",style:{padding:"1em 0"},children:Object(le.jsx)("div",{className:"bx--col",children:Object(le.jsxs)("div",{className:"form-desc",children:[Object(le.jsx)("h4",{children:y.t("supportTicketForm.formTitle")}),Object(le.jsx)("div",{children:y.t("supportTicketForm.desc")})]})})}),Object(le.jsx)("div",{className:"bx--row",children:Object(le.jsxs)("div",{className:"bx--col",children:[Object(le.jsxs)("div",{children:[Object(le.jsxs)("strong",{children:[y.t("projectDetails.project"),":"]})," ",this.state.project.name]}),Object(le.jsx)(T.a,{id:"type",name:"type",labelText:y.t("supportTicketForm.type")+" *",value:this.state.type,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.type,children:this.state.types.map((function(e,t){return Object(le.jsx)(w.a,{text:e.name,value:e.name,children:e.name},t)}))}),Object(le.jsx)(T.a,{id:"priority",name:"priority",labelText:y.t("supportTicketForm.priority")+" *",value:this.state.priority,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.priority,children:this.priorities.map((function(e,t){return Object(le.jsx)(w.a,{text:e,value:e,children:e},t)}))})]})}),Object(le.jsx)("div",{className:"bx--row",children:Object(le.jsx)("div",{className:"bx--col",children:Object(le.jsx)(N.a,{labelText:y.t("supportTicketForm.ticketSummary")+" *",placeholder:y.t("supportTicketForm.addticketSummary"),id:"summary",name:"summary",value:this.state.summary,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.summary})})}),Object(le.jsx)("div",{className:"bx--row",children:Object(le.jsxs)("div",{className:"bx--col",children:[Object(le.jsx)(Ot.a,{labelText:y.t("supportTicketForm.ticketDescription")+" *",placeholder:y.t("supportTicketForm.addticketDescription"),name:"description",value:this.state.description,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(le.jsxs)(P.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",y.t("buttons.submit")," "]})]})})]})})]})]}):Object(le.jsx)("p",{children:y.t("userMessages.unauthorized")})}}]),a}(u.Component)),za="api/portal-users",Ra=function(){var e=Object(j.a)(m.a.mark((function e(t,a,n){var r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$("".concat(t,"/").concat(za,"/username/").concat(a,"/email/").concat(n)),s=Object(o.a)(Object(o.a)({},G()),{},{method:"GET"}),e.next=4,X(r,s);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),qa=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="admin/realms/".concat(a,"/users"),r="".concat(t,"/").concat(n),s=Object(o.a)(Object(o.a)({},K()),{},{method:"GET"}),e.next=5,X(r,s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var Ha=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).mapKeycloakUserEmails=function(e){var t=new Map;return e.forEach((function(e){return t.set(e.username,e.email)})),t},r.handleChanges=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(b.a)({},a,n))},r.handleFormSubmit=function(e){e.preventDefault();var t=r.state,a=t.projectId,n=t.assignUser;r.handleFormValidation()&&r.assignUserToProject(a,n).then((function(e){e&&201===e.status?(r.setState({submitMsg:y.t("submitMessages.updated"),submitColour:"#24a148"}),window.dispatchEvent(new CustomEvent("cp-user-assigned"))):r.setState({submitMsg:y.t("submitMessages.error"),submitColour:"#da1e28"})}))},r.assignUserToProject=function(){var e=Object(j.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.state.users.get(a)){e.next=4;break}return alert("User is missing an email address in keycloak and cannot be assigned."),e.abrupt("return",null);case 4:return e.next=6,r.getPortalUserId({username:a,email:r.state.users.get(a)});case 6:return n=e.sent,e.next=9,zt(r.props.serviceUrl,t,n);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.getPortalUserId=function(){var e=Object(j.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,Ra(r.props.serviceUrl,t.username,t.email);case 4:n=e.sent,a=n.data.id,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.warn(e.t0);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),r.state={project:null,projectId:"",assignUser:"",users:new Map,invalid:{},submitMsg:"",submitColour:"black"},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){F(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"fetchData",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.keycloak,e.t0=this,e.next=4,qa(t.authServerUrl,t.realm);case 4:if(e.t1=e.sent.data,a=e.t0.mapKeycloakUserEmails.call(e.t0,e.t1),n=this.props.match.params.id,r=null,null==n){e.next=14;break}return e.next=11,Ut(this.props.serviceUrl,n);case 11:r=e.sent.data,e.next=15;break;case 14:n="";case 15:this.setState({projectId:n,project:r,users:a});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleFormValidation",value:function(){var e={},t=!0,a=this.state,n=a.projectId,r=a.assignUser;return""===n&&(t=!1,e.projectId=!0),""===r&&(t=!1,e.assignUser=!0),this.setState({invalid:e}),t}},{key:"setupFormComponents",value:function(){var e,t=this.state.users,a=this.state.project;return t.size>0?(e=Object(Be.a)(t.keys()).map((function(e,t){return Object(le.jsx)(w.a,{text:e,value:e,children:e},t)}))).unshift(Object(le.jsx)(w.a,{text:y.t("manageUsers.assign.userList"),value:""},"-1")):e=Object(le.jsx)(w.a,{text:y.t("manageUsers.assign.noUsers"),value:""}),{userList:e,projectList:null!=a?Object(le.jsx)(w.a,{text:a.name,value:a.id},a.id):Object(le.jsx)(w.a,{text:y.t("manageUsers.assign.noProjects"),value:""})}}},{key:"render",value:function(){var e=this.setupFormComponents(),t=e.userList,a=e.projectList;return Object(le.jsxs)("div",{children:[Object(le.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),Object(le.jsx)(D.a,{onSubmit:this.handleFormSubmit,children:Object(le.jsxs)("div",{className:"bx--grid",children:[Object(le.jsx)("div",{className:"bx--row",children:Object(le.jsx)("div",{className:"bx--col",children:Object(le.jsx)(T.a,{id:"projectId",name:"projectId",labelText:y.t("manageUsers.assign.projectName"),value:this.state.projectId,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.projectId,children:a})})}),Object(le.jsx)("div",{className:"bx--row",children:Object(le.jsx)("div",{className:"bx--col",children:Object(le.jsx)(T.a,{id:"assignUser",name:"assignUser",labelText:y.t("manageUsers.assign.assignUser"),value:this.state.assignUser,onChange:this.handleChanges,invalidText:y.t("validation.invalid.required"),invalid:this.state.invalid.assignUser,children:t})})}),Object(le.jsxs)(P.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",y.t("buttons.submit")," "]})]})})]})}}]),a}(u.Component)),Ja=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handleRemoveUser=function(e,t,a){a.preventDefault(),Ht(r.props.serviceUrl,t,e).then((function(e){201===e.status?r.fetchData():console.warn("Failed to delete user",e)}))},r.state={users:[],displayUsers:[],projectId:""},r.headerData=[{header:y.t("manageUsers.delete.userName"),key:"username"},{header:y.t("manageUsers.delete.userEmail"),key:"email"},{header:y.t("manageUsers.delete.userAccess"),key:"userAccess"}],window.addEventListener("cp-user-assigned",(function(e){r.fetchData()})),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){F(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.fetchData()}},{key:"fetchData",value:function(){var e=Object(j.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(this.props)){e.next=9;break}if(t=this.props.match.params.id,a=[],null==t){e.next=7;break}return e.next=6,Bt(this.props.serviceUrl,t);case 6:a=e.sent.data;case 7:this.setState({users:a,projectId:t}),this.handleUserDisplay();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleUserDisplay",value:function(){var e=this,t=this.state.users,a=this.state.projectId,n=t.map((function(t){return{id:t.username,username:t.username,email:t.email,userAccess:Object(le.jsx)(P.a,{kind:"ghost",onClick:function(n){return e.handleRemoveUser(t.id,a,n)},className:"button-warning",children:y.t("manageUsers.delete.removeUser")})}}));this.setState({displayUsers:n})}},{key:"render",value:function(){return Object(le.jsx)(he.a,{rows:this.state.displayUsers,headers:this.headerData,children:function(e){var t=e.rows,a=e.headers,n=e.getHeaderProps,r=e.getTableProps;return Object(le.jsx)(me.a,{children:Object(le.jsxs)(be.a,Object(o.a)(Object(o.a)({},r()),{},{children:[Object(le.jsx)(je.a,{children:Object(le.jsx)(ve.a,{children:a.map((function(e){return Object(le.jsx)(fe.a,Object(o.a)(Object(o.a)({},n({header:e})),{},{children:e.header}))}))})}),Object(le.jsx)(ge.a,{children:t.map((function(e){return Object(le.jsx)(ve.a,{children:e.cells.map((function(e){return Object(le.jsx)(Oe.a,{children:e.value},e.id)}))},e.id)}))})]}))})}})}}]),a}(u.Component)),Ba=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0},r.userFunctionality=[{label:Object(le.jsxs)("div",{children:[Object(le.jsx)("p",{className:"title",children:y.t("manageUsers.manage.title")}),Object(le.jsx)("p",{className:"desc",children:y.t("manageUsers.manage.desc")})]}),content:Object(le.jsx)(Ja,Object(o.a)(Object(o.a)({},e),{},{serviceUrl:r.props.serviceUrl})),open:!0},{label:Object(le.jsxs)("div",{children:[Object(le.jsx)("p",{className:"title",children:y.t("manageUsers.assign.title")}),Object(le.jsx)("p",{className:"desc",children:y.t("manageUsers.assign.desc")})]}),content:Object(le.jsx)(Ha,Object(o.a)(Object(o.a)({},e),{},{serviceUrl:r.props.serviceUrl})),open:!0}],r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){F(this.props)&&this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?null:R()?Object(le.jsxs)("div",{id:"entando-customer-portal",children:[Object(le.jsx)(Je,{locale:this.props.locale}),Object(le.jsx)("div",{className:"form-container",children:Object(le.jsx)(C.a,{children:this.userFunctionality.map((function(e,t){return Object(le.jsx)(S.a,{index:t,title:e.label,description:e.description,open:e.open,children:e.content},t.toString())}))})})]}):Object(le.jsx)("p",{children:y.t("userMessages.unauthorized")})}}]),a}(u.Component)),_a=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){F(this.props)&&this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.setState({loading:!1})}},{key:"render",value:function(){var e=this,t=this.props.keycloak;return this.state.loading?null:_()?Object(le.jsxs)("div",{id:"entando-customer-portal",children:[Object(le.jsx)(Yt,{keycloak:t,children:Object(le.jsx)(bt.b,{children:Object(le.jsxs)(jt.c,{children:[Object(le.jsx)(jt.a,{path:"**/customer-details/:id",render:function(t){return Object(le.jsx)(Pa,Object(o.a)(Object(o.a)({},t),{},{serviceUrl:e.props.serviceUrl,locale:e.props.locale}))}}),Object(le.jsx)(jt.a,{path:"**/subscription/:projectId/:subscriptionId?",render:function(t){return Object(le.jsx)(Aa,Object(o.a)(Object(o.a)({},t),{},{serviceUrl:e.props.serviceUrl,locale:e.props.locale}))}}),Object(le.jsx)(jt.a,{path:"**/manage-subscriptions/:id",render:function(t){return Object(le.jsx)(Ea,Object(o.a)(Object(o.a)({},t),{},{serviceUrl:e.props.serviceUrl,locale:e.props.locale}))}}),Object(le.jsx)(jt.a,{path:"**/manage-users/:id",render:function(t){return Object(le.jsx)(Ba,Object(o.a)(Object(o.a)({},t),{},{serviceUrl:e.props.serviceUrl,locale:e.props.locale}))}}),Object(le.jsx)(jt.a,{path:"**/subscription-details/:id",render:function(t){return Object(le.jsx)(Na,Object(o.a)(Object(o.a)({},t),{},{serviceUrl:e.props.serviceUrl,locale:e.props.locale}))}}),Object(le.jsx)(jt.a,{path:"**/ticket/:id",render:function(t){return Object(le.jsx)(Fa,Object(o.a)(Object(o.a)({},t),{},{serviceUrl:e.props.serviceUrl,locale:e.props.locale}))}}),Object(le.jsx)(jt.a,{path:"**/",render:function(t){return Object(le.jsx)(ya,Object(o.a)(Object(o.a)({},t),{},{serviceUrl:e.props.serviceUrl,locale:e.props.locale}))}})]})})}),Object(le.jsx)(Gt,{keycloak:t,children:Object(le.jsx)("p",{children:y.t("userMessages.unauthorized")})})]}):Object(le.jsx)("p",{children:y.t("userMessages.unauthorized")})}}]),a}(u.Component)),Ya=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Ga="locale",Ka="service-url",Wa="base-url",Za=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=Ya(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Ya()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ot(ut,(function(){e.keycloak=Object(o.a)(Object(o.a)({},Ya()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(Wa)||"",t=this.getAttribute(Ka)||"",a=this.getAttribute(Ga)||"";x(a),Z(e),p.a.render(Object(le.jsx)(ue.Provider,{value:this.keycloak,children:Object(le.jsx)(_a,{serviceUrl:t,locale:a})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.get("cp-app")||customElements.define("cp-app",Za);var Qa=a(59),$a="keycloak",Xa=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0},r.keycloakEventHandler=r.keycloakEventHandler.bind(Object(Qa.a)(r)),r}return Object(r.a)(a,[{key:"keycloakEventHandler",value:function(e){var t=e.detail.eventType,a=this.props.keycloak;switch(t){case"onReady":this.setState({loading:!1});break;case"onAuthRefreshError":a.logout()}}},{key:"componentDidMount",value:function(){window.addEventListener($a,this.keycloakEventHandler)}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.setState({loading:!1})}},{key:"componentWillUnmount",value:function(){window.removeEventListener($a,this.keycloakEventHandler)}},{key:"render",value:function(){var e=this.props.keycloak,t=window.location;return this.state.loading?null:Object(le.jsx)("span",{className:"entando-login",children:F(this.props)?Object(le.jsxs)(le.Fragment,{children:[_()&&Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("a",{href:Q(E,this.props.locale),children:y.t("customerDashboard.customerPortal")}),Object(le.jsx)("span",{className:"divider",children:"\xa0|\xa0"})]}),Object(le.jsxs)("a",{className:"log-out",href:"#entando-customer-portal",onClick:function(){return e.logout({redirectUri:window.location.origin})},title:y.t("userMessages.logout"),children:[y.t("userMessages.logout"),Object(le.jsx)("i",{className:"fas fa-sign-out-alt"})]})]}):Object(le.jsx)(le.Fragment,{children:Object(le.jsxs)("a",{className:"log-in",href:"#entando-customer-portal",onClick:function(){return e.login({redirectUri:t})},title:y.t("userMessages.login"),children:[y.t("userMessages.login"),Object(le.jsx)("i",{className:"fas fa-sign-in-alt"})]})})})}}]),a}(u.Component)),en=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},tn="locale",an="service-url",nn="base-url",rn=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=en(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("span"),this.keycloak=Object(o.a)(Object(o.a)({},en()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ot(ut,(function(){e.keycloak=Object(o.a)(Object(o.a)({},en()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(nn)||"",t=this.getAttribute(an)||"",a=this.getAttribute(tn)||"";x(a),Z(e),p.a.render(Object(le.jsx)(ue.Provider,{value:this.keycloak,children:Object(le.jsx)(Xa,{serviceUrl:t,locale:a})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.get("cp-login")||customElements.define("cp-login",rn);var sn=de(function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={loading:!0},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){F(this.props)&&this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(e){z(this.props,e)&&this.setState({loading:!1})}},{key:"render",value:function(){var e=this.props,t=e.locale,a=e.serviceUrl;return this.state.loading?null:Object(le.jsx)("div",{children:Object(le.jsxs)(bt.a,{forceRefresh:!0,children:[Object(le.jsx)(Xa,{locale:t}),Object(le.jsx)("div",{children:Object(le.jsx)("ul",{children:R()&&Object(le.jsx)("li",{children:Object(le.jsx)(bt.c,{to:Q(M,t),children:"Admin"})})})}),Object(le.jsxs)(jt.c,{children:[Object(le.jsx)(jt.a,{path:Q(M,t),children:Object(le.jsx)(ct,{serviceUrl:a,locale:t})}),Object(le.jsx)(jt.a,{path:Q(E,t),children:Object(le.jsx)(_a,{serviceUrl:a,locale:t})}),Object(le.jsx)(jt.a,{path:"/",exact:!0,children:Object(le.jsx)(_a,{serviceUrl:a,locale:t})})]})]})})}}]),a}(u.Component)),cn=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},on="locale",un="service-url",ln=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).keycloak=cn(),e}return Object(r.a)(a,[{key:"connectedCallback",value:function(){var e=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},cn()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ot(ut,(function(){e.keycloak=Object(o.a)(Object(o.a)({},cn()),{},{initialized:!0}),e.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var e=this.getAttribute(un)||"",t=this.getAttribute(on)||"";x(t),Z("/"),p.a.render(Object(le.jsx)(ue.Provider,{value:this.keycloak,children:Object(le.jsx)(sn,{serviceUrl:e,locale:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.get("cp-local-app")||customElements.define("cp-local-app",ln)},41:function(e,t,a){},80:function(e){e.exports=JSON.parse('{"adminConfig":{"title":"Entando Admin View","formTitle":"All Customers","desc":"Configure the Ticketing System and Entando Versions below.","integrationTicketingSystem":{"title":"Ticketing System Connection","desc":"This allows you to manage the ticketing system","selectBackendTicketingSystem":"Select Backend Ticketing System","select":"Select","url":"URL","userName":"User Name","password":"Password","projectName":"Project Name"},"manageProductVersion":{"title":"Manage Product Version","desc":"Manage the Product Versions","entandoVersion":"Entando Version","status":"Status *","startDate":"Start Date","supportEndDate":"Support End Date"},"manageFieldConfigurations":{"title":"Ticketing System Configuration","manageFieldConfigurationsDesc":"This will allow you to manage dropdown fields used in the various form for create and managing tickets","ticketTypeConfigurations":"Ticket Type Configuration","subscriptionLevelConfiguration":"Subscription Level Configuration","ticketType":"Ticket Type","subscriptionLevel":"Subscription Level","addTicketTypeButton":"Add Ticket Type","addSubscriptionLevelButton":"Add Subscription Level"},"productNameConfigurations":{"title":"Product Name Configuration","table":{"prodName":"Product Name"}},"jiraFieldsConfigurations":{"versionIDLabel":"Version ID","organizatoinIDLabel":"Organization ID","SubscriptionLevelIDLabel":"Subscription Level ID"}},"adminDashboard":{"title":"Welcome to Entando","adminTitle":"Welcome to Entando Admin View","customerTitle":"Welcome to Entando Customer View","partnerTitle":"Welcome to Entando Partner View","supportTitle":"Welcome to Entando Support View","allCustomers":"All Customers","searchLabel":"Customer Search","searchText":"Which customer are you looking for?","view":"View","addProject":{"title":"Add a Project","customerList":"Customer List","projectName":"Project Name","projectDesc":"Project Description","systemId":"System Id","contactName":"Contact Name","contactPhone":"Contact Phone","contactEmail":"Contact Email","notes":"Notes","editTitle":"Edit Project"},"addCustomer":{"title":"Add a Customer","customerName":"Customer Name","customerNumber":"Customer Number","contactName":"Contact Name","contactPhone":"Contact Phone","contactEmail":"Contact Email","notes":"Notes"},"addPartner":{"title":"Add a Partner","projectList":"Project List","selectProject":"Select Project","partnerName":"Partner Name","partnerNumber":"Partner Number","notes":"Notes"},"addProductVersion":{"title":"Add a new product version","productVersion":"Product Version","productVersionStartDate":"Product Version Start Date","productVersionEndDate":"Product Version End Date"},"editCustomer":{"title":"Edit Customer"},"managePartners":{"title":"Manage Partners"}},"buttons":{"addCustomer":"Add a Customer +","addPartner":"Add a Partner +","addProject":"Add a Project","addProductVersion":"Add Product Version","addSubscription":"Add a Subscription","cancel":"Cancel","delete":"Delete","edit":"Edit","managePartners":"Manage Partners","manageSubscriptions":"Manage Subscriptions","manageUsers":"Manage Users","openTicket":"Open Ticket","save":"Save","submit":"Submit","subscriptionRequest":"Subscription Request","view":"View","viewAllTickets":"View All Tickets","viewTickets":"View Tickets","viewDetails":"View Details"},"customerDashboard":{"customerPortal":"Customer Portal","title":"Welcome to Entando Customer Portal","customerName":"Customer Name","customerId":"Customer Id","startDate":"Start Date","endDate":"End Date","projectName":"Project Name","partnerName":"Partner Name","entandoVersion":"Entando Version","openTickets":"Open Tickets","subscriptions":"Subscriptions","tableDesc":"In this table there are open subscriptions","partners":"Partners","status":"Status","action":"Action"},"customerDetails":{"id":"Customer Id","name":"Customer Name","contactName":"Contact Name","contactPhone":"Contact Phone","contactEmail":"Contact Email","notes":"Notes"},"editSubscription":{"title":"Edit Subscription","description":"Description","commitment":"Commitment","type":"Type","quantityRequest":"QuantityRequest","components":"Components","level":"Level"},"manageUsers":{"title":"Entando Admin View","assign":{"title":"Assign a new User","desc":"Assign a user to an existing project.","projectName":"Project Name","assignUser":"Assign User","noUsers":"There are currently no users in the system","noProjects":"There are currently no projects in the system","projectList":"Projects List","selectRole":"Select Role","userList":"Users List"},"manage":{"title":"Manage all Users","desc":"View and delete existing users."},"delete":{"desc":"View and delete existing users","userName":"User Name","userEmail":"User Email","dateAdded":"Date Added","userAccess":"User Access","removeUser":"Remove User"}},"modalText":{"cancel":"Cancel","done":"Done","save":"Save"},"projectDetails":{"description":"Description:","type":"Type:","quantityRequest":"Quantity Request:","components":"Components","id":"ID","status":"Status","level":"Level","startDate":"Start Date","endDate":"End Date","lengthInMonths":"Length (months)","license":"License","listOfTickets":"List of Tickets","tickets":"Tickets","project":"Project","entandoVersion":"Entando Version","creationDate":"Creation Date","goToTicket":"Go to Ticket"},"roles":{"admin":"Admin","customer":"Customer","partner":"Partner","support":"Support"},"submitMessages":{"subscriptionRequired":"A subscription is required to create tickets for this project","created":"Successfully created","updated":"Successfully updated","added":"Successfully added","confirmDelete":"Are you sure you want to delete this item?","confirmDeleteTicketType":"Are you sure you want to delete this ticket type?","confirmDeleteSubscrLevel":"Are you sure you want to delete this subscription level?","deleted":"Successfully deleted","error":"An error occurred","ticketError":"An error occurred. Make sure this project has a corresponding organization in Jira."},"subscriptionDetails":{"description":"Description","commitment":"Commitment","partners":"Partners","type":"Type","status":"Status","level":"Level","startDate":"Start Date","endDate":"End Date","license":"License","lengthInMonths":"Length In Months","notes":"Notes","assignedUsers":"Assigned Users"},"subscriptionForm":{"adminSubmitNewSuccess":"Successfully added a project subscription.","adminRenewNewSuccess":"Successfully renewed a project subscription.","adminTitle":"Admin Subscription Form","chooseLevel":"Choose a level","chooseVersion":"Choose a version","contactEmail":"Contact Email *","contactName":"Contact Name *","contactNumber":"Contact Phone Number","customerEmail":"Customer Email *","customerName":"Customer Name *","customerNumber":"Customer Number *","customerSubmitSuccess":"You will be contacted by an Entando Sales representative to finalize the subscription.","entandoVersion":"Entando Version","formTitle":"Subscription Request","editSubscription":"Edit Subscription","newSubError":"Errore durante l\'aggiunta di una sottoscrizione al progetto.","newSubscription":"New Subscription","projectName":"Project Name *","renewSubError":"Error in renewing a project subscription.","renewSubscription":"Renew Subscription","selectType":"Select Subscription Type","subscriptionLength":"Subscription Length (months)","subscriptionLevel":"Subscription Level","subscriptionStartDate":"Subscription Start Date *","subscriptionStatus":"Subscription Status *","subscriptionType":"Subscription Type *"},"supportTicketForm":{"title":"Entando Admin View","formTitle":"Create new support ticket","desc":"Create a support ticket for an existing project.","select":"Select","type":"Type","selectProject":"Select Project","ticketNumber":"Ticket Number","customerName":"Customer Name","projectName":"ProjectName","ticketOpenedBy":"Ticket Opened By:","priority":"Priority","partnerName":"Partner Name","ticketSummary":"Ticket Summary","addticketSummary":"Add Ticket Summary","ticketDescription":"Ticket Description","addticketDescription":"Add Ticket Description"},"ticketDetails":{"listOfTickets":"List of Tickets","tickets":"Tickets","issue":"Issue","project":"Project","summary":"Summary","description":"Description","type":"Type","status":"Status","created":"Created","link":"Link","priority":"Priority","updated":"Updated","viewTicket":"View Ticket"},"userMessages":{"loading":"Loading","login":"Login","logout":"Logout","none":"None","unauthorized":"Unauthorized"},"validation":{"invalid":{"required":"This field is required.","email":"Email is not valid.","date":"Please enter a date in \'mm/dd/yyyy\' format.","number":"This field must be a number.","productNameMaxChar":"Product name must not exceed 100 characters","productNameMinChar":"Product name must be at least 3 characters","subscrLevelMinChar":"Subscription level must be at least 3 characters","subscrLevelMaxChar":"Subscription level must not exceed 100 characters","subscrDupCheck":"This subscription level already exist, please enter a new level","ticketTypeMinChar":"Ticket type must be at least 3 characters","ticketTypeMaxChar":"Ticket type must not exceed 100 characters","ticketDupCheck":"This ticket type already exist, please enter a new ticket type"}}}')},81:function(e){e.exports=JSON.parse('{"adminConfig":{"title":"Interfaccia di Amministrazione di Entando","formTitle":"Tutti i clienti","desc":"Configura il sistema di segnalazione e le versioni di Entando qui di seguito.","integrationTicketingSystem":{"title":"Collegamento al sistema di biglietteria","desc":"Questo ti permette di gestire il sistema di segnalazione","selectBackendTicketingSystem":"Seleziona il sistema di segnalazione (Backend Ticketing System)","select":"Selezionare","url":"URL","userName":"Nome utente","password":"Parola d\'ordine","projectName":"Nome del progetto"},"manageProductVersion":{"title":"Gestisci la versione del prodotto","desc":"Gestisci le versioni del prodotto","entandoVersion":"Versione di Entando","status":"Stato *","startDate":"data d\'inizio","supportEndDate":"Data di fine supporto"},"manageFieldConfigurations":{"title":"Configurazione del sistema di biglietteria","manageFieldConfigurationsDesc":"Questo ti permetter\xe0 di gestire i campi a tendina utilizzati nei vari form per la creazione e la gestione dei ticket","ticketTypeConfigurations":"Configurazioni del tipo di biglietto","subscriptionLevelConfiguration":"Configurazione del livello di abbonamento","ticketType":"Tipo di biglietto","subscriptionLevel":"Livello di abbonamento","addTicketTypeButton":"Aggiungi tipo di biglietto","addSubscriptionLevelButton":"Aggiungi livello di abbonamento"},"productNameConfigurations":{"title":"Configurazione del nome del prodotto","table":{"prodName":"nome del prodotto"}},"jiraFieldsConfigurations":{"versionIDLabel":"ID versione","organizatoinIDLabel":"ID organizzazione","SubscriptionLevelIDLabel":"ID livello di abbonamento"}},"adminDashboard":{"title":"Benvenuti a Entando","adminTitle":"Benvenuti all\'Interfaccia di Amministrazione di Entando","customerTitle":"Benvenuti all\'Interfaccia di Amministrazione dei Clienti di Entando","partnerTitle":"Benvenuti all\'Interfaccia di Amministrazione dei Partner di Entando","supportTitle":"Benvenuti all\'Interfaccia di Amministrazione del Supporto di Entando","allCustomers":"Tutti i clienti","searchLabel":"Ricerca dei clienti","searchText":"Quale cliente stai cercando?","view":"Visualizza","addProject":{"title":"Aggiungi un progetto","customerList":"Elenco clienti","projectName":"Nome del progetto","projectDesc":"descrizione del progetto","systemId":"ID sistema","contactName":"Nome del contatto","contactPhone":"Contatto telefonico","contactEmail":"Contatto email","notes":"Appunti","editTitle":"Modifica progetto"},"addCustomer":{"title":"Aggiungi un cliente","customerName":"Nome del cliente","customerNumber":"Numero cliente","contactName":"Nome del contatto","contactPhone":"Contatto telefonico","contactEmail":"Contatto email","notes":"Appunti"},"addPartner":{"title":"Aggiungi un Partner","projectList":"Elenco Progetti","selectProject":"Seleziona Progetto","partnerName":"Nome Partner","partnerNumber":"Numero Partner","notes":"Appunti"},"addProductVersion":{"title":"Aggiungi una nuova versione del prodotto","productVersion":"Versione del prodotto","productVersionStartDate":"Data di inizio della versione del prodotto","productVersionEndDate":"Data di fine vita della versione del prodotto"},"editCustomer":{"title":"Modifica cliente"},"managePartners":{"title":"Gestire i partner"}},"buttons":{"addCustomer":"Aggiungi un cliente +","addPartner":"Aggiungi un partner +","addProject":"Aggiungi un progetto","addSubscription":"Aggiungi un abbonamento","addProductVersion":"Aggiungi la versione del prodotto","cancel":"Annulla","delete":"Elimina","edit":"Modificare","managePartners":"Gestire i Partner","manageSubscriptions":"Gestisci le iscrizioni","manageUsers":"Gestione Utenti","openTicket":"Apri un ticket","save":"Salva","submit":"Invia","subscriptionRequest":"Richiesta di abbonamento","view":"Visualizza","viewAllTickets":"Visualizza tutte le richieste (tickets)","viewTickets":"Visualizzare tutte le richieste (tickets)","viewDetails":"Visualizza dettagli"},"customerDashboard":{"customerPortal":"Portale Clienti","title":"Benvenuto nel Portale Clienti Entando","customerName":"Nome del cliente","customerId":"Identificativo del cliente","startDate":"Data d\'inizio","endDate":"Data di fine","projectName":"Nome del progetto","partnerName":"Nome partner","entandoVersion":"Versione Entando","openTickets":"Segnalazioni aperte","subscriptions":"Subscriptions","tableDesc":"In questa tabella ci sono Subscription aperte","partners":"Partner","status":"Stato","action":"Azione"},"customerDetails":{"id":"Identificativo del cliente","name":"Nome del cliente","contactName":"Nome del contatto","contactPhone":"Contatto telefonico","contactEmail":"Contatto email","notes":"Appunti"},"editSubscription":{"title":"Modifica subscription","description":"Descrizione","commitment":"Impegno","type":"genere","quantityRequest":"Quantit\xe0 Richiesta","components":"Componenti","level":"Livello"},"manageUsers":{"title":"Entando Interfaccia Amministrativa","assign":{"title":"Assegna un nuovo utente","desc":"Assegnare un utente a un progetto esistente.","assignUser":"Assegna utente","projectName":"Nome del progetto","projectList":"Elenco dei progetti","noUsers":"Al momento non ci sono utenti nel sistema","noProjects":"Al momento non ci sono progetti nel sistema","selectRole":"Seleziona ruolo","userList":"Elenco degli utenti"},"manage":{"title":"Gestisci tutti gli utenti","desc":"Visualizzare ed eliminare gli utenti esistenti."},"delete":{"desc":"Visualizzare ed eliminare gli utenti esistenti","userName":"Nome atente","userEmail":"Email dell\'utente","dateAdded":"Data aggiunta","userAccess":"Accesso utente","removeUser":"Rimuovere l\'utente"}},"modalText":{"cancel":"Annulla","done":"Completato","save":"Salva"},"projectDetails":{"description":"Descrizione","type":"Tipo","quantityRequest":"Quantit\xe0 richiesta:","components":"Componente","id":"ID","status":"Stato","level":"Lievllo","startDate":"Data di inizio","endDate":"Data di fine","lengthInMonths":"Durata (mesi)","license":"Licenza","listOfTickets":"Lista delle segnalazioni","tickets":"Segnalazioni","project":"Progetto","entandoVersion":"Versione di Entando","creationDate":"Data di creazione","goToTicket":"Vai alla segnalazione"},"roles":{"admin":"Amministratore","customer":"Cliente","partner":"Partner","support":"Supporto"},"submitMessages":{"subscriptionRequired":"\xc8 necessario una subscription per creare segnalazioni per questo progetto","created":"Creata con successo","updated":"Aggiornata con successo","added":"Aggiunta con successo","confirmDelete":"Sei sicuro di voler eliminare questo articolo?","confirmDeleteTicketType":"Sei sicuro di voler eliminare questo tipo di biglietto?","confirmDeleteSubscrLevel":"Sei sicuro di voler eliminare questo livello di abbonamento?","deleted":"Cancellato con successo","error":"Si \xe8 verificato un errore","ticketError":"Si \xe8 verificato un errore. Assicurarsi che questo progetto abbia un\'organizzazione corrispondente in Jira Service Desk."},"subscriptionDetails":{"description":"Descrizione","commitment":"Impegno","partners":"Partner","type":"Genere","status":"Stato","level":"Livello","startDate":"Data d\'inizio","endDate":"Data di fine","license":"Licenza","lengthInMonths":"Durata in mesi","notes":"Appunti","assignedUsers":"Utenti assegnati"},"subscriptionForm":{"adminSubmitNewSuccess":"Aggiunta di una sottoscrizione al progetto riuscita.","adminRenewNewSuccess":"Rinnovato con successo una subscription al progetto.","adminTitle":"Interfaccia Amministrativa di Entando","chooseLevel":"Scegli un livello","chooseVersion":"Scegli una versione","contactEmail":"Contatto email *","contactName":"Nome del contatto *","contactNumber":"numero di contatto telefonico","customerEmail":"Email del cliente *","customerName":"Nome del cliente *","customerNumber":"Numero cliente *","customerSubmitSuccess":"Sarai contattato da un addetto alle vendite Entando per finalizzare l\'attivazione della subscription.","entandoVersion":"Versione di Entando","formTitle":"Nuova o rinnova subscription","editSubscription":"Modifica subscription","newSubError":"Errore durante la creazione di una nuova subscription di progetto.","newSubscription":"Nuovo subscription","projectName":"Nome del progetto *","renewSubError":"Errore nel rinnovo della subscription di un progetto.","renewSubscription":"Rinnova la subscription","selectType":"Seleziona il tipo di subscription","subscriptionLength":"Durata della subscription","subscriptionLevel":"Livello di subscription","subscriptionStartDate":"Data di inizio della subscription *","subscriptionStatus":"Stato della subscription","subscriptionType":"Genere di subscription *"},"supportTicketForm":{"title":"Interfaccia Amministrativa di Entando","formTitle":"Creare una nuova segnalazione di supporto","desc":"Creare una nuova segnalazione di supporto per un progetto esistente.","select":"Seleziona","type":"Genere","selectProject":"Seleziona progetto","ticketNumber":"Numero della Segnalazione","customerName":"Nome Cliente","projectName":"Nome Progetto","ticketOpenedBy":"Segnalazione aperta da:","priority":"Priorit\xe0","partnerName":"Nome del Partner","ticketSummary":"Riepiliogo della segnalazione","addticketSummary":"Aggiungi il riepilogo della segnalazione","ticketDescription":"Descrizione della segnalazione","addticketDescription":"Aggiungi una descrizione alla segnalazione"},"ticketDetails":{"listOfTickets":"Elenco delle segnalazioni","tickets":"Segnalazioni","issue":"Problema","project":"Progetto","summary":"Sommario","description":"Descrizione","type":"Genere","status":"Stato","created":"Creato","link":"Collegamento","priority":"Priorit\xe0","updated":"Aggiornato","viewTicket":"visualizza la segnalazione"},"userMessages":{"loading":"Caricamento in corso","login":"Login","logout":"Logout","none":"Nessuna","unauthorized":"Non autorizzato"},"validation":{"invalid":{"required":"Questo campo \xe8 obbligatorio.","email":"L\'email non \xe8 valida.","date":"Inserisci una data nel formato \'mm / gg / aaaa\'.","number":"Questo campo deve essere un numero.","productNameMaxChar":"Il nome del prodotto non deve superare i 100 caratteri","productNameMinChar":"Il nome del prodotto deve contenere almeno 3 caratteri","subscrLevelMinChar":"Il livello di abbonamento deve essere di almeno 3 caratteri","subscrLevelMaxChar":"Il livello di abbonamento non deve superare i 100 caratteri","subscrDupCheck":"Questo livello di abbonamento esiste gi\xe0, inserisci un nuovo livello","ticketTypeMinChar":"Il tipo di biglietto deve contenere almeno 3 caratteri","ticketTypeMaxChar":"Il tipo di biglietto non deve superare i 100 caratteri","ticketDupCheck":"Questo tipo di biglietto esiste gi\xe0, inserisci un nuovo tipo di biglietto"}}}')}},[[110,1,2]]]);
//# sourceMappingURL=main.57292ba3.chunk.js.map