{"version":3,"sources":["i18n.js","auth/KeycloakContext.js","components/__types__/ref.js","auth/withKeycloak.js","api/helpers.js","api/customers.js","components/Admin/AddCustomerModal.js","api/partners.js","api/projects.js","components/Admin/AddPartnerModal.js","components/Admin/AddProjectModal.js","auth/KeycloakViews.js","components/Admin/EditProjectModal.js","api/ticketingsystem.js","components/Admin/ProjectActionItems.js","components/Customer/customDataTable.js","components/Customer/customerDetails.js","components/Admin/EditCustomerModal.js","components/Customer/CustomerAccordian.js","components/Admin/AdminDashboard.js","helpers/widgetEvents.js","custom-elements/widgetEventTypes.js","custom-elements/AdminDashboardElement.js","api/tickets.js","components/SubscriptionDetails/TicketList.js","api/subscriptions.js","components/Admin/EditSubscriptionModal.js","components/SubscriptionDetails/subscription.js","components/Customer/CustomerProjectList.js","components/App.js","custom-elements/AdminAddCustomerElement.js","components/Admin/RoleCheck.js","custom-elements/AdminRoleCheckElement.js","custom-elements/CustomDataTableElement.js","custom-elements/CustomerDetailsElement.js","custom-elements/SubscriptionElement.js","components/Forms/openTicket.js","custom-elements/FormsOpenTicketElement.js","components/Navigation/Navigation.js","custom-elements/NavigationElement.js","components/Forms/enhancementRequest.js","custom-elements/FormsEnhancementRequestElement.js","custom-elements/AppElement.js","custom-elements/TicketListElement.js","components/Admin/Configuration/TicketingSystem.js","api/productVersion.js","components/Admin/AddProductVersionModal.js","components/Admin/EditVersionModal.js","components/Admin/Configuration/ProductVersion.js","components/Admin/Configuration/AdminConfiguration.js","custom-elements/AdminConfigurationElement.js","custom-elements/OpenTicketElement.js","api/portalusers.js","api/keycloak.js","components/Admin/ManageUser/AssignUser.js","components/Admin/ManageUser/DeleteUser.js","components/Admin/ManageUser/ManageUser.js","custom-elements/ManageUserElement.js","custom-elements/AssignUserElement.js","custom-elements/DeleteUserElement.js","custom-elements/TicketingSystemElement.js","custom-elements/ProductVersionElement.js","components/Forms/SubscriptionForm.js","custom-elements/SubscriptionFormElement.js"],"names":["i18n","defaultLocale","locale","fallbacks","translations","en","it","setLocale","KeycloakContext","PropTypes","oneOfType","func","shape","current","elementType","React","createContext","withKeycloak","WrappedComponent","WithKeycloakComponent","renderWrappedComponent","value","props","forwardedRef","rest","ref","keycloak","Consumer","this","Component","defaultProps","forwardRef","getKeycloakToken","window","entando","authenticated","token","isPortalAdmin","hasKeycloakClientRole","isPortalSupport","isPortalPartner","isPortalCustomer","isPortalAdminOrSupport","isPortalCustomerOrPartner","isPortalUser","clientRole","resourceAccess","client","item","roles","includes","getDefaultOptions","headers","Headers","Authorization","getDefaultKeycloakOptions","getUrl","url","request","options","a","fetch","response","has","parseInt","get","status","data","json","Promise","reject","Error","statusText","resource","apiCustomerDelete","serviceUrl","id","method","apiCustomersGet","apiCustomerGet","apiCustomerPost","customer","body","JSON","stringify","apiCustomerPut","apiGetCustomersProjects","customerId","apiAddProjectToCustomer","projectId","apiDeleteProjectFromCustomer","adminResource","apiAdminCustomersGet","apiAdminCustomerGet","myResource","apiMyCustomersGet","apiGetMyCustomersProjects","handleChanges","e","input","target","name","setState","handleFormSubmit","handleValidation","state","customerNumber","contactName","contactPhone","contactEmail","notes","customerPost","then","result","submitMsg","t","submitColour","updateCustomerList","catch","err","clearValues","document","querySelector","className","baseState","invalid","formIsValid","lastAtPos","lastIndexOf","lastDotPos","indexOf","length","initialized","addEventListener","ModalWrapper","buttonTriggerText","modalHeading","buttonTriggerClassName","handleSubmit","primaryButtonText","secondaryButtonText","modalLabel","style","color","Form","onSubmit","TextInput","labelText","onChange","invalidText","TextArea","apiPartnerPost","partner","apiProjectsGet","apiProjectGet","apiProjectPost","project","apiProjectPut","apiAddTicketToProject","ticketId","apiAddSubscriptionToProject","subscriptionId","apiAddUserToProject","userId","apiAddPartnerToProject","partnerId","apiGetProjectsUsers","apiGetProjectSubscriptions","apiGetProjectIdNames","apiGetMyProjectIdNames","apiAdminProjectsGet","apiMyProjectsGet","partnerNumber","partnerPost","projectList","prevProps","changedAuth","getProjects","projects","Select","defaultValue","SelectItem","text","Object","keys","allProjects","map","i","description","systemId","trim","alert","projectPost","getAllProjects","customerList","getCustomers","customers","label","allCustomers","AuthenticatedView","children","UnauthenticatedView","projectPut","updateProjectList","modalId","buttonId","getProjectDetails","buttonClassName","apiTicketingSystemDelete","apiCurrentTicketingSystemGet","apiTicketingSystemsGet","ticketingSystems","apiTicketingSystemPost","ticketingsystem","apiTicketingSystemPut","handleClick","showMenu","removeEventListener","handleOutsideClick","prevState","node","contains","search","location","URLSearchParams","hasSubscription","Button","onClick","padding","kind","zIndex","position","backgroundColor","to","sub","textDecoration","display","width","margin","border","borderTop","href","ticketingSystem","substr","handleDeleteProject","CustomTable","fetchData","String","closeMenu","preventDefault","confirm","deleteProject","action","headerData","header","key","console","log","render","DataTable","rows","rowData","getHeaderProps","getTableProps","TableContainer","Table","TableHead","TableRow","TableHeader","TableBody","index","projectSubscriptions","TableCell","partners","tickets","entandoVersion","Date","startDate","toDateString","setMonth","getMonth","lengthInMonths","projectName","partnerName","endDate","openTickets","getCustomer","Tile","getCustomerDetails","updateCustomer","getCustomersProjects","deleteCustomer","AccordionItem","title","open","accordionOpened","handleDelete","getTime","handleSearch","event","newFilteredState","filter","toLowerCase","filteredCustomers","currentPage","undefined","forceUpdate","customersProjects","role","test","numberOfPages","Math","ceil","Search","placeholder","onKeyPress","Accordion","indexOfLastItem","firstIndexOfCurrentPage","PaginationNav","loop","Boolean","page","Number","totalItems","itemsShown","cssClass","subscribeToWidgetEvent","eventType","eventHandler","KEYCLOAK_EVENT_TYPE","getKeycloakInstance","ATTRIBUTES","AdminDashboardElement","mountPoint","createElement","unsubscribeFromKeycloakEvent","appendChild","getAttribute","ReactDOM","Provider","HTMLElement","customElements","define","jiraResource","apiJiraTicketsGet","organization","apiJiraTicketPost","ticket","TicketList","currentTicketingSystem","summary","type","priority","createDate","updateDate","creationDate","openTicket","apiSubscriptionGet","apiProjectSubscriptionPost","projectSubscriptionCreation","apiProjectSubscriptionPut","apiGetMySubscription","apiRenewSubscription","projectSubscriptionRenew","subscriptionRequest","projectSubscription","subscription","level","moment","format","subscriptionPut","updateSubscription","handleStartDateChange","date","toISOString","isNumeric","match","str","isNaN","parseFloat","getSubscriptionDetails","disabled","DatePicker","dateFormat","datePickerType","DatePickerInput","subscriptionData","getSubscription","loading","users","params","license","user","username","path","AdminAddCustomerElement","RoleCheck","roleType","renderForm","AdminRoleCheckElement","CustomDataTableElement","CustomerDetailsElement","SubscriptionElement","parse","fetchProjectSubscription","createTicket","res","error","types","priorities","projectParam","forEach","foundProject","fetchProjects","getTicketingSystem","tabIndex","FormsOpenTicketElement","Navigation","NavigationElement","EnhancementRequest","ticketNo","customerName","openedBy","enhancementDescription","FormsEnhancementRequestElement","AppElement","Locale","TicketListCustomerElement","createTicketingSystem","updateTicketingSystem","ticketingSystemType","serviceAccount","serviceAccountSecret","getTicketingSystems","deleteTicketingSystem","apiProductVersionsGet","apiProductVersionGet","versionId","apiUpdateProductVersionsStatus","apiProductVersionPost","productVersion","apiProductVersionPut","apiProductVersionDelete","addProductVersion","updateProductVersions","handleEndDateChange","version","versionPut","getVersionDetails","ProductVersion","handleDeleteVersion","deleteVersion","getProductVersions","productVersions","ToggleSmall","handleToggleChange","aria-label","defaultToggled","EditVersionModal","marginTop","fill","entVersion","adminConfig","content","toString","hidden","paginationMode","disableDefaultEventHandler","AdminConfigurationElement","OpenTicketElement","apiUserDelete","apiUsersGet","apiUserPost","apiUserGetByUsername","apiKeycloakUserGet","realm","usersResource","mapKeycloakUserEmails","keycloakUsers","usernameEmailMap","Map","keycloakUser","set","email","assignUser","handleFormValidation","assignUserToProject","getPortalUserId","portalUserId","portalUserApi","portalUser","message","createPortalUser","authServerUrl","keycloakUrl","userList","projectIdsNames","size","unshift","setupFormComponents","handleRemoveUser","portalUsers","updatedPortalUsers","delete","handleUserDisplay","displayUsers","filterText","handleMapFormatting","portalUsernames","values","dateAdded","createdTimestamp","toLocaleString","month","getFullYear","userAccess","row","cells","cell","userFunctionality","ManageUserElement","AssignUserElement","DeleteUserElement","TicketingSystemElement","ProductVersionElement","subscriptionLevel","GOLD","PLATINUM","subscriptionStatus","subscriptionTypes","submitSuccess","submitError","subscriptionType","newSubscription","renewSubscription","subscriptionLength","entandoVersionId","selectedProjectId","subscriptionLevelList","entries","versionList","formInputs","formComponents","isAdmin","createFormMessage","subMessageKey","successErrorMessage","required","SubsciptionFormElement"],"mappings":"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","file":"static/js/main.c3b66f59.chunk.js","sourcesContent":["import i18n from 'i18n-js';\r\n\r\nimport en from './i18n/locales/en.json';\r\nimport it from './i18n/locales/it.json';\r\n\r\ni18n.defaultLocale = 'en';\r\ni18n.locale = 'en';\r\ni18n.fallbacks = true;\r\ni18n.translations = { en, it };\r\n\r\nexport const setLocale = locale => {\r\n  i18n.locale = locale;\r\n};\r\n\r\nexport default i18n;\r\n","import React from 'react';\n\nconst KeycloakContext = React.createContext(null);\n\nexport default KeycloakContext;\n","import PropTypes from 'prop-types';\r\n\r\nexport default PropTypes.oneOfType([PropTypes.func, PropTypes.shape({ current: PropTypes.elementType }), PropTypes.shape(null)]);\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { forwardRef, Component } from 'react';\r\nimport refType from '../components/__types__/ref';\r\nimport KeycloakContext from './KeycloakContext';\r\n\r\nexport default function withKeycloak(WrappedComponent) {\r\n  class WithKeycloakComponent extends Component {\r\n    renderWrappedComponent = value => {\r\n      const { forwardedRef, ...rest } = this.props;\r\n      return <WrappedComponent {...rest} ref={forwardedRef} keycloak={value} />;\r\n    };\r\n\r\n    render() {\r\n      return <KeycloakContext.Consumer>{this.renderWrappedComponent}</KeycloakContext.Consumer>;\r\n    }\r\n  }\r\n\r\n  WithKeycloakComponent.propTypes = {\r\n    forwardedRef: refType,\r\n  };\r\n\r\n  WithKeycloakComponent.defaultProps = {\r\n    forwardedRef: () => {},\r\n  };\r\n\r\n  return forwardRef((props, ref) => <WithKeycloakComponent {...props} forwardedRef={ref} />);\r\n}\r\n","export const getKeycloakToken = () => {\r\n  if (window && window.entando && window.entando.keycloak && window.entando.keycloak.authenticated) {\r\n    return window.entando.keycloak.token;\r\n  }\r\n  return '';\r\n};\r\n\r\nconst ADMIN = 'cp-admin';\r\nconst SUPPORT = 'cp-support';\r\nconst PARTNER = 'cp-partner';\r\nconst CUSTOMER = 'cp-customer';\r\n\r\nexport const isPortalAdmin = () => {\r\n  return hasKeycloakClientRole(ADMIN);\r\n};\r\n\r\nexport const isPortalSupport = () => {\r\n  return hasKeycloakClientRole(SUPPORT);\r\n};\r\n\r\nexport const isPortalPartner = () => {\r\n  return hasKeycloakClientRole(PARTNER);\r\n};\r\n\r\nexport const isPortalCustomer = () => {\r\n  return hasKeycloakClientRole(CUSTOMER);\r\n};\r\n\r\nexport const isPortalAdminOrSupport = () => {\r\n  return isPortalAdmin() || isPortalSupport();\r\n};\r\n\r\nexport const isPortalCustomerOrPartner = () => {\r\n  return isPortalCustomer() || isPortalPartner();\r\n};\r\n\r\nexport const isPortalUser = () => {\r\n  return isPortalAdminOrSupport() || isPortalCustomerOrPartner();\r\n};\r\n\r\nexport const hasKeycloakClientRole = clientRole => {\r\n  if (getKeycloakToken()) {\r\n    const { resourceAccess } = window.entando.keycloak;\r\n    if (resourceAccess) {\r\n      for (const client in resourceAccess) {\r\n        const item = resourceAccess[client];\r\n        if (item.roles && item.roles.includes(clientRole)) {\r\n          // console.debug(\"Found role {} with client {} \", clientRole, client);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const getDefaultOptions = () => ({\r\n  headers: new Headers({\r\n    Authorization: `Bearer ${getKeycloakToken()}`,\r\n    'Content-Type': 'application/json',\r\n  }),\r\n});\r\n\r\nexport const getDefaultKeycloakOptions = () => ({\r\n  headers: new Headers({\r\n    Authorization: `Bearer ${getKeycloakToken()}`,\r\n    'Content-Type': 'application/x-www-form-urlencoded',\r\n  }),\r\n});\r\n\r\nexport const getUrl = url => {\r\n  return `${url}`;\r\n};\r\n\r\nexport const request = async (url, options) => {\r\n  const response = await fetch(url, options);\r\n\r\n  const headers = {\r\n    ...(response.headers.has('X-Total-Count') ? { 'X-Total-Count': parseInt(response.headers.get('X-Total-Count'), 10) } : {}),\r\n  };\r\n\r\n  if (response.status === 204) {\r\n    return { data: '', status: response.status };\r\n  }\r\n\r\n  return response.status >= 200 && response.status < 300\r\n    ? { data: await response.json(), headers, status: response.status }\r\n    : Promise.reject(new Error(response.statusText || response.status));\r\n};\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/customers';\r\n\r\nexport const apiCustomerDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerGet = async (serviceUrl, id) => {\r\n  const url = getUrl(`${serviceUrl}/${resource}/${id}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomersGetForAdminDashboard = async serviceUrl => {\r\n  const url = `${serviceUrl}/${resource}/all`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerPost = async (serviceUrl, customer) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: customer ? JSON.stringify(customer) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerPut = async (serviceUrl, customer) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: customer ? JSON.stringify(customer) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetCustomersProjects = async (serviceUrl, customerId) => {\r\n  const url = `${serviceUrl}/${resource}/${customerId}/projects`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddProjectToCustomer = async (serviceUrl, customerId, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${customerId}/projects/${projectId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiDeleteProjectFromCustomer = async (serviceUrl, customerId, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${customerId}/projects/${projectId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n// Endpoints for backend security\r\nconst adminResource = 'api/customers/admin';\r\nexport const apiAdminCustomersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${adminResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAdminCustomerGet = async (serviceUrl, customerId) => {\r\n  const url = getUrl(`${serviceUrl}/${adminResource}/${customerId}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nconst myResource = 'api/customers/mycustomers';\r\nexport const apiMyCustomersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${myResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetMyCustomersProjects = async (serviceUrl, customerId) => {\r\n  const url = `${serviceUrl}/${myResource}/${customerId}/projects`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomerPost } from '../../api/customers';\r\n\r\nclass AddCustomerModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      name: '',\r\n      customerNumber: '',\r\n      contactName: '',\r\n      contactPhone: '',\r\n      contactEmail: '',\r\n      notes: '',\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n\r\n    this.baseState = this.state;\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    if (this.state.customerNumber === '') {\r\n      formIsValid = false;\r\n      invalid['customerNumber'] = true;\r\n    }\r\n\r\n    if (typeof this.state.contactEmail !== 'undefined') {\r\n      let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n      let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n      if (\r\n        !(\r\n          lastAtPos < lastDotPos &&\r\n          lastAtPos > 0 &&\r\n          this.state.contactEmail.indexOf('@@') == -1 &&\r\n          lastDotPos > 2 &&\r\n          this.state.contactEmail.length - lastDotPos > 2\r\n        )\r\n      ) {\r\n        formIsValid = false;\r\n        invalid['contactEmail'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async customerPost(customer) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      return await apiCustomerPost(this.props.serviceUrl, customer);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = e => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const customer = {\r\n        name: this.state.name,\r\n        customerNumber: this.state.customerNumber,\r\n        contactName: this.state.contactName,\r\n        contactPhone: this.state.contactPhone,\r\n        contactEmail: this.state.contactEmail,\r\n        notes: this.state.notes,\r\n      };\r\n\r\n      this.customerPost(customer)\r\n        .then(result => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.added'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateCustomerList();\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n    //this.props.testFunction();\r\n    //super.componentDidMount();\r\n  };\r\n\r\n  clearValues = () => {\r\n    const customerModalElement = document.querySelector('#modal-form-customer');\r\n    if (!customerModalElement.className.includes('is-visible')) {\r\n      this.setState(this.baseState);\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    const modalOpenButton = document.querySelector('.add-customer-button');\r\n    modalOpenButton.addEventListener('click', this.clearValues, false);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.addCustomer')}\r\n        modalHeading={i18n.t('adminDashboard.addCustomer.title')}\r\n        buttonTriggerClassName=\"add-customer bx--btn bx--btn--tertiary add-customer-button\"\r\n        className=\"modal-form\"\r\n        id=\"modal-form-customer\"\r\n        handleSubmit={this.handleFormSubmit}\r\n        primaryButtonText={i18n.t('modalText.save')}\r\n        secondaryButtonText={i18n.t('modalText.cancel')}\r\n        modalLabel={<p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>}\r\n      >\r\n        <div className=\"form-container\">\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <TextInput\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.customerName') + ' *'}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <TextInput\r\n              name=\"customerNumber\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.customerNumber') + ' *'}\r\n              value={this.state.customerNumber}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['customerNumber']}\r\n            />\r\n            <TextInput\r\n              name=\"contactName\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.contactName')}\r\n              value={this.state.contactName}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactPhone\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.contactPhone')}\r\n              value={this.state.contactPhone}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactEmail\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.contactEmail') + ' *'}\r\n              value={this.state.contactEmail}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.email')}\r\n              invalid={this.state.invalid['contactEmail']}\r\n            />\r\n            <TextArea\r\n              name=\"notes\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.notes')}\r\n              value={this.state.notes}\r\n              onChange={this.handleChanges}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AddCustomerModal);\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/partners';\r\n\r\nexport const apiPartnerDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiPartnersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiPartnerPost = async (serviceUrl, partner) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: partner ? JSON.stringify(partner) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/projects';\r\n\r\nexport const apiProjectsDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectsGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectGet = async (serviceUrl, id) => {\r\n  const url = getUrl(`${serviceUrl}/${resource}/${id}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectsGetForCustomer = async (serviceUrl, customerNumber) => {\r\n  const url = `${serviceUrl}/${resource}/subscriptions/customer/${customerNumber}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectPost = async (serviceUrl, project) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: project ? JSON.stringify(project) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectPut = async (serviceUrl, project) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: project ? JSON.stringify(project) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddTicketToProject = async (serviceUrl, projectId, ticketId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/tickets/${ticketId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddSubscriptionToProject = async (serviceUrl, projectId, subscriptionId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/subscriptions/${subscriptionId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddUserToProject = async (serviceUrl, projectId, userId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/users/${userId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddPartnerToProject = async (serviceUrl, projectId, partnerId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/partners/${partnerId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetProjectsUsers = async (serviceUrl, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/users/`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetProjectsTickets = async (serviceUrl, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/tickets/`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetProjectSubscriptions = async (serviceUrl, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${projectId}/subscriptions/`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetProjectIdNames = async serviceUrl => {\r\n  const url = `${serviceUrl}/${resource}/nameId/`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetMyProjectIdNames = async serviceUrl => {\r\n  const url = `${serviceUrl}/${resource}/myprojects/nameId/`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n// Endpoints for backend security\r\nconst adminResource = 'api/projects/admin';\r\nexport const apiAdminProjectsGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${adminResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nconst myResource = 'api/projects/myprojects';\r\nexport const apiMyProjectsGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${myResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, Select, SelectItem, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiPartnerPost } from '../../api/partners';\r\nimport { apiProjectPost, apiProjectsGet, apiAddPartnerToProject } from '../../api/projects';\r\n\r\nclass AddPartnerModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      projectList: {},\r\n      projectId: '',\r\n      name: '',\r\n      partnerNumber: '',\r\n      notes: '',\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getProjects();\r\n    }\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //project\r\n    if (this.state.projectId === '' || this.state.projectId === 'project-list') {\r\n      formIsValid = false;\r\n      invalid['projectId'] = true;\r\n    }\r\n\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    if (this.state.partnerNumber === '') {\r\n      formIsValid = false;\r\n      invalid['partnerNumber'] = true;\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async getProjects() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const projects = await apiProjectsGet(this.props.serviceUrl);\r\n      this.setState({ projectList: projects });\r\n    }\r\n  }\r\n\r\n  async partnerPost(partner) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const result = await apiPartnerPost(this.props.serviceUrl, partner);\r\n      return await apiAddPartnerToProject(this.props.serviceUrl, this.state.projectId, result.data.id);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = e => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const partner = {\r\n        name: this.state.name,\r\n        partnerNumber: this.state.partnerNumber,\r\n        notes: this.state.notes,\r\n      };\r\n      this.partnerPost(partner)\r\n        .then(result => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.added'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateCustomerList();\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  clearValues = () => {\r\n    const partnerModalElement = document.querySelector('#modal-form-partner');\r\n    if (!partnerModalElement.className.includes('is-visible')) {\r\n      this.setState({\r\n        projectId: '',\r\n        name: '',\r\n        partnerNumber: '',\r\n        notes: '',\r\n        invalid: {},\r\n        submitMsg: '',\r\n        submitColour: 'black',\r\n      });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getProjects();\r\n\r\n    const modalOpenButton = document.querySelector('.add-partner-button');\r\n    modalOpenButton.addEventListener('click', this.clearValues, false);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.addPartner')}\r\n        modalHeading={i18n.t('adminDashboard.addPartner.title')}\r\n        buttonTriggerClassName=\"add-partner bx--btn bx--btn--tertiary add-partner-button\"\r\n        className=\"modal-form\"\r\n        id=\"modal-form-partner\"\r\n        handleSubmit={this.handleFormSubmit}\r\n        primaryButtonText={i18n.t('modalText.save')}\r\n        secondaryButtonText={i18n.t('modalText.cancel')}\r\n        modalLabel={<p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>}\r\n      >\r\n        <div className=\"form-container\">\r\n          {/*<p> {i18n.t('adminDashboard.addPartner.desc')}</p>*/}\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <Select\r\n              defaultValue=\"project-list\"\r\n              name=\"projectId\"\r\n              labelText={i18n.t('adminDashboard.addPartner.projectList') + ' *'}\r\n              value={this.state.projectId}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['projectId']}\r\n            >\r\n              <SelectItem text={i18n.t('adminDashboard.addPartner.selectProject')} value=\"project-list\" />\r\n              {Object.keys(this.props.allProjects).length !== 0\r\n                ? this.props.allProjects.map((projectList, i) => (\r\n                    <SelectItem key={i} text={projectList.name} value={projectList.id}>\r\n                      {projectList.name}\r\n                    </SelectItem>\r\n                  ))\r\n                : null}\r\n            </Select>\r\n\r\n            <TextInput\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addPartner.partnerName') + ' *'}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <TextInput\r\n              name=\"partnerNumber\"\r\n              labelText={i18n.t('adminDashboard.addPartner.partnerNumber') + ' *'}\r\n              value={this.state.partnerNumber}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['partnerNumber']}\r\n            />\r\n            <TextArea\r\n              name=\"notes\"\r\n              labelText={i18n.t('adminDashboard.addPartner.notes')}\r\n              value={this.state.notes}\r\n              onChange={this.handleChanges}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AddPartnerModal);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, Select, SelectItem, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomersGet, apiAddProjectToCustomer } from '../../api/customers';\r\nimport { apiProjectPost, apiProjectsGet } from '../../api/projects';\r\n\r\nclass AddProjectModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      projects: {},\r\n      customerList: {},\r\n      customerId: '',\r\n      name: '',\r\n      description: '',\r\n      systemId: '',\r\n      contactName: '',\r\n      contactPhone: '',\r\n      contactEmail: '',\r\n      notes: '',\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //customer\r\n    if (this.state.customerId === '' || this.state.customerId === 'customer-list') {\r\n      formIsValid = false;\r\n      invalid['customerId'] = true;\r\n    }\r\n\r\n    //name\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    //description\r\n    if (this.state.description === '') {\r\n      formIsValid = false;\r\n      invalid['description'] = true;\r\n    }\r\n\r\n    //contactEmail\r\n    if (typeof this.state.contactEmail !== 'undefined') {\r\n      let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n      let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n      if (\r\n        !(\r\n          lastAtPos < lastDotPos &&\r\n          lastAtPos > 0 &&\r\n          this.state.contactEmail.indexOf('@@') == -1 &&\r\n          lastDotPos > 2 &&\r\n          this.state.contactEmail.length - lastDotPos > 2\r\n        )\r\n      ) {\r\n        formIsValid = false;\r\n        invalid['contactEmail'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  async getAllProjects() {\r\n    const projects = await apiProjectsGet(this.props.serviceUrl);\r\n    this.setState({\r\n      projects: projects.data,\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomers();\r\n      this.getAllProjects();\r\n    }\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async getCustomers() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const customers = await apiCustomersGet(this.props.serviceUrl);\r\n      this.setState({ customerList: customers });\r\n    }\r\n  }\r\n\r\n  async projectPost(project) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const result = await apiProjectPost(this.props.serviceUrl, project);\r\n      return await apiAddProjectToCustomer(this.props.serviceUrl, this.state.customerId, result.data.id);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = e => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const project = {\r\n        name: this.state.name,\r\n        description: this.state.description,\r\n        systemId: this.state.systemId,\r\n        contactName: this.state.contactName,\r\n        contactPhone: this.state.contactPhone,\r\n        contactEmail: this.state.contactEmail,\r\n        notes: this.state.notes,\r\n      };\r\n      for (var i = 0; i < this.state.projects.length; i++) {\r\n        if (project.systemId === this.state.projects[i].systemId && project.systemId.trim() !== '') {\r\n          window.alert('That system id is already in use in another project');\r\n          return;\r\n        }\r\n      }\r\n      this.projectPost(project)\r\n        .then(result => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.added'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateCustomerList();\r\n          this.getAllProjects();\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  clearValues = () => {\r\n    const projectModalElement = document.querySelector('#modal-form-project');\r\n    if (!projectModalElement.className.includes('is-visible')) {\r\n      this.setState({\r\n        customerId: '',\r\n        name: '',\r\n        description: '',\r\n        systemId: '',\r\n        contactName: '',\r\n        contactPhone: '',\r\n        contactEmail: '',\r\n        notes: '',\r\n        invalid: {},\r\n      });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getCustomers();\r\n    this.getAllProjects();\r\n\r\n    const modalOpenButton = document.querySelector('.add-project-button');\r\n    modalOpenButton.addEventListener('click', this.clearValues, false);\r\n  }\r\n\r\n  render() {\r\n    const customerList = ['Customer1', 'Customer2', 'Customer3'];\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.addProject')}\r\n        modalHeading={i18n.t('adminDashboard.addProject.title')}\r\n        buttonTriggerClassName=\"add-project bx--btn bx--btn--tertiary add-project-button\"\r\n        className=\"modal-form\"\r\n        id=\"modal-form-project\"\r\n        handleSubmit={this.handleFormSubmit}\r\n        primaryButtonText={i18n.t('modalText.save')}\r\n        secondaryButtonText={i18n.t('modalText.cancel')}\r\n        modalLabel={<p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>}\r\n      >\r\n        <div className=\"form-container\">\r\n          {/*<p> {i18n.t('adminDashboard.addProject.desc')} </p>*/}\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <Select\r\n              defaultValue=\"customer-list\"\r\n              name=\"customerId\"\r\n              labelText={i18n.t('adminDashboard.addProject.customerList') + ' *'}\r\n              defaultValue={{ label: 'Select Dept', value: 0 }}\r\n              value={this.state.customerId}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['customerId']}\r\n            >\r\n              <SelectItem text={i18n.t('adminDashboard.addProject.selectCustomer')} value=\"customer-list\" />\r\n              {Object.keys(this.props.allCustomers).length !== 0\r\n                ? this.props.allCustomers.map((customerList, i) => (\r\n                    <SelectItem key={i} text={customerList.name} value={customerList.id}>\r\n                      {customerList.name}\r\n                    </SelectItem>\r\n                  ))\r\n                : null}\r\n            </Select>\r\n\r\n            <TextInput\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addProject.projectName') + ' *'}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <TextInput\r\n              name=\"description\"\r\n              labelText={i18n.t('adminDashboard.addProject.projectDesc') + ' *'}\r\n              value={this.state.description}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['description']}\r\n            />\r\n            <TextInput\r\n              name=\"systemId\"\r\n              labelText={i18n.t('adminDashboard.addProject.systemId')}\r\n              value={this.state.systemId}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactName\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactName')}\r\n              value={this.state.contactName}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactPhone\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactPhone')}\r\n              value={this.state.contactPhone}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactEmail\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactEmail') + ' *'}\r\n              value={this.state.contactEmail}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.email')}\r\n              invalid={this.state.invalid['contactEmail']}\r\n            />\r\n            <TextArea\r\n              name=\"notes\"\r\n              labelText={i18n.t('adminDashboard.addProject.notes')}\r\n              value={this.state.notes}\r\n              onChange={this.handleChanges}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AddProjectModal);\r\n","export const AuthenticatedView = ({ children, keycloak }) => {\n  const authenticated = keycloak.initialized && keycloak.authenticated;\n  return authenticated ? children : null;\n};\n\nexport const UnauthenticatedView = ({ children, keycloak }) => {\n  const authenticated = keycloak.initialized && keycloak.authenticated;\n  return !authenticated ? children : null;\n};\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, Select, SelectItem, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomersGet, apiAddProjectToCustomer } from '../../api/customers';\r\nimport { apiProjectGet, apiProjectPut, apiProjectsGet } from '../../api/projects';\r\n\r\nclass EditProjectModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      projects: {},\r\n      customerList: {},\r\n      customerId: '',\r\n      name: '',\r\n      description: '',\r\n      systemId: '',\r\n      contactName: '',\r\n      contactPhone: '',\r\n      contactEmail: '',\r\n      notes: '',\r\n      invalid: {},\r\n      modalId: '',\r\n      buttonId: '',\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //name\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    //description\r\n    if (this.state.description === '') {\r\n      formIsValid = false;\r\n      invalid['description'] = true;\r\n    }\r\n\r\n    //contactEmail\r\n    if (typeof this.state.contactEmail !== 'undefined') {\r\n      let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n      let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n      if (\r\n        !(\r\n          lastAtPos < lastDotPos &&\r\n          lastAtPos > 0 &&\r\n          this.state.contactEmail.indexOf('@@') == -1 &&\r\n          lastDotPos > 2 &&\r\n          this.state.contactEmail.length - lastDotPos > 2\r\n        )\r\n      ) {\r\n        formIsValid = false;\r\n        invalid['contactEmail'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomers();\r\n      this.getAllProjects();\r\n      this.getProjectDetails();\r\n    }\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async getCustomers() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const customers = await apiCustomersGet(this.props.serviceUrl);\r\n      this.setState({ customerList: customers });\r\n    }\r\n  }\r\n\r\n  async getProjectDetails() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const project = await apiProjectGet(this.props.serviceUrl, this.props.project.id);\r\n      this.setState({\r\n        name: project.data.name,\r\n        description: project.data.description,\r\n        systemId: project.data.systemId,\r\n        contactName: project.data.contactName,\r\n        contactPhone: project.data.contactPhone,\r\n        contactEmail: project.data.contactEmail,\r\n        notes: project.data.notes,\r\n        modalId: 'modal-form-project-edit-' + project.data.id,\r\n        buttonId: 'edit-project-button-' + project.data.id,\r\n      });\r\n    }\r\n  }\r\n\r\n  async getAllProjects() {\r\n    const projects = await apiProjectsGet(this.props.serviceUrl);\r\n    this.setState({\r\n      projects: projects.data,\r\n    });\r\n  }\r\n\r\n  async projectPut(project) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      return await apiProjectPut(this.props.serviceUrl, project);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = e => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const project = {\r\n        id: this.props.project.id,\r\n        customer: this.props.project.customer,\r\n        name: this.state.name,\r\n        description: this.state.description,\r\n        systemId: this.state.systemId,\r\n        contactName: this.state.contactName,\r\n        contactPhone: this.state.contactPhone,\r\n        contactEmail: this.state.contactEmail,\r\n        notes: this.state.notes,\r\n      };\r\n      for (var i = 0; i < this.props.allProjects.length; i++) {\r\n        if (\r\n          project.systemId === this.props.allProjects[i].systemId &&\r\n          project.id !== this.props.allProjects[i].id &&\r\n          project.systemId.trim() !== ''\r\n        ) {\r\n          window.alert('That system id is already in use in another project');\r\n          return;\r\n        }\r\n      }\r\n      this.projectPut(project)\r\n        .then(result => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.updated'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateProjectList();\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  clearValues = () => {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const customerModalElement = document.querySelector('#' + this.state.modalId);\r\n    if (!customerModalElement.className.includes('is-visible') && authenticated) {\r\n      this.setState({\r\n        name: this.props.project.name,\r\n        description: this.props.project.description,\r\n        systemId: this.props.project.systemId,\r\n        contactName: this.props.project.contactName,\r\n        contactPhone: this.props.project.contactPhone,\r\n        contactEmail: this.props.project.contactEmail,\r\n        notes: this.props.project.notes,\r\n        invalid: {},\r\n      });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.getCustomers();\r\n      this.getAllProjects();\r\n      this.getProjectDetails();\r\n\r\n      const modalOpenButton = document.querySelector('.edit-project-button-' + this.props.project.id);\r\n      modalOpenButton.addEventListener('click', this.clearValues, false);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const buttonClassName = 'dropdown-button-button bx--btn bx--btn--ghost edit-project-button-' + this.props.project.id;\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.edit')}\r\n        modalHeading={i18n.t('adminDashboard.addProject.editTitle')}\r\n        buttonTriggerClassName={buttonClassName}\r\n        className=\"modal-form\"\r\n        id={this.state.modalId}\r\n        handleSubmit={this.handleFormSubmit}\r\n        primaryButtonText={i18n.t('modalText.save')}\r\n        secondaryButtonText={i18n.t('modalText.cancel')}\r\n        modalLabel={<p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>}\r\n      >\r\n        <div className=\"form-container\">\r\n          {/*<p> {i18n.t('adminDashboard.addProject.desc')} </p>*/}\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <TextInput\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addProject.projectName') + ' *'}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <TextInput\r\n              name=\"description\"\r\n              labelText={i18n.t('adminDashboard.addProject.projectDesc') + ' *'}\r\n              value={this.state.description}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['description']}\r\n            />\r\n            <TextInput\r\n              name=\"systemId\"\r\n              labelText={i18n.t('adminDashboard.addProject.systemId')}\r\n              value={this.state.systemId}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactName\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactName')}\r\n              value={this.state.contactName}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactPhone\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactPhone')}\r\n              value={this.state.contactPhone}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactEmail\"\r\n              labelText={i18n.t('adminDashboard.addProject.contactEmail') + ' *'}\r\n              value={this.state.contactEmail}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.email')}\r\n              invalid={this.state.invalid['contactEmail']}\r\n            />\r\n            <TextArea\r\n              name=\"notes\"\r\n              labelText={i18n.t('adminDashboard.addProject.notes')}\r\n              value={this.state.notes}\r\n              onChange={this.handleChanges}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(EditProjectModal);\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\n\nconst resource = 'api/ticketing-systems';\n\nexport const apiTicketingSystemDelete = async (serviceUrl, id) => {\n  const url = `${serviceUrl}/${resource}/${id}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiCurrentTicketingSystemGet = async serviceUrl => {\n  const ticketingSystems = await apiTicketingSystemsGet(serviceUrl);\n  //Simplifying assumption to take the latest ticketing system as the current config\n  return ticketingSystems.data[ticketingSystems.data.length - 1];\n}\n\nexport const apiTicketingSystemsGet = async serviceUrl => {\n  const url = getUrl(`${serviceUrl}/${resource}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiTicketingSystemPost = async (serviceUrl, ticketingsystem) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: ticketingsystem ? JSON.stringify(ticketingsystem) : null,\n  };\n  return request(url, options);\n};\n\nexport const apiTicketingSystemPut = async (serviceUrl, ticketingsystem) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'PUT',\n    body: ticketingsystem ? JSON.stringify(ticketingsystem) : null,\n  };\n  return request(url, options);\n};\n","import React from 'react';\nimport i18n from '../../i18n';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { Button } from 'carbon-components-react';\nimport EditProjectModal from '../Admin/EditProjectModal';\nimport { isPortalAdmin } from '../../api/helpers';\nimport { Link } from 'react-router-dom';\n\nclass ProjectActionItems extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      showMenu: false,\n    };\n  }\n\n  handleClick = () => {\n    if (!this.state.showMenu) {\n      document.addEventListener('mousedown', this.handleOutsideClick, false);\n    } else {\n      document.removeEventListener('mousedown', this.handleOutsideClick, false);\n    }\n\n    this.setState(prevState => ({\n      showMenu: !prevState.showMenu,\n    }));\n  };\n\n  handleOutsideClick = e => {\n    if (this.node && !this.node.contains(e.target)) {\n      this.handleClick();\n    }\n  };\n\n  render() {\n    let search = window.location.search;\n    let params = new URLSearchParams(search);\n    let projectParam = params.get('project');\n\n    if (!this.props.hasSubscription) {\n      return (\n        <div>\n          <Button onClick={this.handleClick} style={{ padding: '10px 20px' }} kind=\"tertiary\">\n            +\n          </Button>\n          {this.state.showMenu ? (\n            <div\n              className=\"menu\"\n              style={{ zIndex: '100', position: 'absolute', backgroundColor: 'white' }}\n              ref={node => {\n                this.node = node;\n              }}\n            >\n              <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n              {isPortalAdmin() ? (\n                <div>\n                  <EditProjectModal\n                    key={this.props.project.id}\n                    allProjects={this.props.allProjects}\n                    project={this.props.project}\n                    serviceUrl={this.props.serviceUrl}\n                    updateProjectList={this.props.updateProjectList}\n                  />\n                  <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n                </div>\n              ) : null}\n              <a\n                href={`/entando-de-app/${this.props.locale}/new_or_renew_subscription.page.page?project=${this.props.project.id}`}\n                style={{ textDecoration: 'none' }}\n              >\n                <Button kind=\"ghost\" style={{ display: 'block', width: '100%' }} value=\"Subscription Request\">\n                  {i18n.t('buttons.subscriptionRequest')}\n                </Button>\n              </a>\n              <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n              {isPortalAdmin() ? (\n                <div>\n                  <Button\n                    kind=\"ghost\"\n                    onClick={e => this.props.handleDeleteProject(e, this.props.project.id)}\n                    style={{ display: 'block', width: '100%', color: 'red' }}\n                  >\n                    {i18n.t('buttons.delete')}\n                  </Button>\n                  <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n                </div>\n              ) : null}\n            </div>\n          ) : null}\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <Button onClick={this.handleClick} style={{ padding: '10px 20px' }} kind=\"tertiary\">\n            +\n          </Button>\n          {this.state.showMenu ? (\n            <div\n              className=\"menu\"\n              style={{ zIndex: '100', position: 'absolute', backgroundColor: 'white' }}\n              ref={node => {\n                this.node = node;\n              }}\n            >\n              {/*View Project Subscription*/}\n              <Link to={`/subscription-details/${this.props.sub.id}`} style={{ textDecoration: 'none' }}>\n                <Button kind=\"ghost\" style={{ display: 'block', width: '100%' }} value=\"View\">\n                  {i18n.t('buttons.view')}\n                </Button>\n              </Link>\n              <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n              {/*Edit Project Subscription*/}\n              {isPortalAdmin() ? (\n                <div>\n                  <EditProjectModal\n                    key={this.props.project.id}\n                    allProjects={this.props.allProjects}\n                    project={this.props.project}\n                    serviceUrl={this.props.serviceUrl}\n                    updateProjectList={this.props.updateProjectList}\n                  />\n                  <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n                </div>\n              ) : null}\n              {/*Open Ticket*/}\n              <a\n                href={`/entando-de-app/${this.props.locale}/open_service_ticket.page?project=${this.props.project.id}`}\n                style={{ textDecoration: 'none' }}\n              >\n                <Button kind=\"ghost\" style={{ display: 'block', width: '100%' }} value=\"Open Ticket\">\n                  {i18n.t('buttons.openTicket')}\n                </Button>\n              </a>\n              <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n              {/*View Tickets*/}\n              <a\n                href={\n                  this.props.ticketingSystem.url.substr(0, this.props.ticketingSystem.url.indexOf('/rest')) +\n                  '/issues/?jql=Organizations=' + this.props.project.systemId}\n                style={{ textDecoration: 'none' }}\n                target=\"_blank\"\n              >\n                <Button kind=\"ghost\" style={{ display: 'block', width: '100%' }} value=\"View Tickets\">\n                  {i18n.t('buttons.viewTickets')}\n                </Button>\n              </a>\n              <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n              {/*New/Renew Subscription*/}\n              <a\n                href={`/entando-de-app/${this.props.locale}/new_or_renew_subscription.page?project=${this.props.project.id}`}\n                style={{ textDecoration: 'none' }}\n              >\n                <Button kind=\"ghost\" style={{ display: 'block', width: '100%' }} value=\"Subscription Request\">\n                  {i18n.t('buttons.subscriptionRequest')}\n                </Button>\n              </a>\n              <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n              {/*Manage Users*/}\n              {isPortalAdmin() ? (\n                <div>\n                  <a\n                    href={`/entando-de-app/${this.props.locale}/manage_users.page?project=${this.props.project.id}`}\n                    style={{ textDecoration: 'none' }}\n                  >\n                    <Button kind=\"ghost\" style={{ display: 'block', width: '100%' }} value=\"Manage Users\">\n                      {i18n.t('buttons.manageUsers')}\n                    </Button>\n                  </a>\n                  <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n                  {/*Delete Project*/}\n                  <Button\n                    kind=\"ghost\"\n                    onClick={e => this.props.handleDeleteProject(e, this.props.project.id)}\n                    style={{ display: 'block', width: '100%', color: 'red' }}\n                  >\n                    {i18n.t('buttons.delete')}\n                  </Button>\n                  <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n                </div>\n              ) : null}\n            </div>\n          ) : null}\n        </div>\n      );\n    }\n  }\n}\n\nexport default withKeycloak(ProjectActionItems);\n","import React, { Component } from 'react';\nimport { DataTable, TableContainer, Table, TableHead, TableRow, TableHeader, TableBody, TableCell, Button } from 'carbon-components-react';\nimport '../../index.scss';\nimport { apiGetCustomersProjects, apiGetMyCustomersProjects, apiDeleteProjectFromCustomer } from '../../api/customers';\nimport { AuthenticatedView, UnauthenticatedView } from '../../auth/KeycloakViews';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { Link, HashRouter } from 'react-router-dom';\nimport i18n from '../../i18n';\nimport EditProjectModal from '../Admin/EditProjectModal';\nimport { isPortalAdminOrSupport } from '../../api/helpers';\nimport { apiProjectsDelete } from '../../api/projects';\nimport {apiCurrentTicketingSystemGet} from \"../../api/ticketingsystem\";\nimport ProjectActionItems from '../Admin/ProjectActionItems';\n\nclass CustomTable extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      projects: {},\n      ticketingSystem: {},\n      action: 'Edit',\n      showMenu: {},\n    };\n    this.headerData = [\n      {\n        header: i18n.t('customerDashboard.projectName'),\n        key: 'projectName',\n      },\n      {\n        header: i18n.t('customerDashboard.partners'),\n        key: 'partners',\n      },\n      {\n        header: i18n.t('customerDashboard.entandoVersion'),\n        key: 'entandoVersion',\n      },\n      {\n        header: i18n.t('customerDashboard.status'),\n        key: 'status',\n      },\n      {\n        header: i18n.t('customerDashboard.startDate'),\n        key: 'startDate',\n      },\n      {\n        header: i18n.t('customerDashboard.endDate'),\n        key: 'endDate',\n      },\n      {\n        header: i18n.t('customerDashboard.openTickets'),\n        key: 'openTickets',\n      },\n      {\n        header: i18n.t('customerDetails.notes'),\n        key: 'notes',\n      },\n      {\n        header: i18n.t('customerDashboard.action'),\n        key: 'action',\n      },\n    ];\n  }\n\n  async fetchData() {\n    const { t, keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      try {\n        var projects;\n        if (isPortalAdminOrSupport()) {\n          projects = await apiGetCustomersProjects(this.props.serviceUrl, this.props.customerNumber);\n        } else {\n          projects = await apiGetMyCustomersProjects(this.props.serviceUrl, this.props.customerNumber);\n        }\n\n        const ticketingSystem = await apiCurrentTicketingSystemGet(this.props.serviceUrl);\n\n        this.setState({\n          projects: projects,\n          ticketingSystem: ticketingSystem,\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    this.render();\n  }\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      this.fetchData();\n    }\n  }\n\n  updateProjectList = () => {\n    this.fetchData();\n  };\n\n  showMenu = (e, id) => {\n    var showMenu = {};\n    showMenu[String(id)] = !this.state.showMenu[String(id)];\n    this.setState({\n      showMenu: showMenu,\n    });\n    //document.addEventListener('mousedown', this.closeMenu);\n  };\n\n  closeMenu = () => {\n    this.setState({ showMenu: false }, () => {\n      document.removeEventListener('click', this.closeMenu);\n    });\n  };\n\n  async deleteProject(id) {\n    const { t, keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      return await apiDeleteProjectFromCustomer(this.props.serviceUrl, this.props.customerNumber, id);\n    }\n  }\n\n  handleDeleteProject = (e, id) => {\n    e.preventDefault();\n    if (window.confirm('Are you sure you want to delete this project?')) {\n      this.deleteProject(id)\n        .then(result => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.deleted'),\n            submitColour: '#24a148',\n          });\n          this.props.updateCustomerList();\n        })\n        .catch(err => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      this.fetchData();\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <DataTable rows={rowData} headers={this.headerData}>\n          {({ rows, headers, getHeaderProps, getTableProps }) => (\n            <TableContainer description={i18n.t('customerDashboard.tableDesc')}>\n              <Table {...getTableProps()}>\n                <TableHead>\n                  <TableRow>\n                    {headers.map(header => {\n                      if (header.header === i18n.t('customerDetails.notes')) {\n                        if (isPortalAdminOrSupport()) {\n                          return <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>;\n                        }\n                      } else {\n                        return <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>;\n                      }\n                    })}\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {Object.keys(this.state.projects).length !== 0\n                    ? this.state.projects.data.map((project, index) => {\n                        if (project.projectSubscriptions.length === 0) {\n                          return (\n                            <TableRow key={index}>\n                              <TableCell>{project.name}</TableCell>\n                              {project.partners.length !== 0 ? (\n                                <TableCell>\n                                  {project.partners.map(partner => (\n                                    <p>{partner.name}</p>\n                                  ))}\n                                </TableCell>\n                              ) : (\n                                <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              )}\n                              <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              <TableCell>{project.tickets.length}</TableCell>\n                              {isPortalAdminOrSupport() ? <TableCell style={{ width: '250px' }}>{project.notes}</TableCell> : null}\n                              <TableCell>\n                                <ProjectActionItems\n                                  serviceUrl={this.props.serviceUrl}\n                                  ticketingSystem={this.state.ticketingSystem}\n                                  locale={this.props.locale}\n                                  hasSubscription={false}\n                                  project={project}\n                                  allProjects={this.state.projects.data}\n                                  handleDeleteProject={this.handleDeleteProject}\n                                  updateProjectList={this.updateProjectList}\n                                />\n                              </TableCell>\n                            </TableRow>\n                          );\n                        } else {\n                          //Note: this uses the last subscription which isn't necessarily the current active one\n                          var sub = project.projectSubscriptions[project.projectSubscriptions.length - 1];\n                          return (\n                            <TableRow key={index}>\n                              <TableCell>\n                                <Link to={`/subscription-details/${sub.id}`}>{project.name}</Link>\n                              </TableCell>\n                              {project.partners.length !== 0 ? (\n                                <TableCell>\n                                  {project.partners.map(partner => (\n                                    <p>{partner.name}</p>\n                                  ))}\n                                </TableCell>\n                              ) : (\n                                <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              )}\n                              {sub.entandoVersion ? (\n                                <TableCell>{sub.entandoVersion.name}</TableCell>\n                              ) : (\n                                <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              )}\n                              <TableCell>{sub.status}</TableCell>\n                              <TableCell>{String(new Date(sub.startDate).toDateString())}</TableCell>\n                              <TableCell>\n                                {String(\n                                  new Date(\n                                    new Date(sub.startDate).setMonth(new Date(sub.startDate).getMonth() + sub.lengthInMonths)\n                                  ).toDateString()\n                                )}\n                              </TableCell>\n                              <TableCell>{project.tickets.length}</TableCell>\n                              {isPortalAdminOrSupport() ? <TableCell style={{ width: '250px' }}>{project.notes}</TableCell> : null}\n                              <TableCell>\n                                <ProjectActionItems\n                                  serviceUrl={this.props.serviceUrl}\n                                  ticketingSystem={this.state.ticketingSystem}\n                                  locale={this.props.locale}\n                                  sub={sub}\n                                  hasSubscription={true}\n                                  project={project}\n                                  allProjects={this.state.projects.data}\n                                  handleDeleteProject={this.handleDeleteProject}\n                                  updateProjectList={this.updateProjectList}\n                                />\n                              </TableCell>\n                            </TableRow>\n                          );\n                        }\n                      })\n                    : null}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          )}\n        </DataTable>\n      </div>\n    );\n  }\n}\n\nconst rowData = [\n  {\n    id: 'a',\n    projectName: <a href=\"\">Supplier Portal</a>,\n    partnerName: 'Leonardo',\n    entandoVersion: 5.2,\n    startDate: 'October, 2019',\n    endDate: 'October, 2022',\n    openTickets: '5',\n  },\n  {\n    id: 'b',\n    projectName: <a href=\"\">Task Manager</a>,\n    partnerName: 'Veriday',\n    entandoVersion: 5.2,\n    startDate: 'July, 2019',\n    endDate: 'July, 2022',\n    openTickets: '2',\n  },\n  {\n    id: 'c',\n    projectName: <a href=\"\">Sales Coordination App</a>,\n    partnerName: 'Accenture',\n    entandoVersion: 6.2,\n    startDate: 'September, 2019',\n    endDate: 'September, 2022',\n    openTickets: '2',\n  },\n  {\n    id: 'd',\n    projectName: <a href=\"\">Website</a>,\n    partnerName: 'Veriday',\n    entandoVersion: 5.2,\n    startDate: 'October, 2019',\n    endDate: 'October, 2022',\n    openTickets: '1',\n  },\n];\n\nexport default withKeycloak(CustomTable);\n","import React from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Tile } from 'carbon-components-react';\r\nimport { apiCustomerGet } from '../../api/customers';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\n\r\nconst customerData = {\r\n  name: 'Ford',\r\n  id: '5564 4563 3345',\r\n  startDate: '01/01/2020',\r\n};\r\n\r\nclass CustomerDetails extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      customer: {},\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.getCustomer(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomer(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  async getCustomer() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      const customer = await apiCustomerGet(this.props.serviceUrl, this.props.customerNumber);\r\n      this.setState({\r\n        customer: customer.data,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { name, id, startDate } = customerData; //destructuring\r\n    return (\r\n      <div className=\"customer-details\">\r\n        <Tile>\r\n          <p>\r\n            <strong>{i18n.t('customerDashboard.customerName')}</strong> {this.state.customer.name}\r\n          </p>\r\n          <p>\r\n            <strong>{i18n.t('customerDashboard.customerId')}</strong> {this.state.customer.id}\r\n          </p>\r\n        </Tile>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(CustomerDetails);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, TextArea } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomerGet, apiCustomerPut } from '../../api/customers';\r\n\r\nclass EditCustomerModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      name: '',\r\n      customerNumber: '',\r\n      contactName: '',\r\n      contactPhone: '',\r\n      contactEmail: '',\r\n      notes: '',\r\n      invalid: {},\r\n      modalId: '',\r\n      buttonId: '',\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //name\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    //customerNumber\r\n    if (this.state.customerNumber === '') {\r\n      formIsValid = false;\r\n      invalid['customerNumber'] = true;\r\n    }\r\n\r\n    //contactEmail\r\n    if (typeof this.state.contactEmail !== 'undefined') {\r\n      let lastAtPos = this.state.contactEmail.lastIndexOf('@');\r\n      let lastDotPos = this.state.contactEmail.lastIndexOf('.');\r\n\r\n      if (\r\n        !(\r\n          lastAtPos < lastDotPos &&\r\n          lastAtPos > 0 &&\r\n          this.state.contactEmail.indexOf('@@') == -1 &&\r\n          lastDotPos > 2 &&\r\n          this.state.contactEmail.length - lastDotPos > 2\r\n        )\r\n      ) {\r\n        formIsValid = false;\r\n        invalid['contactEmail'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async updateCustomer(customer) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      return await apiCustomerPut(this.props.serviceUrl, customer);\r\n    }\r\n  }\r\n\r\n  getCustomerDetails = customerId => {\r\n    this.getCustomer(customerId);\r\n  };\r\n\r\n  async getCustomer(customerId) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const customer = await apiCustomerGet(this.props.serviceUrl, customerId);\r\n      this.setState({\r\n        name: customer.data.name,\r\n        customerNumber: customer.data.customerNumber,\r\n        contactName: customer.data.contactName,\r\n        contactPhone: customer.data.contactPhone,\r\n        contactEmail: customer.data.contactEmail,\r\n        notes: customer.data.notes,\r\n        modalId: 'modal-form-customer-edit-' + customer.data.id,\r\n        buttonId: 'edit-customer-button-' + customer.data.id,\r\n      });\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = e => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const customer = {\r\n        id: this.props.customer.id,\r\n        name: this.state.name,\r\n        customerNumber: this.state.customerNumber,\r\n        contactName: this.state.contactName,\r\n        contactPhone: this.state.contactPhone,\r\n        contactEmail: this.state.contactEmail,\r\n        notes: this.state.notes,\r\n      };\r\n      this.updateCustomer(customer)\r\n        .then(result => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.updated'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateCustomerList();\r\n          this.getCustomerDetails(this.props.customer.id);\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  clearValues = () => {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const customerModalElement = document.querySelector('#' + this.state.modalId);\r\n    if (!customerModalElement.className.includes('is-visible') && authenticated) {\r\n      this.setState({\r\n        name: this.props.customer.name,\r\n        customerNumber: this.props.customer.customerNumber,\r\n        contactName: this.props.customer.contactName,\r\n        contactPhone: this.props.customer.contactPhone,\r\n        contactEmail: this.props.customer.contactEmail,\r\n        notes: this.props.customer.notes,\r\n        invalid: {},\r\n      });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      if (this.props.customerId) {\r\n        this.getCustomerDetails(this.props.customerId);\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomerDetails(this.props.customerId);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const buttonClassName = 'bx--btn bx--btn--ghost edit-customer-button-' + this.props.customer.id;\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.edit')}\r\n        modalHeading={i18n.t('adminDashboard.editCustomer.title')}\r\n        buttonTriggerClassName={buttonClassName}\r\n        className=\"modal-form\"\r\n        id={this.state.modalId}\r\n        handleSubmit={this.handleFormSubmit}\r\n        primaryButtonText={i18n.t('modalText.save')}\r\n        secondaryButtonText={i18n.t('modalText.cancel')}\r\n        modalLabel={<p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>}\r\n      >\r\n        <div className=\"form-container\">\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <TextInput\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.customerName') + ' *'}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <TextInput\r\n              name=\"customerNumber\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.customerNumber') + ' *'}\r\n              value={this.state.customerNumber}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['customerNumber']}\r\n            />\r\n            <TextInput\r\n              name=\"contactName\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.contactName')}\r\n              value={this.state.contactName}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactPhone\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.contactPhone')}\r\n              value={this.state.contactPhone}\r\n              onChange={this.handleChanges}\r\n            />\r\n            <TextInput\r\n              name=\"contactEmail\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.contactEmail') + ' *'}\r\n              value={this.state.contactEmail}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.email')}\r\n              invalid={this.state.invalid['contactEmail']}\r\n            />\r\n            <TextArea\r\n              name=\"notes\"\r\n              labelText={i18n.t('adminDashboard.addCustomer.notes')}\r\n              value={this.state.notes}\r\n              onChange={this.handleChanges}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(EditCustomerModal);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { AccordionItem, Button } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomerGet, apiCustomerDelete, apiGetCustomersProjects, apiGetMyCustomersProjects } from '../../api/customers';\r\nimport CustomTable from './customDataTable';\r\nimport CustomerDetails from './customerDetails';\r\nimport { isPortalAdminOrSupport, isPortalAdmin, isPortalCustomer } from '../../api/helpers';\r\nimport EditCustomerModal from '../Admin/EditCustomerModal';\r\nimport i18n from '../../i18n';\r\n\r\nclass CustomerAccordian extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      projects: {},\r\n      customer: {},\r\n      authenticated: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.getCustomersProjects(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomersProjects(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  async getCustomersProjects(id) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const customer = await apiCustomerGet(this.props.serviceUrl, id);\r\n\r\n      var projects;\r\n      try {\r\n        if (isPortalAdminOrSupport()) {\r\n          projects = await apiGetCustomersProjects(this.props.serviceUrl, id);\r\n        } else {\r\n          projects = await apiGetMyCustomersProjects(this.props.serviceUrl, id);\r\n        }\r\n\r\n        this.setState({\r\n          projects: projects.data,\r\n          customer: customer.data,\r\n        });\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  async deleteCustomer() {\r\n    return await apiCustomerDelete(this.props.serviceUrl, this.state.customer.id);\r\n  }\r\n\r\n  handleDelete(e) {\r\n    if (window.confirm('Are you sure you want to delete this customer?')) {\r\n      this.deleteCustomer().then(result => {\r\n        this.props.updateCustomerList();\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var { t, keycloak } = this.props;\r\n    var authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          {isPortalCustomer() ? <CustomerDetails serviceUrl={this.props.serviceUrl} customerNumber={this.props.customerNumber} /> : null}\r\n          <AccordionItem title={this.props.title} open={this.props.accordionOpened}>\r\n            <div style={{ display: 'flex' }}>\r\n              {isPortalAdminOrSupport() ? (\r\n                <Link style={{ textDecoration: 'none' }} to={`/customer-details/${this.state.customer.id}`}>\r\n                  <Button kind=\"ghost\">{i18n.t('buttons.viewDetails')}</Button>\r\n                </Link>\r\n              ) : null}\r\n              {isPortalAdmin() ? (\r\n                <div style={{ display: 'flex' }}>\r\n                  <EditCustomerModal\r\n                    serviceUrl={this.props.serviceUrl}\r\n                    customer={this.state.customer}\r\n                    key={this.state.customer.id}\r\n                    updateCustomerList={this.props.updateCustomerList}\r\n                    customerId={this.state.customer.id}\r\n                  />\r\n                  <Button kind=\"ghost\" style={{ color: 'red' }} onClick={() => this.handleDelete()}>\r\n                    {i18n.t('buttons.delete')}\r\n                  </Button>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n            <CustomTable\r\n              key={new Date().getTime()}\r\n              serviceUrl={this.props.serviceUrl}\r\n              customerNumber={this.props.customerNumber}\r\n              locale={this.props.locale}\r\n              updateCustomerList={this.props.updateCustomerList}\r\n            />\r\n          </AccordionItem>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(CustomerAccordian);\r\n","import React from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Accordion, AccordionItem, PaginationNav, Search, Tile } from 'carbon-components-react';\r\nimport AddCustomerModal from './AddCustomerModal';\r\nimport AddPartnerModal from './AddPartnerModal';\r\nimport AddProjectModal from './AddProjectModal';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiAdminCustomersGet, apiMyCustomersGet } from '../../api/customers';\r\nimport CustomerAccordian from '../Customer/CustomerAccordian';\r\nimport { isPortalAdmin, isPortalSupport, isPortalPartner, isPortalCustomer, isPortalAdminOrSupport, isPortalUser } from '../../api/helpers';\r\nimport { apiProjectsGet, apiMyProjectsGet } from '../../api/projects';\r\n\r\nclass AdminDashboard extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      customers: {},\r\n      projects: {},\r\n      customersProjects: {},\r\n      role: '',\r\n      filteredCustomers: {},\r\n      currentPage: 0,\r\n      test: '',\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getCustomers();\r\n    this.getProjects();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomers();\r\n      this.getProjects();\r\n    }\r\n  }\r\n\r\n  async getProjects() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      var projects = '';\r\n      if (isPortalAdminOrSupport()) {\r\n        projects = await apiProjectsGet(this.props.serviceUrl);\r\n      } else {\r\n        projects = await apiMyProjectsGet(this.props.serviceUrl);\r\n      }\r\n      this.setState({\r\n        projects: projects.data,\r\n      });\r\n    }\r\n  }\r\n\r\n  async getCustomers() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      var customers;\r\n      if (isPortalAdminOrSupport()) {\r\n        customers = await apiAdminCustomersGet(this.props.serviceUrl);\r\n      } else {\r\n        customers = await apiMyCustomersGet(this.props.serviceUrl);\r\n      }\r\n\r\n      this.setState({\r\n        customers: customers.data,\r\n        filteredCustomers: customers.data,\r\n      });\r\n    }\r\n  }\r\n\r\n  handleSearch = event => {\r\n    if (event.key === 'Enter') {\r\n      const newFilteredState = this.state.customers.filter(customer =>\r\n        customer.name.toLowerCase().includes(event.target.value.toLowerCase())\r\n      );\r\n      this.setState({\r\n        filteredCustomers: newFilteredState,\r\n        currentPage: 0,\r\n      });\r\n    } else {\r\n      if (event.target.value === '' || event.target.value === undefined) {\r\n        this.setState({\r\n          filteredCustomers: this.state.customers,\r\n        });\r\n      }\r\n    }\r\n    this.forceUpdate();\r\n  };\r\n\r\n  updateCustomerList = () => {\r\n    this.getCustomers();\r\n    this.getProjects();\r\n  };\r\n\r\n  render() {\r\n    var numberOfPages = 1;\r\n    if (Object.keys(this.state.filteredCustomers).length !== 0) {\r\n      numberOfPages = Math.ceil(this.state.filteredCustomers.length / 5);\r\n    } else {\r\n      numberOfPages = 1;\r\n    }\r\n\r\n    const props = () => ({\r\n      loop: Boolean(false),\r\n      page: Number(this.state.currentPage),\r\n      totalItems: Number(numberOfPages),\r\n      itemsShown: Number(1),\r\n      onChange: event => this.setState({ currentPage: event }),\r\n    });\r\n\r\n    return (\r\n      <div className=\"admin-dashboard\">\r\n        {isPortalAdmin() ? (\r\n          <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\r\n        ) : isPortalSupport() ? (\r\n          <h3 className=\"pageTitle\">{i18n.t('adminDashboard.supportTitle')}</h3>\r\n        ) : isPortalCustomer() ? (\r\n          <h3 className=\"pageTitle\">{i18n.t('adminDashboard.customerTitle')}</h3>\r\n        ) : isPortalPartner() ? (\r\n          <h3 className=\"pageTitle\">{i18n.t('adminDashboard.partnerTitle')}</h3>\r\n        ) : null}\r\n        {isPortalAdmin() || isPortalSupport() || isPortalPartner() ? (\r\n          <Tile>\r\n            <p className=\"title\">{i18n.t('adminDashboard.allCustomers')}</p>\r\n            <div className=\"bx--row\">\r\n              <div className=\"bx--col\">\r\n                <Search\r\n                  onChange={this.handleSearch}\r\n                  id=\"search\"\r\n                  placeholder={i18n.t('adminDashboard.searchText')}\r\n                  labelText={i18n.t('adminDashboard.searchLabel')}\r\n                  onKeyPress={this.handleSearch}\r\n                />\r\n              </div>\r\n              {isPortalAdmin() ? (\r\n                <div className=\"bx--col\">\r\n                  <div>\r\n                    <AddPartnerModal\r\n                      serviceUrl={this.props.serviceUrl}\r\n                      updateCustomerList={this.updateCustomerList}\r\n                      allProjects={this.state.projects}\r\n                    />\r\n                    <AddCustomerModal serviceUrl={this.props.serviceUrl} updateCustomerList={this.updateCustomerList} />\r\n                    <AddProjectModal\r\n                      serviceUrl={this.props.serviceUrl}\r\n                      updateCustomerList={this.updateCustomerList}\r\n                      allCustomers={this.state.customers}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </Tile>\r\n        ) : null}\r\n\r\n        <div className=\"form-container\">\r\n          <Accordion>\r\n            {Object.keys(this.state.customers).length !== 0\r\n              ? this.state.filteredCustomers.map((customer, index) => {\r\n                  // Pagination for Admin and Support roles (5 items per page)\r\n                  var indexOfLastItem = (this.state.currentPage + 1) * 5 - 1;\r\n                  var firstIndexOfCurrentPage = this.state.currentPage * 5;\r\n                  var accordionOpened = this.state.customers.length === 1;\r\n\r\n                  if (isPortalUser()) {\r\n                    if (index >= firstIndexOfCurrentPage && index <= indexOfLastItem) {\r\n                      return (\r\n                        <CustomerAccordian\r\n                          key={customer.id}\r\n                          serviceUrl={this.props.serviceUrl}\r\n                          customerNumber={customer.id}\r\n                          title={customer.name}\r\n                          updateCustomerList={this.updateCustomerList}\r\n                          locale={this.props.locale}\r\n                          accordionOpened={accordionOpened}\r\n                        />\r\n                      );\r\n                    } else {\r\n                      return null;\r\n                    }\r\n                  } else {\r\n                    return null;\r\n                  }\r\n                })\r\n              : null}\r\n          </Accordion>\r\n          <PaginationNav {...props()} cssClass=\"pagination-right\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AdminDashboard);\r\n","export const publishWidgetEvent = (eventId, payload) => {\r\n  const widgetEvent = new CustomEvent(eventId, {\r\n    detail: {\r\n      payload,\r\n    },\r\n  });\r\n  window.dispatchEvent(widgetEvent);\r\n};\r\n\r\nexport const createWidgetEventPublisher = eventType => payload => publishWidgetEvent(eventType, payload);\r\n\r\nexport const subscribeToWidgetEvent = (eventType, eventHandler) => {\r\n  window.addEventListener(eventType, eventHandler);\r\n\r\n  return () => {\r\n    window.removeEventListener(eventType, eventHandler);\r\n  };\r\n};\r\n\r\nexport const subscribeToWidgetEvents = (widgetEvents, eventHandler) => {\r\n  widgetEvents.forEach(eventType => window.addEventListener(eventType, eventHandler));\r\n\r\n  return () => {\r\n    widgetEvents.forEach(eventType => window.removeEventListener(eventType, eventHandler));\r\n  };\r\n};\r\n\r\nexport const widgetEventToFSA = widgetEvent => {\r\n  // for info about Flux Standard Action (FSA) see https://github.com/redux-utilities/flux-standard-action\r\n  const {\r\n    type,\r\n    detail: { payload, error, meta },\r\n  } = widgetEvent;\r\n  return { type, payload, error, meta };\r\n};\r\n","export const INPUT_EVENT_TYPES = {\r\n  formUpdate: 'customer.form.update',\r\n  formCreate: 'customer.form.create',\r\n  formDelete: 'customer.form.delete',\r\n};\r\n\r\nexport const OUTPUT_EVENT_TYPES = {\r\n  select: 'customer.table.select',\r\n  add: 'customer.table.add',\r\n  error: 'customer.table.error',\r\n  delete: 'customer.table.delete',\r\n};\r\n\r\nexport const KEYCLOAK_EVENT_TYPE = 'keycloak';\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AdminDashboard from '../components/Admin/AdminDashboard';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AdminDashboardElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AdminDashboard serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-dashboard-widget', AdminDashboardElement);\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/tickets';\r\n\r\nexport const apiTicketDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketsGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketPost = async (serviceUrl, ticket) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: ticket ? JSON.stringify(ticket) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nconst jiraResource = 'api/tickets/ticketingsystem';\r\nexport const apiJiraTicketDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${jiraResource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiJiraTicketsGet = async (serviceUrl, projectName, organization) => {\r\n  const url = `${serviceUrl}/${jiraResource}/${projectName}/${organization}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiJiraTicketPost = async (serviceUrl, projectName, organization, ticket) => {\r\n  const url = `${serviceUrl}/${jiraResource}/${projectName}/${organization}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: ticket ? JSON.stringify(ticket) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\nimport {\n  DataTable,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell,\n  PaginationNav,\n} from 'carbon-components-react';\nimport { apiJiraTicketsGet } from '../../api/tickets';\nimport { apiCurrentTicketingSystemGet } from '../../api/ticketingsystem';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiProjectGet, apiAddTicketToProject } from '../../api/projects';\nimport { isPortalUser } from '../../api/helpers';\nimport i18n from '../../i18n';\n\nclass TicketList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tickets: {},\n      project: {},\n      currentTicketingSystem: {},\n      currentPage: 0,\n    };\n    this.headerData = [\n      {\n        header: i18n.t('ticketDetails.issue'),\n        key: 'issue',\n      },\n      {\n        header: i18n.t('ticketDetails.summary'),\n        key: 'summary',\n      },\n      {\n        header: i18n.t('ticketDetails.status'),\n        key: 'status',\n      },\n      {\n        header: i18n.t('ticketDetails.type'),\n        key: 'type',\n      },\n      {\n        header: i18n.t('ticketDetails.priority'),\n        key: 'priority',\n      },\n      {\n        header: i18n.t('ticketDetails.created'),\n        key: 'created',\n      },\n      {\n        header: i18n.t('ticketDetails.updated'),\n        key: 'updated',\n      },\n      {\n        header: i18n.t('ticketDetails.link'),\n        key: 'link',\n      },\n    ];\n  }\n\n  async fetchData() {\n    const { t, keycloak } = this.props;\n    var authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      try {\n        const project = await apiProjectGet(this.props.serviceUrl, this.props.projectId);\n        const currentTicketingSystem = await apiCurrentTicketingSystemGet(this.props.serviceUrl);\n        var tickets = await apiJiraTicketsGet(this.props.serviceUrl, currentTicketingSystem.systemId, project.data.systemId);\n        for (var i = 0; i < tickets.data.length; i++) {\n          apiAddTicketToProject(this.props.serviceUrl, this.props.projectId, tickets.data[i].id);\n        }\n\n        this.setState({\n          tickets: tickets,\n          project: project,\n          currentTicketingSystem: currentTicketingSystem,\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  }\n\n  componentDidMount() {\n    if (isPortalUser()) {\n      this.fetchData();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth && isPortalUser()) {\n      this.fetchData();\n    }\n  }\n\n  render() {\n    var numberOfPages = 1;\n    if (Object.keys(this.state.tickets).length !== 0) {\n      numberOfPages = Math.ceil(this.state.tickets.data.length / 10);\n    }\n\n    const paginationProps = () => ({\n      loop: Boolean(false),\n      page: Number(this.state.currentPage),\n      totalItems: Number(numberOfPages),\n      itemsShown: Number(1),\n      onChange: event => this.setState({ currentPage: event }),\n    });\n\n    return (\n      <div>\n        <DataTable rows={rowData} headers={this.headerData}>\n          {({ rows, headers, getHeaderProps, getTableProps }) => (\n            <TableContainer\n              title={i18n.t('ticketDetails.listOfTickets')}\n              description={\n                Object.keys(this.state.tickets).length !== 0 && Object.keys(this.state.project).length !== 0 ? (\n                <a\n                  href={\n                    this.state.currentTicketingSystem.url.substr(0, this.state.currentTicketingSystem.url.indexOf('/rest')) +\n                    '/issues/' +\n                    '?jql=Organizations=' +\n                    this.state.project.data.systemId\n                  }\n                  style={{ textDecoration: 'none' }}\n                  target=\"_blank\"\n                >\n                  {i18n.t('buttons.viewTickets')}\n                </a>\n                ) : (\n                  <a>{i18n.t('ticketDetails.tickets')}</a>\n                )\n              }\n            >\n              <Table {...getTableProps()}>\n                <TableHead>\n                  <TableRow>\n                    {headers.map(header => (\n                      <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>\n                    ))}\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {Object.keys(this.state.tickets).length !== 0 ? (\n                    this.state.tickets.data.map((ticket, index) => {\n                      var indexOfLastItem = (this.state.currentPage + 1) * 10 - 1;\n                      var firstIndexOfCurrentPage = this.state.currentPage * 10;\n\n                      if (index >= firstIndexOfCurrentPage && index <= indexOfLastItem) {\n                        return (\n                          <TableRow key={ticket.id}>\n                            <TableCell key={ticket.id}>{ticket.systemId}</TableCell>\n                            <TableCell key={ticket.id}>{ticket.summary}</TableCell>\n                            <TableCell key={ticket.id}>{ticket.status}</TableCell>\n                            <TableCell key={ticket.id}>{ticket.type}</TableCell>\n                            <TableCell key={ticket.id}>{ticket.priority}</TableCell>\n                            <TableCell key={ticket.id}>{new Date(ticket.createDate).toDateString()}</TableCell>\n                            <TableCell key={ticket.id}>{new Date(ticket.updateDate).toDateString()}</TableCell>\n                            <TableCell key={ticket.id}>\n                              <a\n                                href={\n                                  this.state.currentTicketingSystem.url.substr(0, this.state.currentTicketingSystem.url.indexOf('/rest')) +\n                                  '/browse/' +\n                                  ticket.systemId\n                                }\n                                target=\"_blank\"\n                              >\n                                {i18n.t('ticketDetails.viewTicket')}\n                              </a>\n                            </TableCell>\n                          </TableRow>\n                        );\n                      } else {\n                        return null;\n                      }\n                    })\n                  ) : (\n                    <p></p>\n                  )}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          )}\n        </DataTable>\n        <PaginationNav {...paginationProps()} cssClass=\"pagination-right\" />\n      </div>\n    );\n  }\n}\n\nconst rowData = [\n  {\n    id: 'a',\n    projectName: 'Ticket1',\n    project: 'Leonardo',\n    entandoVersion: 6.2,\n    creationDate: 'October, 2019',\n    openTicket: <a href=\"\">Open Ticket</a>,\n  },\n  {\n    id: 'a',\n    projectName: 'Ticket1',\n    project: 'Leonardo',\n    entandoVersion: 6.2,\n    creationDate: 'October, 2019',\n    openTicket: <a href=\"\">Open Ticket</a>,\n  },\n  {\n    id: 'a',\n    projectName: 'Ticket1',\n    project: 'Leonardo',\n    entandoVersion: 6.2,\n    creationDate: 'October, 2019',\n    openTicket: <a href=\"\">Open Ticket</a>,\n  },\n];\n\nexport default withKeycloak(TicketList);\n","import { getDefaultOptions, request } from './helpers';\r\n\r\nconst resource = 'api/project-subscriptions';\r\n\r\nexport const apiSubscriptionGet = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiSubscriptionGetAll = async serviceUrl => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n// Project Subscription creation consists of an object containing a projectSubscription, an entandoVersionId, and a\r\n// project id, see SubscriptionCreationRequest.\r\n/**\r\n * Called to create a new project subscription\r\n *\r\n * @param {string} serviceUrl\r\n * @param {ProjectSubscriptionCreation} projectSubscriptionCreation\r\n * @returns\r\n */\r\nexport const apiProjectSubscriptionPost = async (serviceUrl, projectSubscriptionCreation) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: projectSubscriptionCreation ? JSON.stringify(projectSubscriptionCreation) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectSubscriptionPut = async (serviceUrl, projectSubscriptionCreation) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: projectSubscriptionCreation ? JSON.stringify(projectSubscriptionCreation) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nconst myResource = 'api/project-subscriptions/mysubscription';\r\nexport const apiGetMySubscription = async (serviceUrl, customerId) => {\r\n  const url = `${serviceUrl}/${myResource}/${customerId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\n// Same format as {projectSubscriptionCreation}\r\nexport const apiRenewSubscription = async (serviceUrl, projectSubscriptionRenew) => {\r\n  const url = `${serviceUrl}/${resource}/renew`;\r\n\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: projectSubscriptionRenew ? JSON.stringify(projectSubscriptionRenew) : null,\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, TextArea, Select, SelectItem, DatePicker, DatePickerInput } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiProjectSubscriptionPut, apiSubscriptionGet } from '../../api/subscriptions';\r\nimport moment from 'moment';\r\n\r\nclass EditSubscriptionModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      level: '',\r\n      status: '',\r\n      lengthInMonths: '',\r\n      startDate: '',\r\n      notes: '',\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    if (this.state.level === 'level') {\r\n      formIsValid = false;\r\n      invalid['level'] = true;\r\n    }\r\n\r\n    if (this.state.status === 'status') {\r\n      formIsValid = false;\r\n      invalid['status'] = true;\r\n    }\r\n\r\n    if (this.state.lengthInMonths === '' || !this.isNumeric(String(this.state.lengthInMonths))) {\r\n      formIsValid = false;\r\n      invalid['lengthInMonths'] = true;\r\n    }\r\n\r\n    if (typeof this.state.startDate !== 'undefined') {\r\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\r\n        formIsValid = false;\r\n        invalid['startDate'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  isNumeric(str) {\r\n    if (typeof str != 'string') return false;\r\n    return !isNaN(str) && !isNaN(parseFloat(str));\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleFormSubmit = e => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const subscriptionRequest = {\r\n        projectSubscription: {\r\n          id: this.props.subscription.id,\r\n          level: this.state.level,\r\n          status: this.state.status,\r\n          lengthInMonths: this.state.lengthInMonths,\r\n          startDate: moment(this.state.startDate).format(),\r\n          notes: this.state.notes,\r\n          project: this.props.project,\r\n          entandoVersion: this.props.subscription.entandoVersion,\r\n        },\r\n      };\r\n      this.subscriptionPut(subscriptionRequest)\r\n        .then(result => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.updated'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateSubscription();\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.getSubscriptionDetails();\r\n    }\r\n  }\r\n\r\n  handleStartDateChange = date => {\r\n    this.setState({\r\n      startDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\r\n    });\r\n  };\r\n\r\n  async getSubscriptionDetails() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const subscription = await apiSubscriptionGet(this.props.serviceUrl, this.props.subscription.id);\r\n      this.setState({\r\n        level: subscription.data.level,\r\n        status: subscription.data.status,\r\n        lengthInMonths: subscription.data.lengthInMonths,\r\n        startDate: moment(subscription.data.startDate).format('MM/DD/YYYY'),\r\n        notes: subscription.data.notes,\r\n        submitMsg: '',\r\n      });\r\n    }\r\n  }\r\n\r\n  async subscriptionPut(subscription) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      return await apiProjectSubscriptionPut(this.props.serviceUrl, subscription);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const levelList = ['GOLD', 'PLATINUM'];\r\n    const statusList = ['REQUESTED', 'PENDING', 'ACTIVE', 'EXPIRED'];\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.edit')}\r\n        modalHeading={i18n.t('editSubscription.title')}\r\n        buttonTriggerClassName=\"add-project bx--btn bx--btn--tertiary edit-sub-button\"\r\n        className=\"modal-form\"\r\n        id=\"modal-form-sub-edit\"\r\n        handleSubmit={this.handleFormSubmit}\r\n        primaryButtonText={i18n.t('modalText.save')}\r\n        secondaryButtonText={i18n.t('modalText.cancel')}\r\n        modalLabel={<p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>}\r\n      >\r\n        {/*<p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis. </p>*/}\r\n        <div className=\"form-container\">\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <Select\r\n              name=\"level\"\r\n              labelText={i18n.t('subscriptionDetails.level') + ' *'}\r\n              value={this.state.level}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['level']}\r\n            >\r\n              <SelectItem disabled text=\"Select Level\" value=\"level\" />\r\n              {levelList.map((level, i) => (\r\n                <SelectItem key={i} text={level} value={level}>\r\n                  {level}\r\n                </SelectItem>\r\n              ))}\r\n            </Select>\r\n            <Select\r\n              name=\"status\"\r\n              labelText={i18n.t('subscriptionDetails.status') + ' *'}\r\n              value={this.state.status}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['status']}\r\n            >\r\n              <SelectItem disabled text=\"Select Status\" value=\"status\" />\r\n              {statusList.map((status, i) => (\r\n                <SelectItem key={i} text={status} value={status}>\r\n                  {status}\r\n                </SelectItem>\r\n              ))}\r\n            </Select>\r\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange} value={this.state.startDate}>\r\n              <DatePickerInput\r\n                name=\"startDate\"\r\n                placeholder=\"mm/dd/yyyy\"\r\n                labelText={i18n.t('subscriptionDetails.startDate') + ' *'}\r\n                //onChange={this.handleChanges}\r\n                type=\"text\"\r\n                invalidText={i18n.t('validation.invalid.date')}\r\n                invalid={this.state.invalid['startDate']}\r\n              />\r\n            </DatePicker>\r\n            <TextInput\r\n              name=\"lengthInMonths\"\r\n              labelText={i18n.t('subscriptionDetails.lengthInMonths') + ' *'}\r\n              value={this.state.lengthInMonths}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.number')}\r\n              invalid={this.state.invalid['lengthInMonths']}\r\n            />\r\n            <TextArea\r\n              name=\"notes\"\r\n              labelText={i18n.t('adminDashboard.addProject.notes')}\r\n              value={this.state.notes}\r\n              onChange={this.handleChanges}\r\n            />\r\n          </Form>\r\n        </div>\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(EditSubscriptionModal);\r\n","import React from 'react';\r\nimport TicketList from './TicketList';\r\nimport { Tile } from 'carbon-components-react';\r\nimport { apiSubscriptionGet, apiGetMySubscription } from '../../api/subscriptions';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiGetProjectsUsers, apiProjectGet } from '../../api/projects';\r\nimport { isPortalAdminOrSupport, isPortalCustomerOrPartner, isPortalUser, isPortalAdmin } from '../../api/helpers';\r\nimport EditSubscriptionModal from '../Admin/EditSubscriptionModal';\r\nimport i18n from '../../i18n';\r\n\r\nconst subscriptionData = {\r\n  description: 'Entando Product Support Subscription Suplier Portal',\r\n  commitment: 'Leonardo',\r\n  type: 'Product Support Subscription Entando Platform',\r\n  quantityRequest: '1(8 Core)',\r\n  components: '',\r\n  level: 'Gold',\r\n  startDate: 'May 2019',\r\n  endDate: 'May 2020',\r\n  license: 'Free Commercial Open Source',\r\n};\r\n\r\nclass Subscription extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      subscription: {},\r\n      users: {},\r\n      project: {},\r\n      customer: {},\r\n    };\r\n  }\r\n\r\n  async getSubscription() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      try {\r\n        var subscription;\r\n        var users = '';\r\n        if (isPortalAdminOrSupport()) {\r\n          subscription = await apiSubscriptionGet(this.props.serviceUrl, this.props.match.params.id);\r\n          var project = '';\r\n          if (subscription.data.project) {\r\n            project = await apiProjectGet(this.props.serviceUrl, subscription.data.project.id);\r\n            users = await apiGetProjectsUsers(this.props.serviceUrl, project.data.id);\r\n          }\r\n        } else if (isPortalCustomerOrPartner()) {\r\n          subscription = await apiGetMySubscription(this.props.serviceUrl, this.props.match.params.id);\r\n          var project = '';\r\n          if (subscription.data.project) {\r\n            project = await apiProjectGet(this.props.serviceUrl, subscription.data.project.id);\r\n          }\r\n        }\r\n        this.setState({\r\n          subscription: subscription,\r\n          project: project,\r\n          customer: project.customer,\r\n          users: users,\r\n          loading: false,\r\n        });\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  }\r\n\r\n  updateSubscription = () => {\r\n    this.getSubscription();\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (isPortalUser()) {\r\n      this.getSubscription();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth && isPortalUser()) {\r\n      this.getSubscription();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { description, commitment, type, quantityRequest, components, level, startDate, endDate, license } = subscriptionData;\r\n\r\n    if (!this.state.loading) {\r\n      if (isPortalUser()) {\r\n        if (Object.keys(this.state.subscription).length !== 0 && Object.keys(this.state.project).length !== 0) {\r\n          return (\r\n            <div className=\"subscription-details\">\r\n              <div>\r\n                <Tile>\r\n                  <div className=\"bx--grid\">\r\n                    <div className=\"bx--row\">\r\n                      <div className=\"bx--col\">\r\n                        <p>\r\n                          <strong>{i18n.t('customerDashboard.customerName')}:</strong> {this.state.project.data.customer.name}\r\n                        </p>\r\n                        <p>\r\n                          <strong>{i18n.t('customerDashboard.projectName')}:</strong> {this.state.project.data.name}\r\n                        </p>\r\n                        <p>\r\n                          <strong>{i18n.t('subscriptionDetails.description')}:</strong> {this.state.subscription.data.project.description}\r\n                        </p>\r\n                        <p>\r\n                          <strong>{i18n.t('subscriptionDetails.partners')}:</strong>\r\n                          {this.state.project.data !== '' && Object.keys(this.state.project.data.partners).length !== 0 ? (\r\n                            <>\r\n                              {this.state.project.data.partners.map((partner, index) => (\r\n                                <> {index === this.state.project.data.partners.length - 1 ? partner.name : partner.name + ', '} </>\r\n                              ))}\r\n                            </>\r\n                          ) : (\r\n                            <> None </>\r\n                          )}\r\n                        </p>\r\n                        <p>\r\n                          <strong>{i18n.t('subscriptionDetails.type')}:</strong> {type}\r\n                        </p>\r\n                        {isPortalAdminOrSupport() ? (\r\n                          <p>\r\n                            <strong>{i18n.t('subscriptionDetails.notes')}:</strong> {this.state.subscription.data.notes}\r\n                          </p>\r\n                        ) : null}\r\n                      </div>\r\n                      <div className=\"bx--col\">\r\n                        <p>\r\n                          <strong>{i18n.t('subscriptionDetails.status')}:</strong> {this.state.subscription.data.status}\r\n                        </p>\r\n                        <p>\r\n                          <strong>{i18n.t('subscriptionDetails.level')}:</strong> {this.state.subscription.data.level}\r\n                        </p>\r\n                        <p>\r\n                          <strong>{i18n.t('subscriptionDetails.startDate')}:</strong>{' '}\r\n                          {String(new Date(this.state.subscription.data.startDate).toDateString())}\r\n                        </p>\r\n                        <p>\r\n                          <strong>{i18n.t('subscriptionDetails.endDate')}:</strong>{' '}\r\n                          {String(\r\n                            new Date(\r\n                              new Date(this.state.subscription.data.startDate).setMonth(\r\n                                new Date(this.state.subscription.data.startDate).getMonth() + this.state.subscription.data.lengthInMonths\r\n                              )\r\n                            ).toDateString()\r\n                          )}\r\n                        </p>\r\n                        <p>\r\n                          <strong>{i18n.t('subscriptionDetails.license')}:</strong> {license}\r\n                        </p>\r\n                        {isPortalAdminOrSupport() ? (\r\n                          <>\r\n                            <p>\r\n                              <strong>{i18n.t('subscriptionDetails.assignedUsers')}:</strong>\r\n                              {this.state.project.data !== '' && Object.keys(this.state.users.data).length !== 0 ? (\r\n                                <>\r\n                                  {this.state.users.data.map((user, index) => (\r\n                                    <> {index === this.state.users.data.length - 1 ? user.username : user.username + ', '} </>\r\n                                  ))}\r\n                                </>\r\n                              ) : (\r\n                                <> None </>\r\n                              )}\r\n                            </p>\r\n                          </>\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  {isPortalAdmin() ? (\r\n                    <EditSubscriptionModal\r\n                      project={this.state.project.data}\r\n                      subscription={this.state.subscription.data}\r\n                      serviceUrl={this.props.serviceUrl}\r\n                      updateSubscription={this.updateSubscription}\r\n                    />\r\n                  ) : null}\r\n                </Tile>\r\n                <br />\r\n                <TicketList projectId={this.state.project.data.id} serviceUrl={this.props.serviceUrl} />\r\n              </div>\r\n            </div>\r\n          );\r\n        } else {\r\n          return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n        }\r\n      } else {\r\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withKeycloak(Subscription);\r\n","import React from 'react';\r\nimport { Tile } from 'carbon-components-react';\r\nimport CustomTable from './customDataTable';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiAdminCustomerGet, apiGetCustomersProjects } from '../../api/customers';\r\nimport { isPortalAdminOrSupport } from '../../api/helpers';\r\nimport i18n from '../../i18n';\r\n\r\nclass CustomerProjectList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      projects: {},\r\n      customer: {},\r\n    };\r\n  }\r\n\r\n  async getCustomer() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      try {\r\n        const customer = await apiAdminCustomerGet(this.props.serviceUrl, this.props.match.params.id);\r\n        const projects = await apiGetCustomersProjects(this.props.serviceUrl, customer.data.id);\r\n        this.setState({\r\n          customer: customer.data,\r\n          projects: projects.data,\r\n          loading: false,\r\n        });\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n  }\r\n\r\n  updateCustomer = () => {\r\n    this.getCustomer();\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (isPortalAdminOrSupport()) {\r\n      this.getCustomer();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      if (isPortalAdminOrSupport()) {\r\n        this.getCustomer();\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.loading) {\r\n      if (isPortalAdminOrSupport()) {\r\n        if (Object.keys(this.state.customer).length !== 0) {\r\n          return (\r\n            <div>\r\n              <Tile>\r\n                <div className=\"bx--grid\">\r\n                  <div className=\"bx--row\">\r\n                    <div className=\"bx--col\">\r\n                      <p>\r\n                        <strong>{i18n.t('customerDetails.id')}: </strong> {this.state.customer.id}\r\n                      </p>\r\n                      <p>\r\n                        <strong>{i18n.t('customerDetails.name')}: </strong> {this.state.customer.name}\r\n                      </p>\r\n                      <p>\r\n                        <strong>{i18n.t('customerDetails.notes')}: </strong> {this.state.customer.notes}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"bx--col\">\r\n                      <p>\r\n                        <strong>{i18n.t('customerDetails.contactName')}: </strong> {this.state.customer.contactName}\r\n                      </p>\r\n                      <p>\r\n                        <strong>{i18n.t('customerDetails.contactPhone')}: </strong> {this.state.customer.contactPhone}\r\n                      </p>\r\n                      <p>\r\n                        <strong>{i18n.t('customerDetails.contactEmail')}: </strong> {this.state.customer.contactEmail}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Tile>\r\n              <CustomTable serviceUrl={this.props.serviceUrl} customerNumber={this.state.customer.id} locale={this.props.locale} />\r\n            </div>\r\n          );\r\n        } else {\r\n          return <p>{i18n.t('userMessages.loading')}...</p>;\r\n        }\r\n      } else {\r\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withKeycloak(CustomerProjectList);\r\n","import React, { Component } from 'react';\r\nimport { HashRouter, Route, Switch } from 'react-router-dom';\r\nimport AdminDashboard from './Admin/AdminDashboard';\r\nimport Subscription from './SubscriptionDetails/subscription';\r\nimport withKeycloak from '../auth/withKeycloak';\r\nimport { AuthenticatedView, UnauthenticatedView } from '../auth/KeycloakViews';\r\nimport { isPortalUser } from '../api/helpers';\r\nimport CustomerProjectList from './Customer/CustomerProjectList';\r\nimport i18n from '../i18n';\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var { keycloak } = this.props;\r\n\r\n    if (!this.state.loading) {\r\n      if (isPortalUser()) {\r\n        return (\r\n          <div id=\"entando-customer-portal\">\r\n            <AuthenticatedView keycloak={keycloak}>\r\n              <HashRouter>\r\n                <Switch>\r\n                  <Route\r\n                    path={'**/customer-details/:id'}\r\n                    render={props => <CustomerProjectList {...props} serviceUrl={this.props.serviceUrl} locale={this.props.locale} />}\r\n                  />\r\n                  <Route\r\n                    path={'**/subscription-details/:id'}\r\n                    render={props => <Subscription {...props} serviceUrl={this.props.serviceUrl} locale={this.props.locale} />}\r\n                  />\r\n                  <Route\r\n                    path=\"**/\"\r\n                    render={props => <AdminDashboard {...props} serviceUrl={this.props.serviceUrl} locale={this.props.locale} />}\r\n                  />\r\n                </Switch>\r\n              </HashRouter>\r\n            </AuthenticatedView>\r\n            <UnauthenticatedView keycloak={keycloak}>\r\n              <p>{i18n.t('userMessages.unauthorized')}</p>\r\n            </UnauthenticatedView>\r\n          </div>\r\n        );\r\n      } else {\r\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withKeycloak(App);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AddCustomerModal from '../components/Admin/AddCustomerModal';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport App from '../components/App';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AdminAddCustomerElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AddCustomerModal serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-add-customer-widget', AdminAddCustomerElement);\r\n","import React, { Component } from 'react';\r\nimport { Select, SelectItem } from 'carbon-components-react';\r\nimport CustomerDetails from '../Customer/customerDetails';\r\nimport CustomTable from '../Customer/customDataTable';\r\nimport AdminDashboard from './AdminDashboard';\r\nimport '../../index.scss';\r\n\r\nexport default class RoleCheck extends Component {\r\n  state = {\r\n    roleType: 'customer',\r\n  };\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  render() {\r\n    const roleType = ['Admin', 'Customer'];\r\n    return (\r\n      <div className=\"role-check\">\r\n        <Select\r\n          defaultValue=\"role-type\"\r\n          name=\"roleType\"\r\n          labelText=\"Select Role(Testing)\"\r\n          value={this.state.roleType}\r\n          onChange={this.handleChanges}\r\n        >\r\n          <SelectItem text=\"Select Role\" value=\"role-type\" />\r\n          {roleType.map((roleType, i) => (\r\n            <SelectItem key={i} text={roleType} value={roleType.toLowerCase()}>\r\n              {roleType}\r\n            </SelectItem>\r\n          ))}\r\n        </Select>\r\n        {this.renderForm()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Render Dashboard based on role\r\n  renderForm() {\r\n    if (this.state.roleType === 'customer')\r\n      return (\r\n        <div>\r\n          <h3 className=\"pageTitle\">Welcome to Entando Customer Portal</h3>\r\n          <CustomerDetails />\r\n          <CustomTable />\r\n        </div>\r\n      );\r\n    if (this.state.roleType === 'admin')\r\n      return (\r\n        <div>\r\n          <h3 className=\"pageTitle\">Welcome to Entando Admin View</h3>\r\n          <AdminDashboard />\r\n        </div>\r\n      );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport RoleCheck from '../components/Admin/RoleCheck';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AdminRoleCheckElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <RoleCheck serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-rolecheck-widget', AdminRoleCheckElement);\r\n\r\n//export default AdminRoleCheckElement;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport CustomDataTable from '../components/Customer/customDataTable';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass CustomDataTableElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <CustomDataTable serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('custom-datatable-widget', CustomDataTableElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport CustomerDetails from '../components/Customer/customerDetails';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass CustomerDetailsElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <CustomerDetails serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\ncustomElements.define('customer-details-widget', CustomerDetailsElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Subscription from '../components/SubscriptionDetails/subscription';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass SubscriptionElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <Subscription serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('subscription-widget', SubscriptionElement);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Form, Select, SelectItem, Button, TextArea, TextInput } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiAdminProjectsGet, apiMyProjectsGet, apiGetProjectSubscriptions } from '../../api/projects';\r\nimport { apiJiraTicketPost } from '../../api/tickets';\r\nimport { apiTicketingSystemsGet } from '../../api/ticketingsystem';\r\nimport {\r\n  isPortalAdmin,\r\n  isPortalAdminOrSupport,\r\n  isPortalCustomer,\r\n  isPortalCustomerOrPartner,\r\n  isPortalPartner,\r\n  isPortalSupport,\r\n  isPortalUser,\r\n} from '../../api/helpers';\r\n\r\nclass OpenTicket extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      loading: true,\r\n      project: {},\r\n      projects: [],\r\n      systemId: '',\r\n      type: 'Support',\r\n      description: '',\r\n      priority: 'Medium',\r\n      status: 'To Do',\r\n      createDate: '',\r\n      updateDate: '',\r\n      role: '',\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n    this.types = ['Support', 'Feature Request'];\r\n    this.priorities = ['Critical', 'High', 'Medium', 'Low'];\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    if (this.state.project.systemId === undefined || this.state.project.systemId === 'project-list') {\r\n      formIsValid = false;\r\n      invalid['project'] = true;\r\n    }\r\n\r\n    if (this.state.type === '' || this.state.type === 'Select') {\r\n      formIsValid = false;\r\n      invalid['type'] = true;\r\n    }\r\n\r\n    if (this.state.description === '' || this.state.description === 'Select') {\r\n      formIsValid = false;\r\n      invalid['description'] = true;\r\n    }\r\n\r\n    if (this.state.priority === '' || this.state.priority === 'Select') {\r\n      formIsValid = false;\r\n      invalid['priority'] = true;\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n\r\n    if (name === 'project' && value != '' && value != 'project-list') {\r\n      this.setState({\r\n        project: JSON.parse(value),\r\n      });\r\n    } else {\r\n      this.setState({ [name]: value });\r\n    }\r\n  };\r\n\r\n  handleFormSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      // check if project has subscription\r\n      this.fetchProjectSubscription(this.state.project.id)\r\n        .then(result => {\r\n          // if project has subscription, create ticket\r\n          if (result.data.length > 0) {\r\n            this.createTicket()\r\n              .then(res => {\r\n                this.setState({\r\n                  submitMsg: i18n.t('submitMessages.created'),\r\n                  submitColour: '#24a148',\r\n                });\r\n              })\r\n              .catch(err => {\r\n                this.setState({\r\n                  submitMsg: i18n.t('submitMessages.ticketError'),\r\n                  submitColour: '#da1e28',\r\n                });\r\n              });\r\n          }\r\n          // if no subscriptions, don't create ticket\r\n          else {\r\n            this.setState({\r\n              submitMsg: i18n.t('submitMessages.subscriptionRequired'),\r\n              submitColour: '#da1e28',\r\n            });\r\n          }\r\n        })\r\n        .catch(error => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  async fetchProjectSubscription(projectId) {\r\n    return await apiGetProjectSubscriptions(this.props.serviceUrl, projectId);\r\n  }\r\n\r\n  async fetchProjects() {\r\n    const { t, keycloak } = this.props;\r\n    var authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      if (isPortalAdminOrSupport()) {\r\n        var projects = await apiAdminProjectsGet(this.props.serviceUrl);\r\n        let search = window.location.search;\r\n        let params = new URLSearchParams(search);\r\n        let projectParam = params.get('project');\r\n        if (projectParam) {\r\n          projects.data.forEach(project => {\r\n            if (String(project.id) === projectParam) {\r\n              projects = project;\r\n              this.setState({\r\n                projects: [projects],\r\n                project: projects,\r\n              });\r\n            }\r\n          });\r\n        } else {\r\n          this.setState({\r\n            projects: projects.data,\r\n          });\r\n        }\r\n      } else if (isPortalCustomerOrPartner()) {\r\n        var projects = await apiMyProjectsGet(this.props.serviceUrl);\r\n        let search = window.location.search;\r\n        let params = new URLSearchParams(search);\r\n        let projectParam = params.get('project');\r\n        if (projectParam) {\r\n          projects.data.forEach(project => {\r\n            if (String(project.id) === projectParam) {\r\n              var foundProject = project;\r\n              this.setState({\r\n                projects: [foundProject],\r\n                project: foundProject,\r\n              });\r\n            }\r\n          });\r\n        } else {\r\n          this.setState({\r\n            projects: projects.data,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    this.render();\r\n  }\r\n\r\n  async createTicket() {\r\n    const { t, keycloak } = this.props;\r\n    var authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      const ticket = {\r\n        systemId: this.state.project.systemId,\r\n        type: this.state.type,\r\n        summary: this.state.summary,\r\n        description: this.state.description,\r\n        priority: this.state.priority,\r\n        status: 'To Do',\r\n        // these dates are just placeholder to validate the POST request (date will be updated in the backend)\r\n        createDate: '2021-02-22T14:14:09-05:00',\r\n        updateDate: '2021-02-22T14:14:09-05:00',\r\n      };\r\n      return await apiJiraTicketPost(this.props.serviceUrl, this.state.ticketingSystem.systemId, this.state.project.systemId, ticket);\r\n      //const addedTicket = await apiAddTicketToProject(this.props.serviceUrl, this.state.project.id, result.data.id);\r\n    }\r\n  }\r\n\r\n  async getTicketingSystem() {\r\n    if (isPortalUser()) {\r\n      const ticketingSystems = await apiTicketingSystemsGet(this.props.serviceUrl);\r\n      const currentTicketingSystem = ticketingSystems.data[ticketingSystems.data.length - 1];\r\n      this.setState({\r\n        ticketingSystem: currentTicketingSystem,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.fetchProjects();\r\n      this.getTicketingSystem();\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.fetchProjects();\r\n      this.getTicketingSystem();\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.loading && this.state.projects.length !== 0) {\r\n      if (isPortalUser()) {\r\n        return (\r\n          <div>\r\n            {isPortalAdmin() ? (\r\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\r\n            ) : isPortalSupport() ? (\r\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.supportTitle')}</h3>\r\n            ) : isPortalCustomer() ? (\r\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.customerTitle')}</h3>\r\n            ) : isPortalPartner() ? (\r\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.partnerTitle')}</h3>\r\n            ) : null}\r\n            <div className=\"form-container\">\r\n              <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\r\n              <Form onSubmit={this.handleFormSubmit}>\r\n                <div className=\"form-desc\">\r\n                  <h4>{i18n.t('supportTicketForm.formTitle')}</h4>\r\n                  <p>{i18n.t('supportTicketForm.desc')}</p>\r\n                </div>\r\n                <div className=\"bx--grid\">\r\n                  <div className=\"bx--row\">\r\n                    <div className=\"bx--col\">\r\n                      <Select\r\n                        name=\"project\"\r\n                        labelText={i18n.t('supportTicketForm.selectProject') + ' *'}\r\n                        value={JSON.stringify(this.state.project)}\r\n                        onChange={this.handleChanges}\r\n                        invalidText={i18n.t('validation.invalid.required')}\r\n                        invalid={this.state.invalid['project']}\r\n                      >\r\n                        {this.state.projects.length > 1 ? (\r\n                          <SelectItem text={i18n.t('adminDashboard.addPartner.selectProject')} value=\"project-list\" />\r\n                        ) : null}\r\n                        {Object.keys(this.state.projects).length !== 0\r\n                          ? this.state.projects.map((project, i) => {\r\n                              return (\r\n                                <SelectItem key={i} text={project.name} value={JSON.stringify(project)}>\r\n                                  {project.name}\r\n                                </SelectItem>\r\n                              );\r\n                            })\r\n                          : null}\r\n                      </Select>\r\n                      <Select\r\n                        name=\"type\"\r\n                        labelText={i18n.t('supportTicketForm.type') + ' *'}\r\n                        value={this.state.type}\r\n                        onChange={this.handleChanges}\r\n                        invalidText={i18n.t('validation.invalid.required')}\r\n                        invalid={this.state.invalid['type']}\r\n                      >\r\n                        {this.types.map((type, i) => (\r\n                          <SelectItem key={i} text={type} value={type}>\r\n                            {type}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </Select>\r\n                      <Select\r\n                        name=\"priority\"\r\n                        labelText={i18n.t('supportTicketForm.priority') + ' *'}\r\n                        value={this.state.priority}\r\n                        onChange={this.handleChanges}\r\n                        invalidText={i18n.t('validation.invalid.required')}\r\n                        invalid={this.state.invalid['priority']}\r\n                      >\r\n                        {this.priorities.map((priority, i) => (\r\n                          <SelectItem key={i} text={priority} value={priority}>\r\n                            {priority}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </Select>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"bx--row\">\r\n                    <div className=\"bx--col\">\r\n                      <TextInput\r\n                        labelText={i18n.t('supportTicketForm.ticketSummary') + ' *'}\r\n                        placeholder={i18n.t('supportTicketForm.addticketSummary')}\r\n                        name=\"summary\"\r\n                        value={this.state.summary}\r\n                        onChange={this.handleChanges}\r\n                        invalidText={i18n.t('validation.invalid.required')}\r\n                        invalid={this.state.invalid['summary']}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"bx--row\">\r\n                    <div className=\"bx--col\">\r\n                      <TextArea\r\n                        labelText={i18n.t('supportTicketForm.ticketDescription') + ' *'}\r\n                        placeholder={i18n.t('supportTicketForm.addticketDescription')}\r\n                        name=\"description\"\r\n                        value={this.state.description}\r\n                        onChange={this.handleChanges}\r\n                        invalidText={i18n.t('validation.invalid.required')}\r\n                        invalid={this.state.invalid['description']}\r\n                      />\r\n                      <Button kind=\"primary\" tabIndex={0} type=\"submit\">\r\n                        {' '}\r\n                        {i18n.t('buttons.submit')}{' '}\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Form>\r\n            </div>\r\n          </div>\r\n        );\r\n      } else {\r\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withKeycloak(OpenTicket);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport OpenTicket from '../components/Forms/openTicket';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass FormsOpenTicketElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <OpenTicket serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('forms-openticket-widget', FormsOpenTicketElement);\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst Navigation = () => {\r\n  return (\r\n    <ul id=\"navigation\">\r\n      <li>\r\n        <NavLink to=\"/\">Home</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/subscription-details\">Subscription Details</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/subscription\">New or Renew Subscription</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/service-ticket\">Open Service Ticket</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/enhancement\">Request for Enhancement Process</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/manage-users\">Manage Users</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/configuration-settings\">Configuration Settings</NavLink>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Navigation from '../components/Navigation/Navigation';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass NavigationElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <Navigation serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('navigation-widget', NavigationElement);\r\n","import React, { Component } from 'react';\r\nimport { Form, TextInput, TextArea, Button } from 'carbon-components-react';\r\nimport i18n from '../../i18n';\r\n\r\nexport default class EnhancementRequest extends Component {\r\n  state = {\r\n    ticketNo: '',\r\n    customerName: '',\r\n    projectName: '',\r\n    openedBy: '',\r\n    priority: '',\r\n    partnerName: '',\r\n    enhancementDescription: '',\r\n    invalid: {},\r\n  };\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    if (this.state.ticketNo === '') {\r\n      formIsValid = false;\r\n      invalid['ticketNo'] = true;\r\n    }\r\n\r\n    if (this.state.customerName === '') {\r\n      formIsValid = false;\r\n      invalid['customerName'] = true;\r\n    }\r\n\r\n    if (this.state.projectName === '') {\r\n      formIsValid = false;\r\n      invalid['projectName'] = true;\r\n    }\r\n\r\n    if (this.state.openedBy === '') {\r\n      formIsValid = false;\r\n      invalid['openedBy'] = true;\r\n    }\r\n\r\n    if (this.state.partnerName === '') {\r\n      formIsValid = false;\r\n      invalid['partnerName'] = true;\r\n    }\r\n\r\n    if (this.state.enhancementDescription === '') {\r\n      formIsValid = false;\r\n      invalid['enhancementDescription'] = true;\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleFormSubmit = event => {\r\n    console.log(this.state.ticketNo);\r\n    event.preventDefault();\r\n\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      // placeholder\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h3 className=\"pageTitle\">{i18n.t('enhancementForm.title')}</h3>\r\n        <div className=\"form-container\">\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <div className=\"form-desc\">\r\n              <h4>{i18n.t('enhancementForm.formTitle')}</h4>\r\n              <p>{i18n.t('enhancementForm.desc')}</p>\r\n            </div>\r\n            <div className=\"bx--grid\">\r\n              <div className=\"bx--row\">\r\n                <div className=\"bx--col\">\r\n                  <TextInput\r\n                    name=\"ticketNo\"\r\n                    labelText={i18n.t('enhancementForm.ticketNumber')}\r\n                    value={this.state.ticketNo}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['ticketNo']}\r\n                  />\r\n                  <TextInput\r\n                    name=\"projectName\"\r\n                    labelText={i18n.t('enhancementForm.projectName')}\r\n                    value={this.state.projectName}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['projectName']}\r\n                  />\r\n                  <TextInput\r\n                    name=\"priority\"\r\n                    labelText={i18n.t('enhancementForm.priority')}\r\n                    value={this.state.priority}\r\n                    onChange={this.handleChanges}\r\n                  />\r\n                </div>\r\n                <div className=\"bx--col\">\r\n                  <TextInput\r\n                    name=\"customerName\"\r\n                    labelText={i18n.t('enhancementForm.customerName')}\r\n                    value={this.state.customerName}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['customerName']}\r\n                  />\r\n                  <TextInput\r\n                    name=\"openedBy\"\r\n                    labelText={i18n.t('enhancementForm.ticketOpenedBy')}\r\n                    value={this.state.openedBy}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['openedBy']}\r\n                  />\r\n                  <TextInput\r\n                    name=\"partnerName\"\r\n                    labelText={i18n.t('enhancementForm.partnerName')}\r\n                    value={this.state.partnerName}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['partnerName']}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"bx--row\">\r\n                <div className=\"bx--col\">\r\n                  <TextArea\r\n                    labelText={i18n.t('enhancementForm.enhancementDescription')}\r\n                    placeholder={i18n.t('enhancementForm.addenhancementDescription')}\r\n                    name=\"enhancementDescription\"\r\n                    value={this.state.enhancementDescription}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['enhancementDescription']}\r\n                  />\r\n                  <Button kind=\"primary\" tabIndex={0} type=\"submit\">\r\n                    {' '}\r\n                    {i18n.t('buttons.submit')}{' '}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport EnhancementRequest from '../components/Forms/enhancementRequest';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass FormsEnhancementRequestElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <EnhancementRequest serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('forms-enhancement-request-widget', FormsEnhancementRequestElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport retargetEvents from 'react-shadow-dom-retarget-events';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport App from '../components/App';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AppElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <App serviceUrl={serviceUrl} locale={locale} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('app-element', AppElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport TicketList from '../components/SubscriptionDetails/TicketList';\r\nimport '../index.scss';\r\n//import './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass TicketListCustomerElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <TicketList serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('ticket-list-widget', TicketListCustomerElement);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../../i18n';\r\nimport { Form, TextInput, Select, SelectItem, Button } from 'carbon-components-react';\r\nimport {\r\n  apiTicketingSystemPost,\r\n  apiTicketingSystemsGet,\r\n  apiTicketingSystemPut,\r\n  apiTicketingSystemDelete,\r\n} from '../../../api/ticketingsystem';\r\nimport { isPortalAdmin } from '../../../api/helpers';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\n\r\nclass TicketingSystem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      ticketingSystem: '',\r\n      ticketingSystemType: '',\r\n      url: '',\r\n      serviceAccount: '',\r\n      systemId: '',\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async createTicketingSystem() {\r\n    const ticketingSystem = {\r\n      url: this.state.url,\r\n      serviceAccount: this.state.serviceAccount,\r\n      serviceAccountSecret: this.state.serviceAccountSecret,\r\n      systemId: this.state.systemId,\r\n    };\r\n    return await apiTicketingSystemPost(this.props.serviceUrl, ticketingSystem);\r\n  }\r\n\r\n  async updateTicketingSystem() {\r\n    const ticketingSystem = {\r\n      id: this.state.ticketingSystem.id,\r\n      url: this.state.url,\r\n      serviceAccount: this.state.serviceAccount,\r\n      serviceAccountSecret: this.state.serviceAccountSecret,\r\n      systemId: this.state.systemId,\r\n    };\r\n    return await apiTicketingSystemPut(this.props.serviceUrl, ticketingSystem);\r\n  }\r\n\r\n  async getTicketingSystems() {\r\n    const ticketingSystems = await apiTicketingSystemsGet(this.props.serviceUrl);\r\n    if (ticketingSystems.data.length > 0) {\r\n      const currentTicketingSystem = ticketingSystems.data[ticketingSystems.data.length - 1];\r\n\r\n      this.setState({\r\n        ticketingSystem: currentTicketingSystem,\r\n        url: currentTicketingSystem.url,\r\n        serviceAccount: currentTicketingSystem.serviceAccount,\r\n        serviceAccountSecret: currentTicketingSystem.serviceAccountSecret,\r\n        systemId: currentTicketingSystem.systemId,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.getTicketingSystems();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getTicketingSystems();\r\n    }\r\n  }\r\n\r\n  async deleteTicketingSystem() {\r\n    return await apiTicketingSystemDelete(this.props.serviceUrl, this.state.ticketingSystem.id);\r\n  }\r\n\r\n  handleDelete(e) {\r\n    if (window.confirm('Are you sure you want to delete this ticketing system?')) {\r\n      this.deleteTicketingSystem()\r\n        .then(result => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.deleted'),\r\n            submitColour: '#24a148',\r\n          });\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = event => {\r\n    event.preventDefault();\r\n    if (this.state.ticketingSystem === '') {\r\n      this.createTicketingSystem()\r\n        .then(result => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.created'),\r\n            submitColour: '#24a148',\r\n          });\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    } else {\r\n      this.updateTicketingSystem()\r\n        .then(result => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.updated'),\r\n            submitColour: '#24a148',\r\n          });\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const ticketingSystem = ['Jira', 'Other'];\r\n    if (isPortalAdmin()) {\r\n      return (\r\n        <div className=\"cp-form\">\r\n          <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <div className=\"bx--grid\">\r\n              <div className=\"bx--row\">\r\n                <div className=\"bx--col\">\r\n                  <Select\r\n                    defaultValue=\"ticketing-system\"\r\n                    name=\"ticketingSystemType\"\r\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.selectBackendTicketingSystem')}\r\n                    value={this.state.ticketingSystemType}\r\n                    onChange={this.handleChanges}\r\n                  >\r\n                    <SelectItem text={i18n.t('adminConfig.integrationTicketingSystem.select')} value=\"ticketing-system\" />\r\n                    {ticketingSystem.map((ticketingSystem, i) => (\r\n                      <SelectItem key={i} text={ticketingSystem} value={ticketingSystem.toLowerCase()}>\r\n                        {ticketingSystem}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </Select>\r\n                  <TextInput\r\n                    name=\"serviceAccount\"\r\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.userName')}\r\n                    value={this.state.serviceAccount}\r\n                    onChange={this.handleChanges}\r\n                  />\r\n                  <TextInput\r\n                    name=\"systemId\"\r\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.projectName')}\r\n                    value={this.state.systemId}\r\n                    onChange={this.handleChanges}\r\n                  />\r\n                </div>\r\n                <div className=\"bx--col\">\r\n                  <TextInput\r\n                    name=\"url\"\r\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.url')}\r\n                    value={this.state.url}\r\n                    onChange={this.handleChanges}\r\n                  />\r\n                  <TextInput\r\n                    name=\"serviceAccountSecret\"\r\n                    type=\"password\"\r\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.password')}\r\n                    value={this.state.serviceAccountSecret}\r\n                    onChange={this.handleChanges}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <Button kind=\"primary\" tabIndex={0} type=\"submit\">\r\n                {' '}\r\n                {i18n.t('buttons.submit')}{' '}\r\n              </Button>\r\n              {this.state.ticketingSystem ? (\r\n                <Button kind=\"danger\" onClick={() => this.handleDelete()}>\r\n                  {' '}\r\n                  Delete{' '}\r\n                </Button>\r\n              ) : null}\r\n            </div>\r\n          </Form>\r\n        </div>\r\n      );\r\n    }\r\n    // Unauthorized\r\n    else {\r\n      return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withKeycloak(TicketingSystem);\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/entando-versions';\r\n\r\nexport const apiProductVersionsGet = async serviceUrl => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionGet = async (serviceUrl, versionId) => {\r\n  const url = `${serviceUrl}/${resource}/${versionId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiUpdateProductVersionsStatus = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionPost = async (serviceUrl, productVersion) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: productVersion ? JSON.stringify(productVersion) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionPut = async (serviceUrl, productVersion) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: productVersion ? JSON.stringify(productVersion) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, DatePicker, DatePickerInput } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiProductVersionPost } from '../../api/productVersion';\r\nimport moment from 'moment';\r\n\r\nclass AddProductVersionModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      name: '',\r\n      startDate: '',\r\n      endDate: '',\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n\r\n    this.baseState = this.state;\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //name\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    if (typeof this.state.startDate !== 'undefined') {\r\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\r\n        formIsValid = false;\r\n        invalid['startDate'] = true;\r\n      }\r\n    }\r\n\r\n    if (typeof this.state.endDate !== 'undefined') {\r\n      if (!this.state.endDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\r\n        formIsValid = false;\r\n        invalid['endDate'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  async addProductVersion() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      return await apiProductVersionPost(this.props.serviceUrl, this.state);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = e => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      this.addProductVersion()\r\n        .then(result => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.added'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateProductVersions();\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  clearValues = () => {\r\n    const customerModalElement = document.querySelector('#modal-form-product-version');\r\n    if (!customerModalElement.className.includes('is-visible')) {\r\n      this.setState(this.baseState);\r\n    }\r\n  };\r\n\r\n  handleStartDateChange = date => {\r\n    this.setState({\r\n      startDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\r\n    });\r\n  };\r\n\r\n  handleEndDateChange = date => {\r\n    this.setState({\r\n      endDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    const modalOpenButton = document.querySelector('.add-product-version-button');\r\n    modalOpenButton.addEventListener('click', this.clearValues, false);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.addProductVersion')}\r\n        modalHeading={i18n.t('adminDashboard.addProductVersion.title')}\r\n        buttonTriggerClassName=\"add-product-version bx--btn bx--btn--tertiary add-product-version-button\"\r\n        className=\"modal-form\"\r\n        id=\"modal-form-product-version\"\r\n        handleSubmit={this.handleFormSubmit}\r\n        modalLabel={<p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>}\r\n      >\r\n        <div className=\"form-container\">\r\n          <p> {i18n.t('adminDashboard.addProductVersion.desc')} </p>\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <TextInput\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addProductVersion.productVersion')}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}>\r\n              <DatePickerInput\r\n                name=\"startDate\"\r\n                placeholder=\"mm/dd/yyyy\"\r\n                labelText={i18n.t('adminDashboard.addProductVersion.productVersionStartDate')}\r\n                value={this.state.startDate}\r\n                //onChange={this.handleChanges}\r\n                type=\"text\"\r\n                invalidText={i18n.t('validation.invalid.date')}\r\n                invalid={this.state.invalid['startDate']}\r\n              />\r\n            </DatePicker>\r\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleEndDateChange}>\r\n              <DatePickerInput\r\n                name=\"endDate\"\r\n                placeholder=\"mm/dd/yyyy\"\r\n                labelText={i18n.t('adminDashboard.addProductVersion.productVersionEndDate')}\r\n                value={this.state.endDate}\r\n                //onChange={this.handleChanges}\r\n                type=\"text\"\r\n                invalidText={i18n.t('validation.invalid.date')}\r\n                invalid={this.state.invalid['endDate']}\r\n              />\r\n            </DatePicker>\r\n          </Form>\r\n        </div>\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AddProductVersionModal);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { ModalWrapper, Form, TextInput, DatePicker, DatePickerInput } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiProductVersionGet, apiProductVersionPut } from '../../api/productVersion';\r\nimport moment from 'moment';\r\n\r\nclass EditProjectModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      name: '',\r\n      startDate: '',\r\n      endDate: '',\r\n      invalid: {},\r\n      modalId: '',\r\n      buttonId: '',\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    //name\r\n    if (this.state.name === '') {\r\n      formIsValid = false;\r\n      invalid['name'] = true;\r\n    }\r\n\r\n    if (typeof this.state.startDate !== 'undefined') {\r\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\r\n        formIsValid = false;\r\n        invalid['startDate'] = true;\r\n      }\r\n    }\r\n\r\n    if (typeof this.state.endDate !== 'undefined') {\r\n      if (!this.state.endDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\r\n        formIsValid = false;\r\n        invalid['endDate'] = true;\r\n      }\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getVersionDetails();\r\n    }\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleStartDateChange = date => {\r\n    this.setState({\r\n      startDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\r\n    });\r\n  };\r\n\r\n  handleEndDateChange = date => {\r\n    this.setState({\r\n      endDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\r\n    });\r\n  };\r\n\r\n  async getVersionDetails() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const version = await apiProductVersionGet(this.props.serviceUrl, this.props.version.id);\r\n      this.setState({\r\n        name: version.data.name,\r\n        startDate: moment(version.data.startDate).format('MM/DD/YYYY'),\r\n        endDate: moment(version.data.endDate).format('MM/DD/YYYY'),\r\n        modalId: 'modal-form-version-edit-' + version.data.id,\r\n        buttonId: 'edit-version-button-' + version.data.id,\r\n      });\r\n    }\r\n  }\r\n\r\n  async versionPut(version) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      return await apiProductVersionPut(this.props.serviceUrl, version);\r\n    }\r\n  }\r\n\r\n  handleFormSubmit = e => {\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      const version = {\r\n        id: this.props.version.id,\r\n        name: this.state.name,\r\n        startDate: moment(this.state.startDate).format(),\r\n        endDate: moment(this.state.endDate).format(),\r\n      };\r\n      this.versionPut(version)\r\n        .then(result => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.updated'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.props.updateProductVersions();\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.getVersionDetails();\r\n      const modalOpenButton = document.querySelector('.edit-version-button-' + this.props.version.id);\r\n      modalOpenButton.addEventListener('click', this.clearValues, false);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const buttonClassName = 'bx--btn bx--btn--ghost edit-version-button-' + this.props.version.id;\r\n    return (\r\n      <ModalWrapper\r\n        buttonTriggerText={i18n.t('buttons.edit')}\r\n        modalHeading={i18n.t('adminDashboard.addProject.editTitle')}\r\n        buttonTriggerClassName={buttonClassName}\r\n        className=\"modal-form\"\r\n        id={this.state.modalId}\r\n        handleSubmit={this.handleFormSubmit}\r\n        primaryButtonText={i18n.t('modalText.save')}\r\n        secondaryButtonText={i18n.t('modalText.cancel')}\r\n        modalLabel={<p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>}\r\n      >\r\n        <div className=\"form-container\">\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <TextInput\r\n              name=\"name\"\r\n              labelText={i18n.t('adminDashboard.addProject.projectName') + ' *'}\r\n              value={this.state.name}\r\n              onChange={this.handleChanges}\r\n              invalidText={i18n.t('validation.invalid.required')}\r\n              invalid={this.state.invalid['name']}\r\n            />\r\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange} value={this.state.startDate}>\r\n              <DatePickerInput\r\n                name=\"startDate\"\r\n                placeholder=\"mm/dd/yyyy\"\r\n                labelText={i18n.t('subscriptionDetails.startDate') + ' *'}\r\n                onChange={this.handleChanges}\r\n                type=\"text\"\r\n                invalidText={i18n.t('validation.invalid.date')}\r\n                invalid={this.state.invalid['startDate']}\r\n              />\r\n            </DatePicker>\r\n            <DatePicker\r\n              dateFormat=\"m/d/Y\"\r\n              datePickerType=\"single\"\r\n              onChange={this.handleEndDateChange}\r\n              name=\"endDate\"\r\n              value={this.state.endDate}\r\n            >\r\n              <DatePickerInput\r\n                name=\"endDate\"\r\n                placeholder=\"mm/dd/yyyy\"\r\n                labelText={i18n.t('subscriptionDetails.endDate') + ' *'}\r\n                onChange={this.handleChanges}\r\n                type=\"text\"\r\n                invalidText={i18n.t('validation.invalid.date')}\r\n                invalid={this.state.invalid['endDate']}\r\n              />\r\n            </DatePicker>\r\n          </Form>\r\n        </div>\r\n      </ModalWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(EditProjectModal);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../../i18n';\r\nimport {\r\n  DataTable,\r\n  TableContainer,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableHeader,\r\n  TableBody,\r\n  TableCell,\r\n  ToggleSmall,\r\n  Button,\r\n  AccordionItem,\r\n  Accordion,\r\n} from 'carbon-components-react';\r\nimport { SubtractAlt16 } from '@carbon/icons-react';\r\nimport { apiProductVersionDelete, apiProductVersionsGet, apiUpdateProductVersionsStatus } from '../../../api/productVersion';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\nimport AddProductVersionModal from '../AddProductVersionModal';\r\nimport { isPortalAdminOrSupport } from '../../../api/helpers';\r\nimport EditVersionModal from '../EditVersionModal';\r\n\r\nclass ProductVersion extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      data: '',\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (isPortalAdminOrSupport()) {\r\n      this.getProductVersions();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      if (isPortalAdminOrSupport()) {\r\n        this.getProductVersions();\r\n      }\r\n    }\r\n  }\r\n\r\n  async getProductVersions() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const productVersions = await apiProductVersionsGet(this.props.serviceUrl);\r\n\r\n      this.setState({\r\n        data: productVersions,\r\n      });\r\n    }\r\n  }\r\n\r\n  async deleteVersion(id) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      return await apiProductVersionDelete(this.props.serviceUrl, id);\r\n    }\r\n  }\r\n\r\n  handleDeleteVersion = (e, id) => {\r\n    e.preventDefault();\r\n    if (window.confirm('Are you sure you want to delete this Entando version?')) {\r\n      this.deleteVersion(id)\r\n        .then(result => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.deleted'),\r\n            submitColour: '#24a148',\r\n          });\r\n          this.updateProductVersions();\r\n        })\r\n        .catch(err => {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  updateProductVersions = () => {\r\n    this.getProductVersions();\r\n  };\r\n\r\n  async handleToggleChange(id) {\r\n    await apiUpdateProductVersionsStatus(this.props.serviceUrl, id);\r\n  }\r\n\r\n  render() {\r\n    if (isPortalAdminOrSupport()) {\r\n      return (\r\n        <div>\r\n          <DataTable rows={rowData} headers={headerData}>\r\n            {({ rows, headers, getHeaderProps, getTableProps }) => (\r\n              <TableContainer>\r\n                <Table {...getTableProps()}>\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      {headers.map(header => (\r\n                        <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>\r\n                      ))}\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {Object.keys(this.state.data).length !== 0\r\n                      ? this.state.data.data.map((productVersion, index) => (\r\n                          <TableRow key={index}>\r\n                            <TableCell>{productVersion.name}</TableCell>\r\n                            <TableCell>\r\n                              <ToggleSmall\r\n                                onClick={() => this.handleToggleChange(productVersion.id)}\r\n                                aria-label=\"toggle button\"\r\n                                id={productVersion.id}\r\n                                defaultToggled={productVersion.status ? true : false}\r\n                              />\r\n                            </TableCell>\r\n                            <TableCell>{productVersion.startDate}</TableCell>\r\n                            <TableCell>{productVersion.endDate}</TableCell>\r\n                            <TableCell>\r\n                              <div style={{ display: 'flex' }}>\r\n                                <EditVersionModal\r\n                                  key={productVersion.id}\r\n                                  version={productVersion}\r\n                                  serviceUrl={this.props.serviceUrl}\r\n                                  updateProductVersions={this.updateProductVersions}\r\n                                />\r\n                                <a\r\n                                  onClick={e => this.handleDeleteVersion(e, productVersion.id)}\r\n                                  href=\"\"\r\n                                  style={{ display: 'flex', marginTop: '12px' }}\r\n                                >\r\n                                  <SubtractAlt16 fill=\"red\" style={{ marginTop: '4px' }} />\r\n                                  <p>{i18n.t('buttons.delete')}</p>\r\n                                </a>\r\n                              </div>\r\n                            </TableCell>\r\n                          </TableRow>\r\n                        ))\r\n                      : null}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            )}\r\n          </DataTable>\r\n          <br />\r\n          <AddProductVersionModal serviceUrl={this.props.serviceUrl} updateProductVersions={this.updateProductVersions} />\r\n        </div>\r\n      );\r\n    } else {\r\n      return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n    }\r\n  }\r\n}\r\n\r\nconst headerData = [\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.entandoVersion'),\r\n    key: 'entVersion',\r\n  },\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.status'),\r\n    key: 'status',\r\n  },\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.startDate'),\r\n    key: 'startDate',\r\n  },\r\n  {\r\n    header: i18n.t('adminConfig.manageProductVersion.supportEndDate'),\r\n    key: 'endDate',\r\n  },\r\n  {\r\n    header: i18n.t('customerDashboard.action'),\r\n    key: 'action',\r\n  },\r\n];\r\n\r\nconst rowData = [\r\n  {\r\n    id: 'a',\r\n    entVersion: '5.2',\r\n    status: <ToggleSmall aria-label=\"toggle button\" defaultToggled id=\"status-1\" />,\r\n    startDate: 'April, 2018',\r\n    endDate: 'April, 2022',\r\n  },\r\n  {\r\n    id: 'b',\r\n    entVersion: '6.3',\r\n    status: <ToggleSmall aria-label=\"toggle button\" id=\"status-2\" />,\r\n    startDate: 'Jile, 2019',\r\n    endDate: 'April, 2023',\r\n  },\r\n  {\r\n    id: 'c',\r\n    entVersion: '6.2',\r\n    status: <ToggleSmall aria-label=\"toggle button\" defaultToggled id=\"status-3\" />,\r\n    startDate: 'September, 2020',\r\n    endDate: 'April, 2024',\r\n  },\r\n];\r\n\r\nexport default withKeycloak(ProductVersion);\r\n","import React from 'react';\r\nimport i18n from '../../../i18n';\r\nimport { Accordion, AccordionItem, Tile } from 'carbon-components-react';\r\nimport TicketingSystem from './TicketingSystem';\r\nimport ProductVersion from './ProductVersion';\r\nimport { isPortalAdmin } from '../../../api/helpers';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\n\r\nclass AdminConfiguration extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n    };\r\n    this.adminConfig = [\r\n      {\r\n        label: (\r\n          <div>\r\n            <p className=\"title\">{i18n.t('adminConfig.integrationTicketingSystem.title')}</p>\r\n            <p className=\"desc\">{i18n.t('adminConfig.integrationTicketingSystem.desc')}</p>\r\n          </div>\r\n        ),\r\n        content: <TicketingSystem serviceUrl={this.props.serviceUrl} />,\r\n      },\r\n      {\r\n        label: (\r\n          <div>\r\n            <p className=\"title\">{i18n.t('adminConfig.manageProductVersion.title')}</p>\r\n            <p className=\"desc\">{i18n.t('adminConfig.manageProductVersion.desc')}</p>\r\n          </div>\r\n        ),\r\n        content: <ProductVersion serviceUrl={this.props.serviceUrl} />,\r\n      },\r\n    ];\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.loading) {\r\n      // Authorized\r\n      if (isPortalAdmin()) {\r\n        return (\r\n          <div>\r\n            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\r\n            <div className=\"form-container\">\r\n              <Tile>\r\n                <p className=\"title\">{i18n.t('adminConfig.title')}</p>\r\n                <p className=\"desc\">{i18n.t('adminConfig.desc')}</p>\r\n              </Tile>\r\n              <Accordion>\r\n                {this.adminConfig.map((item, index) => (\r\n                  <AccordionItem key={index.toString()} index={index} title={item.label} description={item.description}>\r\n                    <p>{item.content}</p>\r\n                  </AccordionItem>\r\n                ))}\r\n              </Accordion>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      // Unauthorized\r\n      else {\r\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n      }\r\n    }\r\n    // Loading\r\n    else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\nexport default withKeycloak(AdminConfiguration);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AdminConfiguration from '../components/Admin/Configuration/AdminConfiguration';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n  locale: 'locale',\r\n};\r\n\r\nclass AdminConfigurationElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AdminConfiguration serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-configuration-widget', AdminConfigurationElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport OpenTicket from '../components/Forms/openTicket';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass OpenTicketElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <OpenTicket serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('open-ticket-widget', OpenTicketElement);\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/portal-users';\r\n\r\nexport const apiUserDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUsersPut = async (serviceUrl, user) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: user ? JSON.stringify(user) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUsersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserGet = async (serviceUrl, userId) => {\r\n  const url = getUrl(`${serviceUrl}/${resource}/${userId}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserPost = async (serviceUrl, user) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: user ? JSON.stringify(user) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserGetByUsername = async (serviceUrl, username) => {\r\n  const url = getUrl(`${serviceUrl}/${resource}/username/${username}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};\r\n","import { getDefaultKeycloakOptions, request, getUrl } from './helpers';\r\n\r\nexport const apiKeycloakUserGet = async (serviceUrl, realm) => {\r\n  const usersResource = `admin/realms/${realm}/users`;\r\n  const url = `${serviceUrl}/${usersResource}`;\r\n  const options = {\r\n    ...getDefaultKeycloakOptions(),\r\n    method: 'GET',\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiKeycloakToken = async (serviceUrl, realm) => {\r\n  const tokenResource = `realms/${realm}/protocol/openid-connect/token`;\r\n  const url = getUrl(`${serviceUrl}/${tokenResource}`);\r\n  const keycloakBody = {\r\n    client_id: 'web_app',\r\n    username: 'admin',\r\n    password: 'admin',\r\n    grant_type: 'password',\r\n  };\r\n  const options = {\r\n    ...getDefaultKeycloakOptions(),\r\n    method: 'POST',\r\n    body: keycloakBody ? serialize(keycloakBody) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nfunction serialize(obj) {\r\n  var str = [];\r\n  for (var p in obj)\r\n    if (obj.hasOwnProperty(p)) {\r\n      str.push(encodeURIComponent(p) + '=' + encodeURIComponent(obj[p]));\r\n    }\r\n  return str.join('&');\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Form, TextInput, Select, SelectItem, Button } from 'carbon-components-react';\r\nimport * as portalUserApi from '../../../api/portalusers';\r\nimport { apiAddUserToProject, apiGetProjectIdNames } from '../../../api/projects';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\nimport { apiKeycloakUserGet } from '../../../api/keycloak';\r\nimport i18n from '../../../i18n';\r\nclass AssignUser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      projectId: '',\r\n      assignUser: '',\r\n      users: new Map(),\r\n      projects: {},\r\n      invalid: {},\r\n      submitMsg: '',\r\n      submitColour: 'black',\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { t, keycloak } = this.props;\r\n\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      this.fetchData(keycloak.authServerUrl);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.fetchData(keycloak.authServerUrl);\r\n    }\r\n  }\r\n\r\n  async fetchData(keycloakUrl) {\r\n    const { keycloak } = this.props;\r\n    const users = this.mapKeycloakUserEmails((await apiKeycloakUserGet(keycloakUrl, keycloak.realm)).data);\r\n    var projects = (await apiGetProjectIdNames(this.props.serviceUrl)).data;\r\n    let search = window.location.search;\r\n    let params = new URLSearchParams(search);\r\n    let projectParam = params.get('project');\r\n\r\n    if (projectParam) {\r\n      Object.keys(projects).map((id, value) => {\r\n        if (id !== projectParam) {\r\n          delete projects[id];\r\n        }\r\n      });\r\n      if (Object.keys(projects).length === 1) {\r\n        this.setState({\r\n          projectId: Object.keys(projects)[0],\r\n        });\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      users,\r\n      projects,\r\n    });\r\n  }\r\n\r\n  mapKeycloakUserEmails = keycloakUsers => {\r\n    const usernameEmailMap = new Map();\r\n    keycloakUsers.forEach(keycloakUser => usernameEmailMap.set(keycloakUser.username, keycloakUser.email));\r\n    return usernameEmailMap;\r\n  };\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleFormSubmit = event => {\r\n    event.preventDefault();\r\n    const { projectId, assignUser } = this.state;\r\n    const formIsValid = this.handleFormValidation();\r\n\r\n    if (formIsValid) {\r\n      this.assignUserToProject(projectId, assignUser).then(res => {\r\n        if (res.status === 201) {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.updated'),\r\n            submitColour: '#24a148',\r\n          });\r\n        } else {\r\n          this.setState({\r\n            submitMsg: i18n.t('submitMessages.error'),\r\n            submitColour: '#da1e28',\r\n          });\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  handleFormValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n    const { projectId, assignUser } = this.state;\r\n\r\n    //name\r\n    if (projectId === '') {\r\n      formIsValid = false;\r\n      invalid['projectId'] = true;\r\n    }\r\n\r\n    //customerNumber\r\n    if (assignUser === '') {\r\n      formIsValid = false;\r\n      invalid['assignUser'] = true;\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  assignUserToProject = async (projectId, username) => {\r\n    const portalUserId = await this.getPortalUserId({ username, email: this.state.users.get(username) });\r\n    return await apiAddUserToProject(this.props.serviceUrl, projectId, portalUserId);\r\n  };\r\n\r\n  getPortalUserId = async keycloakUser => {\r\n    let portalUserId = null;\r\n    try {\r\n      const portalUser = await portalUserApi.apiUserGetByUsername(this.props.serviceUrl, keycloakUser.username);\r\n      portalUserId = portalUser.data.id;\r\n    } catch (e) {\r\n      if (e.message.toLowerCase().includes('not found')) {\r\n        const portalUser = await this.createPortalUser(keycloakUser);\r\n        portalUserId = portalUser.data.id;\r\n      }\r\n    }\r\n\r\n    return portalUserId;\r\n  };\r\n\r\n  createPortalUser = async keycloakUser => {\r\n    return await portalUserApi.apiUserPost(this.props.serviceUrl, { username: keycloakUser.username, email: keycloakUser.email });\r\n  };\r\n\r\n  setupFormComponents() {\r\n    const users = this.state.users;\r\n    const projectIdsNames = this.state.projects;\r\n    let userList,\r\n      projectList = (userList = null);\r\n\r\n    if (users.size > 0) {\r\n      userList = [...users.keys()].map((assignUser, i) => (\r\n        <SelectItem key={i} text={assignUser} value={assignUser}>\r\n          {assignUser}\r\n        </SelectItem>\r\n      ));\r\n      userList.unshift(<SelectItem key=\"-1\" text={i18n.t('manageUsers.assign.userList')} value=\"\" />);\r\n    } else {\r\n      userList = <SelectItem text={i18n.t('manageUsers.assign.noUsers')} value=\"\" />;\r\n    }\r\n\r\n    if (projectIdsNames != null && Object.keys(projectIdsNames).length > 0) {\r\n      projectList = Object.keys(projectIdsNames).map((projectId, i) => (\r\n        <SelectItem key={i} text={projectIdsNames[projectId]} value={projectId}>\r\n          test\r\n        </SelectItem>\r\n      ));\r\n      if (Object.keys(projectIdsNames).length > 1) {\r\n        projectList.unshift(<SelectItem key=\"-1\" text={i18n.t('manageUsers.assign.projectList')} value=\"\" />);\r\n      }\r\n    } else {\r\n      projectList = <SelectItem text={i18n.t('manageUsers.assign.noProjects')} value=\"\" />;\r\n    }\r\n\r\n    return { userList, projectList };\r\n  }\r\n\r\n  render() {\r\n    const { userList, projectList } = this.setupFormComponents();\r\n\r\n    return (\r\n      <div>\r\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\r\n        <Form onSubmit={this.handleFormSubmit}>\r\n          <div className=\"bx--grid\">\r\n            <div className=\"bx--row\">\r\n              <div className=\"bx--col\">\r\n                <Select\r\n                  name=\"projectId\"\r\n                  labelText={i18n.t('manageUsers.assign.projectName')}\r\n                  value={this.state.projectId}\r\n                  onChange={this.handleChanges}\r\n                  invalidText={i18n.t('validation.invalid.required')}\r\n                  invalid={this.state.invalid['projectId']}\r\n                >\r\n                  {projectList}\r\n                </Select>\r\n              </div>\r\n            </div>\r\n            <div className=\"bx--row\">\r\n              <div className=\"bx--col\">\r\n                <Select\r\n                  name=\"assignUser\"\r\n                  labelText={i18n.t('manageUsers.assign.assignUser')}\r\n                  value={this.state.assignUser}\r\n                  onChange={this.handleChanges}\r\n                  invalidText={i18n.t('validation.invalid.required')}\r\n                  invalid={this.state.invalid['assignUser']}\r\n                >\r\n                  {userList}\r\n                </Select>\r\n              </div>\r\n            </div>\r\n            <Button kind=\"primary\" tabIndex={0} type=\"submit\">\r\n              {' '}\r\n              {i18n.t('buttons.submit')}{' '}\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(AssignUser);\r\n","import React, { Component } from 'react';\r\nimport { DataTable, TableContainer, Table, TableHead, TableRow, TableHeader, TableBody, TableCell } from 'carbon-components-react';\r\nimport { SubtractAlt16 } from '@carbon/icons-react';\r\nimport { apiUsersGet, apiUserDelete } from '../../../api/portalusers';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\nimport { apiKeycloakUserGet } from '../../../api/keycloak';\r\nimport i18n from '../../../i18n';\r\n\r\nclass DeleteUser extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      portalUsers: new Map(),\r\n      keycloakUsers: new Map(),\r\n      displayUsers: [],\r\n      filterText: '',\r\n    };\r\n    this.headerData = [\r\n      {\r\n        header: i18n.t('manageUsers.delete.userName'),\r\n        key: 'username',\r\n      },\r\n      {\r\n        header: i18n.t('manageUsers.delete.userEmail'),\r\n        key: 'email',\r\n      },\r\n      {\r\n        header: i18n.t('manageUsers.delete.dateAdded'),\r\n        key: 'dateAdded',\r\n      },\r\n      {\r\n        header: i18n.t('manageUsers.delete.userAccess'),\r\n        key: 'userAccess',\r\n      },\r\n    ];\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.fetchData(keycloak.authServerUrl);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { t, keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.fetchData(keycloak.authServerUrl);\r\n    }\r\n  }\r\n\r\n  async fetchData(keycloakUrl) {\r\n    const { keycloak } = this.props;\r\n\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const portalUsers = this.handleMapFormatting((await apiUsersGet(this.props.serviceUrl)).data);\r\n      const keycloakUsers = this.handleMapFormatting((await apiKeycloakUserGet(keycloakUrl, keycloak.realm)).data);\r\n\r\n      this.setState({\r\n        portalUsers,\r\n        keycloakUsers,\r\n      });\r\n\r\n      this.handleUserDisplay();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Turns the list of user objects into a map where the key is the unique username.\r\n   */\r\n  handleMapFormatting(users) {\r\n    return new Map(users.map(user => [user.username, user]));\r\n  }\r\n\r\n  handleUserDisplay() {\r\n    const { portalUsers, keycloakUsers } = this.state;\r\n    const portalUsernames = [...portalUsers.keys()];\r\n    const keycloakUserObjects = [...keycloakUsers.values()];\r\n\r\n    const displayUsers = keycloakUserObjects.map(keycloakUser => ({\r\n      id: keycloakUser.username,\r\n      username: keycloakUser.username,\r\n      email: keycloakUser.email,\r\n      dateAdded: `${new Date(keycloakUser.createdTimestamp).toLocaleString('default', { month: 'long' })} ${new Date(\r\n        keycloakUser.createdTimestamp\r\n      ).getFullYear()}`,\r\n      userAccess: portalUsernames.includes(keycloakUser.username) ? (\r\n        <a onClick={event => this.handleRemoveUser(keycloakUser.username, event)} href=\"\">\r\n          <SubtractAlt16 fill=\"red\" />\r\n          {i18n.t('manageUsers.delete.removeUser')}\r\n        </a>\r\n      ) : (\r\n        ''\r\n      ),\r\n    }));\r\n\r\n    this.setState({\r\n      displayUsers,\r\n    });\r\n  }\r\n\r\n  handleRemoveUser = (username, event) => {\r\n    event.preventDefault();\r\n    const userId = this.state.portalUsers.get(username).id;\r\n    apiUserDelete(this.props.serviceUrl, userId).then(res => {\r\n      if (res.status === 204) {\r\n        const updatedPortalUsers = this.state.portalUsers;\r\n        updatedPortalUsers.delete(username);\r\n        this.setState({\r\n          portalUsers: updatedPortalUsers,\r\n        });\r\n        this.handleUserDisplay();\r\n      } else {\r\n        // TODO: Error message\r\n      }\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <DataTable rows={this.state.displayUsers} headers={this.headerData}>\r\n        {({ rows, headers, getHeaderProps, getTableProps }) => (\r\n          <TableContainer>\r\n            <Table {...getTableProps()}>\r\n              <TableHead>\r\n                <TableRow>\r\n                  {headers.map(header => (\r\n                    <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>\r\n                  ))}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {rows.map(row => (\r\n                  <TableRow key={row.id}>\r\n                    {row.cells.map(cell => (\r\n                      <TableCell key={cell.id}>{cell.value}</TableCell>\r\n                    ))}\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        )}\r\n      </DataTable>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(DeleteUser);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../../i18n';\r\nimport { Accordion, AccordionItem } from 'carbon-components-react';\r\nimport AssignUser from './AssignUser';\r\nimport DeleteUser from './DeleteUser';\r\nimport { isPortalAdmin } from '../../../api/helpers';\r\nimport withKeycloak from '../../../auth/withKeycloak';\r\n\r\nclass ManageUser extends Component {\r\n  userFunctionality;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n    };\r\n    this.userFunctionality = [\r\n      {\r\n        label: (\r\n          <div>\r\n            <p className=\"title\">{i18n.t('manageUsers.assign.title')}</p>\r\n            <p className=\"desc\">{i18n.t('manageUsers.assign.desc')}</p>\r\n          </div>\r\n        ),\r\n        content: <AssignUser serviceUrl={this.props.serviceUrl} />,\r\n        open: true,\r\n      },\r\n      {\r\n        label: (\r\n          <div>\r\n            <p className=\"title\">{i18n.t('manageUsers.manage.title')}</p>\r\n            <p className=\"desc\">{i18n.t('manageUsers.manage.desc')}</p>\r\n          </div>\r\n        ),\r\n        content: <DeleteUser serviceUrl={this.props.serviceUrl} />,\r\n        open: false,\r\n      },\r\n    ];\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.loading) {\r\n      if (isPortalAdmin()) {\r\n        return (\r\n          <div>\r\n            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\r\n            <div className=\"form-container\">\r\n              <Accordion>\r\n                {this.userFunctionality.map((item, index) => (\r\n                  <AccordionItem key={index.toString()} index={index} title={item.label} description={item.description} open={item.open}>\r\n                    <p>{item.content}</p>\r\n                  </AccordionItem>\r\n                ))}\r\n              </Accordion>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      // Unauthorized\r\n      else {\r\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n      }\r\n    }\r\n    // Loading\r\n    else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withKeycloak(ManageUser);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ManageUser from '../components/Admin/ManageUser/ManageUser';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n  locale: 'locale',\r\n};\r\n\r\nclass ManageUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <ManageUser serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('manage-user-widget', ManageUserElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AssignUser from '../components/Admin/ManageUser/AssignUser';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AssignUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AssignUser serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('assign-user-widget', AssignUserElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport DeleteUser from '../components/Admin/ManageUser/DeleteUser';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass DeleteUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <DeleteUser serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('delete-user-widget', DeleteUserElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport TicketingSystem from '../components/Admin/Configuration/TicketingSystem';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass TicketingSystemElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <TicketingSystem serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('ticketing-system-widget', TicketingSystemElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ProductVersion from '../components/Admin/Configuration/ProductVersion';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass ProductVersionElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <ProductVersion serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('product-version-widget', ProductVersionElement);\r\n","import React, { Component } from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Form, TextInput, Select, SelectItem, Button, DatePicker, DatePickerInput } from 'carbon-components-react';\r\nimport { apiGetProjectIdNames, apiGetMyProjectIdNames } from '../../api/projects';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiProjectSubscriptionPost, apiRenewSubscription } from '../../api/subscriptions';\r\nimport { apiProductVersionsGet } from '../../api/productVersion';\r\nimport { isPortalAdmin, isPortalAdminOrSupport, isPortalCustomer, isPortalPartner, isPortalSupport, isPortalUser } from '../../api/helpers';\r\nimport { apiAddSubscriptionToProject } from '../../api/projects';\r\nimport moment from 'moment';\r\n\r\nconst subscriptionLevel = {\r\n  GOLD: 'Gold',\r\n  PLATINUM: 'Platinum',\r\n};\r\n\r\nconst subscriptionStatus = {\r\n  requested: 'REQUESTED',\r\n  pending: 'PENDING',\r\n  active: 'ACTIVE',\r\n  expired: 'EXPIRED',\r\n};\r\n\r\nconst subscriptionTypes = ['New', 'Existing'];\r\n\r\nclass SubscriptionForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      subscriptionType: '',\r\n      projectId: '',\r\n      startDate: '',\r\n      subscriptionLevel: '',\r\n      subscriptionLength: '',\r\n      entandoVersionId: '',\r\n      invalid: {},\r\n      projects: {},\r\n      productVersions: [],\r\n      selectedProjectId: '',\r\n      submitSuccess: false,\r\n      submitError: false,\r\n      submitColour: 'black',\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      if (isPortalUser()) {\r\n        this.fetchData();\r\n      }\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      if (isPortalUser()) {\r\n        this.fetchData();\r\n      }\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  async fetchData() {\r\n    var projects = '';\r\n    if (isPortalAdminOrSupport()) {\r\n      projects = (await apiGetProjectIdNames(this.props.serviceUrl)).data;\r\n    } else {\r\n      projects = (await apiGetMyProjectIdNames(this.props.serviceUrl)).data;\r\n    }\r\n    const productVersions = (await apiProductVersionsGet(this.props.serviceUrl)).data;\r\n\r\n    let search = window.location.search;\r\n    let params = new URLSearchParams(search);\r\n    let projectParam = params.get('project');\r\n\r\n    if (projectParam) {\r\n      Object.keys(projects).map((id, value) => {\r\n        if (id !== projectParam) {\r\n          delete projects[id];\r\n        }\r\n      });\r\n      if (Object.keys(projects).length === 1) {\r\n        this.setState({\r\n          projectId: Object.keys(projects)[0],\r\n        });\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      projects,\r\n      productVersions,\r\n    });\r\n  }\r\n\r\n  isNumeric(str) {\r\n    if (typeof str != 'string') return false;\r\n    return !isNaN(str) && !isNaN(parseFloat(str));\r\n  }\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    if (this.state.subscriptionType === '') {\r\n      formIsValid = false;\r\n      invalid['subscriptionType'] = true;\r\n    }\r\n\r\n    if (this.state.projectId === '') {\r\n      formIsValid = false;\r\n      invalid['projectId'] = true;\r\n    }\r\n\r\n    if (typeof this.state.startDate !== 'undefined') {\r\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\r\n        formIsValid = false;\r\n        invalid['startDate'] = true;\r\n      }\r\n    }\r\n\r\n    if (this.state.subscriptionLength === '' || !this.isNumeric(this.state.subscriptionLength)) {\r\n      formIsValid = false;\r\n      invalid['subscriptionLength'] = true;\r\n    }\r\n\r\n    if (this.state.subscriptionLevel === '') {\r\n      formIsValid = false;\r\n      invalid['level'] = true;\r\n    }\r\n\r\n    if (this.state.entandoVersionId === '') {\r\n      formIsValid = false;\r\n      invalid['entandoVersionId'] = true;\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n    this.setState({\r\n      submitSuccess: false,\r\n      submitError: false,\r\n    });\r\n  };\r\n\r\n  handleStartDateChange = date => {\r\n    if (date !== '') {\r\n      this.setState({\r\n        startDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\r\n      });\r\n    }\r\n  };\r\n\r\n  handleFormSubmit = event => {\r\n    event.preventDefault();\r\n    this.setState({\r\n      submitSuccess: false,\r\n      submitError: false,\r\n    });\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      if (this.state.subscriptionType === 'new') {\r\n        this.newSubscription()\r\n          .then(res => {\r\n            apiAddSubscriptionToProject(this.props.serviceUrl, this.state.projectId, res.data.id);\r\n            this.setState({\r\n              submitSuccess: true,\r\n              submitError: false,\r\n              submitColour: '#24a148',\r\n            });\r\n          })\r\n          .catch(err => {\r\n            this.setState({\r\n              submitSuccess: false,\r\n              submitError: true,\r\n              submitColour: '#da1e28',\r\n            });\r\n          });\r\n      } else if (this.state.subscriptionType === 'existing') {\r\n        this.renewSubscription()\r\n          .then(res => {\r\n            apiAddSubscriptionToProject(this.props.serviceUrl, this.state.projectId, res.data.id);\r\n            this.setState({\r\n              submitSuccess: true,\r\n              submitError: false,\r\n              submitColour: '#24a148',\r\n            });\r\n          })\r\n          .catch(err => {\r\n            this.setState({\r\n              submitSuccess: false,\r\n              submitError: true,\r\n              submitColour: '#da1e28',\r\n            });\r\n          });\r\n      }\r\n    }\r\n  };\r\n\r\n  async newSubscription() {\r\n    const subscriptionRequest = {\r\n      entandoVersionId: this.state.entandoVersionId,\r\n      projectId: this.state.projectId,\r\n      projectSubscription: {\r\n        startDate: new Date(this.state.startDate),\r\n        lengthInMonths: this.state.subscriptionLength,\r\n        level: this.state.subscriptionLevel,\r\n        status: this.subscriptionStatus(),\r\n      },\r\n    };\r\n\r\n    return await apiProjectSubscriptionPost(this.props.serviceUrl, subscriptionRequest);\r\n  }\r\n\r\n  async renewSubscription() {\r\n    const subscriptionRequest = {\r\n      entandoVersionId: this.state.entandoVersionId,\r\n      projectId: this.state.projectId,\r\n      projectSubscription: {\r\n        startDate: new Date(this.state.startDate),\r\n        lengthInMonths: this.state.subscriptionLength,\r\n        level: this.state.subscriptionLevel,\r\n        status: this.subscriptionStatus(),\r\n      },\r\n    };\r\n\r\n    return await apiRenewSubscription(this.props.serviceUrl, subscriptionRequest);\r\n  }\r\n\r\n  subscriptionStatus() {\r\n    return isPortalAdmin() ? subscriptionStatus.active : subscriptionStatus.requested;\r\n  }\r\n\r\n  setupFormComponents() {\r\n    const projectIdsNames = this.state.projects;\r\n    let projectList = null;\r\n\r\n    if (projectIdsNames != null && Object.keys(projectIdsNames).length > 0) {\r\n      projectList = Object.keys(projectIdsNames).map((projectId, i) => (\r\n        <SelectItem key={i} text={projectIdsNames[projectId]} value={projectId}>\r\n          {projectIdsNames[projectId]}\r\n        </SelectItem>\r\n      ));\r\n      if (Object.keys(projectIdsNames).length > 1) {\r\n        projectList.unshift(<SelectItem key=\"-1\" text={i18n.t('manageUsers.assign.projectList')} value=\"\" />);\r\n      }\r\n    } else {\r\n      projectList = <SelectItem text={i18n.t('manageUsers.assign.noProjects')} value=\"\" />;\r\n    }\r\n\r\n    const subscriptionLevelList = Object.entries(subscriptionLevel).map(([key, value]) => (\r\n      <SelectItem key={key} text={value} value={key}>\r\n        {value}\r\n      </SelectItem>\r\n    ));\r\n    subscriptionLevelList.unshift(<SelectItem key=\"-1\" text={i18n.t('subscriptionForm.chooseLevel')} value=\"\" />);\r\n\r\n    const versionList = this.state.productVersions.map(version => {\r\n      // only allow the user to choose from active entando versions\r\n      if (version.status) {\r\n        return (\r\n          <SelectItem key={version.id} text={version.name} value={version.id}>\r\n            {version.name}\r\n          </SelectItem>\r\n        );\r\n      } else {\r\n        return null;\r\n      }\r\n    });\r\n    versionList.unshift(<SelectItem key=\"-1\" text={i18n.t('subscriptionForm.chooseVersion')} value=\"\" />);\r\n\r\n    return { projectList, subscriptionLevelList, versionList };\r\n  }\r\n\r\n  renderForm() {\r\n    const formComponents = this.setupFormComponents();\r\n    const { projectList, subscriptionLevelList, versionList } = formComponents;\r\n    let formInputs;\r\n\r\n    if (this.state.subscriptionType === 'new') {\r\n      formInputs = (\r\n        <div>\r\n          <p>\r\n            <strong>{i18n.t('subscriptionForm.newSubscription')}</strong>\r\n          </p>\r\n          <br />\r\n          <div className=\"bx--row\">\r\n            <div className=\"bx--col\">\r\n              <Select\r\n                id=\"projectId\"\r\n                name=\"projectId\"\r\n                labelText={i18n.t('subscriptionForm.projectName')}\r\n                value={this.state.projectId}\r\n                onChange={this.handleChanges}\r\n                invalidText={i18n.t('validation.invalid.required')}\r\n                invalid={this.state.invalid['projectId']}\r\n              >\r\n                {projectList}\r\n              </Select>\r\n              <Select\r\n                id=\"subscriptionLevel\"\r\n                name=\"subscriptionLevel\"\r\n                labelText={i18n.t('subscriptionForm.desiredSubscriptionLevel') + ' *'}\r\n                value={this.state.subscriptionLevel}\r\n                onChange={this.handleChanges}\r\n                invalidText={i18n.t('validation.invalid.required')}\r\n                invalid={this.state.invalid['level']}\r\n              >\r\n                {subscriptionLevelList}\r\n              </Select>\r\n              <Select\r\n                id=\"entandoVersionId\"\r\n                name=\"entandoVersionId\"\r\n                labelText={i18n.t('subscriptionForm.entandoVersion') + ' *'}\r\n                value={this.state.entandoVersionId}\r\n                onChange={this.handleChanges}\r\n                invalidText={i18n.t('validation.invalid.required')}\r\n                invalid={this.state.invalid['entandoVersionId']}\r\n              >\r\n                {versionList}\r\n              </Select>\r\n            </div>\r\n            <div className=\"bx--col\">\r\n              <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}>\r\n                <DatePickerInput\r\n                  id=\"startDate\"\r\n                  name=\"startDate\"\r\n                  placeholder=\"mm/dd/yyyy\"\r\n                  labelText={i18n.t('subscriptionForm.desiredSubscriptionStartDate')}\r\n                  value={this.state.startDate}\r\n                  //onChange={this.handleChanges}\r\n                  type=\"text\"\r\n                  invalidText={i18n.t('validation.invalid.date')}\r\n                  invalid={this.state.invalid['startDate']}\r\n                />\r\n              </DatePicker>\r\n              <TextInput\r\n                id=\"subscriptionLength\"\r\n                name=\"subscriptionLength\"\r\n                labelText={i18n.t('subscriptionForm.desiredSubscriptionLength') + ' *'}\r\n                value={this.state.subscriptionLength}\r\n                onChange={this.handleChanges}\r\n                invalidText={i18n.t('validation.invalid.number')}\r\n                invalid={this.state.invalid['subscriptionLength']}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    } else if (this.state.subscriptionType === 'existing') {\r\n      formInputs = (\r\n        <div>\r\n          <p>\r\n            <strong>{i18n.t('subscriptionForm.renewSubscription')}</strong>\r\n          </p>\r\n          <br />\r\n          <div className=\"bx--row\">\r\n            <div className=\"bx--col\">\r\n              <Select\r\n                id=\"projectId\"\r\n                name=\"projectId\"\r\n                labelText={i18n.t('subscriptionForm.projectName')}\r\n                value={this.state.projectId}\r\n                onChange={this.handleChanges}\r\n                invalidText={i18n.t('validation.invalid.required')}\r\n                invalid={this.state.invalid['projectId']}\r\n              >\r\n                {projectList}\r\n              </Select>\r\n              <Select\r\n                id=\"subscriptionLevel\"\r\n                name=\"subscriptionLevel\"\r\n                labelText={i18n.t('subscriptionForm.desiredSubscriptionLevel') + ' *'}\r\n                value={this.state.subscriptionLevel}\r\n                onChange={this.handleChanges}\r\n                invalidText={i18n.t('validation.invalid.required')}\r\n                invalid={this.state.invalid['level']}\r\n              >\r\n                {subscriptionLevelList}\r\n              </Select>\r\n              <Select\r\n                id=\"entandoVersionId\"\r\n                name=\"entandoVersionId\"\r\n                labelText={i18n.t('subscriptionForm.entandoVersion') + ' *'}\r\n                value={this.state.entandoVersionId}\r\n                onChange={this.handleChanges}\r\n                invalidText={i18n.t('validation.invalid.required')}\r\n                invalid={this.state.invalid['entandoVersionId']}\r\n              >\r\n                {versionList}\r\n              </Select>\r\n            </div>\r\n            <div className=\"bx--col\">\r\n              <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}>\r\n                <DatePickerInput\r\n                  id=\"startDate\"\r\n                  name=\"startDate\"\r\n                  placeholder=\"mm/dd/yyyy\"\r\n                  labelText={i18n.t('subscriptionForm.desiredSubscriptionStartDate')}\r\n                  value={this.state.startDate}\r\n                  //onChange={this.handleChanges}\r\n                  type=\"text\"\r\n                  invalidText={i18n.t('validation.invalid.date')}\r\n                  invalid={this.state.invalid['startDate']}\r\n                />\r\n              </DatePicker>\r\n              <TextInput\r\n                id=\"subscriptionLength\"\r\n                name=\"subscriptionLength\"\r\n                labelText={i18n.t('subscriptionForm.desiredSubscriptionLength') + ' *'}\r\n                value={this.state.subscriptionLength}\r\n                onChange={this.handleChanges}\r\n                invalidText={i18n.t('validation.invalid.number')}\r\n                invalid={this.state.invalid['subscriptionLength']}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return formInputs;\r\n  }\r\n\r\n  successErrorMessage() {\r\n    const isAdmin = isPortalAdmin();\r\n    const { subscriptionType, submitSuccess, submitError } = this.state;\r\n\r\n    if (subscriptionType === 'new') {\r\n      if (submitSuccess) {\r\n        return isAdmin ? this.createFormMessage('adminSubmitNewSuccess') : this.createFormMessage('customerSubmitSuccess');\r\n      } else if (submitError) {\r\n        return this.createFormMessage('newSubError');\r\n      }\r\n    } else {\r\n      if (submitSuccess) {\r\n        return isAdmin ? this.createFormMessage('adminRenewNewSuccess') : this.createFormMessage('customerSubmitSuccess');\r\n      } else if (submitError) {\r\n        return this.createFormMessage('renewSubError');\r\n      }\r\n    }\r\n  }\r\n\r\n  createFormMessage(subMessageKey) {\r\n    return <p style={{ color: this.state.submitColour }}>{i18n.t(`subscriptionForm.${subMessageKey}`)}</p>;\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.loading) {\r\n      if (isPortalUser()) {\r\n        return (\r\n          <div>\r\n            {isPortalAdmin() ? (\r\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\r\n            ) : isPortalSupport() ? (\r\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.supportTitle')}</h3>\r\n            ) : isPortalCustomer() ? (\r\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.customerTitle')}</h3>\r\n            ) : isPortalPartner() ? (\r\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.partnerTitle')}</h3>\r\n            ) : null}\r\n            <div className=\"form-container\">\r\n              {this.successErrorMessage()}\r\n              <Form onSubmit={this.handleFormSubmit}>\r\n                <div className=\"form-desc\">\r\n                  <h4>{i18n.t('subscriptionForm.formTitle')}</h4>\r\n                </div>\r\n                <div className=\"bx--grid\">\r\n                  <div className=\"bx--row\">\r\n                    <div className=\"bx--col\">\r\n                      <Select\r\n                        id=\"subscriptionType\"\r\n                        name=\"subscriptionType\"\r\n                        labelText={i18n.t('subscriptionForm.subscriptionType')}\r\n                        required\r\n                        value={this.state.subscriptionType}\r\n                        onChange={this.handleChanges}\r\n                      >\r\n                        <SelectItem text={i18n.t('subscriptionForm.selectType')} value=\"\" />\r\n                        {subscriptionTypes.map((subscriptionType, i) => (\r\n                          <SelectItem key={i} text={subscriptionType} required value={subscriptionType.toLowerCase()}>\r\n                            {subscriptionType}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </Select>\r\n                    </div>\r\n                  </div>\r\n                  {this.renderForm()}\r\n                  {this.state.subscriptionType ? (\r\n                    <Button kind=\"primary\" tabIndex={0} type=\"submit\">\r\n                      {' '}\r\n                      {i18n.t('buttons.submit')}\r\n                    </Button>\r\n                  ) : (\r\n                    ''\r\n                  )}\r\n                </div>\r\n              </Form>\r\n            </div>\r\n          </div>\r\n        );\r\n      } else {\r\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withKeycloak(SubscriptionForm);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport SubsciptionForm from '../components/Forms/SubscriptionForm';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n  locale: 'locale',\r\n};\r\n\r\nclass SubsciptionFormElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <SubsciptionForm serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('subscription-form-widget', SubsciptionFormElement);\r\n"],"sourceRoot":""}