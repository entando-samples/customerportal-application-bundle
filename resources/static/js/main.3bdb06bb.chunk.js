(this["webpackJsonpcp-widgets"]=this["webpackJsonpcp-widgets"]||[]).push([[0],{106:function(t,e,a){"use strict";a.r(e);a(31);var n=a(8),s=a(9),r=a(10),i=a(11),c=a(22),o=a(5),u=a(0),l=a.n(u),d=a(20),h=a.n(d),p=a(40),m=a.n(p),b=a(78),j=a(79);m.a.defaultLocale="en",m.a.locale="en",m.a.fallbacks=!0,m.a.translations={en:b,it:j};var v=function(t){m.a.locale=t},f=m.a,O=a(126),g=a(107),x=a(127),y=a(4),k=a.n(y),D=a(6),w=a(15),S=a(118),C=a(119),T=a(120),N=a(132),P=a(108),E="customer_portal.page",M="cp_admin_config.page",U="cp_manage_subscriptions.page",I="cp_manage_users.page",V="cp_subscription.page",A="cp_ticket.page",L=function(){return window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""},z=function(t){var e=t.keycloak;return e.initialized&&e.authenticated},F=function(t,e){var a=z(t),n=e.keycloak.authenticated!==a;return a&&n},q=function(){return J("cp-admin")},R=function(){return J("cp-support")},Y=function(){return J("cp-partner")},B=function(){return J("cp-customer")},H=function(){return q()||R()},G=function(){return H()||B()||Y()},J=function(t){if(L()){var e=window.entando.keycloak.resourceAccess;if(e)for(var a in e){var n=e[a];if(n.roles&&n.roles.includes(t))return!0}}return!1},_=function(){return{headers:new Headers({Authorization:"Bearer ".concat(L()),"Content-Type":"application/json"})}},K=function(){return{headers:new Headers({Authorization:"Bearer ".concat(L()),"Content-Type":"application/x-www-form-urlencoded"})}},W=function(t){return t&&t.projectSubscriptions&&t.projectSubscriptions.find((function(t){return"ACTIVE"===t.status?t:null}))},Q=function(t,e){var a="".concat("","/").concat(e,"/").concat(t);return $(a)},$=function(t){return"".concat(t)},X=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,a);case 2:if(n=t.sent,s=Object(o.a)({},n.headers.has("X-Total-Count")?{"X-Total-Count":parseInt(n.headers.get("X-Total-Count"),10)}:{}),204!==n.status){t.next=6;break}return t.abrupt("return",{data:"",status:n.status});case 6:if(!(n.status>=200&&n.status<300)){t.next=15;break}return t.next=9,n.json();case 9:t.t1=t.sent,t.t2=s,t.t3=n.status,t.t0={data:t.t1,headers:t.t2,status:t.t3},t.next=16;break;case 15:t.t0=Promise.reject(new Error(n.statusText||n.status));case 16:return t.abrupt("return",t.t0);case 17:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Z="api/ticketing-systems",tt=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Z,"/").concat(a),s=Object(o.a)(Object(o.a)({},_()),{},{method:"DELETE"}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),et=function(){var t=Object(D.a)(k.a.mark((function t(e){var a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=window.entando.currentTicketingSystem){t.next=5;break}return t.next=3,at(e);case 3:a=t.sent.data,window.entando.currentTicketingSystem=a&&a.length?a[a.length-1]:null;case 5:return t.abrupt("return",window.entando.currentTicketingSystem);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),at=function(){var t=Object(D.a)(k.a.mark((function t(e){var a,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(e,"/").concat(Z),n=Object(o.a)(Object(o.a)({},_()),{},{method:"GET"}),t.abrupt("return",X(a,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),nt=function(){var t=Object(D.a)(k.a.mark((function t(e,a,n){var s,r,i;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(e,"/").concat(Z),r={ticketingSystem:a,secret:n},i=Object(o.a)(Object(o.a)({},_()),{},{method:"POST",body:JSON.stringify(r)}),t.abrupt("return",X(s,i));case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),st=function(){var t=Object(D.a)(k.a.mark((function t(e,a,n){var s,r,i;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(e,"/").concat(Z),r={ticketingSystem:a,secret:n},i=Object(o.a)(Object(o.a)({},_()),{},{method:"PUT",body:JSON.stringify(r)}),t.abrupt("return",X(s,i));case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),rt=a(84),it=a(2),ct=a.n(it),ot=(ct.a.oneOfType([ct.a.func,ct.a.shape({current:ct.a.elementType}),ct.a.shape(null)]),l.a.createContext(null)),ut=a(3);function lt(t){var e=function(e){Object(r.a)(c,e);var a=Object(i.a)(c);function c(){var e;Object(n.a)(this,c);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).renderWrappedComponent=function(a){var n=e.props,s=n.forwardedRef,r=Object(rt.a)(n,["forwardedRef"]);return Object(ut.jsx)(t,Object(o.a)(Object(o.a)({},r),{},{ref:s,keycloak:a}))},e}return Object(s.a)(c,[{key:"render",value:function(){return Object(ut.jsx)(ot.Consumer,{children:this.renderWrappedComponent})}}]),c}(u.Component);return e.defaultProps={forwardedRef:function(){}},Object(u.forwardRef)((function(t,a){return Object(ut.jsx)(e,Object(o.a)(Object(o.a)({},t),{},{forwardedRef:a}))}))}var dt=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;s.setState(Object(w.a)({},a,n))},s.handleFormSubmit=function(t){t.preventDefault(),s.state.ticketingSystem?s.updateTicketingSystem().then((function(){s.setState({submitMsg:f.t("submitMessages.updated"),submitColour:"#24a148"})})).catch((function(){s.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})})):s.createTicketingSystem().then((function(){s.setState({submitMsg:f.t("submitMessages.created"),submitColour:"#24a148"})})).catch((function(){s.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})}))},s.state={ticketingSystem:{},ticketingSystemType:"Jira",url:"",serviceAccount:"",serviceAccountSecret:"",systemId:"",submitMsg:"",submitColour:"black"},s}return Object(s.a)(a,[{key:"createTicketingSystem",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e,a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={url:this.state.url,serviceAccount:this.state.serviceAccount,systemId:this.state.systemId},t.next=3,nt(this.props.serviceUrl,e,this.state.serviceAccountSecret);case 3:a=t.sent.data,this.setState({ticketingSystem:a});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"updateTicketingSystem",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:this.state.ticketingSystem.id,url:this.state.url,serviceAccount:this.state.serviceAccount,systemId:this.state.systemId},t.next=3,st(this.props.serviceUrl,e,this.state.serviceAccountSecret);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"fetchData",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,et(this.props.serviceUrl);case 2:e=t.sent,this.setState({ticketingSystem:e,url:e?e.url:"",serviceAccount:e?e.serviceAccount:"",systemId:e?e.systemId:""});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){z(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.fetchData()}},{key:"deleteTicketingSystem",value:function(){var t=Object(D.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tt(this.props.serviceUrl,this.state.ticketingSystem.id);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var t=this;window.confirm("Are you sure you want to delete this ticketing system?")&&this.deleteTicketingSystem().then((function(){t.setState({submitMsg:f.t("submitMessages.deleted"),submitColour:"#24a148"}),t.fetchData()})).catch((function(){t.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})}))}},{key:"render",value:function(){var t=this;return q()?Object(ut.jsxs)("div",{className:"cp-form",children:[Object(ut.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),Object(ut.jsx)(S.a,{onSubmit:this.handleFormSubmit,children:Object(ut.jsxs)("div",{className:"bx--grid",children:[Object(ut.jsxs)("div",{className:"bx--row",children:[Object(ut.jsxs)("div",{className:"bx--col",children:[Object(ut.jsxs)(C.a,{id:"ticketingSystemType",name:"ticketingSystemType",labelText:f.t("adminConfig.integrationTicketingSystem.selectBackendTicketingSystem"),value:this.state.ticketingSystemType,onChange:this.handleChanges,children:[Object(ut.jsx)(T.a,{text:f.t("adminConfig.integrationTicketingSystem.select"),value:"ticketing-system"}),["Jira"].map((function(t,e){return Object(ut.jsx)(T.a,{text:t,value:t,children:t},e)}))]}),Object(ut.jsx)(N.a,{id:"serviceAccount",name:"serviceAccount",labelText:f.t("adminConfig.integrationTicketingSystem.userName"),value:this.state.serviceAccount,onChange:this.handleChanges}),Object(ut.jsx)(N.a,{id:"systemId",name:"systemId",labelText:f.t("adminConfig.integrationTicketingSystem.projectName"),value:this.state.systemId,onChange:this.handleChanges})]}),Object(ut.jsxs)("div",{className:"bx--col",children:[Object(ut.jsx)(N.a,{id:"url",name:"url",labelText:f.t("adminConfig.integrationTicketingSystem.url"),value:this.state.url,onChange:this.handleChanges}),Object(ut.jsx)(N.a,{id:"serviceAccountSecret",name:"serviceAccountSecret",type:"password",labelText:f.t("adminConfig.integrationTicketingSystem.password"),value:this.state.serviceAccountSecret,onChange:this.handleChanges})]})]}),Object(ut.jsxs)(P.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",f.t("buttons.submit")," "]}),this.state.ticketingSystem?Object(ut.jsxs)(P.a,{kind:"danger",onClick:function(){return t.handleDelete()},children:[" ","Delete"," "]}):null]})})]}):Object(ut.jsx)("p",{children:f.t("userMessages.unauthorized")})}}]),a}(u.Component)),ht=a(130),pt=a(70),mt=a(68),bt=a(71),jt=a(72),vt=a(74),ft=a(69),Ot=a(37),gt=a(123),xt="api/entando-versions",yt=function(){var t=Object(D.a)(k.a.mark((function t(e){var a,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(e,"/").concat(xt),n=Object(o.a)(Object(o.a)({},_()),{},{method:"GET"}),t.abrupt("return",X(a,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),kt=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(xt,"/").concat(a),s=Object(o.a)(Object(o.a)({},_()),{},{method:"GET"}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Dt=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(xt,"/").concat(a),s=Object(o.a)(Object(o.a)({},_()),{},{method:"PUT"}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),wt=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(xt),s=Object(o.a)(Object(o.a)({},_()),{},{method:"POST",body:a?JSON.stringify(a):null}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),St=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(xt),s=Object(o.a)(Object(o.a)({},_()),{},{method:"PUT",body:a?JSON.stringify(a):null}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Ct=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(xt,"/").concat(a),s=Object(o.a)(Object(o.a)({},_()),{},{method:"DELETE"}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Tt=a(133),Nt=a(131),Pt=a(121),Et=a(24),Mt=a.n(Et),Ut=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;s.setState(Object(w.a)({},a,n))},s.handleFormSubmit=function(){s.handleValidation()&&s.addProductVersion().then((function(){s.setState({submitMsg:f.t("submitMessages.added"),submitColour:"#24a148"}),s.props.updateProductVersions()})).catch((function(){s.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})}))},s.clearValues=function(){document.querySelector("#modal-form-product-version").className.includes("is-visible")||s.setState(s.baseState)},s.handleStartDateChange=function(t){s.setState({startDate:Mt()(t[0].toISOString()).format("MM/DD/YYYY")})},s.handleEndDateChange=function(t){s.setState({endDate:Mt()(t[0].toISOString()).format("MM/DD/YYYY")})},s.state={name:"",startDate:"",endDate:"",invalid:{},submitMsg:"",submitColour:"black"},s.baseState=s.state,s}return Object(s.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;return""===this.state.name&&(e=!1,t.name=!0),"undefined"!==typeof this.state.startDate&&(this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(e=!1,t.startDate=!0)),"undefined"!==typeof this.state.endDate&&(this.state.endDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(e=!1,t.endDate=!0)),this.setState({invalid:t}),e}},{key:"addProductVersion",value:function(){var t=Object(D.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=4;break}return t.next=3,wt(this.props.serviceUrl,this.state);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){document.querySelector(".add-product-version-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){var t=Object(ut.jsx)("div",{className:"bx--modal-header",children:Object(ut.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),e="modal-form-product-version";return Object(ut.jsxs)(Tt.a,{buttonTriggerText:f.t("buttons.addProductVersion"),modalHeading:f.t("adminDashboard.addProductVersion.title"),buttonTriggerClassName:"add-product-version bx--btn bx--btn--tertiary add-product-version-button",className:"modal-form",id:e,handleSubmit:this.handleFormSubmit,children:[t,Object(ut.jsx)("div",{className:"form-container",children:Object(ut.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(ut.jsx)(N.a,{id:"name"+e,name:"name",labelText:f.t("adminDashboard.addProductVersion.productVersion"),value:this.state.name,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(ut.jsx)(Nt.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleStartDateChange,children:Object(ut.jsx)(Pt.a,{id:"startDate"+e,name:"startDate",placeholder:"mm/dd/yyyy",labelText:f.t("adminDashboard.addProductVersion.productVersionStartDate"),value:this.state.startDate,type:"text",invalidText:f.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(ut.jsx)(Nt.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleEndDateChange,children:Object(ut.jsx)(Pt.a,{id:"endDate"+e,name:"endDate",placeholder:"mm/dd/yyyy",labelText:f.t("adminDashboard.addProductVersion.productVersionEndDate"),value:this.state.endDate,type:"text",invalidText:f.t("validation.invalid.date"),invalid:this.state.invalid.endDate})})]})}),t]})}}]),a}(u.Component)),It=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;s.setState(Object(w.a)({},a,n))},s.handleStartDateChange=function(t){s.setState({startDate:Mt()(t[0].toISOString()).format("MM/DD/YYYY")})},s.handleEndDateChange=function(t){s.setState({endDate:Mt()(t[0].toISOString()).format("MM/DD/YYYY")})},s.handleFormSubmit=function(){if(s.handleValidation()){var t={id:s.props.version.id,name:s.state.name,startDate:Mt()(s.state.startDate).format(),endDate:Mt()(s.state.endDate).format()};s.versionPut(t).then((function(){s.setState({submitMsg:f.t("submitMessages.updated"),submitColour:"#24a148"}),s.props.updateProductVersions()})).catch((function(){s.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})}))}},s.state={name:"",startDate:"",endDate:"",invalid:{},modalId:"",buttonId:"",submitMsg:"",submitColour:"black"},s}return Object(s.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;return""===this.state.name&&(e=!1,t.name=!0),"undefined"!==typeof this.state.startDate&&(this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(e=!1,t.startDate=!0)),"undefined"!==typeof this.state.endDate&&(this.state.endDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(e=!1,t.endDate=!0)),this.setState({invalid:t}),e}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.getVersionDetails()}},{key:"getVersionDetails",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,kt(this.props.serviceUrl,this.props.version.id);case 2:e=t.sent,this.setState({name:e.data.name,startDate:Mt()(e.data.startDate).format("MM/DD/YYYY"),endDate:Mt()(e.data.endDate).format("MM/DD/YYYY"),modalId:"modal-form-version-edit-"+e.data.id,buttonId:"edit-version-button-"+e.data.id});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"versionPut",value:function(){var t=Object(D.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,St(this.props.serviceUrl,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){z(this.props)&&(this.getVersionDetails(),document.querySelector(".edit-version-button-"+this.props.version.id).addEventListener("click",this.clearValues,!1))}},{key:"render",value:function(){var t=Object(ut.jsx)("div",{className:"bx--modal-header",children:Object(ut.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),e="bx--btn bx--btn--ghost edit-version-button-"+this.props.version.id,a=this.state.modalId;return Object(ut.jsxs)(Tt.a,{buttonTriggerText:f.t("buttons.edit"),modalHeading:f.t("adminDashboard.addProject.editTitle"),buttonTriggerClassName:e,className:"modal-form",id:this.state.modalId,handleSubmit:this.handleFormSubmit,primaryButtonText:f.t("modalText.save"),secondaryButtonText:f.t("modalText.cancel"),children:[t,Object(ut.jsx)("div",{className:"form-container",children:Object(ut.jsxs)(S.a,{onSubmit:this.handleFormSubmit,id:"form"+a,children:[Object(ut.jsx)(N.a,{id:"name"+a,name:"name",labelText:f.t("adminDashboard.addProject.projectName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(ut.jsx)(Nt.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleStartDateChange,value:this.state.startDate,children:Object(ut.jsx)(Pt.a,{id:"startDate"+a,name:"startDate",placeholder:"mm/dd/yyyy",labelText:f.t("subscriptionDetails.startDate")+" *",onChange:this.handleChanges,type:"text",invalidText:f.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(ut.jsx)(Nt.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleEndDateChange,id:"endDate"+a,name:"endDate",value:this.state.endDate,children:Object(ut.jsx)(Pt.a,{id:"endDate"+a,name:"endDate",placeholder:"mm/dd/yyyy",labelText:f.t("subscriptionDetails.endDate")+" *",onChange:this.handleChanges,type:"text",invalidText:f.t("validation.invalid.date"),invalid:this.state.invalid.endDate})})]})}),t]})}}]),a}(u.Component)),Vt=function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(){var t;return Object(n.a)(this,a),(t=e.call(this)).handleDeleteVersion=function(e,a){e.preventDefault(),window.confirm("Are you sure you want to delete this Entando version?")&&t.deleteVersion(a).then((function(){t.setState({submitMsg:f.t("submitMessages.deleted"),submitColour:"#24a148"}),t.updateProductVersions()})).catch((function(){t.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})}))},t.updateProductVersions=function(){t.getProductVersions()},t.state={versions:""},t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){H()&&this.getProductVersions()}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&H()&&this.getProductVersions()}},{key:"getProductVersions",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=5;break}return t.next=3,yt(this.props.serviceUrl);case 3:e=t.sent,this.setState({versions:e.data});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"deleteVersion",value:function(){var t=Object(D.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=4;break}return t.next=3,Ct(this.props.serviceUrl,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"handleToggleChange",value:function(){var t=Object(D.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Dt(this.props.serviceUrl,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return H()?Object(ut.jsxs)("div",{children:[Object(ut.jsx)(ht.a,{rows:Lt,headers:At,children:function(e){e.rows;var a=e.headers,n=e.getHeaderProps,s=e.getTableProps;return Object(ut.jsx)(pt.a,{children:Object(ut.jsxs)(mt.a,Object(o.a)(Object(o.a)({},s()),{},{children:[Object(ut.jsx)(bt.a,{children:Object(ut.jsx)(jt.a,{children:a.map((function(t){return Object(ut.jsx)(vt.a,Object(o.a)(Object(o.a)({},n({header:t})),{},{children:t.header}))}))})}),Object(ut.jsx)(ft.a,{children:0!==Object.keys(t.state.versions).length?t.state.versions.map((function(e,a){return Object(ut.jsxs)(jt.a,{children:[Object(ut.jsx)(Ot.a,{children:e.name}),Object(ut.jsx)(Ot.a,{children:Object(ut.jsx)(gt.a,{size:"sm",onClick:function(){return t.handleToggleChange(e.id)},"aria-label":"toggle button",id:"toggle"+e.id,defaultToggled:e.status})}),Object(ut.jsx)(Ot.a,{children:e.startDate}),Object(ut.jsx)(Ot.a,{children:e.endDate}),Object(ut.jsx)(Ot.a,{children:Object(ut.jsxs)("div",{style:{display:"flex"},children:[Object(ut.jsx)(It,{version:e,serviceUrl:t.props.serviceUrl,updateProductVersions:t.updateProductVersions},e.id),Object(ut.jsx)(P.a,{kind:"ghost",onClick:function(a){return t.handleDeleteVersion(a,e.id)},style:{display:"flex",width:"100%",color:"red"},children:f.t("buttons.delete")})]})})]},a)})):null})]}))})}}),Object(ut.jsx)("br",{}),Object(ut.jsx)(Ut,{serviceUrl:this.props.serviceUrl,updateProductVersions:this.updateProductVersions})]}):Object(ut.jsx)("p",{children:f.t("userMessages.unauthorized")})}}]),a}(u.Component),At=[{header:f.t("adminConfig.manageProductVersion.entandoVersion"),key:"entVersion"},{header:f.t("adminConfig.manageProductVersion.status"),key:"status"},{header:f.t("adminConfig.manageProductVersion.startDate"),key:"startDate"},{header:f.t("adminConfig.manageProductVersion.supportEndDate"),key:"endDate"},{header:f.t("customerDashboard.action"),key:"action"}],Lt=[{id:"a",entVersion:"5.2",status:Object(ut.jsx)(gt.a,{size:"sm","aria-label":"toggle button",defaultToggled:!0,id:"status-1"}),startDate:"April, 2018",endDate:"April, 2022"},{id:"b",entVersion:"6.3",status:Object(ut.jsx)(gt.a,{size:"sm","aria-label":"toggle button",id:"status-2"}),startDate:"Jile, 2019",endDate:"April, 2023"},{id:"c",entVersion:"6.2",status:Object(ut.jsx)(gt.a,{size:"sm","aria-label":"toggle button",defaultToggled:!0,id:"status-3"}),startDate:"September, 2020",endDate:"April, 2024"}],zt=lt(Vt),Ft=a(124),qt=a(125),Rt=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(){return Object(n.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=Q(E,this.props.locale),e=this.props.customer||{},a=this.props.project;a&&(e=a.customer||{});var n=this.props.subscription?this.props.subscription:W(a);return Object(ut.jsxs)(Ft.a,{style:{margin:"1em 0"},children:[Object(ut.jsx)(qt.a,{href:t,children:f.t("customerDashboard.customerPortal")}),e&&e.name&&Object(ut.jsx)(qt.a,{href:"".concat(t,"#/customer-details/").concat(e.id),children:e.name}),a&&a.name&&n&&n.id&&Object(ut.jsx)(qt.a,{href:"".concat(t,"#/subscription-details/").concat(n.id),children:a.name})]})}}]),a}(u.Component)),Yt=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).state={loading:!0},s.adminConfig=[{label:Object(ut.jsxs)("div",{children:[Object(ut.jsx)("p",{className:"title",children:f.t("adminConfig.integrationTicketingSystem.title")}),Object(ut.jsx)("p",{className:"desc",children:f.t("adminConfig.integrationTicketingSystem.desc")})]}),content:Object(ut.jsx)(dt,{serviceUrl:s.props.serviceUrl})},{label:Object(ut.jsxs)("div",{children:[Object(ut.jsx)("p",{className:"title",children:f.t("adminConfig.manageProductVersion.title")}),Object(ut.jsx)("p",{className:"desc",children:f.t("adminConfig.manageProductVersion.desc")})]}),content:Object(ut.jsx)(zt,{serviceUrl:s.props.serviceUrl})}],s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){z(this.props)&&this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?null:q()?Object(ut.jsxs)("div",{id:"entando-customer-portal",children:[Object(ut.jsx)(Rt,{locale:this.props.locale}),Object(ut.jsxs)("div",{className:"form-container",children:[Object(ut.jsxs)(O.a,{children:[Object(ut.jsx)("p",{className:"title",children:f.t("adminConfig.title")}),Object(ut.jsx)("p",{className:"desc",children:f.t("adminConfig.desc")})]}),Object(ut.jsx)(g.a,{children:this.adminConfig.map((function(t,e){return Object(ut.jsx)(x.a,{index:e,title:t.label,description:t.description,children:Object(ut.jsx)("div",{children:t.content})},e.toString())}))})]})]}):Object(ut.jsx)("p",{children:f.t("userMessages.unauthorized")})}}]),a}(l.a.Component)),Bt=function(t,e){return window.addEventListener(t,e),function(){window.removeEventListener(t,e)}},Ht="keycloak",Gt=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Jt="locale",_t="service-url",Kt=function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(n.a)(this,a);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).keycloak=Gt(),t}return Object(s.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Gt()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=Bt(Ht,(function(){t.keycloak=Object(o.a)(Object(o.a)({},Gt()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(_t)||"",e=this.getAttribute(Jt)||"";v(e),h.a.render(Object(ut.jsx)(ot.Provider,{value:this.keycloak,children:Object(ut.jsx)(Yt,{serviceUrl:t,locale:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.get("cp-admin-configuration")||customElements.define("cp-admin-configuration",Kt);var Wt=a(30),Qt=a(17),$t=a(122),Xt=a(134),Zt=a(129),te=a(128),ee="api/customers",ae=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(ee,"/").concat(a),s=Object(o.a)(Object(o.a)({},_()),{},{method:"DELETE"}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),ne=function(){var t=Object(D.a)(k.a.mark((function t(e){var a,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=$("".concat(e,"/").concat(ee)),n=Object(o.a)(Object(o.a)({},_()),{},{method:"GET"}),t.abrupt("return",X(a,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),se=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=$("".concat(e,"/").concat(ee,"/").concat(a)),s=Object(o.a)(Object(o.a)({},_()),{},{method:"GET"}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),re=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(ee),s=Object(o.a)(Object(o.a)({},_()),{},{method:"POST",body:a?JSON.stringify(a):null}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),ie=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(ee),s=Object(o.a)(Object(o.a)({},_()),{},{method:"PUT",body:a?JSON.stringify(a):null}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),ce=function(){var t=Object(D.a)(k.a.mark((function t(e,a,n){var s,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(e,"/").concat(ee,"/").concat(a,"/projects/").concat(n),r=Object(o.a)(Object(o.a)({},_()),{},{method:"POST"}),t.abrupt("return",X(s,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),oe=function(){var t=Object(D.a)(k.a.mark((function t(e,a,n){var s,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(e,"/").concat(ee,"/").concat(a,"/projects/").concat(n),r=Object(o.a)(Object(o.a)({},_()),{},{method:"DELETE"}),t.abrupt("return",X(s,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),ue=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;s.setState(Object(w.a)({},a,n))},s.handleFormSubmit=function(){if(s.handleValidation()){var t={name:s.state.name,customerNumber:s.state.customerNumber,contactName:s.state.contactName,contactPhone:s.state.contactPhone,contactEmail:s.state.contactEmail,notes:s.state.notes};s.customerPost(t).then((function(){s.setState({submitMsg:f.t("submitMessages.added"),submitColour:"#24a148"}),s.props.updateCustomerList()})).catch((function(){s.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})}))}},s.clearValues=function(){document.querySelector("#modal-form-customer").className.includes("is-visible")||s.setState(s.baseState)},s.state={name:"",customerNumber:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"},s.baseState=s.state,s}return Object(s.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;if(""===this.state.name&&(e=!1,t.name=!0),""===this.state.customerNumber&&(e=!1,t.customerNumber=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1===this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(e=!1,t.contactEmail=!0)}return this.setState({invalid:t}),e}},{key:"customerPost",value:function(){var t=Object(D.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=4;break}return t.next=3,re(this.props.serviceUrl,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){document.querySelector(".add-customer-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){var t=Object(ut.jsx)("div",{className:"bx--modal-header",children:Object(ut.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),e="modal-form-customer";return Object(ut.jsxs)(Tt.a,{buttonTriggerText:f.t("buttons.addCustomer"),modalHeading:f.t("adminDashboard.addCustomer.title"),buttonTriggerClassName:"add-customer bx--btn bx--btn--tertiary add-customer-button",className:"modal-form",id:e,handleSubmit:this.handleFormSubmit,primaryButtonText:f.t("modalText.save"),secondaryButtonText:f.t("modalText.cancel"),children:[t,Object(ut.jsx)("div",{className:"form-container",children:Object(ut.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(ut.jsx)(N.a,{id:"name"+e,name:"name",labelText:f.t("adminDashboard.addCustomer.customerName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(ut.jsx)(N.a,{id:"customerNumber"+e,name:"customerNumber",labelText:f.t("adminDashboard.addCustomer.customerNumber")+" *",value:this.state.customerNumber,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.customerNumber}),Object(ut.jsx)(N.a,{id:"contactName"+e,name:"contactName",labelText:f.t("adminDashboard.addCustomer.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(ut.jsx)(N.a,{id:"contactPhone"+e,name:"contactPhone",labelText:f.t("adminDashboard.addCustomer.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(ut.jsx)(N.a,{id:"contactEmail"+e,name:"contactEmail",labelText:f.t("adminDashboard.addCustomer.contactEmail")+" *",value:this.state.contactEmail,onChange:this.handleChanges,invalidText:f.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(ut.jsx)(te.a,{id:"notes"+e,name:"notes",labelText:f.t("adminDashboard.addCustomer.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),t]})}}]),a}(u.Component)),le="api/partners",de=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(le),s=Object(o.a)(Object(o.a)({},_()),{},{method:"POST",body:a?JSON.stringify(a):null}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),he="api/projects",pe=function(){var t=Object(D.a)(k.a.mark((function t(e){var a,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=$("".concat(e,"/").concat(he)),n=Object(o.a)(Object(o.a)({},_()),{},{method:"GET"}),t.abrupt("return",X(a,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),me=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=$("".concat(e,"/").concat(he,"/customer/").concat(a)),s=Object(o.a)(Object(o.a)({},_()),{},{method:"GET"}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),be=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=$("".concat(e,"/").concat(he,"/").concat(a)),s=Object(o.a)(Object(o.a)({},_()),{},{method:"GET"}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),je=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(he),s=Object(o.a)(Object(o.a)({},_()),{},{method:"POST",body:a?JSON.stringify(a):null}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),ve=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(he),s=Object(o.a)(Object(o.a)({},_()),{},{method:"PUT",body:a?JSON.stringify(a):null}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),fe=function(){var t=Object(D.a)(k.a.mark((function t(e,a,n){var s,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(e,"/").concat(he,"/").concat(a,"/subscriptions/").concat(n),r=Object(o.a)(Object(o.a)({},_()),{},{method:"POST"}),t.abrupt("return",X(s,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),Oe=function(){var t=Object(D.a)(k.a.mark((function t(e,a,n){var s,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(e,"/").concat(he,"/").concat(a,"/users/").concat(n),r=Object(o.a)(Object(o.a)({},_()),{},{method:"POST"}),t.abrupt("return",X(s,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),ge=function(){var t=Object(D.a)(k.a.mark((function t(e,a,n){var s,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(e,"/").concat(he,"/").concat(a,"/partners/").concat(n),r=Object(o.a)(Object(o.a)({},_()),{},{method:"DELETE"}),t.abrupt("return",X(s,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),xe=function(){var t=Object(D.a)(k.a.mark((function t(e,a,n){var s,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(e,"/").concat(he,"/").concat(a,"/subscriptions/").concat(n),r=Object(o.a)(Object(o.a)({},_()),{},{method:"DELETE"}),t.abrupt("return",X(s,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),ye=function(){var t=Object(D.a)(k.a.mark((function t(e,a,n){var s,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(e,"/").concat(he,"/").concat(a,"/users/").concat(n),r=Object(o.a)(Object(o.a)({},_()),{},{method:"DELETE"}),t.abrupt("return",X(s,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),ke=function(){var t=Object(D.a)(k.a.mark((function t(e,a,n){var s,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(e,"/").concat(he,"/").concat(a,"/partners/").concat(n),r=Object(o.a)(Object(o.a)({},_()),{},{method:"POST"}),t.abrupt("return",X(s,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),De=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(he,"/").concat(a,"/users/"),s=Object(o.a)(Object(o.a)({},_()),{},{method:"GET"}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),we=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(he,"/").concat(a,"/subscriptions/"),s=Object(o.a)(Object(o.a)({},_()),{},{method:"GET"}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Se=function(t){var e=t.children,a=t.keycloak;return a&&a.initialized&&a.authenticated?e:null},Ce=function(t){var e=t.children,a=t.keycloak;return a&&a.initialized&&a.authenticated?null:e},Te=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;s.setState(Object(w.a)({},a,n))},s.handleFormSubmit=function(){if(s.handleValidation()){var t={name:s.state.name,partnerNumber:s.state.partnerNumber,notes:s.state.notes};s.partnerPost(t).then((function(){s.setState({submitMsg:f.t("submitMessages.added"),submitColour:"#24a148"}),s.props.updateCustomerList()})).catch((function(){s.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})}))}},s.clearValues=function(){document.querySelector("#modal-form-partner").className.includes("is-visible")||s.setState({projectId:"",name:"",partnerNumber:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"})},s.state={projectList:{},projectId:"",name:"",partnerNumber:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){z(this.props)&&(this.fetchData(),document.querySelector(".add-partner-button").addEventListener("click",this.clearValues,!1))}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.fetchData()}},{key:"handleValidation",value:function(){var t={},e=!0;return""!==this.state.projectId&&"project-list"!==this.state.projectId||(e=!1,t.projectId=!0),""===this.state.name&&(e=!1,t.name=!0),""===this.state.partnerNumber&&(e=!1,t.partnerNumber=!0),this.setState({invalid:t}),e}},{key:"fetchData",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=12;break}return e={},t.prev=2,t.next=5,pe(this.props.serviceUrl);case 5:e=t.sent.data,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0);case 11:this.setState({projectList:e||{}});case 12:case"end":return t.stop()}}),t,this,[[2,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"partnerPost",value:function(){var t=Object(D.a)(k.a.mark((function t(e){var a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=7;break}return t.next=3,de(this.props.serviceUrl,e);case 3:return a=t.sent,t.next=6,ke(this.props.serviceUrl,this.state.projectId,a.data.id);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=Object(ut.jsx)("div",{className:"bx--modal-header",children:Object(ut.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),e=this.props.keycloak,a="modal-form-partner";return Object(ut.jsx)(Se,{keycloak:e,children:Object(ut.jsxs)(Tt.a,{buttonTriggerText:f.t("buttons.addPartner"),modalHeading:f.t("adminDashboard.addPartner.title"),buttonTriggerClassName:"add-partner bx--btn bx--btn--tertiary add-partner-button",className:"modal-form",id:a,handleSubmit:this.handleFormSubmit,primaryButtonText:f.t("modalText.save"),secondaryButtonText:f.t("modalText.cancel"),children:[t,Object(ut.jsx)("div",{className:"form-container",children:Object(ut.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(ut.jsxs)(C.a,{id:"projectId"+a,name:"projectId",labelText:f.t("adminDashboard.addPartner.projectList")+" *",value:this.state.projectId,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.projectId,children:[Object(ut.jsx)(T.a,{text:f.t("adminDashboard.addPartner.selectProject"),value:"project-list"}),0!==Object.keys(this.state.projectList).length?this.state.projectList.map((function(t,e){return Object(ut.jsx)(T.a,{text:t.name,value:t.id,children:t.name},e)})):null]}),Object(ut.jsx)(N.a,{id:"name"+a,name:"name",labelText:f.t("adminDashboard.addPartner.partnerName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(ut.jsx)(N.a,{id:"partnerNumber"+a,name:"partnerNumber",labelText:f.t("adminDashboard.addPartner.partnerNumber")+" *",value:this.state.partnerNumber,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.partnerNumber}),Object(ut.jsx)(te.a,{name:"notes",labelText:f.t("adminDashboard.addPartner.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),t]})})}}]),a}(u.Component)),Ne=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;s.setState(Object(w.a)({},a,n))},s.handleFormSubmit=function(){if(s.handleValidation()){for(var t={name:s.state.name,description:s.state.description,systemId:s.state.systemId,contactName:s.state.contactName,contactPhone:s.state.contactPhone,contactEmail:s.state.contactEmail,notes:s.state.notes},e=0;e<s.state.projects.length;e++)if(t.systemId===s.state.projects[e].systemId&&""!==t.systemId.trim())return void window.alert("That system id is already in use in another project");s.projectPost(t).then((function(){s.setState({submitMsg:f.t("submitMessages.added"),submitColour:"#24a148"}),s.props.updateCustomerList(),s.getAllProjects()})).catch((function(){s.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})}))}},s.clearValues=function(){document.querySelector("#modal-form-project").className.includes("is-visible")||s.setState({customerId:"",name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{}})},s.state={projects:{},customerList:{},customerId:"",name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"},s}return Object(s.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;if(""!==this.state.customerId&&"customer-list"!==this.state.customerId||(e=!1,t.customerId=!0),""===this.state.name&&(e=!1,t.name=!0),""===this.state.description&&(e=!1,t.description=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1===this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(e=!1,t.contactEmail=!0)}return this.setState({invalid:t}),e}},{key:"getAllProjects",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={},t.prev=1,t.next=4,pe(this.props.serviceUrl);case 4:e=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0);case 10:this.setState({projects:e.data?e.data:{}});case 11:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&(this.getCustomers(),this.getAllProjects())}},{key:"getCustomers",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=12;break}return e={},t.prev=2,t.next=5,ne(this.props.serviceUrl);case 5:e=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0);case 11:this.setState({customerList:e});case 12:case"end":return t.stop()}}),t,this,[[2,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"projectPost",value:function(){var t=Object(D.a)(k.a.mark((function t(e){var a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=7;break}return t.next=3,je(this.props.serviceUrl,e);case 3:return a=t.sent,t.next=6,ce(this.props.serviceUrl,this.state.customerId,a.data.id);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getCustomers(),this.getAllProjects(),document.querySelector(".add-project-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){var t=Object(ut.jsx)("div",{className:"bx--modal-header",children:Object(ut.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),e="modal-form-project";return Object(ut.jsxs)(Tt.a,{buttonTriggerText:f.t("buttons.addProject"),modalHeading:f.t("adminDashboard.addProject.title"),buttonTriggerClassName:"add-project bx--btn bx--btn--tertiary add-project-button",className:"modal-form",id:e,handleSubmit:this.handleFormSubmit,primaryButtonText:f.t("modalText.save"),secondaryButtonText:f.t("modalText.cancel"),children:[t,Object(ut.jsx)("div",{className:"form-container",children:Object(ut.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(ut.jsxs)(C.a,{id:"customerId"+e,name:"customerId",labelText:f.t("adminDashboard.addProject.customerList")+" *",value:this.state.customerId,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.customerId,children:[Object(ut.jsx)(T.a,{text:f.t("adminDashboard.addProject.selectCustomer"),value:"customer-list"}),0!==Object.keys(this.props.allCustomers).length?this.props.allCustomers.map((function(t,e){return Object(ut.jsx)(T.a,{text:t.name,value:t.id,children:t.name},e)})):null]}),Object(ut.jsx)(N.a,{id:"name"+e,name:"name",labelText:f.t("adminDashboard.addProject.projectName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(ut.jsx)(N.a,{id:"description"+e,name:"description",labelText:f.t("adminDashboard.addProject.projectDesc")+" *",value:this.state.description,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(ut.jsx)(N.a,{id:"systemId"+e,name:"systemId",labelText:f.t("adminDashboard.addProject.systemId"),value:this.state.systemId,onChange:this.handleChanges}),Object(ut.jsx)(N.a,{id:"contactName"+e,name:"contactName",labelText:f.t("adminDashboard.addProject.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(ut.jsx)(N.a,{id:"contactPhone"+e,name:"contactPhone",labelText:f.t("adminDashboard.addProject.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(ut.jsx)(N.a,{id:"contactEmail"+e,name:"contactEmail",labelText:f.t("adminDashboard.addProject.contactEmail")+" *",value:this.state.contactEmail,onChange:this.handleChanges,invalidText:f.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(ut.jsx)(te.a,{id:"notes"+e,name:"notes",labelText:f.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),t]})}}]),a}(u.Component)),Pe=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;s.setState(Object(w.a)({},a,n))},s.handleFormSubmit=function(){if(s.handleValidation()){for(var t={id:s.props.project.id,customer:s.props.project.customer,name:s.state.name,description:s.state.description,systemId:s.state.systemId,contactName:s.state.contactName,contactPhone:s.state.contactPhone,contactEmail:s.state.contactEmail,notes:s.state.notes},e=0;e<s.props.allProjects.length;e++)if(t.systemId===s.props.allProjects[e].systemId&&t.id!==s.props.allProjects[e].id&&""!==t.systemId.trim())return void window.alert("That system id is already in use in another project");s.projectPut(t).then((function(){s.setState({submitMsg:f.t("submitMessages.updated"),submitColour:"#24a148"}),s.props.updateProjectList()})).catch((function(){s.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})}))}},s.clearValues=function(){document.querySelector("#"+s.state.modalId).className.includes("is-visible")||s.setState({name:s.props.project.name,description:s.props.project.description,systemId:s.props.project.systemId,contactName:s.props.project.contactName,contactPhone:s.props.project.contactPhone,contactEmail:s.props.project.contactEmail,notes:s.props.project.notes,invalid:{}})},s.state={projects:{},customerList:{},customerId:"",name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},modalId:"",buttonId:"",submitMsg:"",submitColour:"black"},s}return Object(s.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;if(""===this.state.name&&(e=!1,t.name=!0),""===this.state.description&&(e=!1,t.description=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1===this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(e=!1,t.contactEmail=!0)}return this.setState({invalid:t}),e}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&(this.getCustomers(),this.getAllProjects(),this.getProjectDetails())}},{key:"getCustomers",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=5;break}return t.next=3,ne(this.props.serviceUrl);case 3:e=t.sent,this.setState({customerList:e});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getProjectDetails",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=5;break}return t.next=3,be(this.props.serviceUrl,this.props.project.id);case 3:e=t.sent,this.setState({name:e.data.name,description:e.data.description,systemId:e.data.systemId,contactName:e.data.contactName,contactPhone:e.data.contactPhone,contactEmail:e.data.contactEmail,notes:e.data.notes,modalId:"modal-form-project-edit-"+e.data.id,buttonId:"edit-project-button-"+e.data.id});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getAllProjects",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe(this.props.serviceUrl);case 2:e=t.sent,this.setState({projects:e.data});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"projectPut",value:function(){var t=Object(D.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=4;break}return t.next=3,ve(this.props.serviceUrl,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){z(this.props)&&(this.getCustomers(),this.getAllProjects(),this.getProjectDetails(),document.querySelector(".edit-project-button-"+this.props.project.id).addEventListener("click",this.clearValues,!1))}},{key:"render",value:function(){var t=Object(ut.jsx)("div",{className:"bx--modal-header",children:Object(ut.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),e="dropdown-button-button bx--btn bx--btn--ghost edit-project-button-"+this.props.project.id,a=this.state.modalId;return Object(ut.jsxs)(Tt.a,{buttonTriggerText:f.t("buttons.edit"),modalHeading:f.t("adminDashboard.addProject.editTitle"),buttonTriggerClassName:e,className:"modal-form",id:this.state.modalId,handleSubmit:this.handleFormSubmit,primaryButtonText:f.t("modalText.save"),secondaryButtonText:f.t("modalText.cancel"),children:[t,Object(ut.jsx)("div",{className:"form-container",children:Object(ut.jsxs)(S.a,{onSubmit:this.handleFormSubmit,children:[Object(ut.jsx)(N.a,{id:"name"+a,name:"name",labelText:f.t("adminDashboard.addProject.projectName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(ut.jsx)(N.a,{id:"description"+a,name:"description",labelText:f.t("adminDashboard.addProject.projectDesc")+" *",value:this.state.description,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(ut.jsx)(N.a,{id:"systemId"+a,name:"systemId",labelText:f.t("adminDashboard.addProject.systemId"),value:this.state.systemId,onChange:this.handleChanges}),Object(ut.jsx)(N.a,{id:"contactName"+a,name:"contactName",labelText:f.t("adminDashboard.addProject.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(ut.jsx)(N.a,{id:"contactPhone"+a,name:"contactPhone",labelText:f.t("adminDashboard.addProject.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(ut.jsx)(N.a,{id:"contactEmail"+a,name:"contactEmail",labelText:f.t("adminDashboard.addProject.contactEmail")+" *",value:this.state.contactEmail,onChange:this.handleChanges,invalidText:f.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(ut.jsx)(te.a,{name:"notes",labelText:f.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),t]})}}]),a}(u.Component)),Ee=function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).handleRemovePartner=function(t,e,a){t.preventDefault(),window.confirm("Are you sure you want to remove this partner from the project?")&&s.removePartner(e,a).then((function(t){s.setState({project:t.data,submitMsg:f.t("submitMessages.deleted"),submitColour:"#24a148"}),s.props.updateProjectList()})).catch((function(t){console.log(t),s.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})}))},s.state={projectId:s.props.project.id,project:s.props.project},s.headerData=[{header:f.t("adminDashboard.addPartner.partnerName"),key:"partner"},{header:f.t("adminDashboard.addPartner.partnerNumber"),key:"partnerNumber"},{header:f.t("adminDashboard.addPartner.notes"),key:"notes"},{header:f.t("customerDashboard.action"),key:"action"}],s}return Object(s.a)(a,[{key:"removePartner",value:function(){var t=Object(D.a)(k.a.mark((function t(e,a){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!H()){t.next=4;break}return t.next=3,ge(this.props.serviceUrl,e,a);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=Object(ut.jsx)("div",{className:"bx--modal-header",children:Object(ut.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})});return Object(ut.jsxs)(Tt.a,{buttonTriggerText:f.t("buttons.managePartners"),modalHeading:f.t("adminDashboard.managePartners.title"),buttonTriggerClassName:"add-partner bx--btn bx--btn--tertiary add-partner-button",className:"modal-form",id:"modal-form-manage-partners",hasForm:!1,primaryButtonText:f.t("modalText.done"),secondaryButtonText:null,children:[e,Object(ut.jsx)("div",{children:Object(ut.jsx)(ht.a,{rows:Me,headers:this.headerData,children:function(e){e.rows;var a=e.headers,n=e.getHeaderProps,s=e.getTableProps;return Object(ut.jsx)(pt.a,{description:f.t("customerDashboard.tableDesc"),children:Object(ut.jsxs)(mt.a,Object(o.a)(Object(o.a)({},s()),{},{children:[Object(ut.jsx)(bt.a,{children:Object(ut.jsx)(jt.a,{children:a.map((function(t){return Object(ut.jsx)(vt.a,Object(o.a)(Object(o.a)({},n({header:t})),{},{children:t.header}))}))},"headerRow")}),Object(ut.jsx)(ft.a,{children:t.state.project.partners.map((function(e,a){return Object(ut.jsxs)(jt.a,{children:[Object(ut.jsx)(Ot.a,{children:e.name}),Object(ut.jsx)(Ot.a,{children:e.partnerNumber}),Object(ut.jsx)(Ot.a,{children:e.notes}),Object(ut.jsx)(Ot.a,{children:Object(ut.jsxs)("div",{children:[Object(ut.jsx)(P.a,{kind:"ghost",onClick:function(a){return t.handleRemovePartner(a,t.state.projectId,e.id)},style:{display:"block",width:"100%",color:"red"},children:f.t("buttons.delete")}),Object(ut.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}})]})})]},"partner"+a)}))})]}))})}})}),e]})}}]),a}(u.Component),Me=[{id:"a",name:"Partner 1",partnerNumber:"123"},{id:"b",name:"Partner 2",partnerNumber:"456"}],Ue=lt(Ee),Ie=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(){var t;return Object(n.a)(this,a),(t=e.call(this)).handleClick=function(){t.state.showMenu?document.removeEventListener("mousedown",t.handleOutsideClick,!1):document.addEventListener("mousedown",t.handleOutsideClick,!1),t.setState((function(t){return{showMenu:!t.showMenu}}))},t.handleOutsideClick=function(e){t.node&&!t.node.contains(e.target)&&t.handleClick()},t.state={showMenu:!1},t}return Object(s.a)(a,[{key:"render",value:function(){var t=this,e=q(),a=Object(ut.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}}),n=Object(ut.jsx)(P.a,{onClick:this.handleClick,style:{padding:"10px 20px"},kind:"tertiary",children:"+"}),s=Object(ut.jsxs)(ut.Fragment,{children:[Object(ut.jsx)(Pe,{allProjects:this.props.allProjects,project:this.props.project,serviceUrl:this.props.serviceUrl,updateProjectList:this.props.updateProjectList},this.props.project.id),a]}),r=this.props.subscription?"&subscription="+this.props.subscription.id:"",i=Object(ut.jsxs)(ut.Fragment,{children:[Object(ut.jsx)("a",{href:"".concat(Q(V,this.props.locale),"?project=").concat(this.props.project.id).concat(r),style:{textDecoration:"none"},children:Object(ut.jsx)(P.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Subscription Request",children:f.t("buttons.subscriptionRequest")})}),a]}),c=Object(ut.jsxs)(ut.Fragment,{children:[Object(ut.jsx)(Ue,{project:this.props.project,serviceUrl:this.props.serviceUrl,updateProjectList:this.props.updateProjectList},this.props.project.id),a]}),o=Object(ut.jsxs)(ut.Fragment,{children:[Object(ut.jsx)("a",{href:"".concat(Q(I,this.props.locale),"?project=").concat(this.props.project.id),style:{textDecoration:"none"},children:Object(ut.jsx)(P.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Manage Users",children:f.t("buttons.manageUsers")})}),a]}),u=Object(ut.jsxs)(ut.Fragment,{children:[Object(ut.jsx)("a",{href:"".concat(Q(U,this.props.locale),"?project=").concat(this.props.project.id),style:{textDecoration:"none"},children:Object(ut.jsx)(P.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Manage Subscriptions",children:f.t("buttons.manageSubscriptions")})}),a]}),l=Object(ut.jsxs)(ut.Fragment,{children:[Object(ut.jsx)("a",{href:"".concat(Q(A,this.props.locale),"?project=").concat(this.props.project.id),style:{textDecoration:"none"},children:Object(ut.jsx)(P.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Open Ticket",children:f.t("buttons.openTicket")})}),a]}),d=this.props.ticketingSystem,h=d&&d.url&&Object(ut.jsxs)(ut.Fragment,{children:[Object(ut.jsx)("a",{href:d.url.substr(0,d.url.indexOf("/rest"))+"/issues/?jql=Organizations="+this.props.project.systemId,style:{textDecoration:"none"},target:"_blank",rel:"noreferrer",children:Object(ut.jsx)(P.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"View All Tickets",children:f.t("buttons.viewAllTickets")})}),a]}),p=Object(ut.jsxs)(ut.Fragment,{children:[Object(ut.jsx)(P.a,{kind:"ghost",onClick:function(e){return t.props.handleDeleteProject(e,t.props.project.id)},style:{display:"block",width:"100%",color:"red"},children:f.t("buttons.delete")}),a]});return this.props.subscription?Object(ut.jsxs)(ut.Fragment,{children:[n,this.state.showMenu&&Object(ut.jsxs)("div",{className:"menu",style:{zIndex:"100",position:"absolute",backgroundColor:"white"},ref:function(e){t.node=e},children:[a,Object(ut.jsx)(Wt.c,{to:"/subscription-details/".concat(this.props.subscription.id),style:{textDecoration:"none"},children:Object(ut.jsx)(P.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"View",children:f.t("buttons.view")})}),a,e&&s,l,h,!e&&i,e&&Object(ut.jsxs)(ut.Fragment,{children:[u,o,c,p]})]})]}):Object(ut.jsxs)(ut.Fragment,{children:[n,this.state.showMenu&&Object(ut.jsxs)("div",{className:"menu",style:{zIndex:"100",position:"absolute",backgroundColor:"white"},ref:function(e){t.node=e},children:[a,e&&s,i,e&&Object(ut.jsxs)(ut.Fragment,{children:[l,h,u,o,c,p]})]})]})}}]),a}(l.a.Component)),Ve="api/project-subscriptions",Ae=function(t){return String(new Date(t).toDateString())},Le=function(t,e){var a=new Date(t).setMonth(new Date(t).getMonth()+e);return String(new Date(a).toDateString())},ze=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Ve,"/").concat(a),s=Object(o.a)(Object(o.a)({},_()),{},{method:"GET"}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Fe=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Ve),s=Object(o.a)(Object(o.a)({},_()),{},{method:"POST",body:a?JSON.stringify(a):null}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),qe=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Ve),s=Object(o.a)(Object(o.a)({},_()),{},{method:"PUT",body:a?JSON.stringify(a):null}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Re=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Ve,"/renew"),s=Object(o.a)(Object(o.a)({},_()),{},{method:"PUT",body:a?JSON.stringify(a):null}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Ye=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).updateProjectList=function(){s.fetchData()},s.handleDeleteProject=function(t,e){t.preventDefault(),window.confirm("Are you sure you want to delete this project?")&&s.deleteProject(e).then((function(){s.setState({submitMsg:f.t("submitMessages.deleted"),submitColour:"#24a148"}),s.props.updateCustomerList()})).catch((function(){s.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})}))},s.state={projects:{},ticketingSystem:{},action:"Edit",showMenu:{}},s.headerData=[{header:f.t("customerDashboard.projectName"),key:"projectName"},{header:f.t("customerDashboard.partners"),key:"partners"},{header:f.t("customerDashboard.entandoVersion"),key:"entandoVersion"},{header:f.t("customerDashboard.status"),key:"status"},{header:f.t("customerDashboard.startDate"),key:"startDate"},{header:f.t("customerDashboard.endDate"),key:"endDate"},{header:f.t("customerDetails.notes"),key:"notes"},{header:f.t("customerDashboard.action"),key:"action"}],s}return Object(s.a)(a,[{key:"fetchData",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e,a,n,s,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=18;break}if(e=this.props,a=e.customer,n=e.serviceUrl,t.prev=2,s={},r={},!a||!a.id){t.next=12;break}return t.next=8,me(n,a.id);case 8:return s=t.sent.data,t.next=11,et(n);case 11:r=t.sent;case 12:this.setState({projects:s,ticketingSystem:r}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),console.log(t.t0);case 18:this.render();case 19:case"end":return t.stop()}}),t,this,[[2,15]])})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){z(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.fetchData()}},{key:"componentWillUnmount",value:function(){this.setState=function(t,e){}}},{key:"deleteProject",value:function(){var t=Object(D.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=4;break}return t.next=3,oe(this.props.serviceUrl,this.props.customerId,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(ut.jsx)("div",{children:Object(ut.jsx)(ht.a,{rows:[{id:"1"}],headers:this.headerData,children:function(e){e.rows;var a=e.headers,n=e.getHeaderProps,s=e.getTableProps;return Object(ut.jsx)(pt.a,{description:f.t("customerDashboard.tableDesc"),children:Object(ut.jsxs)(mt.a,Object(o.a)(Object(o.a)({},s()),{},{children:[Object(ut.jsx)(bt.a,{children:Object(ut.jsx)(jt.a,{children:a.map((function(t){var e;return t.header===f.t("customerDetails.notes")?H()&&(e=Object(ut.jsx)(vt.a,Object(o.a)(Object(o.a)({},n({header:t})),{},{children:t.header}))):e=Object(ut.jsx)(vt.a,Object(o.a)(Object(o.a)({},n({header:t})),{},{children:t.header})),e}))},"headerRow")}),Object(ut.jsx)(ft.a,{children:t.state.projects&&0!==Object.keys(t.state.projects).length?t.state.projects.map((function(e,a){var n=W(e);return n?Object(ut.jsxs)(jt.a,{children:[Object(ut.jsx)(Ot.a,{children:Object(ut.jsx)(Wt.c,{to:"/subscription-details/".concat(n.id),children:e.name})}),0!==e.partners.length?Object(ut.jsx)(Ot.a,{children:e.partners.map((function(t,e){return Object(ut.jsx)("div",{children:t.name},e)}))}):Object(ut.jsx)(Ot.a,{children:f.t("userMessages.none")}),n.entandoVersion?Object(ut.jsx)(Ot.a,{children:n.entandoVersion.name}):Object(ut.jsx)(Ot.a,{children:f.t("userMessages.none")}),Object(ut.jsx)(Ot.a,{children:n.status}),Object(ut.jsx)(Ot.a,{children:Ae(n.startDate)}),Object(ut.jsx)(Ot.a,{children:Le(n.startDate,n.lengthInMonths)}),H()?Object(ut.jsx)(Ot.a,{style:{width:"250px"},children:e.notes}):null,Object(ut.jsx)(Ot.a,{children:Object(ut.jsx)(Ie,{serviceUrl:t.props.serviceUrl,ticketingSystem:t.state.ticketingSystem,locale:t.props.locale,subscription:n,project:e,allProjects:t.state.projects,handleDeleteProject:t.handleDeleteProject,updateProjectList:t.updateProjectList})})]},a):Object(ut.jsxs)(jt.a,{children:[Object(ut.jsx)(Ot.a,{children:e.name}),0!==e.partners.length?Object(ut.jsx)(Ot.a,{children:e.partners.map((function(t,e){return Object(ut.jsx)("div",{children:t.name},e)}))}):Object(ut.jsx)(Ot.a,{children:f.t("userMessages.none")}),Object(ut.jsx)(Ot.a,{children:f.t("userMessages.none")}),Object(ut.jsx)(Ot.a,{children:f.t("userMessages.none")}),Object(ut.jsx)(Ot.a,{children:f.t("userMessages.none")}),Object(ut.jsx)(Ot.a,{children:f.t("userMessages.none")}),H()?Object(ut.jsx)(Ot.a,{style:{width:"250px"},children:e.notes}):null,Object(ut.jsx)(Ot.a,{children:Object(ut.jsx)(Ie,{serviceUrl:t.props.serviceUrl,ticketingSystem:t.state.ticketingSystem,locale:t.props.locale,project:e,allProjects:t.state.projects,handleDeleteProject:t.handleDeleteProject,updateProjectList:t.updateProjectList})})]},a)})):null})]}))})}})})}}]),a}(u.Component)),Be=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(){var t;return Object(n.a)(this,a),(t=e.call(this)).state={customer:{}},t}return Object(s.a)(a,[{key:"render",value:function(){return Object(ut.jsx)("div",{className:"customer-details",children:Object(ut.jsxs)(O.a,{style:{margin:"2em 0",minHeight:"0",paddingBottom:"0"},children:[Object(ut.jsxs)("div",{children:[Object(ut.jsx)("strong",{children:f.t("customerDashboard.customerId")})," ",this.props.customer.id]}),Object(ut.jsxs)("div",{children:[Object(ut.jsx)("strong",{children:f.t("customerDashboard.customerName")})," ",this.props.customer.name]})]})})}}]),a}(u.Component)),He=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;s.setState(Object(w.a)({},a,n))},s.getCustomerDetails=function(t){s.getCustomer(t)},s.handleFormSubmit=function(){if(s.handleValidation()){var t={id:s.props.customer.id,name:s.state.name,customerNumber:s.state.customerNumber,contactName:s.state.contactName,contactPhone:s.state.contactPhone,contactEmail:s.state.contactEmail,notes:s.state.notes};s.updateCustomer(t).then((function(){s.setState({submitMsg:f.t("submitMessages.updated"),submitColour:"#24a148"}),s.props.updateCustomerList(),s.getCustomerDetails(s.props.customer.id)})).catch((function(){s.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})}))}},s.clearValues=function(){document.querySelector("#"+s.state.modalId).className.includes("is-visible")||s.setState({name:s.props.customer.name,customerNumber:s.props.customer.customerNumber,contactName:s.props.customer.contactName,contactPhone:s.props.customer.contactPhone,contactEmail:s.props.customer.contactEmail,notes:s.props.customer.notes,invalid:{}})},s.state={name:"",customerNumber:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},modalId:"",buttonId:"",submitMsg:"",submitColour:"black"},s}return Object(s.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;if(""===this.state.name&&(e=!1,t.name=!0),""===this.state.customerNumber&&(e=!1,t.customerNumber=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1===this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(e=!1,t.contactEmail=!0)}return this.setState({invalid:t}),e}},{key:"updateCustomer",value:function(){var t=Object(D.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=4;break}return t.next=3,ie(this.props.serviceUrl,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getCustomer",value:function(){var t=Object(D.a)(k.a.mark((function t(e){var a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=5;break}return t.next=3,se(this.props.serviceUrl,e);case 3:a=t.sent.data,this.setState({name:a.name,customerNumber:a.customerNumber,contactName:a.contactName,contactPhone:a.contactPhone,contactEmail:a.contactEmail,notes:a.notes,modalId:"modal-form-customer-edit-"+a.id,buttonId:"edit-customer-button-"+a.id});case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){z(this.props)&&this.props.customerId&&this.getCustomerDetails(this.props.customerId)}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.getCustomerDetails(this.props.customerId)}},{key:"render",value:function(){var t=Object(ut.jsx)("div",{className:"bx--modal-header",children:Object(ut.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg})}),e=this.state.modalId,a="bx--btn bx--btn--ghost edit-customer-button-"+this.props.customerId;return e&&Object(ut.jsxs)(Tt.a,{buttonTriggerText:f.t("buttons.edit"),modalHeading:f.t("adminDashboard.editCustomer.title"),buttonTriggerClassName:a,className:"modal-form",id:e,handleSubmit:this.handleFormSubmit,primaryButtonText:f.t("modalText.save"),secondaryButtonText:f.t("modalText.cancel"),children:[t,Object(ut.jsx)("div",{className:"form-container",children:Object(ut.jsxs)(S.a,{onSubmit:this.handleFormSubmit,id:"form-"+e,children:[Object(ut.jsx)(N.a,{id:"name"+e,name:"name",labelText:f.t("adminDashboard.addCustomer.customerName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(ut.jsx)(N.a,{id:"customerNumber"+e,name:"customerNumber",labelText:f.t("adminDashboard.addCustomer.customerNumber")+" *",value:this.state.customerNumber,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.customerNumber}),Object(ut.jsx)(N.a,{id:"contactName"+e,name:"contactName",labelText:f.t("adminDashboard.addCustomer.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(ut.jsx)(N.a,{id:"contactPhone"+e,name:"contactPhone",labelText:f.t("adminDashboard.addCustomer.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(ut.jsx)(N.a,{id:"contactEmail"+e,name:"contactEmail",labelText:f.t("adminDashboard.addCustomer.contactEmail")+" *",value:this.state.contactEmail,onChange:this.handleChanges,invalidText:f.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(ut.jsx)(te.a,{name:"notes",labelText:f.t("adminDashboard.addCustomer.notes"),value:this.state.notes,onChange:this.handleChanges})]})}),t]})}}]),a}(u.Component)),Ge=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).state={projects:{},customer:{}},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){z(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.fetchData()}},{key:"fetchData",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e,a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.customerId,t.prev=1,t.next=4,se(this.props.serviceUrl,e);case 4:a=t.sent,this.setState({customer:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"deleteCustomer",value:function(){var t=Object(D.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae(this.props.serviceUrl,this.state.customer.id);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var t=this;window.confirm("Are you sure you want to delete this customer?")&&this.deleteCustomer().then((function(){t.props.updateCustomerList()}))}},{key:"render",value:function(){var t=this;return Object(ut.jsx)("div",{children:Object(ut.jsxs)("div",{children:[B()&&Object(ut.jsx)(Be,{serviceUrl:this.props.serviceUrl,customer:this.state.customer}),Object(ut.jsxs)(x.a,{title:this.props.title,open:this.props.accordionOpened,children:[Object(ut.jsxs)("div",{style:{display:"flex"},children:[H()&&Object(ut.jsx)(Wt.c,{style:{textDecoration:"none"},to:"/customer-details/".concat(this.state.customer.id),children:Object(ut.jsx)(P.a,{kind:"ghost",children:f.t("buttons.viewDetails")})}),q()&&Object(ut.jsxs)("div",{style:{display:"flex"},children:[Object(ut.jsx)(He,{serviceUrl:this.props.serviceUrl,customer:this.state.customer,updateCustomerList:this.props.updateCustomerList,customerId:this.state.customer.id},this.state.customer.id),Object(ut.jsx)(P.a,{kind:"ghost",style:{color:"red"},onClick:function(){return t.handleDelete()},children:f.t("buttons.delete")})]})]}),Object(ut.jsx)(Ye,{serviceUrl:this.props.serviceUrl,customer:this.state.customer,locale:this.props.locale,updateCustomerList:this.props.updateCustomerList},(new Date).getTime())]})]})})}}]),a}(u.Component)),Je=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(){var t;return Object(n.a)(this,a),(t=e.call(this)).handleSearch=function(e){if("Enter"===e.key){var a=t.state.customers.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));t.setState({filteredCustomers:a,currentPage:0})}else""!==e.target.value&&void 0!==e.target.value||t.setState({filteredCustomers:t.state.customers});t.forceUpdate()},t.updateCustomerList=function(){t.fetchData()},t.state={customers:{},role:"",filteredCustomers:{},currentPage:0,test:"",loading:!0},t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.fetchData()}},{key:"fetchData",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=12;break}return e={},t.prev=2,t.next=5,ne(this.props.serviceUrl);case 5:e=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0);case 11:this.setState({customers:e.data?e.data:{},filteredCustomers:e.data?e.data:{},loading:!1});case 12:case"end":return t.stop()}}),t,this,[[2,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=1;e=0!==Object.keys(this.state.filteredCustomers).length?Math.ceil(this.state.filteredCustomers.length/5):1;return Object(ut.jsxs)("div",{className:"admin-dashboard",children:[q()||R()||Y()?Object(ut.jsxs)(O.a,{children:[Object(ut.jsx)("p",{className:"title",children:f.t("adminDashboard.allCustomers")}),Object(ut.jsxs)("div",{className:"bx--row",children:[Object(ut.jsx)("div",{className:"bx--col",children:Object(ut.jsx)($t.a,{onChange:this.handleSearch,id:"search",placeholder:f.t("adminDashboard.searchText"),labelText:f.t("adminDashboard.searchLabel"),onKeyPress:this.handleSearch})}),q()?Object(ut.jsx)("div",{className:"bx--col",children:Object(ut.jsxs)("div",{children:[Object(ut.jsx)(Te,{serviceUrl:this.props.serviceUrl,updateCustomerList:this.updateCustomerList}),Object(ut.jsx)(ue,{serviceUrl:this.props.serviceUrl,updateCustomerList:this.updateCustomerList}),Object(ut.jsx)(Ne,{serviceUrl:this.props.serviceUrl,updateCustomerList:this.updateCustomerList,allCustomers:this.state.customers})]})}):null]})]}):null,this.state.loading&&Object(ut.jsx)(Xt.a,{}),!this.state.loading&&Object(ut.jsxs)("div",{className:"form-container",children:[Object(ut.jsx)(g.a,{children:0!==Object.keys(this.state.customers).length?this.state.filteredCustomers.map((function(e,a){var n=5*(t.state.currentPage+1)-1,s=5*t.state.currentPage,r=1===t.state.customers.length;return G()&&a>=s&&a<=n?Object(ut.jsx)(Ge,{serviceUrl:t.props.serviceUrl,customerId:e.id,title:e.name,updateCustomerList:t.updateCustomerList,locale:t.props.locale,accordionOpened:r},e.id):null})):null}),Object(ut.jsx)(Zt.a,Object(o.a)(Object(o.a)({},{loop:Boolean(!1),page:Number(t.state.currentPage),totalItems:Number(e),itemsShown:Number(1),onChange:function(e){return t.setState({currentPage:e})}}),{},{className:"pagination-right"}))]})]})}}]),a}(l.a.Component)),_e="api/tickets/ticketingsystem",Ke=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(_e,"/").concat(a),s=Object(o.a)(Object(o.a)({},_()),{},{method:"GET"}),t.abrupt("return",X(n,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),We=function(){var t=Object(D.a)(k.a.mark((function t(e,a,n){var s,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="".concat(e,"/").concat(_e,"/").concat(a),r=Object(o.a)(Object(o.a)({},_()),{},{method:"POST",body:n?JSON.stringify(n):null}),t.abrupt("return",X(s,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),Qe=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).state={tickets:{},project:{},ticketingSystem:{},currentPage:0,loading:!0},s.headerData=[{header:f.t("ticketDetails.issue"),key:"issue"},{header:f.t("ticketDetails.summary"),key:"summary"},{header:f.t("ticketDetails.status"),key:"status"},{header:f.t("ticketDetails.type"),key:"type"},{header:f.t("ticketDetails.priority"),key:"priority"},{header:f.t("ticketDetails.created"),key:"created"},{header:f.t("ticketDetails.updated"),key:"updated"},{header:f.t("ticketDetails.link"),key:"link"}],s}return Object(s.a)(a,[{key:"fetchData",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e,a,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!G()){t.next=17;break}return t.prev=1,t.next=4,be(this.props.serviceUrl,this.props.projectId);case 4:return e=t.sent.data,t.next=7,et(this.props.serviceUrl);case 7:return a=t.sent,t.next=10,Ke(this.props.serviceUrl,e.id);case 10:n=t.sent,this.setState({tickets:n,project:e,ticketingSystem:a,loading:!1}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.log(t.t0);case 17:case"end":return t.stop()}}),t,this,[[1,14]])})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){z(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.fetchData()}},{key:"render",value:function(){var t=this,e=1;0!==Object.keys(this.state.tickets).length&&(e=Math.ceil(this.state.tickets.data.length/10));var a=this.state.ticketingSystem.url,n=null!=a?a.substr(0,a.indexOf("/rest")):null;return Object(ut.jsxs)("div",{children:[this.state.project.id&&Object(ut.jsxs)("div",{children:[Object(ut.jsx)("a",{href:n+"/issues/?jql=Organizations="+this.state.project.systemId,style:{textDecoration:"none"},target:"_blank",rel:"noreferrer",children:Object(ut.jsx)(P.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Open Ticket",children:f.t("buttons.viewAllTickets")})}),Object(ut.jsx)("a",{href:"".concat(Q(A,this.props.locale),"?project=").concat(this.state.project.id),style:{textDecoration:"none"},children:Object(ut.jsx)(P.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Open Ticket",children:f.t("buttons.openTicket")})})]}),this.state.loading&&Object(ut.jsx)(Xt.a,{}),!this.state.loading&&Object(ut.jsxs)(ut.Fragment,{children:[Object(ut.jsx)(ht.a,{rows:[{id:"1"}],headers:this.headerData,children:function(e){e.rows;var a=e.headers,s=e.getHeaderProps,r=e.getTableProps;return Object(ut.jsx)(pt.a,{title:f.t("ticketDetails.listOfTickets"),children:Object(ut.jsxs)(mt.a,Object(o.a)(Object(o.a)({},r()),{},{children:[Object(ut.jsx)(bt.a,{children:Object(ut.jsx)(jt.a,{children:a.map((function(t){return Object(ut.jsx)(vt.a,Object(o.a)(Object(o.a)({},s({header:t})),{},{children:t.header}))}))})}),Object(ut.jsx)(ft.a,{children:0!==Object.keys(t.state.tickets).length?t.state.tickets.data.map((function(e,a){var s=10*(t.state.currentPage+1)-1,r=10*t.state.currentPage,i=n+"/browse/"+e.systemId;return a>=r&&a<=s?Object(ut.jsxs)(jt.a,{children:[Object(ut.jsx)(Ot.a,{children:Object(ut.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",children:e.systemId})}),Object(ut.jsx)(Ot.a,{children:e.summary}),Object(ut.jsx)(Ot.a,{children:e.status}),Object(ut.jsx)(Ot.a,{children:e.type}),Object(ut.jsx)(Ot.a,{children:e.priority}),Object(ut.jsx)(Ot.a,{children:new Date(e.createDate).toDateString()}),Object(ut.jsx)(Ot.a,{children:new Date(e.updateDate).toDateString()}),Object(ut.jsx)(Ot.a,{children:Object(ut.jsx)("a",{href:i,target:"_blank",rel:"noreferrer",children:f.t("ticketDetails.viewTicket")})})]},e.id):null})):Object(ut.jsx)(jt.a,{})})]}))})}}),Object(ut.jsx)(Zt.a,Object(o.a)(Object(o.a)({},{loop:Boolean(!1),page:Number(t.state.currentPage),totalItems:Number(e),itemsShown:Number(1),onChange:function(e){return t.setState({currentPage:e})}}),{},{className:"pagination-right"}))]})]})}}]),a}(u.Component)),$e="Product Support Subscription Entando Platform",Xe="Free Commercial Open Source",Ze=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).updateSubscription=function(){s.fetchData()},s.state={loading:!0,subscription:{},users:{},project:{},customer:{}},s}return Object(s.a)(a,[{key:"fetchData",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e,a,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!G()){t.next=20;break}return t.prev=1,e={},a={},t.next=6,ze(this.props.serviceUrl,this.props.match.params.id);case 6:if(!(n=t.sent).data.project){t.next=14;break}return t.next=10,be(this.props.serviceUrl,n.data.project.id);case 10:return a=t.sent,t.next=13,De(this.props.serviceUrl,a.data.id);case 13:e=t.sent;case 14:this.setState({subscription:n,project:a,customer:a.customer,users:e,loading:!1}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0);case 20:case"end":return t.stop()}}),t,this,[[1,17]])})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){G()&&this.fetchData()}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&G()&&this.fetchData()}},{key:"render",value:function(){var t=this,e=$e,a=Xe;if(this.state.loading)return null;if(G()){if(0!==Object.keys(this.state.subscription).length&&0!==Object.keys(this.state.project).length){var n=this.state.project.data,s=this.state.subscription.data;return Object(ut.jsx)("div",{className:"subscription-details",children:Object(ut.jsxs)("div",{children:[Object(ut.jsx)(Rt,{project:n,subscription:s,locale:this.props.locale}),Object(ut.jsx)(O.a,{children:Object(ut.jsx)("div",{className:"bx--grid",children:Object(ut.jsxs)("div",{className:"bx--row",children:[Object(ut.jsxs)("div",{className:"bx--col",children:[Object(ut.jsxs)("div",{children:[Object(ut.jsxs)("strong",{children:[f.t("customerDashboard.customerName"),":"]})," ",n.customer.name]}),Object(ut.jsxs)("div",{children:[Object(ut.jsxs)("strong",{children:[f.t("customerDashboard.projectName"),":"]})," ",n.name]}),Object(ut.jsxs)("div",{children:[Object(ut.jsxs)("strong",{children:[f.t("subscriptionDetails.description"),":"]})," ",s.project.description]}),Object(ut.jsxs)("div",{children:[Object(ut.jsxs)("strong",{children:[f.t("subscriptionDetails.partners"),":"]}),""!==n&&0!==Object.keys(n.partners).length?Object(ut.jsx)(ut.Fragment,{children:n.partners.map((function(t,e){return Object(ut.jsxs)("div",{children:[" ",e===n.partners.length-1?t.name:t.name+", "," "]},e)}))}):Object(ut.jsxs)(ut.Fragment,{children:[" ",f.t("userMessages.none")," "]})]}),Object(ut.jsxs)("div",{children:[Object(ut.jsxs)("strong",{children:[f.t("subscriptionDetails.type"),":"]})," ",e]}),H()?Object(ut.jsxs)("div",{children:[Object(ut.jsxs)("strong",{children:[f.t("subscriptionDetails.notes"),":"]})," ",s.notes]}):null]}),Object(ut.jsxs)("div",{className:"bx--col",children:[Object(ut.jsxs)("div",{children:[Object(ut.jsxs)("strong",{children:[f.t("subscriptionDetails.status"),":"]})," ",s.status]}),Object(ut.jsxs)("div",{children:[Object(ut.jsxs)("strong",{children:[f.t("subscriptionDetails.level"),":"]})," ",s.level]}),Object(ut.jsxs)("div",{children:[Object(ut.jsxs)("strong",{children:[f.t("subscriptionDetails.startDate"),":"]})," ",Ae(s.startDate)]}),Object(ut.jsxs)("div",{children:[Object(ut.jsxs)("strong",{children:[f.t("subscriptionDetails.endDate"),":"]})," ",Le(s.startDate,s.lengthInMonths)]}),Object(ut.jsxs)("div",{children:[Object(ut.jsxs)("strong",{children:[f.t("subscriptionDetails.license"),":"]})," ",a]}),Object(ut.jsxs)("div",{children:[Object(ut.jsxs)("strong",{children:[f.t("subscriptionDetails.assignedUsers"),":"]}),""!==this.state.users.data&&0!==Object.keys(this.state.users.data).length?Object(ut.jsx)(ut.Fragment,{children:this.state.users.data.map((function(e,a){return Object(ut.jsxs)("div",{children:[" ",a===t.state.users.data.length-1?e.username:e.username+", "," "]},a)}))}):Object(ut.jsxs)(ut.Fragment,{children:[" ",f.t("userMessages.none")," "]})]})]})]})})}),Object(ut.jsx)("br",{}),Object(ut.jsx)(Qe,{projectId:n.id,serviceUrl:this.props.serviceUrl,locale:this.props.locale})]})})}return Object(ut.jsx)("div",{children:f.t("userMessages.unauthorized")})}return Object(ut.jsx)("div",{children:f.t("userMessages.unauthorized")})}}]),a}(l.a.Component)),ta=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).state={loading:!0,customer:{}},s}return Object(s.a)(a,[{key:"fetchData",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=11;break}return t.prev=1,t.next=4,se(this.props.serviceUrl,this.props.match.params.id);case 4:e=t.sent,this.setState({customer:e.data,loading:!1}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&H()&&this.fetchData()}},{key:"render",value:function(){if(this.state.loading)return null;var t=this.state.customer;return t?Object(ut.jsxs)("div",{children:[Object(ut.jsx)(Rt,{customer:t,locale:this.props.locale}),Object(ut.jsx)(O.a,{children:Object(ut.jsx)("div",{className:"bx--grid",children:Object(ut.jsxs)("div",{className:"bx--row",children:[Object(ut.jsxs)("div",{className:"bx--col",children:[Object(ut.jsxs)("p",{children:[Object(ut.jsxs)("strong",{children:[f.t("customerDetails.id"),": "]})," ",t.id]}),Object(ut.jsxs)("p",{children:[Object(ut.jsxs)("strong",{children:[f.t("customerDetails.name"),": "]})," ",t.name]}),H()&&Object(ut.jsxs)("p",{children:[Object(ut.jsxs)("strong",{children:[f.t("customerDetails.notes"),": "]})," ",t.notes]})]}),Object(ut.jsxs)("div",{className:"bx--col",children:[Object(ut.jsxs)("p",{children:[Object(ut.jsxs)("strong",{children:[f.t("customerDetails.contactName"),": "]})," ",t.contactName]}),Object(ut.jsxs)("p",{children:[Object(ut.jsxs)("strong",{children:[f.t("customerDetails.contactPhone"),": "]})," ",t.contactPhone]}),Object(ut.jsxs)("p",{children:[Object(ut.jsxs)("strong",{children:[f.t("customerDetails.contactEmail"),": "]})," ",t.contactEmail]})]})]})})}),Object(ut.jsx)(Ye,{serviceUrl:this.props.serviceUrl,customer:t,locale:this.props.locale})]}):Object(ut.jsxs)("p",{children:[f.t("userMessages.loading"),"..."]})}}]),a}(l.a.Component)),ea=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).state={loading:!0},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){z(this.props)&&this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.setState({loading:!1})}},{key:"render",value:function(){var t=this,e=this.props.keycloak;return this.state.loading?null:G()?Object(ut.jsxs)("div",{id:"entando-customer-portal",children:[Object(ut.jsx)(Se,{keycloak:e,children:Object(ut.jsx)(Wt.b,{children:Object(ut.jsxs)(Qt.c,{children:[Object(ut.jsx)(Qt.a,{path:"**/customer-details/:id",render:function(e){return Object(ut.jsx)(ta,Object(o.a)(Object(o.a)({},e),{},{serviceUrl:t.props.serviceUrl,locale:t.props.locale}))}}),Object(ut.jsx)(Qt.a,{path:"**/subscription-details/:id",render:function(e){return Object(ut.jsx)(Ze,Object(o.a)(Object(o.a)({},e),{},{serviceUrl:t.props.serviceUrl,locale:t.props.locale}))}}),Object(ut.jsx)(Qt.a,{path:"**/",render:function(e){return Object(ut.jsx)(Je,Object(o.a)(Object(o.a)({},e),{},{serviceUrl:t.props.serviceUrl,locale:t.props.locale}))}})]})})}),Object(ut.jsx)(Ce,{keycloak:e,children:Object(ut.jsx)("p",{children:f.t("userMessages.unauthorized")})})]}):Object(ut.jsx)("p",{children:f.t("userMessages.unauthorized")})}}]),a}(u.Component)),aa=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},na="locale",sa="service-url",ra=function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(n.a)(this,a);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).keycloak=aa(),t}return Object(s.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},aa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=Bt(Ht,(function(){t.keycloak=Object(o.a)(Object(o.a)({},aa()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(sa)||"",e=this.getAttribute(na)||"";v(e),h.a.render(Object(ut.jsx)(ot.Provider,{value:this.keycloak,children:Object(ut.jsx)(ea,{serviceUrl:t,locale:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.get("cp-app")||customElements.define("cp-app",ra);var ia=a(59),ca="keycloak",oa=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).state={loading:!0},s.keycloakEventHandler=s.keycloakEventHandler.bind(Object(ia.a)(s)),s}return Object(s.a)(a,[{key:"keycloakEventHandler",value:function(t){var e=t.detail.eventType,a=this.props.keycloak;switch(e){case"onReady":this.setState({loading:!1});break;case"onAuthRefreshError":a.logout()}}},{key:"componentDidMount",value:function(){window.addEventListener(ca,this.keycloakEventHandler)}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.setState({loading:!1})}},{key:"componentWillUnmount",value:function(){window.removeEventListener(ca,this.keycloakEventHandler)}},{key:"render",value:function(){var t=this.props.keycloak,e=window.location;return this.state.loading?null:Object(ut.jsx)("span",{className:"entando-login",children:z(this.props)?Object(ut.jsxs)(ut.Fragment,{children:[G()&&Object(ut.jsxs)(ut.Fragment,{children:[Object(ut.jsx)("a",{href:Q(E,this.props.locale),children:f.t("customerDashboard.customerPortal")}),Object(ut.jsx)("span",{className:"divider",children:"\xa0|\xa0"})]}),Object(ut.jsxs)("a",{className:"log-out",href:"#entando-customer-portal",onClick:function(){return t.logout({redirectUri:window.location.origin})},title:f.t("userMessages.logout"),children:[f.t("userMessages.logout"),Object(ut.jsx)("i",{className:"fas fa-sign-out-alt"})]})]}):Object(ut.jsx)(ut.Fragment,{children:Object(ut.jsxs)("a",{className:"log-in",href:"#entando-customer-portal",onClick:function(){return t.login({redirectUri:e})},title:f.t("userMessages.login"),children:[f.t("userMessages.login"),Object(ut.jsx)("i",{className:"fas fa-sign-in-alt"})]})})})}}]),a}(u.Component)),ua=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},la="locale",da="service-url",ha=function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(n.a)(this,a);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).keycloak=ua(),t}return Object(s.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("span"),this.keycloak=Object(o.a)(Object(o.a)({},ua()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=Bt(Ht,(function(){t.keycloak=Object(o.a)(Object(o.a)({},ua()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(da)||"",e=this.getAttribute(la)||"";v(e),h.a.render(Object(ut.jsx)(ot.Provider,{value:this.keycloak,children:Object(ut.jsx)(oa,{serviceUrl:t,locale:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.get("cp-login")||customElements.define("cp-login",ha);var pa=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).handleDeleteSubscription=function(t,e){t.preventDefault(),window.confirm(f.t("submitMessages.confirmDelete"))&&(console.log("confirmed to delete",e),s.deleteSubscription(e).then((function(){s.setState({submitMsg:f.t("submitMessages.deleted"),submitColour:"#24a148"}),s.fetchData()})).catch((function(){s.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})})))},s.state={projectId:"",project:{},subscriptions:[]},s.headerData=[{header:f.t("projectDetails.id"),key:"id"},{header:f.t("subscriptionDetails.status"),key:"status"},{header:f.t("projectDetails.entandoVersion"),key:"entandoVersion"},{header:f.t("subscriptionDetails.level"),key:"level"},{header:f.t("subscriptionDetails.startDate"),key:"startDate"},{header:f.t("subscriptionDetails.endDate"),key:"endDate"},{header:f.t("subscriptionDetails.lengthInMonths"),key:"lengthInMonths"},{header:f.t("subscriptionDetails.notes"),key:"notes"},{header:f.t("customerDashboard.action"),key:"action"}],s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){z(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.fetchData()}},{key:"fetchData",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e,a,n,s,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=14;break}if(e=window.location.search,a=new URLSearchParams(e),n=a.get("project"),s={},r={},null==n){t.next=13;break}return t.next=9,be(this.props.serviceUrl,n);case 9:return s=t.sent.data,t.next=12,we(this.props.serviceUrl,n);case 12:r=t.sent.data;case 13:this.setState({projectId:n,project:s,subscriptions:r});case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"deleteSubscription",value:function(){var t=Object(D.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=4;break}return t.next=3,xe(this.props.serviceUrl,this.state.projectId,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state.project;return Object(ut.jsxs)("div",{id:"entando-customer-portal",children:[Object(ut.jsx)(Rt,{project:e,locale:this.props.locale}),Object(ut.jsx)("h5",{children:e.name}),Object(ut.jsx)("a",{href:"".concat(Q(V,this.props.locale),"?project=").concat(this.state.projectId),style:{textDecoration:"none"},children:Object(ut.jsx)(P.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Add Subscription",children:f.t("buttons.addSubscription")})}),Object(ut.jsx)(ht.a,{rows:[{id:"1"}],headers:this.headerData,children:function(e){var a=e.headers,n=e.getHeaderProps,s=e.getTableProps;return Object(ut.jsx)(pt.a,{children:Object(ut.jsxs)(mt.a,Object(o.a)(Object(o.a)({},s()),{},{children:[Object(ut.jsx)(bt.a,{children:Object(ut.jsx)(jt.a,{children:a.map((function(t){return Object(ut.jsx)(vt.a,Object(o.a)(Object(o.a)({},n({header:t})),{},{children:t.header}))}))})}),Object(ut.jsx)(ft.a,{children:0!==Object.keys(t.state.subscriptions).length&&t.state.subscriptions.map((function(e,a){return Object(ut.jsxs)(jt.a,{children:[Object(ut.jsx)(Ot.a,{children:e.id}),Object(ut.jsx)(Ot.a,{children:e.status}),Object(ut.jsx)(Ot.a,{children:e.entandoVersion.name}),Object(ut.jsx)(Ot.a,{children:e.level}),Object(ut.jsx)(Ot.a,{children:Ae(e.startDate)}),Object(ut.jsx)(Ot.a,{children:Le(e.startDate,e.lengthInMonths)}),Object(ut.jsx)(Ot.a,{children:e.lengthInMonths}),Object(ut.jsx)(Ot.a,{children:e.notes}),Object(ut.jsxs)(Ot.a,{children:[Object(ut.jsx)("a",{href:"".concat(Q(V,t.props.locale),"?project=").concat(t.state.projectId,"&subscription=").concat(e.id),style:{textDecoration:"none"},children:Object(ut.jsx)(P.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Edit",children:f.t("buttons.edit")})}),Object(ut.jsx)(P.a,{kind:"ghost",onClick:function(a){return t.handleDeleteSubscription(a,e.id)},className:"button-warning",children:f.t("buttons.delete")})]})]},a)}))})]}))})}})]})}}]),a}(u.Component)),ma=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},ba="locale",ja="service-url",va=function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(n.a)(this,a);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).keycloak=ma(),t}return Object(s.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},ma()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=Bt(Ht,(function(){t.keycloak=Object(o.a)(Object(o.a)({},ma()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(ja)||"",e=this.getAttribute(ba)||"";v(e),h.a.render(Object(ut.jsx)(ot.Provider,{value:this.keycloak,children:Object(ut.jsx)(pa,{serviceUrl:t,locale:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.get("cp-manage-subscriptions")||customElements.define("cp-manage-subscriptions",va);var fa=a(47),Oa="api/portal-users",ga=function(){var t=Object(D.a)(k.a.mark((function t(e,a,n){var s,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=$("".concat(e,"/").concat(Oa,"/username/").concat(a,"/email/").concat(n)),r=Object(o.a)(Object(o.a)({},_()),{},{method:"GET"}),t.next=4,X(s,r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),xa=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n,s,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="admin/realms/".concat(a,"/users"),s="".concat(e,"/").concat(n),r=Object(o.a)(Object(o.a)({},K()),{},{method:"GET"}),t.next=5,X(s,r);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();var ya=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).mapKeycloakUserEmails=function(t){var e=new Map;return t.forEach((function(t){return e.set(t.username,t.email)})),e},s.handleChanges=function(t){var e=t.target,a=e.name,n=e.value;s.setState(Object(w.a)({},a,n))},s.handleFormSubmit=function(t){t.preventDefault();var e=s.state,a=e.projectId,n=e.assignUser;s.handleFormValidation()&&s.assignUserToProject(a,n).then((function(t){t&&201===t.status?(s.setState({submitMsg:f.t("submitMessages.updated"),submitColour:"#24a148"}),window.dispatchEvent(new CustomEvent("cp-user-assigned"))):s.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})}))},s.assignUserToProject=function(){var t=Object(D.a)(k.a.mark((function t(e,a){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.state.users.get(a)){t.next=4;break}return alert("User is missing an email address in keycloak and cannot be assigned."),t.abrupt("return",null);case 4:return t.next=6,s.getPortalUserId({username:a,email:s.state.users.get(a)});case 6:return n=t.sent,t.next=9,Oe(s.props.serviceUrl,e,n);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),s.getPortalUserId=function(){var t=Object(D.a)(k.a.mark((function t(e){var a,n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=null,t.prev=1,t.next=4,ga(s.props.serviceUrl,e.username,e.email);case 4:n=t.sent,a=n.data.id,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.warn(t.t0);case 11:return t.abrupt("return",a);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),s.state={project:null,projectId:"",assignUser:"",users:new Map,invalid:{},submitMsg:"",submitColour:"black"},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){z(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.fetchData()}},{key:"fetchData",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e,a,n,s,r,i;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.keycloak,t.t0=this,t.next=4,xa(e.authServerUrl,e.realm);case 4:if(t.t1=t.sent.data,a=t.t0.mapKeycloakUserEmails.call(t.t0,t.t1),n=window.location.search,s=new URLSearchParams(n),r=s.get("project"),i=null,null==r){t.next=16;break}return t.next=13,be(this.props.serviceUrl,r);case 13:i=t.sent.data,t.next=17;break;case 16:r="";case 17:this.setState({projectId:r,project:i,users:a});case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleFormValidation",value:function(){var t={},e=!0,a=this.state,n=a.projectId,s=a.assignUser;return""===n&&(e=!1,t.projectId=!0),""===s&&(e=!1,t.assignUser=!0),this.setState({invalid:t}),e}},{key:"setupFormComponents",value:function(){var t,e=this.state.users,a=this.state.project;return e.size>0?(t=Object(fa.a)(e.keys()).map((function(t,e){return Object(ut.jsx)(T.a,{text:t,value:t,children:t},e)}))).unshift(Object(ut.jsx)(T.a,{text:f.t("manageUsers.assign.userList"),value:""},"-1")):t=Object(ut.jsx)(T.a,{text:f.t("manageUsers.assign.noUsers"),value:""}),{userList:t,projectList:null!=a?Object(ut.jsx)(T.a,{text:a.name,value:a.id},a.id):Object(ut.jsx)(T.a,{text:f.t("manageUsers.assign.noProjects"),value:""})}}},{key:"render",value:function(){var t=this.setupFormComponents(),e=t.userList,a=t.projectList;return Object(ut.jsxs)("div",{children:[Object(ut.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),Object(ut.jsx)(S.a,{onSubmit:this.handleFormSubmit,children:Object(ut.jsxs)("div",{className:"bx--grid",children:[Object(ut.jsx)("div",{className:"bx--row",children:Object(ut.jsx)("div",{className:"bx--col",children:Object(ut.jsx)(C.a,{id:"projectId",name:"projectId",labelText:f.t("manageUsers.assign.projectName"),value:this.state.projectId,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.projectId,children:a})})}),Object(ut.jsx)("div",{className:"bx--row",children:Object(ut.jsx)("div",{className:"bx--col",children:Object(ut.jsx)(C.a,{id:"assignUser",name:"assignUser",labelText:f.t("manageUsers.assign.assignUser"),value:this.state.assignUser,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.assignUser,children:e})})}),Object(ut.jsxs)(P.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",f.t("buttons.submit")," "]})]})})]})}}]),a}(u.Component)),ka=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).handleRemoveUser=function(t,e,a){a.preventDefault(),ye(s.props.serviceUrl,e,t).then((function(t){201===t.status?s.fetchData():console.warn("Failed to delete user",t)}))},s.state={users:[],displayUsers:[],projectId:""},s.headerData=[{header:f.t("manageUsers.delete.userName"),key:"username"},{header:f.t("manageUsers.delete.userEmail"),key:"email"},{header:f.t("manageUsers.delete.userAccess"),key:"userAccess"}],window.addEventListener("cp-user-assigned",(function(t){s.fetchData()})),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){z(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.fetchData()}},{key:"fetchData",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e,a,n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!z(this.props)){t.next=11;break}if(e=window.location.search,a=new URLSearchParams(e),n=a.get("project"),s=[],null==n){t.next=9;break}return t.next=8,De(this.props.serviceUrl,n);case 8:s=t.sent.data;case 9:this.setState({users:s,projectId:n}),this.handleUserDisplay();case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleUserDisplay",value:function(){var t=this,e=this.state.users,a=this.state.projectId,n=e.map((function(e){return{id:e.username,username:e.username,email:e.email,userAccess:Object(ut.jsx)(P.a,{kind:"ghost",onClick:function(n){return t.handleRemoveUser(e.id,a,n)},className:"button-warning",children:f.t("manageUsers.delete.removeUser")})}}));this.setState({displayUsers:n})}},{key:"render",value:function(){return Object(ut.jsx)(ht.a,{rows:this.state.displayUsers,headers:this.headerData,children:function(t){var e=t.rows,a=t.headers,n=t.getHeaderProps,s=t.getTableProps;return Object(ut.jsx)(pt.a,{children:Object(ut.jsxs)(mt.a,Object(o.a)(Object(o.a)({},s()),{},{children:[Object(ut.jsx)(bt.a,{children:Object(ut.jsx)(jt.a,{children:a.map((function(t){return Object(ut.jsx)(vt.a,Object(o.a)(Object(o.a)({},n({header:t})),{},{children:t.header}))}))})}),Object(ut.jsx)(ft.a,{children:e.map((function(t){return Object(ut.jsx)(jt.a,{children:t.cells.map((function(t){return Object(ut.jsx)(Ot.a,{children:t.value},t.id)}))},t.id)}))})]}))})}})}}]),a}(u.Component)),Da=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).state={loading:!0},s.userFunctionality=[{label:Object(ut.jsxs)("div",{children:[Object(ut.jsx)("p",{className:"title",children:f.t("manageUsers.manage.title")}),Object(ut.jsx)("p",{className:"desc",children:f.t("manageUsers.manage.desc")})]}),content:Object(ut.jsx)(ka,{serviceUrl:s.props.serviceUrl}),open:!0},{label:Object(ut.jsxs)("div",{children:[Object(ut.jsx)("p",{className:"title",children:f.t("manageUsers.assign.title")}),Object(ut.jsx)("p",{className:"desc",children:f.t("manageUsers.assign.desc")})]}),content:Object(ut.jsx)(ya,{serviceUrl:s.props.serviceUrl}),open:!0}],s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){z(this.props)&&this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?null:q()?Object(ut.jsxs)("div",{id:"entando-customer-portal",children:[Object(ut.jsx)(Rt,{locale:this.props.locale}),Object(ut.jsx)("div",{className:"form-container",children:Object(ut.jsx)(g.a,{children:this.userFunctionality.map((function(t,e){return Object(ut.jsx)(x.a,{index:e,title:t.label,description:t.description,open:t.open,children:t.content},e.toString())}))})})]}):Object(ut.jsx)("p",{children:f.t("userMessages.unauthorized")})}}]),a}(u.Component)),wa=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Sa="locale",Ca="service-url",Ta=function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(n.a)(this,a);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).keycloak=wa(),t}return Object(s.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},wa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=Bt(Ht,(function(){t.keycloak=Object(o.a)(Object(o.a)({},wa()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(Ca)||"",e=this.getAttribute(Sa)||"";v(e),h.a.render(Object(ut.jsx)(ot.Provider,{value:this.keycloak,children:Object(ut.jsx)(Da,{serviceUrl:t,locale:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.get("cp-manage-users")||customElements.define("cp-manage-users",Ta);var Na=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(){var t;return Object(n.a)(this,a),(t=e.call(this)).handleChanges=function(e){var a=e.target,n=a.name,s=a.value;t.setState(Object(w.a)({},n,s))},t.handleFormSubmit=function(e){(e.preventDefault(),t.handleValidation())?W(t.state.project)?t.createTicket().then((function(){t.setState({submitMsg:f.t("submitMessages.created"),submitColour:"#24a148"})})).catch((function(){t.setState({submitMsg:f.t("submitMessages.ticketError"),submitColour:"#da1e28"})})):t.setState({submitMsg:f.t("submitMessages.subscriptionRequired"),submitColour:"#da1e28"}):t.setState({submitMsg:f.t("submitMessages.error"),submitColour:"#da1e28"})},t.state={loading:!0,project:{},role:"",invalid:{},submitMsg:"",submitColour:"black",type:"Support",priority:"Medium",status:"To Do",summary:"",description:""},t.types=["Support","New Feature","Bug"],t.priorities=["Critical","High","Medium","Low"],t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){z(this.props)&&this.fetchData()}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.fetchData()}},{key:"fetchData",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e,a,n,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(G()){t.next=2;break}return t.abrupt("return");case 2:return e=window.location.search,a=new URLSearchParams(e),n=a.get("project"),t.next=7,be(this.props.serviceUrl,n);case 7:(s=t.sent.data)||(console.error("Unable to retrieve projectId ",n),s={}),this.setState({project:s,loading:!1});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleValidation",value:function(){var t={},e=!0;return""===this.state.type&&(e=!1,t.type=!0),""===this.state.summary&&(e=!1,t.summary=!0),""===this.state.description&&(e=!1,t.description=!0),""===this.state.priority&&(e=!1,t.priority=!0),this.setState({invalid:t}),e}},{key:"createTicket",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!G()){t.next=5;break}return e={type:this.state.type,summary:this.state.summary,description:this.state.description,priority:this.state.priority,systemId:"999",status:"To Do",createDate:"2021-02-22T14:14:09-05:00",updateDate:"2021-02-22T14:14:09-05:00"},t.next=4,We(this.props.serviceUrl,this.state.project.id,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?null:G()?Object(ut.jsxs)("div",{id:"entando-customer-portal",children:[Object(ut.jsx)(Rt,{project:this.state.project,locale:this.props.locale}),Object(ut.jsxs)("div",{className:"form-container",children:[Object(ut.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),Object(ut.jsx)(S.a,{onSubmit:this.handleFormSubmit,children:Object(ut.jsxs)("div",{className:"bx--grid",children:[Object(ut.jsx)("div",{className:"bx--row",style:{padding:"1em 0"},children:Object(ut.jsx)("div",{className:"bx--col",children:Object(ut.jsxs)("div",{className:"form-desc",children:[Object(ut.jsx)("h4",{children:f.t("supportTicketForm.formTitle")}),Object(ut.jsx)("div",{children:f.t("supportTicketForm.desc")})]})})}),Object(ut.jsx)("div",{className:"bx--row",children:Object(ut.jsxs)("div",{className:"bx--col",children:[Object(ut.jsxs)("div",{children:[Object(ut.jsxs)("strong",{children:[f.t("projectDetails.project"),":"]})," ",this.state.project.name]}),Object(ut.jsx)(C.a,{id:"type",name:"type",labelText:f.t("supportTicketForm.type")+" *",value:this.state.type,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.type,children:this.types.map((function(t,e){return Object(ut.jsx)(T.a,{text:t,value:t,children:t},e)}))}),Object(ut.jsx)(C.a,{id:"priority",name:"priority",labelText:f.t("supportTicketForm.priority")+" *",value:this.state.priority,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.priority,children:this.priorities.map((function(t,e){return Object(ut.jsx)(T.a,{text:t,value:t,children:t},e)}))})]})}),Object(ut.jsx)("div",{className:"bx--row",children:Object(ut.jsx)("div",{className:"bx--col",children:Object(ut.jsx)(N.a,{labelText:f.t("supportTicketForm.ticketSummary")+" *",placeholder:f.t("supportTicketForm.addticketSummary"),id:"summary",name:"summary",value:this.state.summary,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.summary})})}),Object(ut.jsx)("div",{className:"bx--row",children:Object(ut.jsxs)("div",{className:"bx--col",children:[Object(ut.jsx)(te.a,{labelText:f.t("supportTicketForm.ticketDescription")+" *",placeholder:f.t("supportTicketForm.addticketDescription"),name:"description",value:this.state.description,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(ut.jsxs)(P.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",f.t("buttons.submit")," "]})]})})]})})]})]}):Object(ut.jsx)("p",{children:f.t("userMessages.unauthorized")})}}]),a}(u.Component)),Pa=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Ea="locale",Ma="service-url",Ua=function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(n.a)(this,a);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).keycloak=Pa(),t}return Object(s.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Pa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=Bt(Ht,(function(){t.keycloak=Object(o.a)(Object(o.a)({},Pa()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(Ma)||"",e=this.getAttribute(Ea)||"";v(e),h.a.render(Object(ut.jsx)(ot.Provider,{value:this.keycloak,children:Object(ut.jsx)(Na,{serviceUrl:t,locale:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.get("cp-open-ticket")||customElements.define("cp-open-ticket",Ua);var Ia=a(54),Va="new",Aa="renewal",La="edit",za={GOLD:"GOLD",PLATINUM:"PLATINUM"},Fa={requested:"REQUESTED",pending:"PENDING",active:"ACTIVE",expired:"EXPIRED"},qa=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;s.setState(Object(w.a)({},a,n)),s.setState({submitSuccess:!1,submitError:!1})},s.handleStartDateChange=function(t){var e="";t&&t[0]&&(e=Mt()(t[0].toISOString()).format("MM/DD/YYYY")),s.setState({startDate:e})},s.handleFormSubmit=function(t){if(t.preventDefault(),s.setState({submitSuccess:!1,submitError:!1}),s.handleValidation()){var e=s.state.formType,a=s.props.serviceUrl,n=s.stateToSubscription();e===La?qe(a,n).then((function(){s.updateStateForSuccess(!0)})).catch((function(){s.updateStateForSuccess(!1)})):e===Va?s.newSubscription(n).then((function(t){fe(a,s.state.projectId,t.data.id),s.updateStateForSuccess(!0)})).catch((function(){s.updateStateForSuccess(!1)})):e===Aa?s.renewSubscription(n).then((function(t){fe(a,s.state.projectId,t.data.id),s.updateStateForSuccess(!0)})).catch((function(){s.updateStateForSuccess(!1)})):console.log("Illegal operation")}},s.state={loading:!0,project:{},projectId:"",subscription:{},startDate:"",level:"PLATINUM",lengthInMonths:"",notes:"",entandoVersionId:"",status:"",formType:"new",invalid:{},productVersions:[],submitSuccess:!1,submitError:!1,submitColour:"black"},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){z(this.props)&&(this.fetchData(),this.setState({loading:!1}))}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&(this.fetchData(),this.setState({loading:!1}))}},{key:"fetchData",value:function(){var t=Object(D.a)(k.a.mark((function t(){var e,a,n,s,r,i,c,o,u,l,d;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(G()){t.next=2;break}return t.abrupt("return");case 2:if(e=this.props.serviceUrl,a=window.location.search,n=new URLSearchParams(a),s=n.get("subscription"),r=n.get("project"),i={},c={},o=Va,u="",l=q(),null===s){t.next=21;break}return t.next=15,ze(e,s);case 15:i=t.sent.data,u=l?i.status:Fa.requested,o=l?La:Aa,c=i.project,t.next=30;break;case 21:if(null===r){t.next=28;break}return t.next=24,be(e,r);case 24:c=t.sent.data,u=l?Fa.pending:Fa.requested,t.next=30;break;case 28:return console.log("Unable to load project and/or subscription"),t.abrupt("return");case 30:return t.next=32,yt(e);case 32:d=t.sent.data,this.setState({subscription:i,level:i.level?i.level:"",entandoVersionId:i.entandoVersion?i.entandoVersion.id:"",startDate:(h=i.startDate,Mt()(h).format("MM/DD/YYYY")),lengthInMonths:i.lengthInMonths?i.lengthInMonths:"",notes:i.notes?i.notes:"",status:u,formType:o,project:c,projectId:r,productVersions:d});case 34:case"end":return t.stop()}var h}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isNumeric",value:function(t){return!isNaN(t)&&!isNaN(parseInt(t))}},{key:"handleValidation",value:function(){var t={};return this.state.startDate&&this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(t.startDate=!0),this.state.lengthInMonths&&this.isNumeric(this.state.lengthInMonths)||(t.lengthInMonths=!0),this.state.level||(t.level=!0),""===this.state.entandoVersionId&&(t.entandoVersionId=!0),this.setState({invalid:t}),0===Object.keys(t).length}},{key:"updateStateForSuccess",value:function(t){t?this.setState({submitSuccess:!0,submitError:!1,submitColour:"#24a148"}):this.setState({submitSuccess:!1,submitError:!0,submitColour:"#da1e28"})}},{key:"stateToSubscription",value:function(){return{entandoVersionId:this.state.entandoVersionId,projectId:this.state.projectId,renewal:this.state.formType===Aa,projectSubscription:{id:this.state.subscription.id,startDate:new Date(this.state.startDate),lengthInMonths:this.state.lengthInMonths,level:this.state.level,status:this.state.status.toUpperCase(),notes:this.state.notes}}}},{key:"newSubscription",value:function(){var t=Object(D.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fe(this.props.serviceUrl,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"renewSubscription",value:function(){var t=Object(D.a)(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Re(this.props.serviceUrl,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setupFormComponents",value:function(){var t=Object.entries(za).map((function(t){var e=Object(Ia.a)(t,2),a=e[0],n=e[1];return Object(ut.jsx)(T.a,{text:n,value:a,children:n},a)}));t.unshift(Object(ut.jsx)(T.a,{text:f.t("subscriptionForm.chooseLevel"),value:""},"-1"));var e=this.state.productVersions.map((function(t){return t.status?Object(ut.jsx)(T.a,{text:t.name,value:t.id,children:t.name},t.id):null}));return e.unshift(Object(ut.jsx)(T.a,{text:f.t("subscriptionForm.chooseVersion"),value:""},"-1")),{subscriptionLevelList:t,versionList:e,statusList:Object.entries(Fa).map((function(t){var e=Object(Ia.a)(t,2),a=e[0],n=e[1];return Object(ut.jsx)(T.a,{text:n,value:n,children:n},a)}))}}},{key:"renderForm",value:function(){var t=this.setupFormComponents(),e=t.subscriptionLevelList,a=t.versionList,n=t.statusList;return Object(ut.jsx)("div",{children:Object(ut.jsxs)("div",{className:"bx--row",children:[Object(ut.jsxs)("div",{className:"bx--col",children:[Object(ut.jsxs)("div",{children:[Object(ut.jsxs)("span",{children:[f.t("subscriptionForm.projectName"),":"]})," ",this.state.project.name]}),Object(ut.jsx)(C.a,{id:"status",name:"status",labelText:f.t("subscriptionForm.subscriptionStatus"),value:this.state.status,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.status,disabled:!q(),children:n}),Object(ut.jsx)(C.a,{id:"level",name:"level",labelText:f.t("subscriptionForm.subscriptionLevel")+" *",value:this.state.level||"",onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.level,children:e}),Object(ut.jsx)(C.a,{id:"entandoVersionId",name:"entandoVersionId",labelText:f.t("subscriptionForm.entandoVersion")+" *",value:this.state.entandoVersionId,onChange:this.handleChanges,invalidText:f.t("validation.invalid.required"),invalid:this.state.invalid.entandoVersionId,children:a})]}),Object(ut.jsxs)("div",{className:"bx--col",children:[Object(ut.jsx)(Nt.a,{dateFormat:"m/d/Y",datePickerType:"single",value:this.state.startDate,onChange:this.handleStartDateChange,children:Object(ut.jsx)(Pt.a,{id:"startDate",name:"startDate",placeholder:"mm/dd/yyyy",labelText:f.t("subscriptionForm.subscriptionStartDate"),type:"text",invalidText:f.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(ut.jsx)(N.a,{id:"lengthInMonths",name:"lengthInMonths",labelText:f.t("subscriptionForm.subscriptionLength")+" *",value:this.state.lengthInMonths,onChange:this.handleChanges,invalidText:f.t("validation.invalid.number"),invalid:this.state.invalid.lengthInMonths}),q()&&Object(ut.jsx)(te.a,{id:"notes",name:"notes",labelText:f.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})]})})}},{key:"successErrorMessage",value:function(){var t=q(),e=this.state,a=e.subscriptionType,n=e.submitSuccess,s=e.submitError;if("new"===a){if(n)return t?this.createFormMessage("adminSubmitNewSuccess"):this.createFormMessage("customerSubmitSuccess");if(s)return this.createFormMessage("newSubError")}else{if(n)return t?this.createFormMessage("adminRenewNewSuccess"):this.createFormMessage("customerSubmitSuccess");if(s)return this.createFormMessage("renewSubError")}}},{key:"createFormMessage",value:function(t){return Object(ut.jsx)("p",{style:{color:this.state.submitColour},children:f.t("subscriptionForm.".concat(t))})}},{key:"render",value:function(){var t="subscriptionForm.newSubscription";return"new"!==this.state.formType&&(t=q()?"subscriptionForm.editSubscription":"subscriptionForm.renewSubscription"),this.state.loading?null:G()?Object(ut.jsxs)("div",{id:"entando-customer-portal",children:[Object(ut.jsx)(Rt,{project:this.state.project,subscription:this.state.subscription,locale:this.props.locale}),Object(ut.jsxs)("div",{className:"form-container",children:[this.successErrorMessage(),Object(ut.jsx)(S.a,{onSubmit:this.handleFormSubmit,children:Object(ut.jsxs)("div",{className:"bx--grid",children:[Object(ut.jsx)("div",{className:"bx--row",children:Object(ut.jsx)("div",{className:"bx--col",children:Object(ut.jsx)("strong",{children:f.t(t)})})}),this.renderForm(),Object(ut.jsxs)(P.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",f.t("buttons.submit")]})]})})]})]}):Object(ut.jsx)("p",{children:f.t("userMessages.unauthorized")})}}]),a}(u.Component)),Ra=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Ya="locale",Ba="service-url",Ha=function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(n.a)(this,a);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).keycloak=Ra(),t}return Object(s.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Ra()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=Bt(Ht,(function(){t.keycloak=Object(o.a)(Object(o.a)({},Ra()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(Ba)||"",e=this.getAttribute(Ya)||"";v(e),h.a.render(Object(ut.jsx)(ot.Provider,{value:this.keycloak,children:Object(ut.jsx)(qa,{serviceUrl:t,locale:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.get("cp-subscription-form")||customElements.define("cp-subscription-form",Ha);var Ga=lt(function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).state={loading:!0},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){z(this.props)&&this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(t){F(this.props,t)&&this.setState({loading:!1})}},{key:"render",value:function(){var t=this.props,e=t.locale,a=t.serviceUrl;return this.state.loading?null:Object(ut.jsx)("div",{children:Object(ut.jsxs)(Wt.a,{forceRefresh:!0,children:[Object(ut.jsx)(oa,{locale:e}),Object(ut.jsx)("div",{children:Object(ut.jsx)("ul",{children:q()&&Object(ut.jsx)("li",{children:Object(ut.jsx)(Wt.c,{to:Q(M,e),children:"Admin"})})})}),Object(ut.jsxs)(Qt.c,{children:[Object(ut.jsx)(Qt.a,{path:Q(M,e),children:Object(ut.jsx)(Yt,{serviceUrl:a,locale:e})}),Object(ut.jsx)(Qt.a,{path:Q(U,e),children:Object(ut.jsx)(pa,{serviceUrl:a,locale:e})}),Object(ut.jsx)(Qt.a,{path:Q(I,e),children:Object(ut.jsx)(Da,{serviceUrl:a,locale:e})}),Object(ut.jsx)(Qt.a,{path:Q(V,e),children:Object(ut.jsx)(qa,{serviceUrl:a,locale:e})}),Object(ut.jsx)(Qt.a,{path:Q(A,e),children:Object(ut.jsx)(Na,{serviceUrl:a,locale:e})}),Object(ut.jsx)(Qt.a,{path:Q(E,e),children:Object(ut.jsx)(ea,{serviceUrl:a,locale:e})}),Object(ut.jsx)(Qt.a,{path:"/",exact:!0,children:Object(ut.jsx)(ea,{serviceUrl:a,locale:e})})]})]})})}}]),a}(u.Component)),Ja=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},_a="locale",Ka="service-url",Wa=function(t){Object(r.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(n.a)(this,a);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).keycloak=Ja(),t}return Object(s.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Ja()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=Bt(Ht,(function(){t.keycloak=Object(o.a)(Object(o.a)({},Ja()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(Ka)||"",e=this.getAttribute(_a)||"";v(e),h.a.render(Object(ut.jsx)(ot.Provider,{value:this.keycloak,children:Object(ut.jsx)(Ga,{serviceUrl:t,locale:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.get("cp-local-app")||customElements.define("cp-local-app",Wa)},31:function(t,e,a){},78:function(t){t.exports=JSON.parse('{"adminConfig":{"title":"Entando Admin View","formTitle":"All Customers","desc":"Configure the Ticketing System and Entando Versions below.","integrationTicketingSystem":{"title":"Integration with Ticketing System","desc":"This allows you to manage the ticketing system","selectBackendTicketingSystem":"Select Backend Ticketing System","select":"Select","url":"URL","userName":"User Name","password":"Password","projectName":"Project Name"},"manageProductVersion":{"title":"Manage Product Version","desc":"Manage the Entando Product Versions","entandoVersion":"Entando Version","status":"Status *","startDate":"Start Date","supportEndDate":"Support End Date"}},"adminDashboard":{"title":"Welcome to Entando","adminTitle":"Welcome to Entando Admin View","customerTitle":"Welcome to Entando Customer View","partnerTitle":"Welcome to Entando Partner View","supportTitle":"Welcome to Entando Support View","allCustomers":"All Customers","searchLabel":"Customer Search","searchText":"Which customer are you looking for?","view":"View","addProject":{"title":"Add a Project","customerList":"Customer List","selectCustomer":"Select Customer","projectName":"Project Name","projectDesc":"Project Description","systemId":"System Id","contactName":"Contact Name","contactPhone":"Contact Phone","contactEmail":"Contact Email","notes":"Notes","editTitle":"Edit Project"},"addCustomer":{"title":"Add a Customer","customerName":"Customer Name","customerNumber":"Customer Number","contactName":"Contact Name","contactPhone":"Contact Phone","contactEmail":"Contact Email","notes":"Notes"},"addPartner":{"title":"Add a Partner","projectList":"Project List","selectProject":"Select Project","partnerName":"Partner Name","partnerNumber":"Partner Number","notes":"Notes"},"addProductVersion":{"title":"Add a new product version","productVersion":"Product Version","productVersionStartDate":"Product Version Start Date","productVersionEndDate":"Product Version End Date"},"editCustomer":{"title":"Edit Customer"},"managePartners":{"title":"Manage Partners"}},"buttons":{"addCustomer":"Add a Customer +","addPartner":"Add a Partner +","addProject":"Add a Project +","addProductVersion":"Add product version +","addSubscription":"Add a Subscription","cancel":"Cancel","delete":"Delete","edit":"Edit","managePartners":"Manage Partners","manageSubscriptions":"Manage Subscriptions","manageUsers":"Manage Users","openTicket":"Open Ticket","save":"Save","submit":"Submit","subscriptionRequest":"Subscription Request","view":"View","viewAllTickets":"View All Tickets","viewTickets":"View Tickets","viewDetails":"View Details"},"customerDashboard":{"customerPortal":"Customer Portal","title":"Welcome to Entando Customer Portal","customerName":"Customer Name","customerId":"Customer Id","startDate":"Start Date","endDate":"End Date","projectName":"Project Name","partnerName":"Partner Name","entandoVersion":"Entando Version","openTickets":"Open Tickets","subscriptions":"Subscriptions","tableDesc":"In this table there are open subscriptions","partners":"Partners","status":"Status","action":"Action"},"customerDetails":{"id":"Customer Id","name":"Customer Name","contactName":"Contact Name","contactPhone":"Contact Phone","contactEmail":"Contact Email","notes":"Notes"},"editSubscription":{"title":"Edit Subscription","description":"Description","commitment":"Commitment","type":"Type","quantityRequest":"QuantityRequest","components":"Components","level":"Level"},"manageUsers":{"title":"Entando Admin View","assign":{"title":"Assign a new User","desc":"Assign a user to an existing project.","projectName":"Project Name","assignUser":"Assign User","noUsers":"There are currently no users in the system","noProjects":"There are currently no projects in the system","projectList":"Projects List","selectRole":"Select Role","userList":"Users List"},"manage":{"title":"Manage all Users","desc":"View and delete existing users."},"delete":{"desc":"View and delete existing users","userName":"User Name","userEmail":"User Email","dateAdded":"Date Added","userAccess":"User Access","removeUser":"Remove User"}},"modalText":{"cancel":"Cancel","done":"Done","save":"Save"},"projectDetails":{"description":"Description:","type":"Type:","quantityRequest":"Quantity Request:","components":"Components","id":"ID","status":"Status","level":"Level","startDate":"Start Date","endDate":"End Date","lengthInMonths":"Length (months)","license":"License","listOfTickets":"List of Tickets","tickets":"Tickets","project":"Project","entandoVersion":"Entando Version","creationDate":"Creation Date","goToTicket":"Go to Ticket"},"roles":{"admin":"Admin","customer":"Customer","partner":"Partner","support":"Support"},"submitMessages":{"subscriptionRequired":"A subscription is required to create tickets for this project","created":"Successfully created","updated":"Successfully updated","added":"Successfully added","confirmDelete":"Are you sure you want to delete this item?","deleted":"Successfully deleted","error":"An error occurred","ticketError":"An error occurred. Make sure this project has a corresponding organization in Jira."},"subscriptionDetails":{"description":"Description","commitment":"Commitment","partners":"Partners","type":"Type","status":"Status","level":"Level","startDate":"Start Date","endDate":"End Date","license":"License","lengthInMonths":"Length In Months","notes":"Notes","assignedUsers":"Assigned Users"},"subscriptionForm":{"adminSubmitNewSuccess":"Successfully added a project subscription.","adminRenewNewSuccess":"Successfully renewed a project subscription.","adminTitle":"Admin Subscription Form","chooseLevel":"Choose a level","chooseVersion":"Choose Entando version","contactEmail":"Contact Email *","contactName":"Contact Name *","contactNumber":"Contact Phone Number","customerEmail":"Customer Email *","customerName":"Customer Name *","customerNumber":"Customer Number *","customerSubmitSuccess":"You will be contacted by an Entando Sales representative to finalize the subscription.","entandoVersion":"Entando Version","formTitle":"Subscription Request","editSubscription":"Edit Subscription","newSubError":"Errore durante l\'aggiunta di una sottoscrizione al progetto.","newSubscription":"New Subscription","projectName":"Project Name *","renewSubError":"Error in renewing a project subscription.","renewSubscription":"Renew Subscription","selectType":"Select Subscription Type","subscriptionLength":"Subscription Length (months)","subscriptionLevel":"Subscription Level","subscriptionStartDate":"Subscription Start Date *","subscriptionStatus":"Subscription Status *","subscriptionType":"Subscription Type *"},"supportTicketForm":{"title":"Entando Admin View","formTitle":"Create new support ticket","desc":"Create a support ticket for an existing project.","select":"Select","type":"Type","selectProject":"Select Project","ticketNumber":"Ticket Number","customerName":"Customer Name","projectName":"ProjectName","ticketOpenedBy":"Ticket Opened By:","priority":"Priority","partnerName":"Partner Name","ticketSummary":"Ticket Summary","addticketSummary":"Add Ticket Summary","ticketDescription":"Ticket Description","addticketDescription":"Add Ticket Description"},"ticketDetails":{"listOfTickets":"List of Tickets","tickets":"Tickets","issue":"Issue","project":"Project","summary":"Summary","description":"Description","type":"Type","status":"Status","created":"Created","link":"Link","priority":"Priority","updated":"Updated","viewTicket":"View Ticket"},"userMessages":{"loading":"Loading","login":"Login","logout":"Logout","none":"None","unauthorized":"Unauthorized"},"validation":{"invalid":{"required":"This field is required.","email":"Email is not valid.","date":"Please enter a date in \'mm/dd/yyyy\' format.","number":"This field must be a number."}}}')},79:function(t){t.exports=JSON.parse('{"adminConfig":{"title":"Interfaccia di Amministrazione di Entando","formTitle":"Tutti i clienti","desc":"Configura il sistema di segnalazione e le versioni di Entando qui di seguito.","integrationTicketingSystem":{"title":"Integrazione con il sistema di segnalazione","desc":"Questo ti permette di gestire il sistema di segnalazione","selectBackendTicketingSystem":"Seleziona il sistema di segnalazione (Backend Ticketing System)","select":"Selezionare","url":"URL","userName":"Nome utente","password":"Parola d\'ordine","projectName":"Nome del progetto"},"manageProductVersion":{"title":"Gestisci la versione del prodotto","desc":"Ci\xf2 consente di gestire le versioni del prodotto Entando","entandoVersion":"Versione di Entando","status":"Stato *","startDate":"data d\'inizio","supportEndDate":"Data di fine supporto"}},"adminDashboard":{"title":"Benvenuti a Entando","adminTitle":"Benvenuti all\'Interfaccia di Amministrazione di Entando","customerTitle":"Benvenuti all\'Interfaccia di Amministrazione dei Clienti di Entando","partnerTitle":"Benvenuti all\'Interfaccia di Amministrazione dei Partner di Entando","supportTitle":"Benvenuti all\'Interfaccia di Amministrazione del Supporto di Entando","allCustomers":"Tutti i clienti","searchLabel":"Ricerca dei clienti","searchText":"Quale cliente stai cercando?","view":"Visualizza","addProject":{"title":"Aggiungi un progetto","customerList":"Elenco clienti","selectCustomer":"Seleziona cliente","projectName":"Nome del progetto","projectDesc":"descrizione del progetto","systemId":"ID sistema","contactName":"Nome del contatto","contactPhone":"Contatto telefonico","contactEmail":"Contatto email","notes":"Appunti","editTitle":"Modifica progetto"},"addCustomer":{"title":"Aggiungi un cliente","customerName":"Nome del cliente","customerNumber":"Numero cliente","contactName":"Nome del contatto","contactPhone":"Contatto telefonico","contactEmail":"Contatto email","notes":"Appunti"},"addPartner":{"title":"Aggiungi un Partner","projectList":"Elenco Progetti","selectProject":"Seleziona Progetto","partnerName":"Nome Partner","partnerNumber":"Numero Partner","notes":"Appunti"},"addProductVersion":{"title":"Aggiungi una nuova versione del prodotto","productVersion":"Versione del prodotto","productVersionStartDate":"Data di inizio della versione del prodotto","productVersionEndDate":"Data di fine vita della versione del prodotto"},"editCustomer":{"title":"Modifica cliente"},"managePartners":{"title":"Gestire i partner"}},"buttons":{"addCustomer":"Aggiungi un cliente +","addPartner":"Aggiungi un partner +","addProject":"Aggiungi un progetto +","addSubscription":"Aggiungi un abbonamento","addProductVersion":"Aggiungi la versione del prodotto +","cancel":"Annulla","delete":"Elimina","edit":"Modificare","managePartners":"Gestire i Partner","manageSubscriptions":"Gestisci le iscrizioni","manageUsers":"Gestione Utenti","openTicket":"Apri un ticket","save":"Salva","submit":"Invia","subscriptionRequest":"Richiesta di abbonamento","view":"Visualizza","viewAllTickets":"Visualizza tutte le richieste (tickets)","viewTickets":"Visualizzare tutte le richieste (tickets)","viewDetails":"Visualizza dettagli"},"customerDashboard":{"customerPortal":"Portale Clienti","title":"Benvenuto nel Portale Clienti Entando","customerName":"Nome del cliente","customerId":"Identificativo del cliente","startDate":"Data d\'inizio","endDate":"Data di fine","projectName":"Nome del progetto","partnerName":"Nome partner","entandoVersion":"Versione Entando","openTickets":"Segnalazioni aperte","subscriptions":"Subscriptions","tableDesc":"In questa tabella ci sono Subscription aperte","partners":"Partner","status":"Stato","action":"Azione"},"customerDetails":{"id":"Identificativo del cliente","name":"Nome del cliente","contactName":"Nome del contatto","contactPhone":"Contatto telefonico","contactEmail":"Contatto email","notes":"Appunti"},"editSubscription":{"title":"Modifica subscription","description":"Descrizione","commitment":"Impegno","type":"genere","quantityRequest":"Quantit\xe0 Richiesta","components":"Componenti","level":"Livello"},"manageUsers":{"title":"Entando Interfaccia Amministrativa","assign":{"title":"Assegna un nuovo utente","desc":"Assegnare un utente a un progetto esistente.","assignUser":"Assegna utente","projectName":"Nome del progetto","projectList":"Elenco dei progetti","noUsers":"Al momento non ci sono utenti nel sistema","noProjects":"Al momento non ci sono progetti nel sistema","selectRole":"Seleziona ruolo","userList":"Elenco degli utenti"},"manage":{"title":"Gestisci tutti gli utenti","desc":"Visualizzare ed eliminare gli utenti esistenti."},"delete":{"desc":"Visualizzare ed eliminare gli utenti esistenti","userName":"Nome atente","userEmail":"Email dell\'utente","dateAdded":"Data aggiunta","userAccess":"Accesso utente","removeUser":"Rimuovere l\'utente"}},"modalText":{"cancel":"Annulla","done":"Completato","save":"Salva"},"projectDetails":{"description":"Descrizione","type":"Tipo","quantityRequest":"Quantit\xe0 richiesta:","components":"Componente","id":"ID","status":"Stato","level":"Lievllo","startDate":"Data di inizio","endDate":"Data di fine","lengthInMonths":"Durata (mesi)","license":"Licenza","listOfTickets":"Lista delle segnalazioni","tickets":"Segnalazioni","project":"Progetto","entandoVersion":"Versione di Entando","creationDate":"Data di creazione","goToTicket":"Vai alla segnalazione"},"roles":{"admin":"Amministratore","customer":"Cliente","partner":"Partner","support":"Supporto"},"submitMessages":{"subscriptionRequired":"\xc8 necessario una subscription per creare segnalazioni per questo progetto","created":"Creata con successo","updated":"Aggiornata con successo","added":"Aggiunta con successo","confirmDelete":"Sei sicuro di voler eliminare questo articolo?","deleted":"Cancellato con successo","error":"Si \xe8 verificato un errore","ticketError":"Si \xe8 verificato un errore. Assicurarsi che questo progetto abbia un\'organizzazione corrispondente in Jira Service Desk."},"subscriptionDetails":{"description":"Descrizione","commitment":"Impegno","partners":"Partner","type":"Genere","status":"Stato","level":"Livello","startDate":"Data d\'inizio","endDate":"Data di fine","license":"Licenza","lengthInMonths":"Durata in mesi","notes":"Appunti","assignedUsers":"Utenti assegnati"},"subscriptionForm":{"adminSubmitNewSuccess":"Aggiunta di una sottoscrizione al progetto riuscita.","adminRenewNewSuccess":"Rinnovato con successo una subscription al progetto.","adminTitle":"Interfaccia Amministrativa di Entando","chooseLevel":"Scegli un livello","chooseVersion":"Scegli la versione Entando","contactEmail":"Contatto email *","contactName":"Nome del contatto *","contactNumber":"numero di contatto telefonico","customerEmail":"Email del cliente *","customerName":"Nome del cliente *","customerNumber":"Numero cliente *","customerSubmitSuccess":"Sarai contattato da un addetto alle vendite Entando per finalizzare l\'attivazione della subscription.","entandoVersion":"Versione di Entando","formTitle":"Nuova o rinnova subscription","editSubscription":"Modifica subscription","newSubError":"Errore durante la creazione di una nuova subscription di progetto.","newSubscription":"Nuovo subscription","projectName":"Nome del progetto *","renewSubError":"Errore nel rinnovo della subscription di un progetto.","renewSubscription":"Rinnova la subscription","selectType":"Seleziona il tipo di subscription","subscriptionLength":"Durata della subscription","subscriptionLevel":"Livello di subscription","subscriptionStartDate":"Data di inizio della subscription *","subscriptionStatus":"Stato della subscription","subscriptionType":"Genere di subscription *"},"supportTicketForm":{"title":"Interfaccia Amministrativa di Entando","formTitle":"Creare una nuova segnalazione di supporto","desc":"Creare una nuova segnalazione di supporto per un progetto esistente.","select":"Seleziona","type":"Genere","selectProject":"Seleziona progetto","ticketNumber":"Numero della Segnalazione","customerName":"Nome Cliente","projectName":"Nome Progetto","ticketOpenedBy":"Segnalazione aperta da:","priority":"Priorit\xe0","partnerName":"Nome del Partner","ticketSummary":"Riepiliogo della segnalazione","addticketSummary":"Aggiungi il riepilogo della segnalazione","ticketDescription":"Descrizione della segnalazione","addticketDescription":"Aggiungi una descrizione alla segnalazione"},"ticketDetails":{"listOfTickets":"Elenco delle segnalazioni","tickets":"Segnalazioni","issue":"Problema","project":"Progetto","summary":"Sommario","description":"Descrizione","type":"Genere","status":"Stato","created":"Creato","link":"Collegamento","priority":"Priorit\xe0","updated":"Aggiornato","viewTicket":"visualizza la segnalazione"},"userMessages":{"loading":"Caricamento in corso","login":"Login","logout":"Logout","none":"Nessuna","unauthorized":"Non autorizzato"},"validation":{"invalid":{"required":"Questo campo \xe8 obbligatorio.","email":"L\'email non \xe8 valida.","date":"Inserisci una data nel formato \'mm / gg / aaaa\'.","number":"Questo campo deve essere un numero."}}}')}},[[106,1,2]]]);
//# sourceMappingURL=main.3bdb06bb.chunk.js.map