(this["webpackJsonpcp-widgets"]=this["webpackJsonpcp-widgets"]||[]).push([[0],{101:function(t,e,a){"use strict";a.r(e);a(23);var n=a(8),i=a(9),r=a(10),s=a(11),c=a(15),o=a(4),u=a(0),l=a.n(u),d=a(13),h=a.n(d),p=a(5),m=a.n(p),b=a(6),j=a(39),v=a.n(j),f=a(75),O=a(76);v.a.defaultLocale="en",v.a.locale="en",v.a.fallbacks=!0,v.a.translations={en:f,it:O};var k=function(t){v.a.locale=t},g=v.a,x=a(129),y=a(119),w=a(102),S=a(121),C=a(12),D=a(127),T=a(115),N=a(126),P=a(116),E=a(83),U=a(3),M=a.n(U),z=(M.a.oneOfType([M.a.func,M.a.shape({current:M.a.elementType}),M.a.shape(null)]),l.a.createContext(null)),I=a(2);function L(t){var e=function(e){Object(r.a)(c,e);var a=Object(s.a)(c);function c(){var e;Object(n.a)(this,c);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).renderWrappedComponent=function(a){var n=e.props,i=n.forwardedRef,r=Object(E.a)(n,["forwardedRef"]);return Object(I.jsx)(t,Object(o.a)(Object(o.a)({},r),{},{ref:i,keycloak:a}))},e}return Object(i.a)(c,[{key:"render",value:function(){return Object(I.jsx)(z.Consumer,{children:this.renderWrappedComponent})}}]),c}(u.Component);return e.defaultProps={forwardedRef:function(){}},Object(u.forwardRef)((function(t,a){return Object(I.jsx)(e,Object(o.a)(Object(o.a)({},t),{},{forwardedRef:a}))}))}var V=function(){return window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""},A=function(){return G("cp-admin")},F=function(){return G("cp-support")},q=function(){return G("cp-partner")},R=function(){return G("cp-customer")},Y=function(){return A()||F()},B=function(){return R()||q()},H=function(){return Y()||B()},G=function(t){if(V()){var e=window.entando.keycloak.resourceAccess;if(e)for(var a in e){var n=e[a];if(n.roles&&n.roles.includes(t))return!0}}return!1},J=function(){return{headers:new Headers({Authorization:"Bearer ".concat(V()),"Content-Type":"application/json"})}},K=function(){return{headers:new Headers({Authorization:"Bearer ".concat(V()),"Content-Type":"application/x-www-form-urlencoded"})}},W=function(t){return"".concat(t)},_=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,a);case 2:if(n=t.sent,i=Object(o.a)({},n.headers.has("X-Total-Count")?{"X-Total-Count":parseInt(n.headers.get("X-Total-Count"),10)}:{}),204!==n.status){t.next=6;break}return t.abrupt("return",{data:"",status:n.status});case 6:if(!(n.status>=200&&n.status<300)){t.next=15;break}return t.next=9,n.json();case 9:t.t1=t.sent,t.t2=i,t.t3=n.status,t.t0={data:t.t1,headers:t.t2,status:t.t3},t.next=16;break;case 15:t.t0=Promise.reject(new Error(n.statusText||n.status));case 16:return t.abrupt("return",t.t0);case 17:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Q="api/customers",$=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Q,"/").concat(a),i=Object(o.a)(Object(o.a)({},J()),{},{method:"DELETE"}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),X=function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=W("".concat(e,"/").concat(Q)),n=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(a,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Z=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=W("".concat(e,"/").concat(Q,"/").concat(a)),i=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),tt=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Q),i=Object(o.a)(Object(o.a)({},J()),{},{method:"POST",body:a?JSON.stringify(a):null}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),et=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Q),i=Object(o.a)(Object(o.a)({},J()),{},{method:"PUT",body:a?JSON.stringify(a):null}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),at=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Q,"/").concat(a,"/projects"),i=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),nt=function(){var t=Object(b.a)(m.a.mark((function t(e,a,n){var i,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="".concat(e,"/").concat(Q,"/").concat(a,"/projects/").concat(n),r=Object(o.a)(Object(o.a)({},J()),{},{method:"POST"}),t.abrupt("return",_(i,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),it=function(){var t=Object(b.a)(m.a.mark((function t(e,a,n){var i,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="".concat(e,"/").concat(Q,"/").concat(a,"/projects/").concat(n),r=Object(o.a)(Object(o.a)({},J()),{},{method:"DELETE"}),t.abrupt("return",_(i,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),rt="api/customers/admin",st=function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=W("".concat(e,"/").concat(rt)),n=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(a,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ct=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=W("".concat(e,"/").concat(rt,"/").concat(a)),i=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),ot="api/customers/mycustomers",ut=function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=W("".concat(e,"/").concat(ot)),n=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(a,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),lt=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(ot,"/").concat(a,"/projects"),i=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),dt=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;i.setState(Object(C.a)({},a,n))},i.handleFormSubmit=function(t){if(i.handleValidation()){var e={name:i.state.name,customerNumber:i.state.customerNumber,contactName:i.state.contactName,contactPhone:i.state.contactPhone,contactEmail:i.state.contactEmail,notes:i.state.notes};i.customerPost(e).then((function(t){i.setState({submitMsg:g.t("submitMessages.added"),submitColour:"#24a148"}),i.props.updateCustomerList()})).catch((function(t){i.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})}))}},i.clearValues=function(){document.querySelector("#modal-form-customer").className.includes("is-visible")||i.setState(i.baseState)},i.state={name:"",customerNumber:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"},i.baseState=i.state,i}return Object(i.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;if(""===this.state.name&&(e=!1,t.name=!0),""===this.state.customerNumber&&(e=!1,t.customerNumber=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1==this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(e=!1,t.contactEmail=!0)}return this.setState({invalid:t}),e}},{key:"customerPost",value:function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){t.next=6;break}return t.next=5,tt(this.props.serviceUrl,e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){document.querySelector(".add-customer-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){return Object(I.jsx)(D.a,{buttonTriggerText:g.t("buttons.addCustomer"),modalHeading:g.t("adminDashboard.addCustomer.title"),buttonTriggerClassName:"add-customer bx--btn bx--btn--tertiary add-customer-button",className:"modal-form",id:"modal-form-customer",handleSubmit:this.handleFormSubmit,primaryButtonText:g.t("modalText.save"),secondaryButtonText:g.t("modalText.cancel"),modalLabel:Object(I.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),children:Object(I.jsx)("div",{className:"form-container",children:Object(I.jsxs)(T.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsx)(N.a,{name:"name",labelText:g.t("adminDashboard.addCustomer.customerName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(I.jsx)(N.a,{name:"customerNumber",labelText:g.t("adminDashboard.addCustomer.customerNumber")+" *",value:this.state.customerNumber,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.customerNumber}),Object(I.jsx)(N.a,{name:"contactName",labelText:g.t("adminDashboard.addCustomer.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(I.jsx)(N.a,{name:"contactPhone",labelText:g.t("adminDashboard.addCustomer.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(I.jsx)(N.a,{name:"contactEmail",labelText:g.t("adminDashboard.addCustomer.contactEmail")+" *",value:this.state.contactEmail,onChange:this.handleChanges,invalidText:g.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(I.jsx)(P.a,{name:"notes",labelText:g.t("adminDashboard.addCustomer.notes"),value:this.state.notes,onChange:this.handleChanges})]})})})}}]),a}(u.Component)),ht=a(117),pt=a(118),mt="api/partners",bt=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(mt),i=Object(o.a)(Object(o.a)({},J()),{},{method:"POST",body:a?JSON.stringify(a):null}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),jt="api/projects",vt=function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=W("".concat(e,"/").concat(jt)),n=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(a,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ft=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=W("".concat(e,"/").concat(jt,"/").concat(a)),i=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Ot=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(jt),i=Object(o.a)(Object(o.a)({},J()),{},{method:"POST",body:a?JSON.stringify(a):null}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),kt=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(jt),i=Object(o.a)(Object(o.a)({},J()),{},{method:"PUT",body:a?JSON.stringify(a):null}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),gt=function(){var t=Object(b.a)(m.a.mark((function t(e,a,n){var i,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="".concat(e,"/").concat(jt,"/").concat(a,"/tickets/").concat(n),r=Object(o.a)(Object(o.a)({},J()),{},{method:"POST"}),t.abrupt("return",_(i,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),xt=function(){var t=Object(b.a)(m.a.mark((function t(e,a,n){var i,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="".concat(e,"/").concat(jt,"/").concat(a,"/subscriptions/").concat(n),r=Object(o.a)(Object(o.a)({},J()),{},{method:"POST"}),t.abrupt("return",_(i,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),yt=function(){var t=Object(b.a)(m.a.mark((function t(e,a,n){var i,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="".concat(e,"/").concat(jt,"/").concat(a,"/users/").concat(n),r=Object(o.a)(Object(o.a)({},J()),{},{method:"POST"}),t.abrupt("return",_(i,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),wt=function(){var t=Object(b.a)(m.a.mark((function t(e,a,n){var i,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="".concat(e,"/").concat(jt,"/").concat(a,"/partners/").concat(n),r=Object(o.a)(Object(o.a)({},J()),{},{method:"POST"}),t.abrupt("return",_(i,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),St=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(jt,"/").concat(a,"/users/"),i=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Ct=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(jt,"/").concat(a,"/subscriptions/"),i=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Dt=function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(e,"/").concat(jt,"/nameId/"),n=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(a,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Tt=function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(e,"/").concat(jt,"/myprojects/nameId/"),n=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(a,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Nt=function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=W("".concat(e,"/").concat("api/projects/admin")),n=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(a,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Pt=function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=W("".concat(e,"/").concat("api/projects/myprojects")),n=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(a,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Et=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;i.setState(Object(C.a)({},a,n))},i.handleFormSubmit=function(t){if(i.handleValidation()){var e={name:i.state.name,partnerNumber:i.state.partnerNumber,notes:i.state.notes};i.partnerPost(e).then((function(t){i.setState({submitMsg:g.t("submitMessages.added"),submitColour:"#24a148"}),i.props.updateCustomerList()})).catch((function(t){i.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})}))}},i.clearValues=function(){document.querySelector("#modal-form-partner").className.includes("is-visible")||i.setState({projectId:"",name:"",partnerNumber:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"})},i.state={projectList:{},projectId:"",name:"",partnerNumber:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"},i}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&this.getProjects()}},{key:"handleValidation",value:function(){var t={},e=!0;return""!==this.state.projectId&&"project-list"!==this.state.projectId||(e=!1,t.projectId=!0),""===this.state.name&&(e=!1,t.name=!0),""===this.state.partnerNumber&&(e=!1,t.partnerNumber=!0),this.setState({invalid:t}),e}},{key:"getProjects",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,e.t,a=e.keycloak,!(a.initialized&&a.authenticated)){t.next=7;break}return t.next=5,vt(this.props.serviceUrl);case 5:n=t.sent,this.setState({projectList:n});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"partnerPost",value:function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){t.next=9;break}return t.next=5,bt(this.props.serviceUrl,e);case 5:return i=t.sent,t.next=8,wt(this.props.serviceUrl,this.state.projectId,i.data.id);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getProjects(),document.querySelector(".add-partner-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){return Object(I.jsx)(D.a,{buttonTriggerText:g.t("buttons.addPartner"),modalHeading:g.t("adminDashboard.addPartner.title"),buttonTriggerClassName:"add-partner bx--btn bx--btn--tertiary add-partner-button",className:"modal-form",id:"modal-form-partner",handleSubmit:this.handleFormSubmit,primaryButtonText:g.t("modalText.save"),secondaryButtonText:g.t("modalText.cancel"),modalLabel:Object(I.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),children:Object(I.jsx)("div",{className:"form-container",children:Object(I.jsxs)(T.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsxs)(ht.a,{defaultValue:"project-list",name:"projectId",labelText:g.t("adminDashboard.addPartner.projectList")+" *",value:this.state.projectId,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.projectId,children:[Object(I.jsx)(pt.a,{text:g.t("adminDashboard.addPartner.selectProject"),value:"project-list"}),0!==Object.keys(this.props.allProjects).length?this.props.allProjects.map((function(t,e){return Object(I.jsx)(pt.a,{text:t.name,value:t.id,children:t.name},e)})):null]}),Object(I.jsx)(N.a,{name:"name",labelText:g.t("adminDashboard.addPartner.partnerName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(I.jsx)(N.a,{name:"partnerNumber",labelText:g.t("adminDashboard.addPartner.partnerNumber")+" *",value:this.state.partnerNumber,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.partnerNumber}),Object(I.jsx)(P.a,{name:"notes",labelText:g.t("adminDashboard.addPartner.notes"),value:this.state.notes,onChange:this.handleChanges})]})})})}}]),a}(u.Component)),Ut=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;i.setState(Object(C.a)({},a,n))},i.handleFormSubmit=function(t){if(i.handleValidation()){for(var e={name:i.state.name,description:i.state.description,systemId:i.state.systemId,contactName:i.state.contactName,contactPhone:i.state.contactPhone,contactEmail:i.state.contactEmail,notes:i.state.notes},a=0;a<i.state.projects.length;a++)if(e.systemId===i.state.projects[a].systemId&&""!==e.systemId.trim())return void window.alert("That system id is already in use in another project");i.projectPost(e).then((function(t){i.setState({submitMsg:g.t("submitMessages.added"),submitColour:"#24a148"}),i.props.updateCustomerList(),i.getAllProjects()})).catch((function(t){i.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})}))}},i.clearValues=function(){document.querySelector("#modal-form-project").className.includes("is-visible")||i.setState({customerId:"",name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{}})},i.state={projects:{},customerList:{},customerId:"",name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"},i}return Object(i.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;if(""!==this.state.customerId&&"customer-list"!==this.state.customerId||(e=!1,t.customerId=!0),""===this.state.name&&(e=!1,t.name=!0),""===this.state.description&&(e=!1,t.description=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1==this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(e=!1,t.contactEmail=!0)}return this.setState({invalid:t}),e}},{key:"getAllProjects",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vt(this.props.serviceUrl);case 2:e=t.sent,this.setState({projects:e.data});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&(this.getCustomers(),this.getAllProjects())}},{key:"getCustomers",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,e.t,a=e.keycloak,!(a.initialized&&a.authenticated)){t.next=7;break}return t.next=5,X(this.props.serviceUrl);case 5:n=t.sent,this.setState({customerList:n});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"projectPost",value:function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){t.next=9;break}return t.next=5,Ot(this.props.serviceUrl,e);case 5:return i=t.sent,t.next=8,nt(this.props.serviceUrl,this.state.customerId,i.data.id);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getCustomers(),this.getAllProjects(),document.querySelector(".add-project-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){var t;return Object(I.jsx)(D.a,{buttonTriggerText:g.t("buttons.addProject"),modalHeading:g.t("adminDashboard.addProject.title"),buttonTriggerClassName:"add-project bx--btn bx--btn--tertiary add-project-button",className:"modal-form",id:"modal-form-project",handleSubmit:this.handleFormSubmit,primaryButtonText:g.t("modalText.save"),secondaryButtonText:g.t("modalText.cancel"),modalLabel:Object(I.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),children:Object(I.jsx)("div",{className:"form-container",children:Object(I.jsxs)(T.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsxs)(ht.a,(t={defaultValue:"customer-list",name:"customerId",labelText:g.t("adminDashboard.addProject.customerList")+" *"},Object(C.a)(t,"defaultValue",{label:"Select Dept",value:0}),Object(C.a)(t,"value",this.state.customerId),Object(C.a)(t,"onChange",this.handleChanges),Object(C.a)(t,"invalidText",g.t("validation.invalid.required")),Object(C.a)(t,"invalid",this.state.invalid.customerId),Object(C.a)(t,"children",[Object(I.jsx)(pt.a,{text:g.t("adminDashboard.addProject.selectCustomer"),value:"customer-list"}),0!==Object.keys(this.props.allCustomers).length?this.props.allCustomers.map((function(t,e){return Object(I.jsx)(pt.a,{text:t.name,value:t.id,children:t.name},e)})):null]),t)),Object(I.jsx)(N.a,{name:"name",labelText:g.t("adminDashboard.addProject.projectName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(I.jsx)(N.a,{name:"description",labelText:g.t("adminDashboard.addProject.projectDesc")+" *",value:this.state.description,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(I.jsx)(N.a,{name:"systemId",labelText:g.t("adminDashboard.addProject.systemId"),value:this.state.systemId,onChange:this.handleChanges}),Object(I.jsx)(N.a,{name:"contactName",labelText:g.t("adminDashboard.addProject.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(I.jsx)(N.a,{name:"contactPhone",labelText:g.t("adminDashboard.addProject.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(I.jsx)(N.a,{name:"contactEmail",labelText:g.t("adminDashboard.addProject.contactEmail")+" *",value:this.state.contactEmail,onChange:this.handleChanges,invalidText:g.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(I.jsx)(P.a,{name:"notes",labelText:g.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})})})}}]),a}(u.Component)),Mt=a(24),zt=a(120),It=a(103),Lt=a(125),Vt=a(66),At=a(64),Ft=a(67),qt=a(68),Rt=a(70),Yt=a(65),Bt=a(37),Ht=function(t){var e=t.children,a=t.keycloak;return a.initialized&&a.authenticated?e:null},Gt=function(t){var e=t.children,a=t.keycloak;return a.initialized&&a.authenticated?null:e},Jt=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;i.setState(Object(C.a)({},a,n))},i.handleFormSubmit=function(t){if(i.handleValidation()){for(var e={id:i.props.project.id,customer:i.props.project.customer,name:i.state.name,description:i.state.description,systemId:i.state.systemId,contactName:i.state.contactName,contactPhone:i.state.contactPhone,contactEmail:i.state.contactEmail,notes:i.state.notes},a=0;a<i.props.allProjects.length;a++)if(e.systemId===i.props.allProjects[a].systemId&&e.id!==i.props.allProjects[a].id&&""!==e.systemId.trim())return void window.alert("That system id is already in use in another project");i.projectPut(e).then((function(t){i.setState({submitMsg:g.t("submitMessages.updated"),submitColour:"#24a148"}),i.props.updateProjectList()})).catch((function(t){i.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})}))}},i.clearValues=function(){var t=i.props.keycloak,e=t.initialized&&t.authenticated;!document.querySelector("#"+i.state.modalId).className.includes("is-visible")&&e&&i.setState({name:i.props.project.name,description:i.props.project.description,systemId:i.props.project.systemId,contactName:i.props.project.contactName,contactPhone:i.props.project.contactPhone,contactEmail:i.props.project.contactEmail,notes:i.props.project.notes,invalid:{}})},i.state={projects:{},customerList:{},customerId:"",name:"",description:"",systemId:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},modalId:"",buttonId:"",submitMsg:"",submitColour:"black"},i}return Object(i.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;if(""===this.state.name&&(e=!1,t.name=!0),""===this.state.description&&(e=!1,t.description=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1==this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(e=!1,t.contactEmail=!0)}return this.setState({invalid:t}),e}},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&(this.getCustomers(),this.getAllProjects(),this.getProjectDetails())}},{key:"getCustomers",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,e.t,a=e.keycloak,!(a.initialized&&a.authenticated)){t.next=7;break}return t.next=5,X(this.props.serviceUrl);case 5:n=t.sent,this.setState({customerList:n});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getProjectDetails",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,e.t,a=e.keycloak,!(a.initialized&&a.authenticated)){t.next=7;break}return t.next=5,ft(this.props.serviceUrl,this.props.project.id);case 5:n=t.sent,this.setState({name:n.data.name,description:n.data.description,systemId:n.data.systemId,contactName:n.data.contactName,contactPhone:n.data.contactPhone,contactEmail:n.data.contactEmail,notes:n.data.notes,modalId:"modal-form-project-edit-"+n.data.id,buttonId:"edit-project-button-"+n.data.id});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getAllProjects",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,vt(this.props.serviceUrl);case 2:e=t.sent,this.setState({projects:e.data});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"projectPut",value:function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){t.next=6;break}return t.next=5,kt(this.props.serviceUrl,e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=this.props.keycloak;t.initialized&&t.authenticated&&(this.getCustomers(),this.getAllProjects(),this.getProjectDetails(),document.querySelector(".edit-project-button-"+this.props.project.id).addEventListener("click",this.clearValues,!1))}},{key:"render",value:function(){var t="dropdown-button-button bx--btn bx--btn--ghost edit-project-button-"+this.props.project.id;return Object(I.jsx)(D.a,{buttonTriggerText:g.t("buttons.edit"),modalHeading:g.t("adminDashboard.addProject.editTitle"),buttonTriggerClassName:t,className:"modal-form",id:this.state.modalId,handleSubmit:this.handleFormSubmit,primaryButtonText:g.t("modalText.save"),secondaryButtonText:g.t("modalText.cancel"),modalLabel:Object(I.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),children:Object(I.jsx)("div",{className:"form-container",children:Object(I.jsxs)(T.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsx)(N.a,{name:"name",labelText:g.t("adminDashboard.addProject.projectName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(I.jsx)(N.a,{name:"description",labelText:g.t("adminDashboard.addProject.projectDesc")+" *",value:this.state.description,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(I.jsx)(N.a,{name:"systemId",labelText:g.t("adminDashboard.addProject.systemId"),value:this.state.systemId,onChange:this.handleChanges}),Object(I.jsx)(N.a,{name:"contactName",labelText:g.t("adminDashboard.addProject.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(I.jsx)(N.a,{name:"contactPhone",labelText:g.t("adminDashboard.addProject.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(I.jsx)(N.a,{name:"contactEmail",labelText:g.t("adminDashboard.addProject.contactEmail")+" *",value:this.state.contactEmail,onChange:this.handleChanges,invalidText:g.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(I.jsx)(P.a,{name:"notes",labelText:g.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})})})}}]),a}(u.Component)),Kt="api/ticketing-systems",Wt=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Kt,"/").concat(a),i=Object(o.a)(Object(o.a)({},J()),{},{method:"DELETE"}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),_t=function(){var t=Object(b.a)(m.a.mark((function t(e){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Qt(e);case 2:return a=t.sent,t.abrupt("return",a.data[a.data.length-1]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Qt=function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=W("".concat(e,"/").concat(Kt)),n=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(a,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$t=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Kt),i=Object(o.a)(Object(o.a)({},J()),{},{method:"POST",body:a?JSON.stringify(a):null}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Xt=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Kt),i=Object(o.a)(Object(o.a)({},J()),{},{method:"PUT",body:a?JSON.stringify(a):null}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Zt=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;return Object(n.a)(this,a),(t=e.call(this)).handleClick=function(){t.state.showMenu?document.removeEventListener("mousedown",t.handleOutsideClick,!1):document.addEventListener("mousedown",t.handleOutsideClick,!1),t.setState((function(t){return{showMenu:!t.showMenu}}))},t.handleOutsideClick=function(e){t.node&&!t.node.contains(e.target)&&t.handleClick()},t.state={showMenu:!1},t}return Object(i.a)(a,[{key:"render",value:function(){var t=this,e=window.location.search;new URLSearchParams(e).get("project");return this.props.hasSubscription?Object(I.jsxs)("div",{children:[Object(I.jsx)(It.a,{onClick:this.handleClick,style:{padding:"10px 20px"},kind:"tertiary",children:"+"}),this.state.showMenu?Object(I.jsxs)("div",{className:"menu",style:{zIndex:"100",position:"absolute",backgroundColor:"white"},ref:function(e){t.node=e},children:[Object(I.jsx)(Mt.b,{to:"/subscription-details/".concat(this.props.sub.id),style:{textDecoration:"none"},children:Object(I.jsx)(It.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"View",children:g.t("buttons.view")})}),Object(I.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}}),A()?Object(I.jsxs)("div",{children:[Object(I.jsx)(Jt,{allProjects:this.props.allProjects,project:this.props.project,serviceUrl:this.props.serviceUrl,updateProjectList:this.props.updateProjectList},this.props.project.id),Object(I.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}})]}):null,Object(I.jsx)("a",{href:"/entando-de-app/".concat(this.props.locale,"/open_service_ticket.page?project=").concat(this.props.project.id),style:{textDecoration:"none"},children:Object(I.jsx)(It.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Open Ticket",children:g.t("buttons.openTicket")})}),Object(I.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}}),Object(I.jsx)("a",{href:this.props.ticketingSystem.url.substr(0,this.props.ticketingSystem.url.indexOf("/rest"))+"/issues/?jql=Organizations="+this.props.project.systemId,style:{textDecoration:"none"},target:"_blank",children:Object(I.jsx)(It.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"View Tickets",children:g.t("buttons.viewTickets")})}),Object(I.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}}),Object(I.jsx)("a",{href:"/entando-de-app/".concat(this.props.locale,"/new_or_renew_subscription.page?project=").concat(this.props.project.id),style:{textDecoration:"none"},children:Object(I.jsx)(It.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Subscription Request",children:g.t("buttons.subscriptionRequest")})}),Object(I.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}}),A()?Object(I.jsxs)("div",{children:[Object(I.jsx)("a",{href:"/entando-de-app/".concat(this.props.locale,"/manage_users.page?project=").concat(this.props.project.id),style:{textDecoration:"none"},children:Object(I.jsx)(It.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Manage Users",children:g.t("buttons.manageUsers")})}),Object(I.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}}),Object(I.jsx)(It.a,{kind:"ghost",onClick:function(e){return t.props.handleDeleteProject(e,t.props.project.id)},style:{display:"block",width:"100%",color:"red"},children:g.t("buttons.delete")}),Object(I.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}})]}):null]}):null]}):Object(I.jsxs)("div",{children:[Object(I.jsx)(It.a,{onClick:this.handleClick,style:{padding:"10px 20px"},kind:"tertiary",children:"+"}),this.state.showMenu?Object(I.jsxs)("div",{className:"menu",style:{zIndex:"100",position:"absolute",backgroundColor:"white"},ref:function(e){t.node=e},children:[Object(I.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}}),A()?Object(I.jsxs)("div",{children:[Object(I.jsx)(Jt,{allProjects:this.props.allProjects,project:this.props.project,serviceUrl:this.props.serviceUrl,updateProjectList:this.props.updateProjectList},this.props.project.id),Object(I.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}})]}):null,Object(I.jsx)("a",{href:"/entando-de-app/".concat(this.props.locale,"/new_or_renew_subscription.page.page?project=").concat(this.props.project.id),style:{textDecoration:"none"},children:Object(I.jsx)(It.a,{kind:"ghost",style:{display:"block",width:"100%"},value:"Subscription Request",children:g.t("buttons.subscriptionRequest")})}),Object(I.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}}),A()?Object(I.jsxs)("div",{children:[Object(I.jsx)(It.a,{kind:"ghost",onClick:function(e){return t.props.handleDeleteProject(e,t.props.project.id)},style:{display:"block",width:"100%",color:"red"},children:g.t("buttons.delete")}),Object(I.jsx)("hr",{style:{margin:"0",border:"none",borderTop:"1px solid lightgrey"}})]}):null]}):null]})}}]),a}(l.a.Component)),te=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).updateProjectList=function(){i.fetchData()},i.showMenu=function(t,e){var a={};a[String(e)]=!i.state.showMenu[String(e)],i.setState({showMenu:a})},i.closeMenu=function(){i.setState({showMenu:!1},(function(){document.removeEventListener("click",i.closeMenu)}))},i.handleDeleteProject=function(t,e){t.preventDefault(),window.confirm("Are you sure you want to delete this project?")&&i.deleteProject(e).then((function(t){i.setState({submitMsg:g.t("submitMessages.deleted"),submitColour:"#24a148"}),i.props.updateCustomerList()})).catch((function(t){i.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})}))},i.state={projects:{},ticketingSystem:{},action:"Edit",showMenu:{}},i.headerData=[{header:g.t("customerDashboard.projectName"),key:"projectName"},{header:g.t("customerDashboard.partners"),key:"partners"},{header:g.t("customerDashboard.entandoVersion"),key:"entandoVersion"},{header:g.t("customerDashboard.status"),key:"status"},{header:g.t("customerDashboard.startDate"),key:"startDate"},{header:g.t("customerDashboard.endDate"),key:"endDate"},{header:g.t("customerDashboard.openTickets"),key:"openTickets"},{header:g.t("customerDetails.notes"),key:"notes"},{header:g.t("customerDashboard.action"),key:"action"}],i}return Object(i.a)(a,[{key:"fetchData",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a,n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,e.t,a=e.keycloak,!(a.initialized&&a.authenticated)){t.next=22;break}if(t.prev=3,!Y()){t.next=10;break}return t.next=7,at(this.props.serviceUrl,this.props.customerNumber);case 7:n=t.sent,t.next=13;break;case 10:return t.next=12,lt(this.props.serviceUrl,this.props.customerNumber);case 12:n=t.sent;case 13:return t.next=15,_t(this.props.serviceUrl);case 15:i=t.sent,this.setState({projects:n,ticketingSystem:i}),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(3),console.log(t.t0);case 22:this.render();case 23:case"end":return t.stop()}}),t,this,[[3,19]])})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=this.props.keycloak;t.initialized&&t.authenticated&&this.fetchData()}},{key:"deleteProject",value:function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){t.next=6;break}return t.next=5,it(this.props.serviceUrl,this.props.customerNumber,e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&this.fetchData()}},{key:"render",value:function(){var t=this;return Object(I.jsx)("div",{children:Object(I.jsx)(Lt.a,{rows:ee,headers:this.headerData,children:function(e){e.rows;var a=e.headers,n=e.getHeaderProps,i=e.getTableProps;return Object(I.jsx)(Vt.a,{description:g.t("customerDashboard.tableDesc"),children:Object(I.jsxs)(At.a,Object(o.a)(Object(o.a)({},i()),{},{children:[Object(I.jsx)(Ft.a,{children:Object(I.jsx)(qt.a,{children:a.map((function(t){return t.header!==g.t("customerDetails.notes")||Y()?Object(I.jsx)(Rt.a,Object(o.a)(Object(o.a)({},n({header:t})),{},{children:t.header})):void 0}))})}),Object(I.jsx)(Yt.a,{children:0!==Object.keys(t.state.projects).length?t.state.projects.data.map((function(e,a){if(0===e.projectSubscriptions.length)return Object(I.jsxs)(qt.a,{children:[Object(I.jsx)(Bt.a,{children:e.name}),0!==e.partners.length?Object(I.jsx)(Bt.a,{children:e.partners.map((function(t){return Object(I.jsx)("p",{children:t.name})}))}):Object(I.jsx)(Bt.a,{children:g.t("userMessages.none")}),Object(I.jsx)(Bt.a,{children:g.t("userMessages.none")}),Object(I.jsx)(Bt.a,{children:g.t("userMessages.none")}),Object(I.jsx)(Bt.a,{children:g.t("userMessages.none")}),Object(I.jsx)(Bt.a,{children:g.t("userMessages.none")}),Object(I.jsx)(Bt.a,{children:e.tickets.length}),Y()?Object(I.jsx)(Bt.a,{style:{width:"250px"},children:e.notes}):null,Object(I.jsx)(Bt.a,{children:Object(I.jsx)(Zt,{serviceUrl:t.props.serviceUrl,ticketingSystem:t.state.ticketingSystem,locale:t.props.locale,hasSubscription:!1,project:e,allProjects:t.state.projects.data,handleDeleteProject:t.handleDeleteProject,updateProjectList:t.updateProjectList})})]},a);var n=e.projectSubscriptions[e.projectSubscriptions.length-1];return Object(I.jsxs)(qt.a,{children:[Object(I.jsx)(Bt.a,{children:Object(I.jsx)(Mt.b,{to:"/subscription-details/".concat(n.id),children:e.name})}),0!==e.partners.length?Object(I.jsx)(Bt.a,{children:e.partners.map((function(t){return Object(I.jsx)("p",{children:t.name})}))}):Object(I.jsx)(Bt.a,{children:g.t("userMessages.none")}),n.entandoVersion?Object(I.jsx)(Bt.a,{children:n.entandoVersion.name}):Object(I.jsx)(Bt.a,{children:g.t("userMessages.none")}),Object(I.jsx)(Bt.a,{children:n.status}),Object(I.jsx)(Bt.a,{children:String(new Date(n.startDate).toDateString())}),Object(I.jsx)(Bt.a,{children:String(new Date(new Date(n.startDate).setMonth(new Date(n.startDate).getMonth()+n.lengthInMonths)).toDateString())}),Object(I.jsx)(Bt.a,{children:e.tickets.length}),Y()?Object(I.jsx)(Bt.a,{style:{width:"250px"},children:e.notes}):null,Object(I.jsx)(Bt.a,{children:Object(I.jsx)(Zt,{serviceUrl:t.props.serviceUrl,ticketingSystem:t.state.ticketingSystem,locale:t.props.locale,sub:n,hasSubscription:!0,project:e,allProjects:t.state.projects.data,handleDeleteProject:t.handleDeleteProject,updateProjectList:t.updateProjectList})})]},a)})):null})]}))})}})})}}]),a}(u.Component),ee=[{id:"a",projectName:Object(I.jsx)("a",{href:"",children:"Supplier Portal"}),partnerName:"Leonardo",entandoVersion:5.2,startDate:"October, 2019",endDate:"October, 2022",openTickets:"5"},{id:"b",projectName:Object(I.jsx)("a",{href:"",children:"Task Manager"}),partnerName:"Veriday",entandoVersion:5.2,startDate:"July, 2019",endDate:"July, 2022",openTickets:"2"},{id:"c",projectName:Object(I.jsx)("a",{href:"",children:"Sales Coordination App"}),partnerName:"Accenture",entandoVersion:6.2,startDate:"September, 2019",endDate:"September, 2022",openTickets:"2"},{id:"d",projectName:Object(I.jsx)("a",{href:"",children:"Website"}),partnerName:"Veriday",entandoVersion:5.2,startDate:"October, 2019",endDate:"October, 2022",openTickets:"1"}],ae=L(te),ne=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;return Object(n.a)(this,a),(t=e.call(this)).state={customer:{}},t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this.props.keycloak;t.initialized&&t.authenticated&&this.getCustomer(this.props.customerNumber)}},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&this.getCustomer(this.props.customerNumber)}},{key:"getCustomer",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props.keycloak,!(e.initialized&&e.authenticated)){t.next=7;break}return t.next=5,Z(this.props.serviceUrl,this.props.customerNumber);case 5:a=t.sent,this.setState({customer:a.data});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(I.jsx)("div",{className:"customer-details",children:Object(I.jsxs)(x.a,{children:[Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:g.t("customerDashboard.customerName")})," ",this.state.customer.name]}),Object(I.jsxs)("p",{children:[Object(I.jsx)("strong",{children:g.t("customerDashboard.customerId")})," ",this.state.customer.id]})]})})}}]),a}(l.a.Component)),ie=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;i.setState(Object(C.a)({},a,n))},i.getCustomerDetails=function(t){i.getCustomer(t)},i.handleFormSubmit=function(t){if(i.handleValidation()){var e={id:i.props.customer.id,name:i.state.name,customerNumber:i.state.customerNumber,contactName:i.state.contactName,contactPhone:i.state.contactPhone,contactEmail:i.state.contactEmail,notes:i.state.notes};i.updateCustomer(e).then((function(t){i.setState({submitMsg:g.t("submitMessages.updated"),submitColour:"#24a148"}),i.props.updateCustomerList(),i.getCustomerDetails(i.props.customer.id)})).catch((function(t){i.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})}))}},i.clearValues=function(){var t=i.props.keycloak,e=t.initialized&&t.authenticated;!document.querySelector("#"+i.state.modalId).className.includes("is-visible")&&e&&i.setState({name:i.props.customer.name,customerNumber:i.props.customer.customerNumber,contactName:i.props.customer.contactName,contactPhone:i.props.customer.contactPhone,contactEmail:i.props.customer.contactEmail,notes:i.props.customer.notes,invalid:{}})},i.state={name:"",customerNumber:"",contactName:"",contactPhone:"",contactEmail:"",notes:"",invalid:{},modalId:"",buttonId:"",submitMsg:"",submitColour:"black"},i}return Object(i.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;if(""===this.state.name&&(e=!1,t.name=!0),""===this.state.customerNumber&&(e=!1,t.customerNumber=!0),"undefined"!==typeof this.state.contactEmail){var a=this.state.contactEmail.lastIndexOf("@"),n=this.state.contactEmail.lastIndexOf(".");a<n&&a>0&&-1==this.state.contactEmail.indexOf("@@")&&n>2&&this.state.contactEmail.length-n>2||(e=!1,t.contactEmail=!0)}return this.setState({invalid:t}),e}},{key:"updateCustomer",value:function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){t.next=6;break}return t.next=5,et(this.props.serviceUrl,e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getCustomer",value:function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){t.next=7;break}return t.next=5,Z(this.props.serviceUrl,e);case 5:i=t.sent,this.setState({name:i.data.name,customerNumber:i.data.customerNumber,contactName:i.data.contactName,contactPhone:i.data.contactPhone,contactEmail:i.data.contactEmail,notes:i.data.notes,modalId:"modal-form-customer-edit-"+i.data.id,buttonId:"edit-customer-button-"+i.data.id});case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=this.props,e=(t.t,t.keycloak);e.initialized&&e.authenticated&&this.props.customerId&&this.getCustomerDetails(this.props.customerId)}},{key:"componentDidUpdate",value:function(t){var e=this.props,a=(e.t,e.keycloak),n=a.initialized&&a.authenticated,i=t.keycloak.authenticated!==n;n&&i&&this.getCustomerDetails(this.props.customerId)}},{key:"render",value:function(){var t="bx--btn bx--btn--ghost edit-customer-button-"+this.props.customer.id;return Object(I.jsx)(D.a,{buttonTriggerText:g.t("buttons.edit"),modalHeading:g.t("adminDashboard.editCustomer.title"),buttonTriggerClassName:t,className:"modal-form",id:this.state.modalId,handleSubmit:this.handleFormSubmit,primaryButtonText:g.t("modalText.save"),secondaryButtonText:g.t("modalText.cancel"),modalLabel:Object(I.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),children:Object(I.jsx)("div",{className:"form-container",children:Object(I.jsxs)(T.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsx)(N.a,{name:"name",labelText:g.t("adminDashboard.addCustomer.customerName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(I.jsx)(N.a,{name:"customerNumber",labelText:g.t("adminDashboard.addCustomer.customerNumber")+" *",value:this.state.customerNumber,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.customerNumber}),Object(I.jsx)(N.a,{name:"contactName",labelText:g.t("adminDashboard.addCustomer.contactName"),value:this.state.contactName,onChange:this.handleChanges}),Object(I.jsx)(N.a,{name:"contactPhone",labelText:g.t("adminDashboard.addCustomer.contactPhone"),value:this.state.contactPhone,onChange:this.handleChanges}),Object(I.jsx)(N.a,{name:"contactEmail",labelText:g.t("adminDashboard.addCustomer.contactEmail")+" *",value:this.state.contactEmail,onChange:this.handleChanges,invalidText:g.t("validation.invalid.email"),invalid:this.state.invalid.contactEmail}),Object(I.jsx)(P.a,{name:"notes",labelText:g.t("adminDashboard.addCustomer.notes"),value:this.state.notes,onChange:this.handleChanges})]})})})}}]),a}(u.Component)),re=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).state={projects:{},customer:{},authenticated:!1},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this.props.keycloak;t.initialized&&t.authenticated&&this.getCustomersProjects(this.props.customerNumber)}},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&this.getCustomersProjects(this.props.customerNumber)}},{key:"getCustomersProjects",value:function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n,i,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){t.next=22;break}return t.next=5,Z(this.props.serviceUrl,e);case 5:if(i=t.sent,t.prev=6,!Y()){t.next=13;break}return t.next=10,at(this.props.serviceUrl,e);case 10:r=t.sent,t.next=16;break;case 13:return t.next=15,lt(this.props.serviceUrl,e);case 15:r=t.sent;case 16:this.setState({projects:r.data,customer:i.data}),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(6),console.log(t.t0);case 22:case"end":return t.stop()}}),t,this,[[6,19]])})));return function(e){return t.apply(this,arguments)}}()},{key:"deleteCustomer",value:function(){var t=Object(b.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(this.props.serviceUrl,this.state.customer.id);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleDelete",value:function(t){var e=this;window.confirm("Are you sure you want to delete this customer?")&&this.deleteCustomer().then((function(t){e.props.updateCustomerList()}))}},{key:"render",value:function(){var t=this,e=this.props,a=(e.t,e.keycloak);a.initialized&&a.authenticated;return Object(I.jsx)("div",{children:Object(I.jsxs)("div",{children:[R()?Object(I.jsx)(ne,{serviceUrl:this.props.serviceUrl,customerNumber:this.props.customerNumber}):null,Object(I.jsxs)(zt.a,{title:this.props.title,open:this.props.accordionOpened,children:[Object(I.jsxs)("div",{style:{display:"flex"},children:[Y()?Object(I.jsx)(Mt.b,{style:{textDecoration:"none"},to:"/customer-details/".concat(this.state.customer.id),children:Object(I.jsx)(It.a,{kind:"ghost",children:g.t("buttons.viewDetails")})}):null,A()?Object(I.jsxs)("div",{style:{display:"flex"},children:[Object(I.jsx)(ie,{serviceUrl:this.props.serviceUrl,customer:this.state.customer,updateCustomerList:this.props.updateCustomerList,customerId:this.state.customer.id},this.state.customer.id),Object(I.jsx)(It.a,{kind:"ghost",style:{color:"red"},onClick:function(){return t.handleDelete()},children:g.t("buttons.delete")})]}):null]}),Object(I.jsx)(ae,{serviceUrl:this.props.serviceUrl,customerNumber:this.props.customerNumber,locale:this.props.locale,updateCustomerList:this.props.updateCustomerList},(new Date).getTime())]})]})})}}]),a}(l.a.Component)),se=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;return Object(n.a)(this,a),(t=e.call(this)).handleSearch=function(e){if("Enter"===e.key){var a=t.state.customers.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));t.setState({filteredCustomers:a,currentPage:0})}else""!==e.target.value&&void 0!==e.target.value||t.setState({filteredCustomers:t.state.customers});t.forceUpdate()},t.updateCustomerList=function(){t.getCustomers(),t.getProjects()},t.state={customers:{},projects:{},customersProjects:{},role:"",filteredCustomers:{},currentPage:0,test:""},t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getCustomers(),this.getProjects()}},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&(this.getCustomers(),this.getProjects())}},{key:"getProjects",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props.keycloak,!(e.initialized&&e.authenticated)){t.next=14;break}if(a="",!Y()){t.next=10;break}return t.next=7,vt(this.props.serviceUrl);case 7:a=t.sent,t.next=13;break;case 10:return t.next=12,Pt(this.props.serviceUrl);case 12:a=t.sent;case 13:this.setState({projects:a.data});case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getCustomers",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props.keycloak,!(e.initialized&&e.authenticated)){t.next=13;break}if(!Y()){t.next=9;break}return t.next=6,st(this.props.serviceUrl);case 6:a=t.sent,t.next=12;break;case 9:return t.next=11,ut(this.props.serviceUrl);case 11:a=t.sent;case 12:this.setState({customers:a.data,filteredCustomers:a.data});case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=1;e=0!==Object.keys(this.state.filteredCustomers).length?Math.ceil(this.state.filteredCustomers.length/5):1;return Object(I.jsxs)("div",{className:"admin-dashboard",children:[A()?Object(I.jsx)("h3",{className:"pageTitle",children:g.t("adminDashboard.adminTitle")}):F()?Object(I.jsx)("h3",{className:"pageTitle",children:g.t("adminDashboard.supportTitle")}):R()?Object(I.jsx)("h3",{className:"pageTitle",children:g.t("adminDashboard.customerTitle")}):q()?Object(I.jsx)("h3",{className:"pageTitle",children:g.t("adminDashboard.partnerTitle")}):null,A()||F()||q()?Object(I.jsxs)(x.a,{children:[Object(I.jsx)("p",{className:"title",children:g.t("adminDashboard.allCustomers")}),Object(I.jsxs)("div",{className:"bx--row",children:[Object(I.jsx)("div",{className:"bx--col",children:Object(I.jsx)(y.a,{onChange:this.handleSearch,id:"search",placeholder:g.t("adminDashboard.searchText"),labelText:g.t("adminDashboard.searchLabel"),onKeyPress:this.handleSearch})}),A()?Object(I.jsx)("div",{className:"bx--col",children:Object(I.jsxs)("div",{children:[Object(I.jsx)(Et,{serviceUrl:this.props.serviceUrl,updateCustomerList:this.updateCustomerList,allProjects:this.state.projects}),Object(I.jsx)(dt,{serviceUrl:this.props.serviceUrl,updateCustomerList:this.updateCustomerList}),Object(I.jsx)(Ut,{serviceUrl:this.props.serviceUrl,updateCustomerList:this.updateCustomerList,allCustomers:this.state.customers})]})}):null]})]}):null,Object(I.jsxs)("div",{className:"form-container",children:[Object(I.jsx)(w.a,{children:0!==Object.keys(this.state.customers).length?this.state.filteredCustomers.map((function(e,a){var n=5*(t.state.currentPage+1)-1,i=5*t.state.currentPage,r=1===t.state.customers.length;return H()&&a>=i&&a<=n?Object(I.jsx)(re,{serviceUrl:t.props.serviceUrl,customerNumber:e.id,title:e.name,updateCustomerList:t.updateCustomerList,locale:t.props.locale,accordionOpened:r},e.id):null})):null}),Object(I.jsx)(S.a,Object(o.a)(Object(o.a)({},{loop:Boolean(!1),page:Number(t.state.currentPage),totalItems:Number(e),itemsShown:Number(1),onChange:function(e){return t.setState({currentPage:e})}}),{},{cssClass:"pagination-right"}))]})]})}}]),a}(l.a.Component)),ce=(a(21),function(t,e){return window.addEventListener(t,e),function(){window.removeEventListener(t,e)}}),oe="keycloak",ue=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},le="service-url",de=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=ue(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},ue()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},ue()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(le)||"";h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(se,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("admin-dashboard-widget",de);var he=a(18),pe="api/tickets/ticketingsystem",me=function(){var t=Object(b.a)(m.a.mark((function t(e,a,n){var i,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="".concat(e,"/").concat(pe,"/").concat(a,"/").concat(n),r=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(i,r));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),be=function(){var t=Object(b.a)(m.a.mark((function t(e,a,n,i){var r,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(e,"/").concat(pe,"/").concat(a,"/").concat(n),s=Object(o.a)(Object(o.a)({},J()),{},{method:"POST",body:i?JSON.stringify(i):null}),t.abrupt("return",_(r,s));case 3:case"end":return t.stop()}}),t)})));return function(e,a,n,i){return t.apply(this,arguments)}}(),je=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).state={tickets:{},project:{},currentTicketingSystem:{},currentPage:0},i.headerData=[{header:g.t("ticketDetails.issue"),key:"issue"},{header:g.t("ticketDetails.summary"),key:"summary"},{header:g.t("ticketDetails.status"),key:"status"},{header:g.t("ticketDetails.type"),key:"type"},{header:g.t("ticketDetails.priority"),key:"priority"},{header:g.t("ticketDetails.created"),key:"created"},{header:g.t("ticketDetails.updated"),key:"updated"},{header:g.t("ticketDetails.link"),key:"link"}],i}return Object(i.a)(a,[{key:"fetchData",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a,n,i,r,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,e.t,a=e.keycloak,!(a.initialized&&a.authenticated)){t.next=20;break}return t.prev=3,t.next=6,ft(this.props.serviceUrl,this.props.projectId);case 6:return n=t.sent,t.next=9,_t(this.props.serviceUrl);case 9:return i=t.sent,t.next=12,me(this.props.serviceUrl,i.systemId,n.data.systemId);case 12:for(r=t.sent,s=0;s<r.data.length;s++)gt(this.props.serviceUrl,this.props.projectId,r.data[s].id);this.setState({tickets:r,project:n,currentTicketingSystem:i}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),console.log(t.t0);case 20:case"end":return t.stop()}}),t,this,[[3,17]])})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){H()&&this.fetchData()}},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&H()&&this.fetchData()}},{key:"render",value:function(){var t=this,e=1;0!==Object.keys(this.state.tickets).length&&(e=Math.ceil(this.state.tickets.data.length/10));return Object(I.jsxs)("div",{children:[Object(I.jsx)(Lt.a,{rows:ve,headers:this.headerData,children:function(e){e.rows;var a=e.headers,n=e.getHeaderProps,i=e.getTableProps;return Object(I.jsx)(Vt.a,{title:g.t("ticketDetails.listOfTickets"),description:0!==Object.keys(t.state.tickets).length&&0!==Object.keys(t.state.project).length?Object(I.jsx)("a",{href:t.state.currentTicketingSystem.url.substr(0,t.state.currentTicketingSystem.url.indexOf("/rest"))+"/issues/?jql=Organizations="+t.state.project.data.systemId,style:{textDecoration:"none"},target:"_blank",children:g.t("buttons.viewTickets")}):Object(I.jsx)("a",{children:g.t("ticketDetails.tickets")}),children:Object(I.jsxs)(At.a,Object(o.a)(Object(o.a)({},i()),{},{children:[Object(I.jsx)(Ft.a,{children:Object(I.jsx)(qt.a,{children:a.map((function(t){return Object(I.jsx)(Rt.a,Object(o.a)(Object(o.a)({},n({header:t})),{},{children:t.header}))}))})}),Object(I.jsx)(Yt.a,{children:0!==Object.keys(t.state.tickets).length?t.state.tickets.data.map((function(e,a){var n=10*(t.state.currentPage+1)-1;return a>=10*t.state.currentPage&&a<=n?Object(I.jsxs)(qt.a,{children:[Object(I.jsx)(Bt.a,{children:e.systemId},e.id),Object(I.jsx)(Bt.a,{children:e.summary},e.id),Object(I.jsx)(Bt.a,{children:e.status},e.id),Object(I.jsx)(Bt.a,{children:e.type},e.id),Object(I.jsx)(Bt.a,{children:e.priority},e.id),Object(I.jsx)(Bt.a,{children:new Date(e.createDate).toDateString()},e.id),Object(I.jsx)(Bt.a,{children:new Date(e.updateDate).toDateString()},e.id),Object(I.jsx)(Bt.a,{children:Object(I.jsx)("a",{href:t.state.currentTicketingSystem.url.substr(0,t.state.currentTicketingSystem.url.indexOf("/rest"))+"/browse/"+e.systemId,target:"_blank",children:g.t("ticketDetails.viewTicket")})},e.id)]},e.id):null})):Object(I.jsx)("p",{})})]}))})}}),Object(I.jsx)(S.a,Object(o.a)(Object(o.a)({},{loop:Boolean(!1),page:Number(t.state.currentPage),totalItems:Number(e),itemsShown:Number(1),onChange:function(e){return t.setState({currentPage:e})}}),{},{cssClass:"pagination-right"}))]})}}]),a}(u.Component),ve=[{id:"a",projectName:"Ticket1",project:"Leonardo",entandoVersion:6.2,creationDate:"October, 2019",openTicket:Object(I.jsx)("a",{href:"",children:"Open Ticket"})},{id:"a",projectName:"Ticket1",project:"Leonardo",entandoVersion:6.2,creationDate:"October, 2019",openTicket:Object(I.jsx)("a",{href:"",children:"Open Ticket"})},{id:"a",projectName:"Ticket1",project:"Leonardo",entandoVersion:6.2,creationDate:"October, 2019",openTicket:Object(I.jsx)("a",{href:"",children:"Open Ticket"})}],fe=L(je),Oe="api/project-subscriptions",ke=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Oe,"/").concat(a),i=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),ge=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Oe),i=Object(o.a)(Object(o.a)({},J()),{},{method:"POST",body:a?JSON.stringify(a):null}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),xe=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Oe),i=Object(o.a)(Object(o.a)({},J()),{},{method:"PUT",body:a?JSON.stringify(a):null}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),ye=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat("api/project-subscriptions/mysubscription","/").concat(a),i=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),we=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Oe,"/renew"),i=Object(o.a)(Object(o.a)({},J()),{},{method:"PUT",body:a?JSON.stringify(a):null}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Se=a(128),Ce=a(122),De=a(25),Te=a.n(De),Ne=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;i.setState(Object(C.a)({},a,n))},i.handleFormSubmit=function(t){if(i.handleValidation()){var e={projectSubscription:{id:i.props.subscription.id,level:i.state.level,status:i.state.status,lengthInMonths:i.state.lengthInMonths,startDate:Te()(i.state.startDate).format(),notes:i.state.notes,project:i.props.project,entandoVersion:i.props.subscription.entandoVersion}};i.subscriptionPut(e).then((function(t){i.setState({submitMsg:g.t("submitMessages.updated"),submitColour:"#24a148"}),i.props.updateSubscription()})).catch((function(t){i.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})}))}},i.handleStartDateChange=function(t){i.setState({startDate:Te()(t[0].toISOString()).format("MM/DD/YYYY")})},i.state={level:"",status:"",lengthInMonths:"",startDate:"",notes:"",invalid:{},submitMsg:"",submitColour:"black"},i}return Object(i.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;return"level"===this.state.level&&(e=!1,t.level=!0),"status"===this.state.status&&(e=!1,t.status=!0),""!==this.state.lengthInMonths&&this.isNumeric(String(this.state.lengthInMonths))||(e=!1,t.lengthInMonths=!0),"undefined"!==typeof this.state.startDate&&(this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(e=!1,t.startDate=!0)),this.setState({invalid:t}),e}},{key:"isNumeric",value:function(t){return"string"==typeof t&&(!isNaN(t)&&!isNaN(parseFloat(t)))}},{key:"componentDidMount",value:function(){var t=this.props,e=(t.t,t.keycloak);e.initialized&&e.authenticated&&this.getSubscriptionDetails()}},{key:"getSubscriptionDetails",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,e.t,a=e.keycloak,!(a.initialized&&a.authenticated)){t.next=7;break}return t.next=5,ke(this.props.serviceUrl,this.props.subscription.id);case 5:n=t.sent,this.setState({level:n.data.level,status:n.data.status,lengthInMonths:n.data.lengthInMonths,startDate:Te()(n.data.startDate).format("MM/DD/YYYY"),notes:n.data.notes,submitMsg:""});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"subscriptionPut",value:function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){t.next=6;break}return t.next=5,xe(this.props.serviceUrl,e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(I.jsx)(D.a,{buttonTriggerText:g.t("buttons.edit"),modalHeading:g.t("editSubscription.title"),buttonTriggerClassName:"add-project bx--btn bx--btn--tertiary edit-sub-button",className:"modal-form",id:"modal-form-sub-edit",handleSubmit:this.handleFormSubmit,primaryButtonText:g.t("modalText.save"),secondaryButtonText:g.t("modalText.cancel"),modalLabel:Object(I.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),children:Object(I.jsx)("div",{className:"form-container",children:Object(I.jsxs)(T.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsxs)(ht.a,{name:"level",labelText:g.t("subscriptionDetails.level")+" *",value:this.state.level,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.level,children:[Object(I.jsx)(pt.a,{disabled:!0,text:"Select Level",value:"level"}),["GOLD","PLATINUM"].map((function(t,e){return Object(I.jsx)(pt.a,{text:t,value:t,children:t},e)}))]}),Object(I.jsxs)(ht.a,{name:"status",labelText:g.t("subscriptionDetails.status")+" *",value:this.state.status,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.status,children:[Object(I.jsx)(pt.a,{disabled:!0,text:"Select Status",value:"status"}),["REQUESTED","PENDING","ACTIVE","EXPIRED"].map((function(t,e){return Object(I.jsx)(pt.a,{text:t,value:t,children:t},e)}))]}),Object(I.jsx)(Se.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleStartDateChange,value:this.state.startDate,children:Object(I.jsx)(Ce.a,{name:"startDate",placeholder:"mm/dd/yyyy",labelText:g.t("subscriptionDetails.startDate")+" *",type:"text",invalidText:g.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(I.jsx)(N.a,{name:"lengthInMonths",labelText:g.t("subscriptionDetails.lengthInMonths")+" *",value:this.state.lengthInMonths,onChange:this.handleChanges,invalidText:g.t("validation.invalid.number"),invalid:this.state.invalid.lengthInMonths}),Object(I.jsx)(P.a,{name:"notes",labelText:g.t("adminDashboard.addProject.notes"),value:this.state.notes,onChange:this.handleChanges})]})})})}}]),a}(u.Component)),Pe="Product Support Subscription Entando Platform",Ee="Free Commercial Open Source",Ue=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).updateSubscription=function(){i.getSubscription()},i.state={loading:!0,subscription:{},users:{},project:{},customer:{}},i}return Object(i.a)(a,[{key:"getSubscription",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a,n,i,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,e.t,a=e.keycloak,!(a.initialized&&a.authenticated)){t.next=34;break}if(t.prev=3,i="",!Y()){t.next=19;break}return t.next=8,ke(this.props.serviceUrl,this.props.match.params.id);case 8:if(n=t.sent,r="",!n.data.project){t.next=17;break}return t.next=13,ft(this.props.serviceUrl,n.data.project.id);case 13:return r=t.sent,t.next=16,St(this.props.serviceUrl,r.data.id);case 16:i=t.sent;case 17:t.next=28;break;case 19:if(!B()){t.next=28;break}return t.next=22,ye(this.props.serviceUrl,this.props.match.params.id);case 22:if(n=t.sent,r="",!n.data.project){t.next=28;break}return t.next=27,ft(this.props.serviceUrl,n.data.project.id);case 27:r=t.sent;case 28:this.setState({subscription:n,project:r,customer:r.customer,users:i,loading:!1}),t.next=34;break;case 31:t.prev=31,t.t0=t.catch(3),console.log(t.t0);case 34:case"end":return t.stop()}}),t,this,[[3,31]])})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){H()&&this.getSubscription()}},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&H()&&this.getSubscription()}},{key:"render",value:function(){var t=this,e=Pe,a=Ee;return this.state.loading?null:H()&&0!==Object.keys(this.state.subscription).length&&0!==Object.keys(this.state.project).length?Object(I.jsx)("div",{className:"subscription-details",children:Object(I.jsxs)("div",{children:[Object(I.jsxs)(x.a,{children:[Object(I.jsx)("div",{className:"bx--grid",children:Object(I.jsxs)("div",{className:"bx--row",children:[Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("customerDashboard.customerName"),":"]})," ",this.state.project.data.customer.name]}),Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("customerDashboard.projectName"),":"]})," ",this.state.project.data.name]}),Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("subscriptionDetails.description"),":"]})," ",this.state.subscription.data.project.description]}),Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("subscriptionDetails.partners"),":"]}),""!==this.state.project.data&&0!==Object.keys(this.state.project.data.partners).length?Object(I.jsx)(I.Fragment,{children:this.state.project.data.partners.map((function(e,a){return Object(I.jsxs)(I.Fragment,{children:[" ",a===t.state.project.data.partners.length-1?e.name:e.name+", "," "]})}))}):Object(I.jsx)(I.Fragment,{children:" None "})]}),Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("subscriptionDetails.type"),":"]})," ",e]}),Y()?Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("subscriptionDetails.notes"),":"]})," ",this.state.subscription.data.notes]}):null]}),Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("subscriptionDetails.status"),":"]})," ",this.state.subscription.data.status]}),Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("subscriptionDetails.level"),":"]})," ",this.state.subscription.data.level]}),Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("subscriptionDetails.startDate"),":"]})," ",String(new Date(this.state.subscription.data.startDate).toDateString())]}),Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("subscriptionDetails.endDate"),":"]})," ",String(new Date(new Date(this.state.subscription.data.startDate).setMonth(new Date(this.state.subscription.data.startDate).getMonth()+this.state.subscription.data.lengthInMonths)).toDateString())]}),Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("subscriptionDetails.license"),":"]})," ",a]}),Y()?Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("subscriptionDetails.assignedUsers"),":"]}),""!==this.state.project.data&&0!==Object.keys(this.state.users.data).length?Object(I.jsx)(I.Fragment,{children:this.state.users.data.map((function(e,a){return Object(I.jsxs)(I.Fragment,{children:[" ",a===t.state.users.data.length-1?e.username:e.username+", "," "]})}))}):Object(I.jsx)(I.Fragment,{children:" None "})]})}):null]})]})}),A()?Object(I.jsx)(Ne,{project:this.state.project.data,subscription:this.state.subscription.data,serviceUrl:this.props.serviceUrl,updateSubscription:this.updateSubscription}):null]}),Object(I.jsx)("br",{}),Object(I.jsx)(fe,{projectId:this.state.project.data.id,serviceUrl:this.props.serviceUrl})]})}):Object(I.jsx)("p",{children:g.t("userMessages.unauthorized")})}}]),a}(l.a.Component)),Me=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).updateCustomer=function(){i.getCustomer()},i.state={loading:!0,projects:{},customer:{}},i}return Object(i.a)(a,[{key:"getCustomer",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props.keycloak,!(e.initialized&&e.authenticated)){t.next=16;break}return t.prev=3,t.next=6,ct(this.props.serviceUrl,this.props.match.params.id);case 6:return a=t.sent,t.next=9,at(this.props.serviceUrl,a.data.id);case 9:n=t.sent,this.setState({customer:a.data,projects:n.data,loading:!1}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0);case 16:case"end":return t.stop()}}),t,this,[[3,13]])})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){Y()&&this.getCustomer()}},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&Y()&&this.getCustomer()}},{key:"render",value:function(){return this.state.loading?null:Y()?0!==Object.keys(this.state.customer).length?Object(I.jsxs)("div",{children:[Object(I.jsx)(x.a,{children:Object(I.jsx)("div",{className:"bx--grid",children:Object(I.jsxs)("div",{className:"bx--row",children:[Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("customerDetails.id"),": "]})," ",this.state.customer.id]}),Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("customerDetails.name"),": "]})," ",this.state.customer.name]}),Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("customerDetails.notes"),": "]})," ",this.state.customer.notes]})]}),Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("customerDetails.contactName"),": "]})," ",this.state.customer.contactName]}),Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("customerDetails.contactPhone"),": "]})," ",this.state.customer.contactPhone]}),Object(I.jsxs)("p",{children:[Object(I.jsxs)("strong",{children:[g.t("customerDetails.contactEmail"),": "]})," ",this.state.customer.contactEmail]})]})]})})}),Object(I.jsx)(ae,{serviceUrl:this.props.serviceUrl,customerNumber:this.state.customer.id,locale:this.props.locale})]}):Object(I.jsxs)("p",{children:[g.t("userMessages.loading"),"..."]}):Object(I.jsx)("p",{children:g.t("userMessages.unauthorized")})}}]),a}(l.a.Component)),ze=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).state={loading:!0},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this.props.keycloak;t.initialized&&t.authenticated&&this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&this.setState({loading:!1})}},{key:"render",value:function(){var t=this,e=this.props.keycloak;return this.state.loading?null:H()?Object(I.jsxs)("div",{id:"entando-customer-portal",children:[Object(I.jsx)(Ht,{keycloak:e,children:Object(I.jsx)(Mt.a,{children:Object(I.jsxs)(he.c,{children:[Object(I.jsx)(he.a,{path:"**/customer-details/:id",render:function(e){return Object(I.jsx)(Me,Object(o.a)(Object(o.a)({},e),{},{serviceUrl:t.props.serviceUrl,locale:t.props.locale}))}}),Object(I.jsx)(he.a,{path:"**/subscription-details/:id",render:function(e){return Object(I.jsx)(Ue,Object(o.a)(Object(o.a)({},e),{},{serviceUrl:t.props.serviceUrl,locale:t.props.locale}))}}),Object(I.jsx)(he.a,{path:"**/",render:function(e){return Object(I.jsx)(se,Object(o.a)(Object(o.a)({},e),{},{serviceUrl:t.props.serviceUrl,locale:t.props.locale}))}})]})})}),Object(I.jsx)(Gt,{keycloak:e,children:Object(I.jsx)("p",{children:g.t("userMessages.unauthorized")})})]}):Object(I.jsx)("p",{children:g.t("userMessages.unauthorized")})}}]),a}(u.Component)),Ie=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Le="service-url",Ve=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=Ie(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Ie()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},Ie()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(Le)||"";h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(dt,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("admin-add-customer-widget",Ve);var Ae=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={roleType:"customer"},t.handleChanges=function(e){var a=e.target,n=a.name,i=a.value;t.setState(Object(C.a)({},n,i))},t}return Object(i.a)(a,[{key:"render",value:function(){return Object(I.jsxs)("div",{className:"role-check",children:[Object(I.jsxs)(ht.a,{defaultValue:"role-type",name:"roleType",labelText:"Select Role(Testing)",value:this.state.roleType,onChange:this.handleChanges,children:[Object(I.jsx)(pt.a,{text:"Select Role",value:"role-type"}),["Admin","Customer"].map((function(t,e){return Object(I.jsx)(pt.a,{text:t,value:t.toLowerCase(),children:t},e)}))]}),this.renderForm()]})}},{key:"renderForm",value:function(){return"customer"===this.state.roleType?Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"pageTitle",children:"Welcome to Entando Customer Portal"}),Object(I.jsx)(ne,{}),Object(I.jsx)(ae,{})]}):"admin"===this.state.roleType?Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"pageTitle",children:"Welcome to Entando Admin View"}),Object(I.jsx)(se,{})]}):void 0}}]),a}(u.Component),Fe=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},qe="service-url",Re=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=Fe(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Fe()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},Fe()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(qe)||"";h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(Ae,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("admin-rolecheck-widget",Re);var Ye=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Be="service-url",He=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=Ye(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Ye()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},Ye()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(Be)||"";h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(ae,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("custom-datatable-widget",He);var Ge=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Je="service-url",Ke=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=Ge(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Ge()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},Ge()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(Je)||"";h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(ne,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("customer-details-widget",Ke);var We=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},_e="service-url",Qe=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=We(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},We()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},We()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(_e)||"";h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(Ue,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("subscription-widget",Qe);var $e=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;return Object(n.a)(this,a),(t=e.call(this)).handleChanges=function(e){var a=e.target,n=a.name,i=a.value;"project"===n&&""!=i&&"project-list"!=i?t.setState({project:JSON.parse(i)}):t.setState(Object(C.a)({},n,i))},t.handleFormSubmit=function(e){e.preventDefault(),t.handleValidation()&&t.fetchProjectSubscription(t.state.project.id).then((function(e){e.data.length>0?t.createTicket().then((function(e){t.setState({submitMsg:g.t("submitMessages.created"),submitColour:"#24a148"})})).catch((function(e){t.setState({submitMsg:g.t("submitMessages.ticketError"),submitColour:"#da1e28"})})):t.setState({submitMsg:g.t("submitMessages.subscriptionRequired"),submitColour:"#da1e28"})})).catch((function(e){t.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})}))},t.state={loading:!0,project:{},projects:[],systemId:"",type:"Support",description:"",priority:"Medium",status:"To Do",createDate:"",updateDate:"",role:"",invalid:{},submitMsg:"",submitColour:"black"},t.types=["Support","Feature Request"],t.priorities=["Critical","High","Medium","Low"],t}return Object(i.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;return void 0!==this.state.project.systemId&&"project-list"!==this.state.project.systemId||(e=!1,t.project=!0),""!==this.state.type&&"Select"!==this.state.type||(e=!1,t.type=!0),""!==this.state.description&&"Select"!==this.state.description||(e=!1,t.description=!0),""!==this.state.priority&&"Select"!==this.state.priority||(e=!1,t.priority=!0),this.setState({invalid:t}),e}},{key:"fetchProjectSubscription",value:function(){var t=Object(b.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ct(this.props.serviceUrl,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"fetchProjects",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a,n,i,r,s,c,o,u,l=this;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,e.t,a=e.keycloak,!(a.initialized&&a.authenticated)){t.next=21;break}if(!Y()){t.next=13;break}return t.next=6,Nt(this.props.serviceUrl);case 6:n=t.sent,i=window.location.search,r=new URLSearchParams(i),(s=r.get("project"))?n.data.forEach((function(t){String(t.id)===s&&(n=t,l.setState({projects:[n],project:n}))})):this.setState({projects:n.data}),t.next=21;break;case 13:if(!B()){t.next=21;break}return t.next=16,Pt(this.props.serviceUrl);case 16:n=t.sent,c=window.location.search,o=new URLSearchParams(c),(u=o.get("project"))?n.data.forEach((function(t){if(String(t.id)===u){var e=t;l.setState({projects:[e],project:e})}})):this.setState({projects:n.data});case 21:this.render();case 22:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"createTicket",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,e.t,a=e.keycloak,!(a.initialized&&a.authenticated)){t.next=7;break}return n={systemId:this.state.project.systemId,type:this.state.type,summary:this.state.summary,description:this.state.description,priority:this.state.priority,status:"To Do",createDate:"2021-02-22T14:14:09-05:00",updateDate:"2021-02-22T14:14:09-05:00"},t.next=6,be(this.props.serviceUrl,this.state.ticketingSystem.systemId,this.state.project.systemId,n);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getTicketingSystem",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!H()){t.next=6;break}return t.next=3,Qt(this.props.serviceUrl);case 3:e=t.sent,a=e.data[e.data.length-1],this.setState({ticketingSystem:a});case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=this.props,e=(t.t,t.keycloak);e.initialized&&e.authenticated&&(this.fetchProjects(),this.getTicketingSystem(),this.setState({loading:!1}))}},{key:"componentDidUpdate",value:function(t){var e=this.props,a=(e.t,e.keycloak),n=a.initialized&&a.authenticated,i=t.keycloak.authenticated!==n;n&&i&&(this.fetchProjects(),this.getTicketingSystem(),this.setState({loading:!1}))}},{key:"render",value:function(){return this.state.loading||0===this.state.projects.length?null:H()?Object(I.jsxs)("div",{children:[A()?Object(I.jsx)("h3",{className:"pageTitle",children:g.t("adminDashboard.adminTitle")}):F()?Object(I.jsx)("h3",{className:"pageTitle",children:g.t("adminDashboard.supportTitle")}):R()?Object(I.jsx)("h3",{className:"pageTitle",children:g.t("adminDashboard.customerTitle")}):q()?Object(I.jsx)("h3",{className:"pageTitle",children:g.t("adminDashboard.partnerTitle")}):null,Object(I.jsxs)("div",{className:"form-container",children:[Object(I.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),Object(I.jsxs)(T.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsxs)("div",{className:"form-desc",children:[Object(I.jsx)("h4",{children:g.t("supportTicketForm.formTitle")}),Object(I.jsx)("p",{children:g.t("supportTicketForm.desc")})]}),Object(I.jsxs)("div",{className:"bx--grid",children:[Object(I.jsx)("div",{className:"bx--row",children:Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsxs)(ht.a,{name:"project",labelText:g.t("supportTicketForm.selectProject")+" *",value:JSON.stringify(this.state.project),onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.project,children:[this.state.projects.length>1?Object(I.jsx)(pt.a,{text:g.t("adminDashboard.addPartner.selectProject"),value:"project-list"}):null,0!==Object.keys(this.state.projects).length?this.state.projects.map((function(t,e){return Object(I.jsx)(pt.a,{text:t.name,value:JSON.stringify(t),children:t.name},e)})):null]}),Object(I.jsx)(ht.a,{name:"type",labelText:g.t("supportTicketForm.type")+" *",value:this.state.type,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.type,children:this.types.map((function(t,e){return Object(I.jsx)(pt.a,{text:t,value:t,children:t},e)}))}),Object(I.jsx)(ht.a,{name:"priority",labelText:g.t("supportTicketForm.priority")+" *",value:this.state.priority,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.priority,children:this.priorities.map((function(t,e){return Object(I.jsx)(pt.a,{text:t,value:t,children:t},e)}))})]})}),Object(I.jsx)("div",{className:"bx--row",children:Object(I.jsx)("div",{className:"bx--col",children:Object(I.jsx)(N.a,{labelText:g.t("supportTicketForm.ticketSummary")+" *",placeholder:g.t("supportTicketForm.addticketSummary"),name:"summary",value:this.state.summary,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.summary})})}),Object(I.jsx)("div",{className:"bx--row",children:Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(P.a,{labelText:g.t("supportTicketForm.ticketDescription")+" *",placeholder:g.t("supportTicketForm.addticketDescription"),name:"description",value:this.state.description,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.description}),Object(I.jsxs)(It.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",g.t("buttons.submit")," "]})]})})]})]})]})]}):Object(I.jsx)("p",{children:g.t("userMessages.unauthorized")})}}]),a}(u.Component)),Xe=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Ze="service-url",ta=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=Xe(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Xe()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},Xe()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(Ze)||"";h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)($e,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("forms-openticket-widget",ta);var ea=function(){return Object(I.jsxs)("ul",{id:"navigation",children:[Object(I.jsx)("li",{children:Object(I.jsx)(Mt.c,{to:"/",children:"Home"})}),Object(I.jsx)("li",{children:Object(I.jsx)(Mt.c,{to:"/subscription-details",children:"Subscription Details"})}),Object(I.jsx)("li",{children:Object(I.jsx)(Mt.c,{to:"/subscription",children:"New or Renew Subscription"})}),Object(I.jsx)("li",{children:Object(I.jsx)(Mt.c,{to:"/service-ticket",children:"Open Service Ticket"})}),Object(I.jsx)("li",{children:Object(I.jsx)(Mt.c,{to:"/enhancement",children:"Request for Enhancement Process"})}),Object(I.jsx)("li",{children:Object(I.jsx)(Mt.c,{to:"/manage-users",children:"Manage Users"})}),Object(I.jsx)("li",{children:Object(I.jsx)(Mt.c,{to:"/configuration-settings",children:"Configuration Settings"})})]})},aa=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},na="service-url",ia=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=aa(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},aa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},aa()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(na)||"";h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(ea,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("navigation-widget",ia);var ra=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={ticketNo:"",customerName:"",projectName:"",openedBy:"",priority:"",partnerName:"",enhancementDescription:"",invalid:{}},t.handleChanges=function(e){var a=e.target,n=a.name,i=a.value;t.setState(Object(C.a)({},n,i))},t.handleFormSubmit=function(e){console.log(t.state.ticketNo),e.preventDefault();t.handleValidation()},t}return Object(i.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;return""===this.state.ticketNo&&(e=!1,t.ticketNo=!0),""===this.state.customerName&&(e=!1,t.customerName=!0),""===this.state.projectName&&(e=!1,t.projectName=!0),""===this.state.openedBy&&(e=!1,t.openedBy=!0),""===this.state.partnerName&&(e=!1,t.partnerName=!0),""===this.state.enhancementDescription&&(e=!1,t.enhancementDescription=!0),this.setState({invalid:t}),e}},{key:"render",value:function(){return Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"pageTitle",children:g.t("enhancementForm.title")}),Object(I.jsx)("div",{className:"form-container",children:Object(I.jsxs)(T.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsxs)("div",{className:"form-desc",children:[Object(I.jsx)("h4",{children:g.t("enhancementForm.formTitle")}),Object(I.jsx)("p",{children:g.t("enhancementForm.desc")})]}),Object(I.jsxs)("div",{className:"bx--grid",children:[Object(I.jsxs)("div",{className:"bx--row",children:[Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(N.a,{name:"ticketNo",labelText:g.t("enhancementForm.ticketNumber"),value:this.state.ticketNo,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.ticketNo}),Object(I.jsx)(N.a,{name:"projectName",labelText:g.t("enhancementForm.projectName"),value:this.state.projectName,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.projectName}),Object(I.jsx)(N.a,{name:"priority",labelText:g.t("enhancementForm.priority"),value:this.state.priority,onChange:this.handleChanges})]}),Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(N.a,{name:"customerName",labelText:g.t("enhancementForm.customerName"),value:this.state.customerName,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.customerName}),Object(I.jsx)(N.a,{name:"openedBy",labelText:g.t("enhancementForm.ticketOpenedBy"),value:this.state.openedBy,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.openedBy}),Object(I.jsx)(N.a,{name:"partnerName",labelText:g.t("enhancementForm.partnerName"),value:this.state.partnerName,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.partnerName})]})]}),Object(I.jsx)("div",{className:"bx--row",children:Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(P.a,{labelText:g.t("enhancementForm.enhancementDescription"),placeholder:g.t("enhancementForm.addenhancementDescription"),name:"enhancementDescription",value:this.state.enhancementDescription,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.enhancementDescription}),Object(I.jsxs)(It.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",g.t("buttons.submit")," "]})]})})]})]})})]})}}]),a}(u.Component),sa=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},ca="service-url",oa=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=sa(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},sa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},sa()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(ca)||"";h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(ra,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("forms-enhancement-request-widget",oa);a(100);var ua=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},la="locale",da="service-url",ha=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=ua(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},ua()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},ua()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(da)||"",e=this.getAttribute(la)||"";k(e),h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(ze,{serviceUrl:t,locale:e})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("app-element",ha);var pa=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},ma="service-url",ba=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=pa(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},pa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},pa()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(ma)||"";h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(fe,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("ticket-list-widget",ba);var ja=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;i.setState(Object(C.a)({},a,n))},i.handleFormSubmit=function(t){t.preventDefault(),""===i.state.ticketingSystem?i.createTicketingSystem().then((function(t){i.setState({submitMsg:g.t("submitMessages.created"),submitColour:"#24a148"})})).catch((function(t){i.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})})):i.updateTicketingSystem().then((function(t){i.setState({submitMsg:g.t("submitMessages.updated"),submitColour:"#24a148"})})).catch((function(t){i.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})}))},i.state={ticketingSystem:"",ticketingSystemType:"",url:"",serviceAccount:"",systemId:"",submitMsg:"",submitColour:"black"},i}return Object(i.a)(a,[{key:"createTicketingSystem",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={url:this.state.url,serviceAccount:this.state.serviceAccount,serviceAccountSecret:this.state.serviceAccountSecret,systemId:this.state.systemId},t.next=3,$t(this.props.serviceUrl,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"updateTicketingSystem",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:this.state.ticketingSystem.id,url:this.state.url,serviceAccount:this.state.serviceAccount,serviceAccountSecret:this.state.serviceAccountSecret,systemId:this.state.systemId},t.next=3,Xt(this.props.serviceUrl,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getTicketingSystems",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Qt(this.props.serviceUrl);case 2:(e=t.sent).data.length>0&&(a=e.data[e.data.length-1],this.setState({ticketingSystem:a,url:a.url,serviceAccount:a.serviceAccount,serviceAccountSecret:a.serviceAccountSecret,systemId:a.systemId}));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=this.props,e=(t.t,t.keycloak);e.initialized&&e.authenticated&&this.getTicketingSystems()}},{key:"componentDidUpdate",value:function(t){var e=this.props,a=(e.t,e.keycloak),n=a.initialized&&a.authenticated,i=t.keycloak.authenticated!==n;n&&i&&this.getTicketingSystems()}},{key:"deleteTicketingSystem",value:function(){var t=Object(b.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Wt(this.props.serviceUrl,this.state.ticketingSystem.id);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleDelete",value:function(t){var e=this;window.confirm("Are you sure you want to delete this ticketing system?")&&this.deleteTicketingSystem().then((function(t){e.setState({submitMsg:g.t("submitMessages.deleted"),submitColour:"#24a148"})})).catch((function(t){e.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})}))}},{key:"render",value:function(){var t=this;return A()?Object(I.jsxs)("div",{className:"cp-form",children:[Object(I.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),Object(I.jsx)(T.a,{onSubmit:this.handleFormSubmit,children:Object(I.jsxs)("div",{className:"bx--grid",children:[Object(I.jsxs)("div",{className:"bx--row",children:[Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsxs)(ht.a,{defaultValue:"ticketing-system",name:"ticketingSystemType",labelText:g.t("adminConfig.integrationTicketingSystem.selectBackendTicketingSystem"),value:this.state.ticketingSystemType,onChange:this.handleChanges,children:[Object(I.jsx)(pt.a,{text:g.t("adminConfig.integrationTicketingSystem.select"),value:"ticketing-system"}),["Jira","Other"].map((function(t,e){return Object(I.jsx)(pt.a,{text:t,value:t.toLowerCase(),children:t},e)}))]}),Object(I.jsx)(N.a,{name:"serviceAccount",labelText:g.t("adminConfig.integrationTicketingSystem.userName"),value:this.state.serviceAccount,onChange:this.handleChanges}),Object(I.jsx)(N.a,{name:"systemId",labelText:g.t("adminConfig.integrationTicketingSystem.projectName"),value:this.state.systemId,onChange:this.handleChanges})]}),Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(N.a,{name:"url",labelText:g.t("adminConfig.integrationTicketingSystem.url"),value:this.state.url,onChange:this.handleChanges}),Object(I.jsx)(N.a,{name:"serviceAccountSecret",type:"password",labelText:g.t("adminConfig.integrationTicketingSystem.password"),value:this.state.serviceAccountSecret,onChange:this.handleChanges})]})]}),Object(I.jsxs)(It.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",g.t("buttons.submit")," "]}),this.state.ticketingSystem?Object(I.jsxs)(It.a,{kind:"danger",onClick:function(){return t.handleDelete()},children:[" ","Delete"," "]}):null]})})]}):Object(I.jsx)("p",{children:g.t("userMessages.unauthorized")})}}]),a}(u.Component)),va=a(123),fa=a(124),Oa="api/entando-versions",ka=function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(e,"/").concat(Oa),n=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(a,n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ga=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Oa,"/").concat(a),i=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),xa=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Oa,"/").concat(a),i=Object(o.a)(Object(o.a)({},J()),{},{method:"PUT"}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),ya=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Oa),i=Object(o.a)(Object(o.a)({},J()),{},{method:"POST",body:a?JSON.stringify(a):null}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),wa=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Oa),i=Object(o.a)(Object(o.a)({},J()),{},{method:"PUT",body:a?JSON.stringify(a):null}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Sa=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Oa,"/").concat(a),i=Object(o.a)(Object(o.a)({},J()),{},{method:"DELETE"}),t.abrupt("return",_(n,i));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Ca=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;i.setState(Object(C.a)({},a,n))},i.handleFormSubmit=function(t){i.handleValidation()&&i.addProductVersion().then((function(t){i.setState({submitMsg:g.t("submitMessages.added"),submitColour:"#24a148"}),i.props.updateProductVersions()})).catch((function(t){i.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})}))},i.clearValues=function(){document.querySelector("#modal-form-product-version").className.includes("is-visible")||i.setState(i.baseState)},i.handleStartDateChange=function(t){i.setState({startDate:Te()(t[0].toISOString()).format("MM/DD/YYYY")})},i.handleEndDateChange=function(t){i.setState({endDate:Te()(t[0].toISOString()).format("MM/DD/YYYY")})},i.state={name:"",startDate:"",endDate:"",invalid:{},submitMsg:"",submitColour:"black"},i.baseState=i.state,i}return Object(i.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;return""===this.state.name&&(e=!1,t.name=!0),"undefined"!==typeof this.state.startDate&&(this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(e=!1,t.startDate=!0)),"undefined"!==typeof this.state.endDate&&(this.state.endDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(e=!1,t.endDate=!0)),this.setState({invalid:t}),e}},{key:"addProductVersion",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,e.t,a=e.keycloak,!(a.initialized&&a.authenticated)){t.next=6;break}return t.next=5,ya(this.props.serviceUrl,this.state);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){document.querySelector(".add-product-version-button").addEventListener("click",this.clearValues,!1)}},{key:"render",value:function(){return Object(I.jsx)(D.a,{buttonTriggerText:g.t("buttons.addProductVersion"),modalHeading:g.t("adminDashboard.addProductVersion.title"),buttonTriggerClassName:"add-product-version bx--btn bx--btn--tertiary add-product-version-button",className:"modal-form",id:"modal-form-product-version",handleSubmit:this.handleFormSubmit,modalLabel:Object(I.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),children:Object(I.jsxs)("div",{className:"form-container",children:[Object(I.jsxs)("p",{children:[" ",g.t("adminDashboard.addProductVersion.desc")," "]}),Object(I.jsxs)(T.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsx)(N.a,{name:"name",labelText:g.t("adminDashboard.addProductVersion.productVersion"),value:this.state.name,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(I.jsx)(Se.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleStartDateChange,children:Object(I.jsx)(Ce.a,{name:"startDate",placeholder:"mm/dd/yyyy",labelText:g.t("adminDashboard.addProductVersion.productVersionStartDate"),value:this.state.startDate,type:"text",invalidText:g.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(I.jsx)(Se.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleEndDateChange,children:Object(I.jsx)(Ce.a,{name:"endDate",placeholder:"mm/dd/yyyy",labelText:g.t("adminDashboard.addProductVersion.productVersionEndDate"),value:this.state.endDate,type:"text",invalidText:g.t("validation.invalid.date"),invalid:this.state.invalid.endDate})})]})]})})}}]),a}(u.Component)),Da=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;i.setState(Object(C.a)({},a,n))},i.handleStartDateChange=function(t){i.setState({startDate:Te()(t[0].toISOString()).format("MM/DD/YYYY")})},i.handleEndDateChange=function(t){i.setState({endDate:Te()(t[0].toISOString()).format("MM/DD/YYYY")})},i.handleFormSubmit=function(t){if(i.handleValidation()){var e={id:i.props.version.id,name:i.state.name,startDate:Te()(i.state.startDate).format(),endDate:Te()(i.state.endDate).format()};i.versionPut(e).then((function(t){i.setState({submitMsg:g.t("submitMessages.updated"),submitColour:"#24a148"}),i.props.updateProductVersions()})).catch((function(t){i.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})}))}},i.state={name:"",startDate:"",endDate:"",invalid:{},modalId:"",buttonId:"",submitMsg:"",submitColour:"black"},i}return Object(i.a)(a,[{key:"handleValidation",value:function(){var t={},e=!0;return""===this.state.name&&(e=!1,t.name=!0),"undefined"!==typeof this.state.startDate&&(this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(e=!1,t.startDate=!0)),"undefined"!==typeof this.state.endDate&&(this.state.endDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(e=!1,t.endDate=!0)),this.setState({invalid:t}),e}},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&this.getVersionDetails()}},{key:"getVersionDetails",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,e.t,a=e.keycloak,!(a.initialized&&a.authenticated)){t.next=7;break}return t.next=5,ga(this.props.serviceUrl,this.props.version.id);case 5:n=t.sent,this.setState({name:n.data.name,startDate:Te()(n.data.startDate).format("MM/DD/YYYY"),endDate:Te()(n.data.endDate).format("MM/DD/YYYY"),modalId:"modal-form-version-edit-"+n.data.id,buttonId:"edit-version-button-"+n.data.id});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"versionPut",value:function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){t.next=6;break}return t.next=5,wa(this.props.serviceUrl,e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=this.props.keycloak;t.initialized&&t.authenticated&&(this.getVersionDetails(),document.querySelector(".edit-version-button-"+this.props.version.id).addEventListener("click",this.clearValues,!1))}},{key:"render",value:function(){var t="bx--btn bx--btn--ghost edit-version-button-"+this.props.version.id;return Object(I.jsx)(D.a,{buttonTriggerText:g.t("buttons.edit"),modalHeading:g.t("adminDashboard.addProject.editTitle"),buttonTriggerClassName:t,className:"modal-form",id:this.state.modalId,handleSubmit:this.handleFormSubmit,primaryButtonText:g.t("modalText.save"),secondaryButtonText:g.t("modalText.cancel"),modalLabel:Object(I.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),children:Object(I.jsx)("div",{className:"form-container",children:Object(I.jsxs)(T.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsx)(N.a,{name:"name",labelText:g.t("adminDashboard.addProject.projectName")+" *",value:this.state.name,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.name}),Object(I.jsx)(Se.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleStartDateChange,value:this.state.startDate,children:Object(I.jsx)(Ce.a,{name:"startDate",placeholder:"mm/dd/yyyy",labelText:g.t("subscriptionDetails.startDate")+" *",onChange:this.handleChanges,type:"text",invalidText:g.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(I.jsx)(Se.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleEndDateChange,name:"endDate",value:this.state.endDate,children:Object(I.jsx)(Ce.a,{name:"endDate",placeholder:"mm/dd/yyyy",labelText:g.t("subscriptionDetails.endDate")+" *",onChange:this.handleChanges,type:"text",invalidText:g.t("validation.invalid.date"),invalid:this.state.invalid.endDate})})]})})})}}]),a}(u.Component)),Ta=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;return Object(n.a)(this,a),(t=e.call(this)).handleDeleteVersion=function(e,a){e.preventDefault(),window.confirm("Are you sure you want to delete this Entando version?")&&t.deleteVersion(a).then((function(e){t.setState({submitMsg:g.t("submitMessages.deleted"),submitColour:"#24a148"}),t.updateProductVersions()})).catch((function(e){t.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})}))},t.updateProductVersions=function(){t.getProductVersions()},t.state={data:""},t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){Y()&&this.getProductVersions()}},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&Y()&&this.getProductVersions()}},{key:"getProductVersions",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,e.t,a=e.keycloak,!(a.initialized&&a.authenticated)){t.next=7;break}return t.next=5,ka(this.props.serviceUrl);case 5:n=t.sent,this.setState({data:n});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"deleteVersion",value:function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.props,a.t,n=a.keycloak,!(n.initialized&&n.authenticated)){t.next=6;break}return t.next=5,Sa(this.props.serviceUrl,e);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"handleToggleChange",value:function(){var t=Object(b.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xa(this.props.serviceUrl,e);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Y()?Object(I.jsxs)("div",{children:[Object(I.jsx)(Lt.a,{rows:Pa,headers:Na,children:function(e){e.rows;var a=e.headers,n=e.getHeaderProps,i=e.getTableProps;return Object(I.jsx)(Vt.a,{children:Object(I.jsxs)(At.a,Object(o.a)(Object(o.a)({},i()),{},{children:[Object(I.jsx)(Ft.a,{children:Object(I.jsx)(qt.a,{children:a.map((function(t){return Object(I.jsx)(Rt.a,Object(o.a)(Object(o.a)({},n({header:t})),{},{children:t.header}))}))})}),Object(I.jsx)(Yt.a,{children:0!==Object.keys(t.state.data).length?t.state.data.data.map((function(e,a){return Object(I.jsxs)(qt.a,{children:[Object(I.jsx)(Bt.a,{children:e.name}),Object(I.jsx)(Bt.a,{children:Object(I.jsx)(va.a,{onClick:function(){return t.handleToggleChange(e.id)},"aria-label":"toggle button",id:e.id,defaultToggled:!!e.status})}),Object(I.jsx)(Bt.a,{children:e.startDate}),Object(I.jsx)(Bt.a,{children:e.endDate}),Object(I.jsx)(Bt.a,{children:Object(I.jsxs)("div",{style:{display:"flex"},children:[Object(I.jsx)(Da,{version:e,serviceUrl:t.props.serviceUrl,updateProductVersions:t.updateProductVersions},e.id),Object(I.jsxs)("a",{onClick:function(a){return t.handleDeleteVersion(a,e.id)},href:"",style:{display:"flex",marginTop:"12px"},children:[Object(I.jsx)(fa.a,{fill:"red",style:{marginTop:"4px"}}),Object(I.jsx)("p",{children:g.t("buttons.delete")})]})]})})]},a)})):null})]}))})}}),Object(I.jsx)("br",{}),Object(I.jsx)(Ca,{serviceUrl:this.props.serviceUrl,updateProductVersions:this.updateProductVersions})]}):Object(I.jsx)("p",{children:g.t("userMessages.unauthorized")})}}]),a}(u.Component),Na=[{header:g.t("adminConfig.manageProductVersion.entandoVersion"),key:"entVersion"},{header:g.t("adminConfig.manageProductVersion.status"),key:"status"},{header:g.t("adminConfig.manageProductVersion.startDate"),key:"startDate"},{header:g.t("adminConfig.manageProductVersion.supportEndDate"),key:"endDate"},{header:g.t("customerDashboard.action"),key:"action"}],Pa=[{id:"a",entVersion:"5.2",status:Object(I.jsx)(va.a,{"aria-label":"toggle button",defaultToggled:!0,id:"status-1"}),startDate:"April, 2018",endDate:"April, 2022"},{id:"b",entVersion:"6.3",status:Object(I.jsx)(va.a,{"aria-label":"toggle button",id:"status-2"}),startDate:"Jile, 2019",endDate:"April, 2023"},{id:"c",entVersion:"6.2",status:Object(I.jsx)(va.a,{"aria-label":"toggle button",defaultToggled:!0,id:"status-3"}),startDate:"September, 2020",endDate:"April, 2024"}],Ea=L(Ta),Ua=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).state={loading:!0},i.adminConfig=[{label:Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{className:"title",children:g.t("adminConfig.integrationTicketingSystem.title")}),Object(I.jsx)("p",{className:"desc",children:g.t("adminConfig.integrationTicketingSystem.desc")})]}),content:Object(I.jsx)(ja,{serviceUrl:i.props.serviceUrl})},{label:Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{className:"title",children:g.t("adminConfig.manageProductVersion.title")}),Object(I.jsx)("p",{className:"desc",children:g.t("adminConfig.manageProductVersion.desc")})]}),content:Object(I.jsx)(Ea,{serviceUrl:i.props.serviceUrl})}],i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this.props.keycloak;t.initialized&&t.authenticated&&this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?null:A()?Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"pageTitle",children:g.t("adminDashboard.adminTitle")}),Object(I.jsxs)("div",{className:"form-container",children:[Object(I.jsxs)(x.a,{children:[Object(I.jsx)("p",{className:"title",children:g.t("adminConfig.title")}),Object(I.jsx)("p",{className:"desc",children:g.t("adminConfig.desc")})]}),Object(I.jsx)(w.a,{children:this.adminConfig.map((function(t,e){return Object(I.jsx)(zt.a,{index:e,title:t.label,description:t.description,children:Object(I.jsx)("p",{children:t.content})},e.toString())}))})]})]}):Object(I.jsx)("p",{children:g.t("userMessages.unauthorized")})}}]),a}(l.a.Component)),Ma=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},za=Object(C.a)({hidden:"hidden",locale:"locale",paginationMode:"pagination-mode",disableDefaultEventHandler:"disable-default-event-handler",serviceUrl:"service-url"},"locale","locale"),Ia=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=Ma(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Ma()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},Ma()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(za.serviceUrl)||"",e=this.getAttribute(za.locale)||"";k(e),h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(Ua,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("admin-configuration-widget",Ia);var La=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},Va="locale",Aa="service-url",Fa=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=La(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},La()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},La()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(Aa)||"",e=this.getAttribute(Va)||"";k(e),h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)($e,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("open-ticket-widget",Fa);var qa=a(50),Ra="api/portal-users",Ya=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Ra,"/").concat(a),i=Object(o.a)(Object(o.a)({},J()),{},{method:"DELETE"}),t.next=4,_(n,i);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Ba=function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=W("".concat(e,"/").concat(Ra)),n=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.next=4,_(a,n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ha=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e,"/").concat(Ra),i=Object(o.a)(Object(o.a)({},J()),{},{method:"POST",body:a?JSON.stringify(a):null}),t.next=4,_(n,i);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Ga=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=W("".concat(e,"/").concat(Ra,"/username/").concat(a)),i=Object(o.a)(Object(o.a)({},J()),{},{method:"GET"}),t.next=4,_(n,i);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),Ja=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n,i,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="admin/realms/".concat(a,"/users"),i="".concat(e,"/").concat(n),r=Object(o.a)(Object(o.a)({},K()),{},{method:"GET"}),t.next=5,_(i,r);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();var Ka=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).mapKeycloakUserEmails=function(t){var e=new Map;return t.forEach((function(t){return e.set(t.username,t.email)})),e},i.handleChanges=function(t){var e=t.target,a=e.name,n=e.value;i.setState(Object(C.a)({},a,n))},i.handleFormSubmit=function(t){t.preventDefault();var e=i.state,a=e.projectId,n=e.assignUser;i.handleFormValidation()&&i.assignUserToProject(a,n).then((function(t){201===t.status?i.setState({submitMsg:g.t("submitMessages.updated"),submitColour:"#24a148"}):i.setState({submitMsg:g.t("submitMessages.error"),submitColour:"#da1e28"})}))},i.assignUserToProject=function(){var t=Object(b.a)(m.a.mark((function t(e,a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getPortalUserId({username:a,email:i.state.users.get(a)});case 2:return n=t.sent,t.next=5,yt(i.props.serviceUrl,e,n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),i.getPortalUserId=function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=null,t.prev=1,t.next=4,Ga(i.props.serviceUrl,e.username);case 4:n=t.sent,a=n.data.id,t.next=15;break;case 8:if(t.prev=8,t.t0=t.catch(1),!t.t0.message.toLowerCase().includes("not found")){t.next=15;break}return t.next=13,i.createPortalUser(e);case 13:r=t.sent,a=r.data.id;case 15:return t.abrupt("return",a);case 16:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),i.createPortalUser=function(){var t=Object(b.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ha(i.props.serviceUrl,{username:e.username,email:e.email});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.state={projectId:"",assignUser:"",users:new Map,projects:{},invalid:{},submitMsg:"",submitColour:"black"},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this.props,e=(t.t,t.keycloak);e.initialized&&e.authenticated&&this.fetchData(e.authServerUrl)}},{key:"componentDidUpdate",value:function(t){var e=this.props,a=(e.t,e.keycloak),n=a.initialized&&a.authenticated,i=t.keycloak.authenticated!==n;n&&i&&this.fetchData(a.authServerUrl)}},{key:"fetchData",value:function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n,i,r,s,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.props.keycloak,t.t0=this,t.next=4,Ja(e,a.realm);case 4:return t.t1=t.sent.data,n=t.t0.mapKeycloakUserEmails.call(t.t0,t.t1),t.next=8,Dt(this.props.serviceUrl);case 8:i=t.sent.data,r=window.location.search,s=new URLSearchParams(r),(c=s.get("project"))&&(Object.keys(i).map((function(t,e){t!==c&&delete i[t]})),1===Object.keys(i).length&&this.setState({projectId:Object.keys(i)[0]})),this.setState({users:n,projects:i});case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"handleFormValidation",value:function(){var t={},e=!0,a=this.state,n=a.projectId,i=a.assignUser;return""===n&&(e=!1,t.projectId=!0),""===i&&(e=!1,t.assignUser=!0),this.setState({invalid:t}),e}},{key:"setupFormComponents",value:function(){var t,e=this.state.users,a=this.state.projects,n=t=null;return e.size>0?(t=Object(qa.a)(e.keys()).map((function(t,e){return Object(I.jsx)(pt.a,{text:t,value:t,children:t},e)}))).unshift(Object(I.jsx)(pt.a,{text:g.t("manageUsers.assign.userList"),value:""},"-1")):t=Object(I.jsx)(pt.a,{text:g.t("manageUsers.assign.noUsers"),value:""}),null!=a&&Object.keys(a).length>0?(n=Object.keys(a).map((function(t,e){return Object(I.jsx)(pt.a,{text:a[t],value:t,children:"test"},e)})),Object.keys(a).length>1&&n.unshift(Object(I.jsx)(pt.a,{text:g.t("manageUsers.assign.projectList"),value:""},"-1"))):n=Object(I.jsx)(pt.a,{text:g.t("manageUsers.assign.noProjects"),value:""}),{userList:t,projectList:n}}},{key:"render",value:function(){var t=this.setupFormComponents(),e=t.userList,a=t.projectList;return Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{style:{color:this.state.submitColour},children:this.state.submitMsg}),Object(I.jsx)(T.a,{onSubmit:this.handleFormSubmit,children:Object(I.jsxs)("div",{className:"bx--grid",children:[Object(I.jsx)("div",{className:"bx--row",children:Object(I.jsx)("div",{className:"bx--col",children:Object(I.jsx)(ht.a,{name:"projectId",labelText:g.t("manageUsers.assign.projectName"),value:this.state.projectId,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.projectId,children:a})})}),Object(I.jsx)("div",{className:"bx--row",children:Object(I.jsx)("div",{className:"bx--col",children:Object(I.jsx)(ht.a,{name:"assignUser",labelText:g.t("manageUsers.assign.assignUser"),value:this.state.assignUser,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.assignUser,children:e})})}),Object(I.jsxs)(It.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",g.t("buttons.submit")," "]})]})})]})}}]),a}(u.Component)),Wa=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).handleRemoveUser=function(t,e){e.preventDefault();var a=i.state.portalUsers.get(t).id;Ya(i.props.serviceUrl,a).then((function(e){if(204===e.status){var a=i.state.portalUsers;a.delete(t),i.setState({portalUsers:a}),i.handleUserDisplay()}}))},i.state={portalUsers:new Map,keycloakUsers:new Map,displayUsers:[],filterText:""},i.headerData=[{header:g.t("manageUsers.delete.userName"),key:"username"},{header:g.t("manageUsers.delete.userEmail"),key:"email"},{header:g.t("manageUsers.delete.dateAdded"),key:"dateAdded"},{header:g.t("manageUsers.delete.userAccess"),key:"userAccess"}],i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this.props,e=(t.t,t.keycloak);e.initialized&&e.authenticated&&this.fetchData(e.authServerUrl)}},{key:"componentDidUpdate",value:function(t){var e=this.props,a=(e.t,e.keycloak),n=a.initialized&&a.authenticated,i=t.keycloak.authenticated!==n;n&&i&&this.fetchData(a.authServerUrl)}},{key:"fetchData",value:function(){var t=Object(b.a)(m.a.mark((function t(e){var a,n,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.props.keycloak,!(a.initialized&&a.authenticated)){t.next=15;break}return t.t0=this,t.next=6,Ba(this.props.serviceUrl);case 6:return t.t1=t.sent.data,n=t.t0.handleMapFormatting.call(t.t0,t.t1),t.t2=this,t.next=11,Ja(e,a.realm);case 11:t.t3=t.sent.data,i=t.t2.handleMapFormatting.call(t.t2,t.t3),this.setState({portalUsers:n,keycloakUsers:i}),this.handleUserDisplay();case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"handleMapFormatting",value:function(t){return new Map(t.map((function(t){return[t.username,t]})))}},{key:"handleUserDisplay",value:function(){var t=this,e=this.state,a=e.portalUsers,n=e.keycloakUsers,i=Object(qa.a)(a.keys()),r=Object(qa.a)(n.values()).map((function(e){return{id:e.username,username:e.username,email:e.email,dateAdded:"".concat(new Date(e.createdTimestamp).toLocaleString("default",{month:"long"})," ").concat(new Date(e.createdTimestamp).getFullYear()),userAccess:i.includes(e.username)?Object(I.jsxs)("a",{onClick:function(a){return t.handleRemoveUser(e.username,a)},href:"",children:[Object(I.jsx)(fa.a,{fill:"red"}),g.t("manageUsers.delete.removeUser")]}):""}}));this.setState({displayUsers:r})}},{key:"render",value:function(){return Object(I.jsx)(Lt.a,{rows:this.state.displayUsers,headers:this.headerData,children:function(t){var e=t.rows,a=t.headers,n=t.getHeaderProps,i=t.getTableProps;return Object(I.jsx)(Vt.a,{children:Object(I.jsxs)(At.a,Object(o.a)(Object(o.a)({},i()),{},{children:[Object(I.jsx)(Ft.a,{children:Object(I.jsx)(qt.a,{children:a.map((function(t){return Object(I.jsx)(Rt.a,Object(o.a)(Object(o.a)({},n({header:t})),{},{children:t.header}))}))})}),Object(I.jsx)(Yt.a,{children:e.map((function(t){return Object(I.jsx)(qt.a,{children:t.cells.map((function(t){return Object(I.jsx)(Bt.a,{children:t.value},t.id)}))},t.id)}))})]}))})}})}}]),a}(u.Component)),_a=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).state={loading:!0},i.userFunctionality=[{label:Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{className:"title",children:g.t("manageUsers.assign.title")}),Object(I.jsx)("p",{className:"desc",children:g.t("manageUsers.assign.desc")})]}),content:Object(I.jsx)(Ka,{serviceUrl:i.props.serviceUrl}),open:!0},{label:Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{className:"title",children:g.t("manageUsers.manage.title")}),Object(I.jsx)("p",{className:"desc",children:g.t("manageUsers.manage.desc")})]}),content:Object(I.jsx)(Wa,{serviceUrl:i.props.serviceUrl}),open:!1}],i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this.props.keycloak;t.initialized&&t.authenticated&&this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?null:A()?Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"pageTitle",children:g.t("adminDashboard.adminTitle")}),Object(I.jsx)("div",{className:"form-container",children:Object(I.jsx)(w.a,{children:this.userFunctionality.map((function(t,e){return Object(I.jsx)(zt.a,{index:e,title:t.label,description:t.description,open:t.open,children:Object(I.jsx)("p",{children:t.content})},e.toString())}))})})]}):Object(I.jsx)("p",{children:g.t("userMessages.unauthorized")})}}]),a}(u.Component)),Qa=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},$a=Object(C.a)({hidden:"hidden",locale:"locale",paginationMode:"pagination-mode",disableDefaultEventHandler:"disable-default-event-handler",serviceUrl:"service-url"},"locale","locale"),Xa=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=Qa(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Qa()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},Qa()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute($a.serviceUrl)||"",e=this.getAttribute($a.locale)||"";k(e),h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(_a,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("manage-user-widget",Xa);var Za=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},tn="service-url",en=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=Za(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},Za()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},Za()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(tn)||"";h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(Ka,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("assign-user-widget",en);var an=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},nn="service-url",rn=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=an(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},an()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},an()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(nn)||"";h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(Wa,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("delete-user-widget",rn);var sn=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},cn="service-url",on=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=sn(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},sn()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},sn()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(cn)||"";h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(ja,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("ticketing-system-widget",on);var un=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},ln="service-url",dn=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=un(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},un()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},un()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(ln)||"";h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(Ea,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("product-version-widget",dn);var hn=a(82),pn={GOLD:"Gold",PLATINUM:"Platinum"},mn="REQUESTED",bn="ACTIVE",jn=["New","Existing"],vn=L(function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(t){var i;return Object(n.a)(this,a),(i=e.call(this,t)).handleChanges=function(t){var e=t.target,a=e.name,n=e.value;i.setState(Object(C.a)({},a,n)),i.setState({submitSuccess:!1,submitError:!1})},i.handleStartDateChange=function(t){""!==t&&i.setState({startDate:Te()(t[0].toISOString()).format("MM/DD/YYYY")})},i.handleFormSubmit=function(t){t.preventDefault(),i.setState({submitSuccess:!1,submitError:!1}),i.handleValidation()&&("new"===i.state.subscriptionType?i.newSubscription().then((function(t){xt(i.props.serviceUrl,i.state.projectId,t.data.id),i.setState({submitSuccess:!0,submitError:!1,submitColour:"#24a148"})})).catch((function(t){i.setState({submitSuccess:!1,submitError:!0,submitColour:"#da1e28"})})):"existing"===i.state.subscriptionType&&i.renewSubscription().then((function(t){xt(i.props.serviceUrl,i.state.projectId,t.data.id),i.setState({submitSuccess:!0,submitError:!1,submitColour:"#24a148"})})).catch((function(t){i.setState({submitSuccess:!1,submitError:!0,submitColour:"#da1e28"})})))},i.state={loading:!0,subscriptionType:"",projectId:"",startDate:"",subscriptionLevel:"",subscriptionLength:"",entandoVersionId:"",invalid:{},projects:{},productVersions:[],selectedProjectId:"",submitSuccess:!1,submitError:!1,submitColour:"black"},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this.props.keycloak;t.initialized&&t.authenticated&&(H()&&this.fetchData(),this.setState({loading:!1}))}},{key:"componentDidUpdate",value:function(t){var e=this.props.keycloak,a=e.initialized&&e.authenticated,n=t.keycloak.authenticated!==a;a&&n&&(H()&&this.fetchData(),this.setState({loading:!1}))}},{key:"fetchData",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e,a,n,i,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e="",!Y()){t.next=7;break}return t.next=4,Dt(this.props.serviceUrl);case 4:e=t.sent.data,t.next=10;break;case 7:return t.next=9,Tt(this.props.serviceUrl);case 9:e=t.sent.data;case 10:return t.next=12,ka(this.props.serviceUrl);case 12:a=t.sent.data,n=window.location.search,i=new URLSearchParams(n),(r=i.get("project"))&&(Object.keys(e).map((function(t,a){t!==r&&delete e[t]})),1===Object.keys(e).length&&this.setState({projectId:Object.keys(e)[0]})),this.setState({projects:e,productVersions:a});case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isNumeric",value:function(t){return"string"==typeof t&&(!isNaN(t)&&!isNaN(parseFloat(t)))}},{key:"handleValidation",value:function(){var t={},e=!0;return""===this.state.subscriptionType&&(e=!1,t.subscriptionType=!0),""===this.state.projectId&&(e=!1,t.projectId=!0),"undefined"!==typeof this.state.startDate&&(this.state.startDate.match(/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/)||(e=!1,t.startDate=!0)),""!==this.state.subscriptionLength&&this.isNumeric(this.state.subscriptionLength)||(e=!1,t.subscriptionLength=!0),""===this.state.subscriptionLevel&&(e=!1,t.level=!0),""===this.state.entandoVersionId&&(e=!1,t.entandoVersionId=!0),this.setState({invalid:t}),e}},{key:"newSubscription",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={entandoVersionId:this.state.entandoVersionId,projectId:this.state.projectId,projectSubscription:{startDate:new Date(this.state.startDate),lengthInMonths:this.state.subscriptionLength,level:this.state.subscriptionLevel,status:this.subscriptionStatus()}},t.next=3,ge(this.props.serviceUrl,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"renewSubscription",value:function(){var t=Object(b.a)(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={entandoVersionId:this.state.entandoVersionId,projectId:this.state.projectId,projectSubscription:{startDate:new Date(this.state.startDate),lengthInMonths:this.state.subscriptionLength,level:this.state.subscriptionLevel,status:this.subscriptionStatus()}},t.next=3,we(this.props.serviceUrl,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"subscriptionStatus",value:function(){return A()?bn:mn}},{key:"setupFormComponents",value:function(){var t=this.state.projects,e=null;null!=t&&Object.keys(t).length>0?(e=Object.keys(t).map((function(e,a){return Object(I.jsx)(pt.a,{text:t[e],value:e,children:t[e]},a)})),Object.keys(t).length>1&&e.unshift(Object(I.jsx)(pt.a,{text:g.t("manageUsers.assign.projectList"),value:""},"-1"))):e=Object(I.jsx)(pt.a,{text:g.t("manageUsers.assign.noProjects"),value:""});var a=Object.entries(pn).map((function(t){var e=Object(hn.a)(t,2),a=e[0],n=e[1];return Object(I.jsx)(pt.a,{text:n,value:a,children:n},a)}));a.unshift(Object(I.jsx)(pt.a,{text:g.t("subscriptionForm.chooseLevel"),value:""},"-1"));var n=this.state.productVersions.map((function(t){return t.status?Object(I.jsx)(pt.a,{text:t.name,value:t.id,children:t.name},t.id):null}));return n.unshift(Object(I.jsx)(pt.a,{text:g.t("subscriptionForm.chooseVersion"),value:""},"-1")),{projectList:e,subscriptionLevelList:a,versionList:n}}},{key:"renderForm",value:function(){var t,e=this.setupFormComponents(),a=e.projectList,n=e.subscriptionLevelList,i=e.versionList;return"new"===this.state.subscriptionType?t=Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{children:Object(I.jsx)("strong",{children:g.t("subscriptionForm.newSubscription")})}),Object(I.jsx)("br",{}),Object(I.jsxs)("div",{className:"bx--row",children:[Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(ht.a,{id:"projectId",name:"projectId",labelText:g.t("subscriptionForm.projectName"),value:this.state.projectId,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.projectId,children:a}),Object(I.jsx)(ht.a,{id:"subscriptionLevel",name:"subscriptionLevel",labelText:g.t("subscriptionForm.desiredSubscriptionLevel")+" *",value:this.state.subscriptionLevel,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.level,children:n}),Object(I.jsx)(ht.a,{id:"entandoVersionId",name:"entandoVersionId",labelText:g.t("subscriptionForm.entandoVersion")+" *",value:this.state.entandoVersionId,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.entandoVersionId,children:i})]}),Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(Se.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleStartDateChange,children:Object(I.jsx)(Ce.a,{id:"startDate",name:"startDate",placeholder:"mm/dd/yyyy",labelText:g.t("subscriptionForm.desiredSubscriptionStartDate"),value:this.state.startDate,type:"text",invalidText:g.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(I.jsx)(N.a,{id:"subscriptionLength",name:"subscriptionLength",labelText:g.t("subscriptionForm.desiredSubscriptionLength")+" *",value:this.state.subscriptionLength,onChange:this.handleChanges,invalidText:g.t("validation.invalid.number"),invalid:this.state.invalid.subscriptionLength})]})]})]}):"existing"===this.state.subscriptionType&&(t=Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{children:Object(I.jsx)("strong",{children:g.t("subscriptionForm.renewSubscription")})}),Object(I.jsx)("br",{}),Object(I.jsxs)("div",{className:"bx--row",children:[Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(ht.a,{id:"projectId",name:"projectId",labelText:g.t("subscriptionForm.projectName"),value:this.state.projectId,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.projectId,children:a}),Object(I.jsx)(ht.a,{id:"subscriptionLevel",name:"subscriptionLevel",labelText:g.t("subscriptionForm.desiredSubscriptionLevel")+" *",value:this.state.subscriptionLevel,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.level,children:n}),Object(I.jsx)(ht.a,{id:"entandoVersionId",name:"entandoVersionId",labelText:g.t("subscriptionForm.entandoVersion")+" *",value:this.state.entandoVersionId,onChange:this.handleChanges,invalidText:g.t("validation.invalid.required"),invalid:this.state.invalid.entandoVersionId,children:i})]}),Object(I.jsxs)("div",{className:"bx--col",children:[Object(I.jsx)(Se.a,{dateFormat:"m/d/Y",datePickerType:"single",onChange:this.handleStartDateChange,children:Object(I.jsx)(Ce.a,{id:"startDate",name:"startDate",placeholder:"mm/dd/yyyy",labelText:g.t("subscriptionForm.desiredSubscriptionStartDate"),value:this.state.startDate,type:"text",invalidText:g.t("validation.invalid.date"),invalid:this.state.invalid.startDate})}),Object(I.jsx)(N.a,{id:"subscriptionLength",name:"subscriptionLength",labelText:g.t("subscriptionForm.desiredSubscriptionLength")+" *",value:this.state.subscriptionLength,onChange:this.handleChanges,invalidText:g.t("validation.invalid.number"),invalid:this.state.invalid.subscriptionLength})]})]})]})),t}},{key:"successErrorMessage",value:function(){var t=A(),e=this.state,a=e.subscriptionType,n=e.submitSuccess,i=e.submitError;if("new"===a){if(n)return t?this.createFormMessage("adminSubmitNewSuccess"):this.createFormMessage("customerSubmitSuccess");if(i)return this.createFormMessage("newSubError")}else{if(n)return t?this.createFormMessage("adminRenewNewSuccess"):this.createFormMessage("customerSubmitSuccess");if(i)return this.createFormMessage("renewSubError")}}},{key:"createFormMessage",value:function(t){return Object(I.jsx)("p",{style:{color:this.state.submitColour},children:g.t("subscriptionForm.".concat(t))})}},{key:"render",value:function(){return this.state.loading?null:H()?Object(I.jsxs)("div",{children:[A()?Object(I.jsx)("h3",{className:"pageTitle",children:g.t("adminDashboard.adminTitle")}):F()?Object(I.jsx)("h3",{className:"pageTitle",children:g.t("adminDashboard.supportTitle")}):R()?Object(I.jsx)("h3",{className:"pageTitle",children:g.t("adminDashboard.customerTitle")}):q()?Object(I.jsx)("h3",{className:"pageTitle",children:g.t("adminDashboard.partnerTitle")}):null,Object(I.jsxs)("div",{className:"form-container",children:[this.successErrorMessage(),Object(I.jsxs)(T.a,{onSubmit:this.handleFormSubmit,children:[Object(I.jsx)("div",{className:"form-desc",children:Object(I.jsx)("h4",{children:g.t("subscriptionForm.formTitle")})}),Object(I.jsxs)("div",{className:"bx--grid",children:[Object(I.jsx)("div",{className:"bx--row",children:Object(I.jsx)("div",{className:"bx--col",children:Object(I.jsxs)(ht.a,{id:"subscriptionType",name:"subscriptionType",labelText:g.t("subscriptionForm.subscriptionType"),required:!0,value:this.state.subscriptionType,onChange:this.handleChanges,children:[Object(I.jsx)(pt.a,{text:g.t("subscriptionForm.selectType"),value:""}),jn.map((function(t,e){return Object(I.jsx)(pt.a,{text:t,required:!0,value:t.toLowerCase(),children:t},e)}))]})})}),this.renderForm(),this.state.subscriptionType?Object(I.jsxs)(It.a,{kind:"primary",tabIndex:0,type:"submit",children:[" ",g.t("buttons.submit")]}):""]})]})]})]}):Object(I.jsx)("p",{children:g.t("userMessages.unauthorized")})}}]),a}(u.Component)),fn=function(){return window&&window.entando&&window.entando.keycloak&&Object(o.a)(Object(o.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},On=Object(C.a)({hidden:"hidden",locale:"locale",paginationMode:"pagination-mode",disableDefaultEventHandler:"disable-default-event-handler",serviceUrl:"service-url"},"locale","locale"),kn=function(t){Object(r.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(n.a)(this,a);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).keycloak=fn(),t}return Object(i.a)(a,[{key:"connectedCallback",value:function(){var t=this;this.mountPoint=document.createElement("div"),this.keycloak=Object(o.a)(Object(o.a)({},fn()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=ce(oe,(function(){t.keycloak=Object(o.a)(Object(o.a)({},fn()),{},{initialized:!0}),t.render()})),this.render(),this.appendChild(this.mountPoint)}},{key:"render",value:function(){var t=this.getAttribute(On.serviceUrl)||"",e=this.getAttribute(On.locale)||"";k(e),h.a.render(Object(I.jsx)(z.Provider,{value:this.keycloak,children:Object(I.jsx)(vn,{serviceUrl:t})}),this.mountPoint)}}]),a}(Object(c.a)(HTMLElement));customElements.define("subscription-form-widget",kn)},21:function(t,e,a){},23:function(t,e,a){},75:function(t){t.exports=JSON.parse('{"roles":{"admin":"Admin","customer":"Customer","partner":"Partner","support":"Support"},"buttons":{"addCustomer":"Add a Customer +","addPartner":"Add a Partner +","addProject":"Add a Project +","addProductVersion":"Add product version +","cancel":"Cancel","delete":"Delete","edit":"Edit","manageUsers":"Manage Users","openTicket":"Open Ticket","save":"Save","submit":"Submit","subscriptionRequest":"Subscription Request","view":"View","viewTickets":"View Tickets","viewDetails":"View Details"},"customerDashboard":{"title":"Welcome to Entando Customer Portal","customerName":"Customer Name","customerId":"Customer Id","startDate":"Start Date","endDate":"End Date","projectName":"Project Name","partnerName":"PartnerName","entandoVersion":"Entando Version","openTickets":"Open Tickets","subscriptions":"Subscriptions","tableDesc":"In this table there are open subscriptions","partners":"Partners","status":"Status","action":"Action"},"adminDashboard":{"title":"Welcome to Entando","adminTitle":"Welcome to Entando Admin View","customerTitle":"Welcome to Entando Customer View","partnerTitle":"Welcome to Entando Partner View","supportTitle":"Welcome to Entando Support View","allCustomers":"All Customers","searchLabel":"Customer Search","searchText":"Which customer are you looking for?","view":"View","addProject":{"title":"Add a Project","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","customerList":"Customer List","selectCustomer":"Select Customer","projectName":"Project Name","projectDesc":"Project Description","systemId":"System Id","contactName":"Contact Name","contactPhone":"Contact Phone","contactEmail":"Contact Email","notes":"Notes","editTitle":"Edit Project"},"addCustomer":{"title":"Add a Customer","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","customerName":"Customer Name","customerNumber":"Customer Number","contactName":"Contact Name","contactPhone":"Contact Phone","contactEmail":"Contact Email","notes":"Notes"},"addPartner":{"title":"Add a Partner","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","projectList":"Project List","selectProject":"Select Project","partnerName":"Partner Name","partnerNumber":"Partner Number","notes":"Notes"},"addProductVersion":{"title":"Add a new product version","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","productVersion":"Product Version","productVersionStartDate":"Product Version Start Date","productVersionEndDate":"Product Version End Date"},"editCustomer":{"title":"Edit Customer","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis."}},"projectDetails":{"description":"Description:","commitment":"Commitment:","type":"Type:","quantityRequest":"Quantity Request:","components":"Components:","level":"Level:","startDate":"Start Date:","endDate":"End Date:","license":"License:","listOfTickets":"List of Tickets","tickets":"Tickets","project":"Project","entandoVersion":"Entando Version","creationDate":"Creation Date","goToTicket":"Go to Ticket"},"ticketDetails":{"listOfTickets":"List of Tickets","tickets":"Tickets","issue":"Issue","project":"Project","summary":"Summary","description":"Description","type":"Type","status":"Status","created":"Created","link":"Link","priority":"Priority","updated":"Updated","viewTicket":"View Ticket"},"supportTicketForm":{"title":"Entando Admin View","formTitle":"Create new support ticket","desc":"Create a support ticket for an existing project.","select":"Select","type":"Type","selectProject":"Select Project","ticketNumber":"Ticket Number","customerName":"Customer Name","projectName":"ProjectName","ticketOpenedBy":"Ticket Opened By:","priority":"Priority","partnerName":"Partner Name","ticketSummary":"Ticket Summary","addticketSummary":"Add Ticket Summary","ticketDescription":"Ticket Description","addticketDescription":"Add Ticket Description"},"enhancementForm":{"title":"Welcome to Entando Customer Portal","formTitle":"Request for Enhancement","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","customerName":"Customer Name","ticketNumber":"Ticket Number","projectName":"ProjectName","ticketOpenedBy":"Ticket Opened By:","partnerName":"Partner Name","priority":"Priority","enhancementDescription":"Enhancement Description","addenhancementDescription":"Add Enhancement Description"},"customerDetails":{"id":"Customer Id","name":"Customer Name","contactName":"Contact Name","contactPhone":"Contact Phone","contactEmail":"Contact Email","notes":"Notes"},"subscriptionDetails":{"description":"Description","commitment":"Commitment","partners":"Partners","type":"Type","status":"Status","level":"Level","startDate":"Start Date","endDate":"End Date","license":"License","lengthInMonths":"Length In Months","notes":"Notes","assignedUsers":"Assigned Users"},"subscriptionForm":{"title":"Entando Admin View","formTitle":"New or Renew Subscription","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","subscriptionType":"Subscription Type *","newSubscription":"New Subscription","renewSubscription":"Renew Subscription","selectType":"Select Subscription Type","chooseLevel":"Choose a level","customerName":"Customer Name *","customerNumber":"Customer Number *","customerEmail":"Customer Email*","projectName":"Project Name*","desiredSubscriptionStartDate":"Desired Subscription Start Date *","desiredSubscriptionLevel":"Desired Subscription Level","desiredSubscriptionLength":"Desired Subscription Length (months)","contactName":"Contact Name *","contactEmail":"Contact Email *","contactNumber":"Contact Phone Number","chooseVersion":"Choose Entando version","entandoVersion":"Entando Version","adminSubmitNewSuccess":"Successfully added a project subscription.","adminRenewNewSuccess":"Successfully renewed the latest project subscription.","customerSubmitSuccess":"You will be contacted by an Entando Sales representative to finalize the subscription.","newSubError":"Error in adding a project subscription.","renewSubError":"Error in renewing a project subscription."},"modalText":{"save":"Save","cancel":"Cancel"},"adminConfig":{"title":"Entando Admin View","formTitle":"All Customers","desc":"Configure the Ticketing System and Entando Versions below.","integrationTicketingSystem":{"title":"Integration with Ticketing System","desc":"This allows you to manage the ticketing system","selectBackendTicketingSystem":"Select Backend Ticketing System","select":"Select","url":"URL","userName":"User Name","password":"Password","projectName":"Project Name"},"manageProductVersion":{"title":"Manage Product Version","desc":"This let\u2019s you manage the entando product versions","entandoVersion":"Entando Version","status":"Status *","startDate":"Start Date","supportEndDate":"Support End Date"}},"manageUsers":{"title":"Entando Admin View","assign":{"title":"Assign a new User","desc":"Assign a user to an existing project.","projectName":"Project Name","assignUser":"Assign User","selectRole":"Select Role","projectList":"Projects List","userList":"Users List","noUsers":"There are currently no users in the system","noProjects":"There are currently no projects in the system"},"manage":{"title":"Manage all Users","desc":"View and delete existing users."},"delete":{"desc":"View and delete existing users","userName":"User Name","userEmail":"User Email","dateAdded":"Date Added","userAccess":"User Access","removeUser":"Remove User"}},"editSubscription":{"title":"Edit Subscription","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","description":"Description","commitment":"Commitment","type":"Type","quantityRequest":"QuantityRequest","components":"Components","level":"Level"},"validation":{"invalid":{"required":"This field is required.","email":"Email is not valid.","date":"Please enter a date in \'mm/dd/yyyy\' format.","number":"This field must be a number."}},"submitMessages":{"subscriptionRequired":"A subscription is required to create tickets for this project","created":"Successfully created","updated":"Successfully updated","added":"Successfully added","deleted":"Successfully deleted","error":"An error occurred","ticketError":"An error occurred. Make sure this project has a corresponding organization in Jira."},"userMessages":{"unauthorized":"Unauthorized","loading":"Loading","none":"None"}}')},76:function(t){t.exports=JSON.parse('{"roles":{"admin":"Amministratore","customer":"Cliente","partner":"Socio","support":"Supporto"},"buttons":{"addCustomer":"Aggiungi un cliente +","addPartner":"Aggiungi un partner +","addProject":"Aggiungi un progetto +","addProductVersion":"Aggiungi la versione del prodotto +","cancel":"Annulla","delete":"Elimina","edit":"Modificare","manageUsers":"Gestisci utenti","openTicket":"Apri un ticket","save":"Salva","submit":"Invia","subscriptionRequest":"Richiesta di abbonamento","view":"Visualizza","viewTickets":"Visualizzare i biglietti","viewDetails":"Visualizza dettagli"},"customerDashboard":{"title":"Benvenuto nel Portale Clienti Entando","customerName":"Nome del cliente","customerId":"Identificativo del cliente","startDate":"Data d\'inizio","endDate":"Data di fine","projectName":"Nome del progetto","partnerName":"Nome partner","entandoVersion":"Versione Entando","openTickets":"Biglietti aperti","subscriptions":"Abbonamenti","tableDesc":"In questa tabella ci sono iscrizioni aperte","partners":"Partner","status":"Stato","action":"Azione"},"adminDashboard":{"title":"Benvenuti a Entando","adminTitle":"Benvenuti a Entando Visualizza dell\'Amministratore","customerTitle":"Benvenuti a Entando Visualizza del Cliente","partnerTitle":"Benvenuti a Entando Visualizza del Socio","supportTitle":"Benvenuti a Entando Visualizza del Supporto","allCustomers":"Tutti i clienti","searchLabel":"Ricerca dei clienti","searchText":"Quale cliente stai cercando?","view":"Visualizza","addProject":{"title":"Aggiungi un progetto","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","customerList":"Elenco clienti","selectCustomer":"Seleziona cliente","projectName":"Nome del progetto","projectDesc":"descrizione del progetto","systemId":"ID sistema","contactName":"Nome del contatto","contactPhone":"Contatto telefonico","contactEmail":"Contatto email","notes":"Appunti","editTitle":"Modifica progetto"},"addCustomer":{"title":"Aggiungi un cliente","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","customerName":"Nome del cliente","customerNumber":"Numero cliente","contactName":"Nome del contatto","contactPhone":"Contatto telefonico","contactEmail":"Contatto email","notes":"Appunti"},"addPartner":{"title":"Aggiungi un partner","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","projectList":"Elenco progetti","selectProject":"Seleziona Progetto","partnerName":"Nome partner","partnerNumber":"Numero partner","notes":"Appunti"},"addProductVersion":{"title":"Aggiungi una nuova versione del prodotto","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis.","productVersion":"Versione del prodotto","productVersionStartDate":"Data di inizio della versione del prodotto","productVersionEndDate":"Data di fine della versione del prodotto"},"editCustomer":{"title":"Modifica cliente","desc":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse cursus fermentum risus, sit amet fringilla nunc pellentesque quis."}},"supportTicketForm":{"title":"Entando Visualizza dell\'Amministratore","formTitle":"Creare un nuovo biglietto di supporto","desc":"Creare un nuovo biglietto di supporto per un progetto esistente.","select":"Seleziona","type":"Genere","selectProject":"Seleziona progetto","ticketNumber":"Ticket Number","customerName":"Customer Name","projectName":"ProjectName","ticketOpenedBy":"Ticket Opened By:","priority":"Priorit\xe0","partnerName":"Partner Name","ticketSummary":"Riepiliogo del biglietto","addticketSummary":"Aggiungi il riepilogo del biglietto","ticketDescription":"Descrizione del biglietto","addticketDescription":"Aggiungi una descrizione del biglietto"},"customerDetails":{"id":"Identificativo del cliente","name":"Nome del cliente","contactName":"Nome del contatto","contactPhone":"Contatto telefonico","contactEmail":"Contatto email","notes":"Appunti"},"subscriptionDetails":{"description":"Descrizione","commitment":"Impegno","partners":"Socio","type":"Genere","status":"Stato","level":"Livello","startDate":"Data d\'inizio","endDate":"Data di fine","license":"Licenza","lengthInMonths":"Durata in mesi","notes":"Appunti","assignedUsers":"Utenti assegnati"},"ticketDetails":{"listOfTickets":"Elenco dei biglietti","tickets":"Biglietti","issue":"Problema","project":"Progetto","summary":"Sommario","description":"Descrizione","type":"Genere","status":"Stato","created":"Creato","updated":"Aggiornato","link":"Collegamento","viewTicket":"visualizza il biglietto"},"subscriptionForm":{"title":"Entando Visualizza dell\'Amministratore","formTitle":"Nuovo o rinnova abbonamento","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","customerType":"Tipo di cliente *","subscriptionType":"Genere di abbonamento *","newSubscription":"Nuovo abbonamento","renewSubscription":"Rinnova l\'abbonamento","selectType":"Seleziona il tipo di cliente","chooseOption":"Scegliere un\'opzione","customerName":"Nome del cliente *","customerNumber":"Numero cliente *","customerEmail":"Email del cliente *","projectName":"Nome del progetto *","desiredSubscriptionStartDate":"Data di inizio dell\'abbonamento desiderata *","desiredSubscriptionLevel":"Livello di abbonamento desiderato","desiredSubscriptionLength":"Durata dell\'abbonamento desiderata","contactName":"Nome del contatto *","contactEmail":"Contatto email *","contactNumber":"numero di contatto telefonico"},"editSubscription":{"title":"Modifica abbonamento","desc":"Lorem ipsum dolor sit lorem a amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.","description":"Descrizione","commitment":"Impegno","type":"genere","quantityRequest":"Quantit\xe0Richiesta","components":"Componenti","level":"Livello"},"adminConfig":{"title":"Entando Visualizza dell\'Amministratore","formTitle":"Tutti i clienti","desc":"Configura il sistema di biglietteria e la versione di Entando di seguito.","integrationTicketingSystem":{"title":"Integrazione con il sistema di biglietteria","desc":"Questo ti permette di gestire il sistema di biglietteria","selectBackendTicketingSystem":"Seleziona Backend Ticketing System","select":"Selezionare","url":"URL","userName":"Nome utente","password":"Parola d\'ordine","projectName":"Nome del progetto"},"manageProductVersion":{"title":"Gestisci versione prodotto","desc":"Ci\xf2 consente di gestire le versioni del prodotto entando","entandoVersion":"Versione Entando","status":"Stato *","startDate":"data d\'inizio","supportEndDate":"Data di fine del supporto"}},"modalText":{"save":"Salva","cancel":"Annulla"},"manageUsers":{"title":"Entando Visualizza dell\'Amministratore","assign":{"title":"Assegna un nuovo utente","desc":"Assegnare un utente a un progetto esistente.","projectName":"Nome del progetto","projectList":"Elenco dei progetti","userList":"Elenco degli utenti","assignUser":"Assegna utente","selectRole":"Seleziona ruolo"},"manage":{"title":"Gestisci tutti gli utenti","desc":"Visualizzare ed eliminare gli utenti esistenti."},"delete":{"desc":"View and delete existing users","userName":"Nome atente","userEmail":"Email dell\'utente","dateAdded":"Data aggiunta","userAccess":"Accesso utente","removeUser":"Rimuovere l\'utente"}},"validation":{"invalid":{"required":"Questo campo \xe8 obbligatorio.","email":"L\'email non \xe8 valida.","date":"Inserisci una data nel formato \'mm / gg / aaaa\'.","number":"Questo campo deve essere un numero."}},"submitMessages":{"subscriptionRequired":"A subscription is required to create tickets for this project","created":"Creato con successo","updated":"Aggiornato con successo","added":"Aggiunto con successo","deleted":"Cancellato con successo","error":"Si \xe8 verificato un errore","ticketError":"Si \xe8 verificato un errore. Assicurarsi che questo progetto abbia un\'organizzazione corrispondente a Jira."},"userMessages":{"unauthorized":"Non autorizzato","loading":"Caricamento in corso","none":"Nessuna"}}')}},[[101,1,2]]]);
//# sourceMappingURL=main.c3b66f59.chunk.js.map