{"version":3,"sources":["i18n.js","auth/KeycloakContext.js","components/__types__/ref.js","auth/withKeycloak.js","api/helpers.js","api/customers.js","components/Admin/AddCustomerModal.js","api/partners.js","api/projects.js","components/Admin/AddPartnerModal.js","components/Admin/AddProjectModal.js","api/ticketingsystem.js","components/Admin/EditProjectModal.js","components/Admin/ProjectActionItems.js","components/Customer/customerDataTable.js","components/Customer/customerDetails.js","components/Admin/EditCustomerModal.js","components/Customer/CustomerAccordian.js","components/Admin/AdminDashboard.js","helpers/widgetEvents.js","custom-elements/widgetEventTypes.js","custom-elements/AdminDashboardElement.js","custom-elements/AdminAddCustomerElement.js","components/Admin/RoleCheck.js","custom-elements/AdminRoleCheckElement.js","custom-elements/CustomerDataTableElement.js","custom-elements/CustomerDetailsElement.js","api/tickets.js","components/SubscriptionDetails/TicketList.js","api/subscriptions.js","components/Admin/EditSubscriptionModal.js","components/SubscriptionDetails/subscription.js","custom-elements/SubscriptionElement.js","components/Forms/openTicket.js","custom-elements/FormsOpenTicketElement.js","components/Navigation/Navigation.js","custom-elements/NavigationElement.js","components/Forms/enhancementRequest.js","custom-elements/FormsEnhancementRequestElement.js","auth/KeycloakViews.js","components/Customer/CustomerProjectList.js","components/App.js","custom-elements/AppElement.js","custom-elements/TicketListElement.js","components/Admin/Configuration/TicketingSystem.js","api/productVersion.js","components/Admin/AddProductVersionModal.js","components/Admin/EditVersionModal.js","components/Admin/Configuration/ProductVersion.js","components/Admin/Configuration/AdminConfiguration.js","custom-elements/AdminConfigurationElement.js","custom-elements/OpenTicketElement.js","api/portalusers.js","api/keycloak.js","components/Admin/ManageUser/AssignUser.js","components/Admin/ManageUser/DeleteUser.js","components/Admin/ManageUser/ManageUser.js","custom-elements/ManageUserElement.js","custom-elements/AssignUserElement.js","custom-elements/DeleteUserElement.js","custom-elements/TicketingSystemElement.js","custom-elements/ProductVersionElement.js","components/Forms/SubscriptionForm.js","custom-elements/SubscriptionFormElement.js"],"names":["i18n","defaultLocale","locale","fallbacks","translations","en","it","setLocale","KeycloakContext","PropTypes","oneOfType","func","shape","current","elementType","React","createContext","withKeycloak","WrappedComponent","WithKeycloakComponent","renderWrappedComponent","value","props","forwardedRef","rest","ref","keycloak","Consumer","this","Component","defaultProps","forwardRef","getKeycloakToken","window","entando","authenticated","token","isPortalAdmin","hasKeycloakClientRole","isPortalSupport","isPortalPartner","isPortalCustomer","isPortalAdminOrSupport","isPortalCustomerOrPartner","isPortalUser","clientRole","resourceAccess","client","item","roles","includes","getDefaultOptions","headers","Headers","Authorization","getDefaultKeycloakOptions","getUrl","url","request","options","a","fetch","response","has","parseInt","get","status","data","json","Promise","reject","Error","statusText","resource","apiCustomerDelete","serviceUrl","id","method","apiCustomersGet","apiCustomerGet","apiCustomerPost","customer","body","JSON","stringify","apiCustomerPut","apiGetCustomersProjects","customerId","apiAddProjectToCustomer","projectId","apiDeleteProjectFromCustomer","adminResource","apiAdminCustomersGet","apiAdminCustomerGet","myResource","apiMyCustomersGet","apiGetMyCustomersProjects","handleChanges","e","input","target","name","setState","handleFormSubmit","handleValidation","state","customerNumber","contactName","contactPhone","contactEmail","notes","customerPost","then","submitMsg","t","submitColour","updateCustomerList","catch","clearValues","document","querySelector","className","baseState","invalid","formIsValid","lastAtPos","lastIndexOf","lastDotPos","indexOf","length","initialized","addEventListener","modalConfirmation","style","color","modalId","ModalWrapper","buttonTriggerText","modalHeading","buttonTriggerClassName","handleSubmit","primaryButtonText","secondaryButtonText","Form","onSubmit","TextInput","labelText","onChange","invalidText","TextArea","apiPartnerPost","partner","apiProjectsGet","apiProjectGet","apiProjectPost","project","apiProjectPut","apiAddTicketToProject","ticketId","apiAddSubscriptionToProject","subscriptionId","apiAddUserToProject","userId","apiDeleteUserFromProject","apiAddPartnerToProject","partnerId","apiGetProjectUsers","apiGetProjectSubscriptions","apiGetProjectIdsAndNames","apiGetMyProject","apiGetMyProjectIdNames","apiGetMyProjectUsers","apiAdminProjectsGet","apiMyProjectsGet","partnerNumber","partnerPost","projectList","prevProps","changedAuth","getProjects","projects","result","Select","SelectItem","text","Object","keys","allProjects","map","i","description","systemId","trim","alert","projectPost","getAllProjects","customerList","getCustomers","customers","allCustomers","apiTicketingSystemDelete","apiCurrentTicketingSystemGet","apiTicketingSystemsGet","ticketingSystems","apiTicketingSystemPost","ticketingsystem","apiTicketingSystemPut","projectPut","updateProjectList","buttonId","getProjectDetails","buttonClassName","suffix","handleClick","showMenu","removeEventListener","handleOutsideClick","prevState","node","contains","hasSubscription","Button","onClick","padding","kind","zIndex","position","backgroundColor","to","sub","textDecoration","display","width","margin","border","borderTop","href","ticketingSystem","substr","rel","handleDeleteProject","CustomerDataTable","fetchData","String","closeMenu","preventDefault","confirm","deleteProject","action","headerData","header","key","console","log","render","DataTable","rows","rowData","getHeaderProps","getTableProps","TableContainer","Table","TableHead","TableRow","TableHeader","TableBody","index","projectSubscriptions","TableCell","partners","tickets","entandoVersion","Date","startDate","toDateString","setMonth","getMonth","lengthInMonths","projectName","partnerName","endDate","openTickets","getCustomer","Tile","getCustomerDetails","updateCustomer","getCustomersProjects","deleteCustomer","AccordionItem","title","open","accordionOpened","handleDelete","getTime","handleSearch","event","newFilteredState","filter","toLowerCase","filteredCustomers","currentPage","undefined","forceUpdate","customersProjects","role","test","numberOfPages","Math","ceil","Search","placeholder","onKeyPress","Accordion","indexOfLastItem","firstIndexOfCurrentPage","PaginationNav","loop","Boolean","page","Number","totalItems","itemsShown","subscribeToWidgetEvent","eventType","eventHandler","KEYCLOAK_EVENT_TYPE","getKeycloakInstance","ATTRIBUTES","AdminDashboardElement","mountPoint","createElement","unsubscribeFromKeycloakEvent","appendChild","getAttribute","ReactDOM","Provider","HTMLElement","customElements","define","AdminAddCustomerElement","RoleCheck","roleType","defaultValue","renderForm","AdminRoleCheckElement","CustomerDataTableElement","CustomerDetailsElement","jiraResource","apiJiraTicketsGet","organization","apiJiraTicketPost","ticket","TicketList","currentTicketingSystem","ticketSystemUrl","ticketingSystemBaseUrl","ticketUrl","summary","type","priority","createDate","updateDate","creationDate","openTicket","apiSubscriptionGet","apiProjectSubscriptionPost","projectSubscriptionCreation","apiProjectSubscriptionPut","apiGetMySubscription","apiRenewSubscription","projectSubscriptionRenew","subscriptionRequest","projectSubscription","subscription","level","moment","format","subscriptionPut","updateSubscription","err","handleStartDateChange","date","toISOString","isNumeric","match","str","isNaN","parseFloat","getSubscriptionDetails","disabled","DatePicker","dateFormat","datePickerType","DatePickerInput","subscriptionData","getSubscription","loading","users","params","license","user","username","SubscriptionElement","parse","fetchProjectSubscription","createTicket","types","priorities","search","location","URLSearchParams","projectParam","forEach","foundProject","fetchProjects","getTicketingSystem","tabIndex","FormsOpenTicketElement","Navigation","NavigationElement","EnhancementRequest","ticketNo","customerName","openedBy","enhancementDescription","FormsEnhancementRequestElement","AuthenticatedView","children","UnauthenticatedView","path","AppElement","Locale","TicketListCustomerElement","createTicketingSystem","updateTicketingSystem","ticketingSystemType","serviceAccount","serviceAccountSecret","getTicketingSystems","deleteTicketingSystem","apiProductVersionsGet","apiProductVersionGet","versionId","apiUpdateProductVersionsStatus","apiProductVersionPost","productVersion","apiProductVersionPut","apiProductVersionDelete","addProductVersion","updateProductVersions","handleEndDateChange","version","versionPut","getVersionDetails","ProductVersion","handleDeleteVersion","deleteVersion","getProductVersions","productVersions","Toggle","size","handleToggleChange","aria-label","defaultToggled","entVersion","adminConfig","label","content","toString","AdminConfigurationElement","OpenTicketElement","apiUserPost","apiUserGetByUsername","apiKeycloakUserGet","realm","usersResource","mapKeycloakUserEmails","keycloakUsers","usernameEmailMap","Map","keycloakUser","set","email","assignUser","handleFormValidation","assignUserToProject","res","getPortalUserId","portalUserId","portalUserApi","portalUser","message","createPortalUser","authServerUrl","keycloakUrl","userList","unshift","setupFormComponents","handleRemoveUser","warn","displayUsers","handleUserDisplay","userAccess","row","cells","cell","userFunctionality","ManageUserElement","AssignUserElement","DeleteUserElement","TicketingSystemElement","ProductVersionElement","subscriptionLevel","GOLD","PLATINUM","subscriptionStatus","subscriptionTypes","submitSuccess","submitError","subscriptionType","newSubscription","renewSubscription","subscriptionLength","entandoVersionId","selectedProjectId","projectIdsNames","subscriptionLevelList","entries","versionList","formInputs","formComponents","isAdmin","createFormMessage","subMessageKey","successErrorMessage","required","SubscriptionFormElement"],"mappings":"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","file":"static/js/main.46c1b15f.chunk.js","sourcesContent":["import i18n from 'i18n-js';\r\n\r\nimport en from './i18n/locales/en.json';\r\nimport it from './i18n/locales/it.json';\r\n\r\ni18n.defaultLocale = 'en';\r\ni18n.locale = 'en';\r\ni18n.fallbacks = true;\r\ni18n.translations = { en, it };\r\n\r\nexport const setLocale = locale => {\r\n  i18n.locale = locale;\r\n};\r\n\r\nexport default i18n;\r\n","import React from 'react';\n\nconst KeycloakContext = React.createContext(null);\n\nexport default KeycloakContext;\n","import PropTypes from 'prop-types';\r\n\r\nexport default PropTypes.oneOfType([PropTypes.func, PropTypes.shape({ current: PropTypes.elementType }), PropTypes.shape(null)]);\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\nimport React, { forwardRef, Component } from 'react';\r\nimport refType from '../components/__types__/ref';\r\nimport KeycloakContext from './KeycloakContext';\r\n\r\nexport default function withKeycloak(WrappedComponent) {\r\n  class WithKeycloakComponent extends Component {\r\n    renderWrappedComponent = value => {\r\n      const { forwardedRef, ...rest } = this.props;\r\n      return <WrappedComponent {...rest} ref={forwardedRef} keycloak={value} />;\r\n    };\r\n\r\n    render() {\r\n      return <KeycloakContext.Consumer>{this.renderWrappedComponent}</KeycloakContext.Consumer>;\r\n    }\r\n  }\r\n\r\n  WithKeycloakComponent.propTypes = {\r\n    forwardedRef: refType,\r\n  };\r\n\r\n  WithKeycloakComponent.defaultProps = {\r\n    forwardedRef: () => {},\r\n  };\r\n\r\n  return forwardRef((props, ref) => <WithKeycloakComponent {...props} forwardedRef={ref} />);\r\n}\r\n","export const getKeycloakToken = () => {\r\n  if (window && window.entando && window.entando.keycloak && window.entando.keycloak.authenticated) {\r\n    return window.entando.keycloak.token;\r\n  }\r\n  return '';\r\n};\r\n\r\nconst ADMIN = 'cp-admin';\r\nconst SUPPORT = 'cp-support';\r\nconst PARTNER = 'cp-partner';\r\nconst CUSTOMER = 'cp-customer';\r\n\r\nexport const isPortalAdmin = () => {\r\n  return hasKeycloakClientRole(ADMIN);\r\n};\r\n\r\nexport const isPortalSupport = () => {\r\n  return hasKeycloakClientRole(SUPPORT);\r\n};\r\n\r\nexport const isPortalPartner = () => {\r\n  return hasKeycloakClientRole(PARTNER);\r\n};\r\n\r\nexport const isPortalCustomer = () => {\r\n  return hasKeycloakClientRole(CUSTOMER);\r\n};\r\n\r\nexport const isPortalAdminOrSupport = () => {\r\n  return isPortalAdmin() || isPortalSupport();\r\n};\r\n\r\nexport const isPortalCustomerOrPartner = () => {\r\n  return isPortalCustomer() || isPortalPartner();\r\n};\r\n\r\nexport const isPortalUser = () => {\r\n  return isPortalAdminOrSupport() || isPortalCustomerOrPartner();\r\n};\r\n\r\nexport const hasKeycloakClientRole = clientRole => {\r\n  if (getKeycloakToken()) {\r\n    const { resourceAccess } = window.entando.keycloak;\r\n    if (resourceAccess) {\r\n      for (const client in resourceAccess) {\r\n        const item = resourceAccess[client];\r\n        if (item.roles && item.roles.includes(clientRole)) {\r\n          // console.debug(\"Found role {} with client {} \", clientRole, client);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const getDefaultOptions = () => ({\r\n  headers: new Headers({\r\n    Authorization: `Bearer ${getKeycloakToken()}`,\r\n    'Content-Type': 'application/json',\r\n  }),\r\n});\r\n\r\nexport const getDefaultKeycloakOptions = () => ({\r\n  headers: new Headers({\r\n    Authorization: `Bearer ${getKeycloakToken()}`,\r\n    'Content-Type': 'application/x-www-form-urlencoded',\r\n  }),\r\n});\r\n\r\nexport const getUrl = url => {\r\n  return `${url}`;\r\n};\r\n\r\nexport const request = async (url, options) => {\r\n  const response = await fetch(url, options);\r\n\r\n  const headers = {\r\n    ...(response.headers.has('X-Total-Count') ? { 'X-Total-Count': parseInt(response.headers.get('X-Total-Count'), 10) } : {}),\r\n  };\r\n\r\n  if (response.status === 204) {\r\n    return { data: '', status: response.status };\r\n  }\r\n\r\n  return response.status >= 200 && response.status < 300\r\n    ? { data: await response.json(), headers, status: response.status }\r\n    : Promise.reject(new Error(response.statusText || response.status));\r\n};\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/customers';\r\n\r\nexport const apiCustomerDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerGet = async (serviceUrl, id) => {\r\n  const url = getUrl(`${serviceUrl}/${resource}/${id}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomersGetForAdminDashboard = async serviceUrl => {\r\n  const url = `${serviceUrl}/${resource}/all`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerPost = async (serviceUrl, customer) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: customer ? JSON.stringify(customer) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCustomerPut = async (serviceUrl, customer) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: customer ? JSON.stringify(customer) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetCustomersProjects = async (serviceUrl, customerId) => {\r\n  const url = `${serviceUrl}/${resource}/${customerId}/projects`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAddProjectToCustomer = async (serviceUrl, customerId, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${customerId}/projects/${projectId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiDeleteProjectFromCustomer = async (serviceUrl, customerId, projectId) => {\r\n  const url = `${serviceUrl}/${resource}/${customerId}/projects/${projectId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n// Endpoints for backend security\r\nconst adminResource = 'api/customers/admin';\r\nexport const apiAdminCustomersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${adminResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiAdminCustomerGet = async (serviceUrl, customerId) => {\r\n  const url = getUrl(`${serviceUrl}/${adminResource}/${customerId}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nconst myResource = 'api/customers/mycustomers';\r\nexport const apiMyCustomersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${myResource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiGetMyCustomersProjects = async (serviceUrl, customerId) => {\r\n  const url = `${serviceUrl}/${myResource}/${customerId}/projects`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport { ModalWrapper, Form, TextInput, TextArea } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiCustomerPost } from '../../api/customers';\n\nclass AddCustomerModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      name: '',\n      customerNumber: '',\n      contactName: '',\n      contactPhone: '',\n      contactEmail: '',\n      notes: '',\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n    };\n\n    this.baseState = this.state;\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    if (this.state.customerNumber === '') {\n      formIsValid = false;\n      invalid['customerNumber'] = true;\n    }\n\n    if (typeof this.state.contactEmail !== 'undefined') {\n      let lastAtPos = this.state.contactEmail.lastIndexOf('@');\n      let lastDotPos = this.state.contactEmail.lastIndexOf('.');\n\n      if (\n        !(\n          lastAtPos < lastDotPos &&\n          lastAtPos > 0 &&\n          this.state.contactEmail.indexOf('@@') === -1 &&\n          lastDotPos > 2 &&\n          this.state.contactEmail.length - lastDotPos > 2\n        )\n      ) {\n        formIsValid = false;\n        invalid['contactEmail'] = true;\n      }\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async customerPost(customer) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      return await apiCustomerPost(this.props.serviceUrl, customer);\n    }\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const customer = {\n        name: this.state.name,\n        customerNumber: this.state.customerNumber,\n        contactName: this.state.contactName,\n        contactPhone: this.state.contactPhone,\n        contactEmail: this.state.contactEmail,\n        notes: this.state.notes,\n      };\n\n      this.customerPost(customer)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.added'),\n            submitColour: '#24a148',\n          });\n          this.props.updateCustomerList();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  clearValues = () => {\n    const customerModalElement = document.querySelector('#modal-form-customer');\n    if (!customerModalElement.className.includes('is-visible')) {\n      this.setState(this.baseState);\n    }\n  };\n\n  componentDidMount() {\n    const modalOpenButton = document.querySelector('.add-customer-button');\n    modalOpenButton.addEventListener('click', this.clearValues, false);\n  }\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n      </div>\n    )\n    const modalId = \"modal-form-customer\"\n    return (\n      <ModalWrapper\n        buttonTriggerText={i18n.t('buttons.addCustomer')}\n        modalHeading={i18n.t('adminDashboard.addCustomer.title')}\n        buttonTriggerClassName=\"add-customer bx--btn bx--btn--tertiary add-customer-button\"\n        className=\"modal-form\"\n        id={modalId}\n        handleSubmit={this.handleFormSubmit}\n        primaryButtonText={i18n.t('modalText.save')}\n        secondaryButtonText={i18n.t('modalText.cancel')}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit}>\n            <TextInput\n              id={\"name\" + modalId}\n              name=\"name\"\n              labelText={i18n.t('adminDashboard.addCustomer.customerName') + ' *'}\n              value={this.state.name}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['name']}\n            />\n            <TextInput\n              id={\"customerNumber\" + modalId}\n              name=\"customerNumber\"\n              labelText={i18n.t('adminDashboard.addCustomer.customerNumber') + ' *'}\n              value={this.state.customerNumber}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['customerNumber']}\n            />\n            <TextInput\n              id={\"contactName\" + modalId}\n              name=\"contactName\"\n              labelText={i18n.t('adminDashboard.addCustomer.contactName')}\n              value={this.state.contactName}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={\"contactPhone\" + modalId}\n              name=\"contactPhone\"\n              labelText={i18n.t('adminDashboard.addCustomer.contactPhone')}\n              value={this.state.contactPhone}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={\"contactEmail\" + modalId}\n              name=\"contactEmail\"\n              labelText={i18n.t('adminDashboard.addCustomer.contactEmail') + ' *'}\n              value={this.state.contactEmail}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.email')}\n              invalid={this.state.invalid['contactEmail']}\n            />\n            <TextArea\n              id={\"notes\" + modalId}\n              name=\"notes\"\n              labelText={i18n.t('adminDashboard.addCustomer.notes')}\n              value={this.state.notes}\n              onChange={this.handleChanges}\n            />\n          </Form>\n        </div>\n        {modalConfirmation}\n      </ModalWrapper>\n    );\n  }\n}\n\nexport default withKeycloak(AddCustomerModal);\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/partners';\r\n\r\nexport const apiPartnerDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiPartnersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiPartnerPost = async (serviceUrl, partner) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: partner ? JSON.stringify(partner) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\n\nconst resource = 'api/projects';\n\nexport const apiProjectsDelete = async (serviceUrl, id) => {\n  const url = `${serviceUrl}/${resource}/${id}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiProjectsGet = async serviceUrl => {\n  const url = getUrl(`${serviceUrl}/${resource}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiProjectGet = async (serviceUrl, id) => {\n  const url = getUrl(`${serviceUrl}/${resource}/${id}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiProjectsGetForCustomer = async (serviceUrl, customerNumber) => {\n  const url = `${serviceUrl}/${resource}/subscriptions/customer/${customerNumber}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nexport const apiProjectPost = async (serviceUrl, project) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: project ? JSON.stringify(project) : null,\n  };\n  return request(url, options);\n};\n\nexport const apiProjectPut = async (serviceUrl, project) => {\n  const url = `${serviceUrl}/${resource}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'PUT',\n    body: project ? JSON.stringify(project) : null,\n  };\n  return request(url, options);\n};\n\nexport const apiAddTicketToProject = async (serviceUrl, projectId, ticketId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/tickets/${ticketId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n  };\n  return request(url, options);\n};\n\nexport const apiAddSubscriptionToProject = async (serviceUrl, projectId, subscriptionId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/subscriptions/${subscriptionId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n  };\n  return request(url, options);\n};\n\nexport const apiAddUserToProject = async (serviceUrl, projectId, userId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/users/${userId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n  };\n  return request(url, options);\n};\n\nexport const apiDeleteUserFromProject = async (serviceUrl, projectId, userId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/users/${userId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'DELETE',\n  };\n  return request(url, options);\n};\n\nexport const apiAddPartnerToProject = async (serviceUrl, projectId, partnerId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/partners/${partnerId}`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n  };\n  return request(url, options);\n};\n\nexport const apiGetProjectUsers = async (serviceUrl, projectId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/users/`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\nexport const apiGetProjectsTickets = async (serviceUrl, projectId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/tickets/`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\nexport const apiGetProjectSubscriptions = async (serviceUrl, projectId) => {\n  const url = `${serviceUrl}/${resource}/${projectId}/subscriptions/`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\nexport const apiGetProjectIdsAndNames = async serviceUrl => {\n  const url = `${serviceUrl}/${resource}/nameId/`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\nexport const apiGetMyProject = async (serviceUrl, projectId) => {\n  const url = `${serviceUrl}/${resource}/myproject/${projectId}/`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\nexport const apiGetMyProjectIdNames = async serviceUrl => {\n  const url = `${serviceUrl}/${resource}/myprojects/nameId/`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\nexport const apiGetMyProjectUsers = async (serviceUrl, projectId) => {\n  const url = `${serviceUrl}/${resource}/myproject/${projectId}/users`;\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\n// Endpoints for backend security\nconst adminResource = 'api/projects/admin';\nexport const apiAdminProjectsGet = async serviceUrl => {\n  const url = getUrl(`${serviceUrl}/${adminResource}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n\nconst myResource = 'api/projects/myprojects';\nexport const apiMyProjectsGet = async serviceUrl => {\n  const url = getUrl(`${serviceUrl}/${myResource}`);\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n\n  return request(url, options);\n};\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport { ModalWrapper, Form, TextInput, Select, SelectItem, TextArea } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiPartnerPost } from '../../api/partners';\nimport { apiProjectsGet, apiAddPartnerToProject } from '../../api/projects';\n\nclass AddPartnerModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      projectList: {},\n      projectId: '',\n      name: '',\n      partnerNumber: '',\n      notes: '',\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      this.getProjects();\n    }\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    //project\n    if (this.state.projectId === '' || this.state.projectId === 'project-list') {\n      formIsValid = false;\n      invalid['projectId'] = true;\n    }\n\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    if (this.state.partnerNumber === '') {\n      formIsValid = false;\n      invalid['partnerNumber'] = true;\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async getProjects() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      const projects = await apiProjectsGet(this.props.serviceUrl);\n      this.setState({ projectList: projects });\n    }\n  }\n\n  async partnerPost(partner) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      const result = await apiPartnerPost(this.props.serviceUrl, partner);\n      return await apiAddPartnerToProject(this.props.serviceUrl, this.state.projectId, result.data.id);\n    }\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const partner = {\n        name: this.state.name,\n        partnerNumber: this.state.partnerNumber,\n        notes: this.state.notes,\n      };\n      this.partnerPost(partner)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.added'),\n            submitColour: '#24a148',\n          });\n          this.props.updateCustomerList();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  clearValues = () => {\n    const partnerModalElement = document.querySelector('#modal-form-partner');\n    if (!partnerModalElement.className.includes('is-visible')) {\n      this.setState({\n        projectId: '',\n        name: '',\n        partnerNumber: '',\n        notes: '',\n        invalid: {},\n        submitMsg: '',\n        submitColour: 'black',\n      });\n    }\n  };\n\n  componentDidMount() {\n    this.getProjects();\n\n    const modalOpenButton = document.querySelector('.add-partner-button');\n    modalOpenButton.addEventListener('click', this.clearValues, false);\n  }\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n      </div>\n    )\n    const modalId = \"modal-form-partner\";\n    return (\n      <ModalWrapper\n        buttonTriggerText={i18n.t('buttons.addPartner')}\n        modalHeading={i18n.t('adminDashboard.addPartner.title')}\n        buttonTriggerClassName=\"add-partner bx--btn bx--btn--tertiary add-partner-button\"\n        className=\"modal-form\"\n        id={modalId}\n        handleSubmit={this.handleFormSubmit}\n        primaryButtonText={i18n.t('modalText.save')}\n        secondaryButtonText={i18n.t('modalText.cancel')}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit}>\n            <Select\n              id={\"projectId\" + modalId}\n              name=\"projectId\"\n              labelText={i18n.t('adminDashboard.addPartner.projectList') + ' *'}\n              value={this.state.projectId}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['projectId']}\n            >\n              <SelectItem text={i18n.t('adminDashboard.addPartner.selectProject')} value=\"project-list\" />\n              {Object.keys(this.props.allProjects).length !== 0\n                ? this.props.allProjects.map((projectList, i) => (\n                    <SelectItem key={i} text={projectList.name} value={projectList.id}>\n                      {projectList.name}\n                    </SelectItem>\n                  ))\n                : null}\n            </Select>\n\n            <TextInput\n              id={\"name\" + modalId}\n              name=\"name\"\n              labelText={i18n.t('adminDashboard.addPartner.partnerName') + ' *'}\n              value={this.state.name}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['name']}\n            />\n            <TextInput\n              id={\"partnerNumber\" + modalId}\n              name=\"partnerNumber\"\n              labelText={i18n.t('adminDashboard.addPartner.partnerNumber') + ' *'}\n              value={this.state.partnerNumber}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['partnerNumber']}\n            />\n            <TextArea\n              name=\"notes\"\n              labelText={i18n.t('adminDashboard.addPartner.notes')}\n              value={this.state.notes}\n              onChange={this.handleChanges}\n            />\n          </Form>\n        </div>\n        {modalConfirmation}\n      </ModalWrapper>\n    );\n  }\n}\n\nexport default withKeycloak(AddPartnerModal);\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport { ModalWrapper, Form, TextInput, Select, SelectItem, TextArea } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiCustomersGet, apiAddProjectToCustomer } from '../../api/customers';\nimport { apiProjectPost, apiProjectsGet } from '../../api/projects';\n\nclass AddProjectModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      projects: {},\n      customerList: {},\n      customerId: '',\n      name: '',\n      description: '',\n      systemId: '',\n      contactName: '',\n      contactPhone: '',\n      contactEmail: '',\n      notes: '',\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    //customer\n    if (this.state.customerId === '' || this.state.customerId === 'customer-list') {\n      formIsValid = false;\n      invalid['customerId'] = true;\n    }\n\n    //name\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    //description\n    if (this.state.description === '') {\n      formIsValid = false;\n      invalid['description'] = true;\n    }\n\n    //contactEmail\n    if (typeof this.state.contactEmail !== 'undefined') {\n      let lastAtPos = this.state.contactEmail.lastIndexOf('@');\n      let lastDotPos = this.state.contactEmail.lastIndexOf('.');\n\n      if (\n        !(\n          lastAtPos < lastDotPos &&\n          lastAtPos > 0 &&\n          this.state.contactEmail.indexOf('@@') === -1 &&\n          lastDotPos > 2 &&\n          this.state.contactEmail.length - lastDotPos > 2\n        )\n      ) {\n        formIsValid = false;\n        invalid['contactEmail'] = true;\n      }\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  async getAllProjects() {\n    const projects = await apiProjectsGet(this.props.serviceUrl);\n    this.setState({\n      projects: projects.data,\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      this.getCustomers();\n      this.getAllProjects();\n    }\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async getCustomers() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      const customers = await apiCustomersGet(this.props.serviceUrl);\n      this.setState({ customerList: customers });\n    }\n  }\n\n  async projectPost(project) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      const result = await apiProjectPost(this.props.serviceUrl, project);\n      return await apiAddProjectToCustomer(this.props.serviceUrl, this.state.customerId, result.data.id);\n    }\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const project = {\n        name: this.state.name,\n        description: this.state.description,\n        systemId: this.state.systemId,\n        contactName: this.state.contactName,\n        contactPhone: this.state.contactPhone,\n        contactEmail: this.state.contactEmail,\n        notes: this.state.notes,\n      };\n      for (var i = 0; i < this.state.projects.length; i++) {\n        if (project.systemId === this.state.projects[i].systemId && project.systemId.trim() !== '') {\n          window.alert('That system id is already in use in another project');\n          return;\n        }\n      }\n      this.projectPost(project)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.added'),\n            submitColour: '#24a148',\n          });\n          this.props.updateCustomerList();\n          this.getAllProjects();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  clearValues = () => {\n    const projectModalElement = document.querySelector('#modal-form-project');\n    if (!projectModalElement.className.includes('is-visible')) {\n      this.setState({\n        customerId: '',\n        name: '',\n        description: '',\n        systemId: '',\n        contactName: '',\n        contactPhone: '',\n        contactEmail: '',\n        notes: '',\n        invalid: {},\n      });\n    }\n  };\n\n  componentDidMount() {\n    this.getCustomers();\n    this.getAllProjects();\n\n    const modalOpenButton = document.querySelector('.add-project-button');\n    modalOpenButton.addEventListener('click', this.clearValues, false);\n  }\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n      </div>\n    )\n    const modalId = \"modal-form-project\"\n    return (\n      <ModalWrapper\n        buttonTriggerText={i18n.t('buttons.addProject')}\n        modalHeading={i18n.t('adminDashboard.addProject.title')}\n        buttonTriggerClassName=\"add-project bx--btn bx--btn--tertiary add-project-button\"\n        className=\"modal-form\"\n        id={modalId}\n        handleSubmit={this.handleFormSubmit}\n        primaryButtonText={i18n.t('modalText.save')}\n        secondaryButtonText={i18n.t('modalText.cancel')}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit}>\n            <Select\n              id={\"customerId\" + modalId}\n              name=\"customerId\"\n              labelText={i18n.t('adminDashboard.addProject.customerList') + ' *'}\n              value={this.state.customerId}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['customerId']}\n            >\n              <SelectItem text={i18n.t('adminDashboard.addProject.selectCustomer')} value=\"customer-list\" />\n              {Object.keys(this.props.allCustomers).length !== 0\n                ? this.props.allCustomers.map((customerList, i) => (\n                    <SelectItem key={i} text={customerList.name} value={customerList.id}>\n                      {customerList.name}\n                    </SelectItem>\n                  ))\n                : null}\n            </Select>\n\n            <TextInput\n              id={\"name\" + modalId}\n              name=\"name\"\n              labelText={i18n.t('adminDashboard.addProject.projectName') + ' *'}\n              value={this.state.name}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['name']}\n            />\n            <TextInput\n              id={\"description\" + modalId}\n              name=\"description\"\n              labelText={i18n.t('adminDashboard.addProject.projectDesc') + ' *'}\n              value={this.state.description}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['description']}\n            />\n            <TextInput\n              id={\"systemId\" + modalId}\n              name=\"systemId\"\n              labelText={i18n.t('adminDashboard.addProject.systemId')}\n              value={this.state.systemId}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={\"contactName\" + modalId}\n              name=\"contactName\"\n              labelText={i18n.t('adminDashboard.addProject.contactName')}\n              value={this.state.contactName}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={\"contactPhone\" + modalId}\n              name=\"contactPhone\"\n              labelText={i18n.t('adminDashboard.addProject.contactPhone')}\n              value={this.state.contactPhone}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={\"contactEmail\" + modalId}\n              name=\"contactEmail\"\n              labelText={i18n.t('adminDashboard.addProject.contactEmail') + ' *'}\n              value={this.state.contactEmail}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.email')}\n              invalid={this.state.invalid['contactEmail']}\n            />\n            <TextArea\n              id={\"notes\" + modalId}\n              name=\"notes\"\n              labelText={i18n.t('adminDashboard.addProject.notes')}\n              value={this.state.notes}\n              onChange={this.handleChanges}\n            />\n          </Form>\n        </div>\n        {modalConfirmation}\n      </ModalWrapper>\n    );\n  }\n}\n\nexport default withKeycloak(AddProjectModal);\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/ticketing-systems';\r\n\r\nexport const apiTicketingSystemDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiCurrentTicketingSystemGet = async serviceUrl => {\r\n  const ticketingSystems = await apiTicketingSystemsGet(serviceUrl);\r\n  //Simplifying assumption to take the latest ticketing system as the current config\r\n  return ticketingSystems.data[ticketingSystems.data.length - 1];\r\n}\r\n\r\nexport const apiTicketingSystemsGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketingSystemPost = async (serviceUrl, ticketingsystem) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: ticketingsystem ? JSON.stringify(ticketingsystem) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketingSystemPut = async (serviceUrl, ticketingsystem) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: ticketingsystem ? JSON.stringify(ticketingsystem) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport { ModalWrapper, Form, TextInput, TextArea } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiCustomersGet } from '../../api/customers';\nimport { apiProjectGet, apiProjectPut, apiProjectsGet } from '../../api/projects';\n\nclass EditProjectModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      projects: {},\n      customerList: {},\n      customerId: '',\n      name: '',\n      description: '',\n      systemId: '',\n      contactName: '',\n      contactPhone: '',\n      contactEmail: '',\n      notes: '',\n      invalid: {},\n      modalId: '',\n      buttonId: '',\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    //name\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    //description\n    if (this.state.description === '') {\n      formIsValid = false;\n      invalid['description'] = true;\n    }\n\n    //contactEmail\n    if (typeof this.state.contactEmail !== 'undefined') {\n      let lastAtPos = this.state.contactEmail.lastIndexOf('@');\n      let lastDotPos = this.state.contactEmail.lastIndexOf('.');\n\n      if (\n        !(\n          lastAtPos < lastDotPos &&\n          lastAtPos > 0 &&\n          this.state.contactEmail.indexOf('@@') === -1 &&\n          lastDotPos > 2 &&\n          this.state.contactEmail.length - lastDotPos > 2\n        )\n      ) {\n        formIsValid = false;\n        invalid['contactEmail'] = true;\n      }\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      this.getCustomers();\n      this.getAllProjects();\n      this.getProjectDetails();\n    }\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async getCustomers() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      const customers = await apiCustomersGet(this.props.serviceUrl);\n      this.setState({ customerList: customers });\n    }\n  }\n\n  async getProjectDetails() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      const project = await apiProjectGet(this.props.serviceUrl, this.props.project.id);\n      this.setState({\n        name: project.data.name,\n        description: project.data.description,\n        systemId: project.data.systemId,\n        contactName: project.data.contactName,\n        contactPhone: project.data.contactPhone,\n        contactEmail: project.data.contactEmail,\n        notes: project.data.notes,\n        modalId: 'modal-form-project-edit-' + project.data.id,\n        buttonId: 'edit-project-button-' + project.data.id,\n      });\n    }\n  }\n\n  async getAllProjects() {\n    const projects = await apiProjectsGet(this.props.serviceUrl);\n    this.setState({\n      projects: projects.data,\n    });\n  }\n\n  async projectPut(project) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      return await apiProjectPut(this.props.serviceUrl, project);\n    }\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const project = {\n        id: this.props.project.id,\n        customer: this.props.project.customer,\n        name: this.state.name,\n        description: this.state.description,\n        systemId: this.state.systemId,\n        contactName: this.state.contactName,\n        contactPhone: this.state.contactPhone,\n        contactEmail: this.state.contactEmail,\n        notes: this.state.notes,\n      };\n      for (var i = 0; i < this.props.allProjects.length; i++) {\n        if (\n          project.systemId === this.props.allProjects[i].systemId &&\n          project.id !== this.props.allProjects[i].id &&\n          project.systemId.trim() !== ''\n        ) {\n          window.alert('That system id is already in use in another project');\n          return;\n        }\n      }\n      this.projectPut(project)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.updated'),\n            submitColour: '#24a148',\n          });\n          this.props.updateProjectList();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  clearValues = () => {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const customerModalElement = document.querySelector('#' + this.state.modalId);\n    if (!customerModalElement.className.includes('is-visible') && authenticated) {\n      this.setState({\n        name: this.props.project.name,\n        description: this.props.project.description,\n        systemId: this.props.project.systemId,\n        contactName: this.props.project.contactName,\n        contactPhone: this.props.project.contactPhone,\n        contactEmail: this.props.project.contactEmail,\n        notes: this.props.project.notes,\n        invalid: {},\n      });\n    }\n  };\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      this.getCustomers();\n      this.getAllProjects();\n      this.getProjectDetails();\n\n      const modalOpenButton = document.querySelector('.edit-project-button-' + this.props.project.id);\n      modalOpenButton.addEventListener('click', this.clearValues, false);\n    }\n  }\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n      </div>\n    )\n    const buttonClassName = 'dropdown-button-button bx--btn bx--btn--ghost edit-project-button-' + this.props.project.id;\n    const suffix = this.state.modalId;\n    return (\n    <ModalWrapper\n        buttonTriggerText={i18n.t('buttons.edit')}\n        modalHeading={i18n.t('adminDashboard.addProject.editTitle')}\n        buttonTriggerClassName={buttonClassName}\n        className=\"modal-form\"\n        id={this.state.modalId}\n        handleSubmit={this.handleFormSubmit}\n        primaryButtonText={i18n.t('modalText.save')}\n        secondaryButtonText={i18n.t('modalText.cancel')}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit}>\n            <TextInput\n              id={\"name\" + suffix}\n              name=\"name\"\n              labelText={i18n.t('adminDashboard.addProject.projectName') + ' *'}\n              value={this.state.name}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['name']}\n            />\n            <TextInput\n              id={\"description\" + suffix}\n              name=\"description\"\n              labelText={i18n.t('adminDashboard.addProject.projectDesc') + ' *'}\n              value={this.state.description}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['description']}\n            />\n            <TextInput\n              id={\"systemId\" + suffix}\n              name=\"systemId\"\n              labelText={i18n.t('adminDashboard.addProject.systemId')}\n              value={this.state.systemId}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={\"contactName\" + suffix}\n              name=\"contactName\"\n              labelText={i18n.t('adminDashboard.addProject.contactName')}\n              value={this.state.contactName}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id=\"contactPhone\"\n              name=\"contactPhone\"\n              labelText={i18n.t('adminDashboard.addProject.contactPhone')}\n              value={this.state.contactPhone}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={\"contactEmail\" + suffix}\n              name=\"contactEmail\"\n              labelText={i18n.t('adminDashboard.addProject.contactEmail') + ' *'}\n              value={this.state.contactEmail}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.email')}\n              invalid={this.state.invalid['contactEmail']}\n            />\n            <TextArea\n              name=\"notes\"\n              labelText={i18n.t('adminDashboard.addProject.notes')}\n              value={this.state.notes}\n              onChange={this.handleChanges}\n            />\n          </Form>\n        </div>\n      {modalConfirmation}\n    </ModalWrapper>\n    );\n  }\n}\n\nexport default withKeycloak(EditProjectModal);\n","import React from 'react';\nimport i18n from '../../i18n';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { Button } from 'carbon-components-react';\nimport EditProjectModal from '../Admin/EditProjectModal';\nimport { isPortalAdmin } from '../../api/helpers';\nimport { Link } from 'react-router-dom';\n\nclass ProjectActionItems extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      showMenu: false,\n    };\n  }\n\n  handleClick = () => {\n    if (!this.state.showMenu) {\n      document.addEventListener('mousedown', this.handleOutsideClick, false);\n    } else {\n      document.removeEventListener('mousedown', this.handleOutsideClick, false);\n    }\n\n    this.setState(prevState => ({\n      showMenu: !prevState.showMenu,\n    }));\n  };\n\n  handleOutsideClick = e => {\n    if (this.node && !this.node.contains(e.target)) {\n      this.handleClick();\n    }\n  };\n\n  render() {\n    if (!this.props.hasSubscription) {\n      return (\n        <div>\n          <Button onClick={this.handleClick} style={{ padding: '10px 20px' }} kind=\"tertiary\">\n            +\n          </Button>\n          {this.state.showMenu ? (\n            <div\n              className=\"menu\"\n              style={{ zIndex: '100', position: 'absolute', backgroundColor: 'white' }}\n              ref={node => {\n                this.node = node;\n              }}\n            >\n              <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n              {isPortalAdmin() ? (\n                <div>\n                  <EditProjectModal\n                    key={this.props.project.id}\n                    allProjects={this.props.allProjects}\n                    project={this.props.project}\n                    serviceUrl={this.props.serviceUrl}\n                    updateProjectList={this.props.updateProjectList}\n                  />\n                  <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n                </div>\n              ) : null}\n              <a\n                href={`/entando-de-app/${this.props.locale}/new_or_renew_subscription.page.page?project=${this.props.project.id}`}\n                style={{ textDecoration: 'none' }}\n              >\n                <Button kind=\"ghost\" style={{ display: 'block', width: '100%' }} value=\"Subscription Request\">\n                  {i18n.t('buttons.subscriptionRequest')}\n                </Button>\n              </a>\n              <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n              {isPortalAdmin() ? (\n                <div>\n                  <Button\n                    kind=\"ghost\"\n                    onClick={e => this.props.handleDeleteProject(e, this.props.project.id)}\n                    style={{ display: 'block', width: '100%', color: 'red' }}\n                  >\n                    {i18n.t('buttons.delete')}\n                  </Button>\n                  <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n                </div>\n              ) : null}\n            </div>\n          ) : null}\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <Button onClick={this.handleClick} style={{ padding: '10px 20px' }} kind=\"tertiary\">\n            +\n          </Button>\n          {this.state.showMenu ? (\n            <div\n              className=\"menu\"\n              style={{ zIndex: '100', position: 'absolute', backgroundColor: 'white' }}\n              ref={node => {\n                this.node = node;\n              }}\n            >\n              {/*View Project Subscription*/}\n              <Link to={`/subscription-details/${this.props.sub.id}`} style={{ textDecoration: 'none' }}>\n                <Button kind=\"ghost\" style={{ display: 'block', width: '100%' }} value=\"View\">\n                  {i18n.t('buttons.view')}\n                </Button>\n              </Link>\n              <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n              {/*Edit Project Subscription*/}\n              {isPortalAdmin() ? (\n                <div>\n                  <EditProjectModal\n                    key={this.props.project.id}\n                    allProjects={this.props.allProjects}\n                    project={this.props.project}\n                    serviceUrl={this.props.serviceUrl}\n                    updateProjectList={this.props.updateProjectList}\n                  />\n                  <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n                </div>\n              ) : null}\n              {/*Open Ticket*/}\n              <a\n                href={`/entando-de-app/${this.props.locale}/open_service_ticket.page?project=${this.props.project.id}`}\n                style={{ textDecoration: 'none' }}\n              >\n                <Button kind=\"ghost\" style={{ display: 'block', width: '100%' }} value=\"Open Ticket\">\n                  {i18n.t('buttons.openTicket')}\n                </Button>\n              </a>\n              <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n              {/*View All Tickets*/}\n              <a\n                href={\n                  this.props.ticketingSystem.url.substr(0, this.props.ticketingSystem.url.indexOf('/rest')) +\n                  '/issues/?jql=Organizations=' + this.props.project.systemId}\n                style={{ textDecoration: 'none' }}\n                target=\"_blank\" rel=\"noreferrer\"\n              >\n                <Button kind=\"ghost\" style={{ display: 'block', width: '100%' }} value=\"View All Tickets\">\n                  {i18n.t('buttons.viewAllTickets')}\n                </Button>\n              </a>\n              <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n              {/*New/Renew Subscription*/}\n              <a\n                href={`/entando-de-app/${this.props.locale}/new_or_renew_subscription.page?project=${this.props.project.id}`}\n                style={{ textDecoration: 'none' }}\n              >\n                <Button kind=\"ghost\" style={{ display: 'block', width: '100%' }} value=\"Subscription Request\">\n                  {i18n.t('buttons.subscriptionRequest')}\n                </Button>\n              </a>\n              <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n              {/*Manage Users*/}\n              {isPortalAdmin() ? (\n                <div>\n                  <a\n                    href={`/entando-de-app/${this.props.locale}/manage_users.page?project=${this.props.project.id}`}\n                    style={{ textDecoration: 'none' }}\n                  >\n                    <Button kind=\"ghost\" style={{ display: 'block', width: '100%' }} value=\"Manage Users\">\n                      {i18n.t('buttons.manageUsers')}\n                    </Button>\n                  </a>\n                  <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n                  {/*Delete Project*/}\n                  <Button\n                    kind=\"ghost\"\n                    onClick={e => this.props.handleDeleteProject(e, this.props.project.id)}\n                    style={{ display: 'block', width: '100%', color: 'red' }}\n                  >\n                    {i18n.t('buttons.delete')}\n                  </Button>\n                  <hr style={{ margin: '0', border: 'none', borderTop: '1px solid lightgrey' }} />\n                </div>\n              ) : null}\n            </div>\n          ) : null}\n        </div>\n      );\n    }\n  }\n}\n\nexport default withKeycloak(ProjectActionItems);\n","import React, { Component } from 'react';\nimport { DataTable, TableContainer, Table, TableHead, TableRow, TableHeader, TableBody, TableCell } from 'carbon-components-react';\nimport '../../index.scss';\nimport { apiGetCustomersProjects, apiGetMyCustomersProjects, apiDeleteProjectFromCustomer } from '../../api/customers';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { Link } from 'react-router-dom';\nimport i18n from '../../i18n';\nimport { isPortalAdminOrSupport } from '../../api/helpers';\nimport {apiCurrentTicketingSystemGet} from \"../../api/ticketingsystem\";\nimport ProjectActionItems from '../Admin/ProjectActionItems';\n\nclass CustomerDataTable extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      projects: {},\n      ticketingSystem: {},\n      action: 'Edit',\n      showMenu: {},\n    };\n    this.headerData = [\n      {\n        header: i18n.t('customerDashboard.projectName'),\n        key: 'projectName',\n      },\n      {\n        header: i18n.t('customerDashboard.partners'),\n        key: 'partners',\n      },\n      {\n        header: i18n.t('customerDashboard.entandoVersion'),\n        key: 'entandoVersion',\n      },\n      {\n        header: i18n.t('customerDashboard.status'),\n        key: 'status',\n      },\n      {\n        header: i18n.t('customerDashboard.startDate'),\n        key: 'startDate',\n      },\n      {\n        header: i18n.t('customerDashboard.endDate'),\n        key: 'endDate',\n      },\n      {\n        header: i18n.t('customerDashboard.openTickets'),\n        key: 'openTickets',\n      },\n      {\n        header: i18n.t('customerDetails.notes'),\n        key: 'notes',\n      },\n      {\n        header: i18n.t('customerDashboard.action'),\n        key: 'action',\n      },\n    ];\n  }\n\n  async fetchData() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      try {\n        var projects;\n        if (isPortalAdminOrSupport()) {\n          projects = await apiGetCustomersProjects(this.props.serviceUrl, this.props.customerNumber);\n        } else {\n          projects = await apiGetMyCustomersProjects(this.props.serviceUrl, this.props.customerNumber);\n        }\n\n        const ticketingSystem = await apiCurrentTicketingSystemGet(this.props.serviceUrl);\n\n        this.setState({\n          projects: projects,\n          ticketingSystem: ticketingSystem,\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    this.render();\n  }\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      this.fetchData();\n    }\n  }\n\n  updateProjectList = () => {\n    this.fetchData();\n  };\n\n  showMenu = (e, id) => {\n    var showMenu = {};\n    showMenu[String(id)] = !this.state.showMenu[String(id)];\n    this.setState({\n      showMenu: showMenu,\n    });\n    //document.addEventListener('mousedown', this.closeMenu);\n  };\n\n  closeMenu = () => {\n    this.setState({ showMenu: false }, () => {\n      document.removeEventListener('click', this.closeMenu);\n    });\n  };\n\n  async deleteProject(id) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      return await apiDeleteProjectFromCustomer(this.props.serviceUrl, this.props.customerNumber, id);\n    }\n  }\n\n  handleDeleteProject = (e, id) => {\n    e.preventDefault();\n    if (window.confirm('Are you sure you want to delete this project?')) {\n      this.deleteProject(id)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.deleted'),\n            submitColour: '#24a148',\n          });\n          this.props.updateCustomerList();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      this.fetchData();\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <DataTable rows={rowData} headers={this.headerData}>\n          {({ rows, headers, getHeaderProps, getTableProps }) => (\n            <TableContainer description={i18n.t('customerDashboard.tableDesc')}>\n              <Table {...getTableProps()}>\n                <TableHead>\n                  <TableRow key=\"headerRow\">\n                    {headers.map(header => {\n                      let result;\n                      if (header.header === i18n.t('customerDetails.notes')) {\n                        if (isPortalAdminOrSupport()) {\n                          result = <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>;\n                        }\n                      } else {\n                        result = <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>;\n                      }\n                      return result;\n                    })}\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {Object.keys(this.state.projects).length !== 0\n                    ? this.state.projects.data.map((project, index) => {\n                        if (project.projectSubscriptions.length === 0) {\n                          return (\n                            <TableRow key={index}>\n                              <TableCell>{project.name}</TableCell>\n                              {project.partners.length !== 0 ? (\n                                <TableCell>\n                                  {project.partners.map(partner => (\n                                    <p>{partner.name}</p>\n                                  ))}\n                                </TableCell>\n                              ) : (\n                                <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              )}\n                              <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              <TableCell>{project.tickets.length}</TableCell>\n                              {isPortalAdminOrSupport() ? <TableCell style={{ width: '250px' }}>{project.notes}</TableCell> : null}\n                              <TableCell>\n                                <ProjectActionItems\n                                  serviceUrl={this.props.serviceUrl}\n                                  ticketingSystem={this.state.ticketingSystem}\n                                  locale={this.props.locale}\n                                  hasSubscription={false}\n                                  project={project}\n                                  allProjects={this.state.projects.data}\n                                  handleDeleteProject={this.handleDeleteProject}\n                                  updateProjectList={this.updateProjectList}\n                                />\n                              </TableCell>\n                            </TableRow>\n                          );\n                        } else {\n                          //Note: this uses the last subscription which isn't necessarily the current active one\n                          var sub = project.projectSubscriptions[project.projectSubscriptions.length - 1];\n                          return (\n                            <TableRow key={index}>\n                              <TableCell>\n                                <Link to={`/subscription-details/${sub.id}`}>{project.name}</Link>\n                              </TableCell>\n                              {project.partners.length !== 0 ? (\n                                <TableCell>\n                                  {project.partners.map(partner => (\n                                    <p>{partner.name}</p>\n                                  ))}\n                                </TableCell>\n                              ) : (\n                                <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              )}\n                              {sub.entandoVersion ? (\n                                <TableCell>{sub.entandoVersion.name}</TableCell>\n                              ) : (\n                                <TableCell>{i18n.t('userMessages.none')}</TableCell>\n                              )}\n                              <TableCell>{sub.status}</TableCell>\n                              <TableCell>{String(new Date(sub.startDate).toDateString())}</TableCell>\n                              <TableCell>\n                                {String(\n                                  new Date(\n                                    new Date(sub.startDate).setMonth(new Date(sub.startDate).getMonth() + sub.lengthInMonths)\n                                  ).toDateString()\n                                )}\n                              </TableCell>\n                              <TableCell>{project.tickets.length}</TableCell>\n                              {isPortalAdminOrSupport() ? <TableCell style={{ width: '250px' }}>{project.notes}</TableCell> : null}\n                              <TableCell>\n                                <ProjectActionItems\n                                  serviceUrl={this.props.serviceUrl}\n                                  ticketingSystem={this.state.ticketingSystem}\n                                  locale={this.props.locale}\n                                  sub={sub}\n                                  hasSubscription={true}\n                                  project={project}\n                                  allProjects={this.state.projects.data}\n                                  handleDeleteProject={this.handleDeleteProject}\n                                  updateProjectList={this.updateProjectList}\n                                />\n                              </TableCell>\n                            </TableRow>\n                          );\n                        }\n                      })\n                    : null}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          )}\n        </DataTable>\n      </div>\n    );\n  }\n}\n\nconst rowData = [\n  {\n    id: 'a',\n    projectName: 'Supplier Portal',\n    partnerName: 'Leonardo',\n    entandoVersion: 5.2,\n    startDate: 'October, 2019',\n    endDate: 'October, 2022',\n    openTickets: '5',\n  },\n  {\n    id: 'b',\n    projectName: 'Supplier Portal',\n    partnerName: 'Veriday',\n    entandoVersion: 5.2,\n    startDate: 'July, 2019',\n    endDate: 'July, 2022',\n    openTickets: '2',\n  },\n  {\n    id: 'c',\n    projectName: 'Supplier Portal',\n    partnerName: 'Accenture',\n    entandoVersion: 6.2,\n    startDate: 'September, 2019',\n    endDate: 'September, 2022',\n    openTickets: '2',\n  },\n  {\n    id: 'd',\n    projectName: 'Supplier Portal',\n    partnerName: 'Veriday',\n    entandoVersion: 5.2,\n    startDate: 'October, 2019',\n    endDate: 'October, 2022',\n    openTickets: '1',\n  },\n];\n\nexport default withKeycloak(CustomerDataTable);\n","import React from 'react';\r\nimport i18n from '../../i18n';\r\nimport { Tile } from 'carbon-components-react';\r\nimport { apiCustomerGet } from '../../api/customers';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\n\r\nclass CustomerDetails extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      customer: {},\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.getCustomer(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomer(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  async getCustomer() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      const customer = await apiCustomerGet(this.props.serviceUrl, this.props.customerNumber);\r\n      this.setState({\r\n        customer: customer.data,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"customer-details\">\r\n        <Tile>\r\n          <p>\r\n            <strong>{i18n.t('customerDashboard.customerName')}</strong> {this.state.customer.name}\r\n          </p>\r\n          <p>\r\n            <strong>{i18n.t('customerDashboard.customerId')}</strong> {this.state.customer.id}\r\n          </p>\r\n        </Tile>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(CustomerDetails);\r\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport { ModalWrapper, Form, TextInput, TextArea } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiCustomerGet, apiCustomerPut } from '../../api/customers';\n\nclass EditCustomerModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      name: '',\n      customerNumber: '',\n      contactName: '',\n      contactPhone: '',\n      contactEmail: '',\n      notes: '',\n      invalid: {},\n      modalId: '',\n      buttonId: '',\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    //name\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    //customerNumber\n    if (this.state.customerNumber === '') {\n      formIsValid = false;\n      invalid['customerNumber'] = true;\n    }\n\n    //contactEmail\n    if (typeof this.state.contactEmail !== 'undefined') {\n      let lastAtPos = this.state.contactEmail.lastIndexOf('@');\n      let lastDotPos = this.state.contactEmail.lastIndexOf('.');\n\n      if (\n        !(\n          lastAtPos < lastDotPos &&\n          lastAtPos > 0 &&\n          this.state.contactEmail.indexOf('@@') === -1 &&\n          lastDotPos > 2 &&\n          this.state.contactEmail.length - lastDotPos > 2\n        )\n      ) {\n        formIsValid = false;\n        invalid['contactEmail'] = true;\n      }\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async updateCustomer(customer) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      return await apiCustomerPut(this.props.serviceUrl, customer);\n    }\n  }\n\n  getCustomerDetails = customerId => {\n    this.getCustomer(customerId);\n  };\n\n  async getCustomer(customerId) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      const customer = await apiCustomerGet(this.props.serviceUrl, customerId);\n      this.setState({\n        name: customer.data.name,\n        customerNumber: customer.data.customerNumber,\n        contactName: customer.data.contactName,\n        contactPhone: customer.data.contactPhone,\n        contactEmail: customer.data.contactEmail,\n        notes: customer.data.notes,\n        modalId: 'modal-form-customer-edit-' + customer.data.id,\n        buttonId: 'edit-customer-button-' + customer.data.id,\n      });\n    }\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const customer = {\n        id: this.props.customer.id,\n        name: this.state.name,\n        customerNumber: this.state.customerNumber,\n        contactName: this.state.contactName,\n        contactPhone: this.state.contactPhone,\n        contactEmail: this.state.contactEmail,\n        notes: this.state.notes,\n      };\n      this.updateCustomer(customer)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.updated'),\n            submitColour: '#24a148',\n          });\n          this.props.updateCustomerList();\n          this.getCustomerDetails(this.props.customer.id);\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  clearValues = () => {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const customerModalElement = document.querySelector('#' + this.state.modalId);\n    if (!customerModalElement.className.includes('is-visible') && authenticated) {\n      this.setState({\n        name: this.props.customer.name,\n        customerNumber: this.props.customer.customerNumber,\n        contactName: this.props.customer.contactName,\n        contactPhone: this.props.customer.contactPhone,\n        contactEmail: this.props.customer.contactEmail,\n        notes: this.props.customer.notes,\n        invalid: {},\n      });\n    }\n  };\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      if (this.props.customerId) {\n        this.getCustomerDetails(this.props.customerId);\n      }\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      this.getCustomerDetails(this.props.customerId);\n    }\n  }\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n      </div>\n    )\n    const modalId = this.state.modalId\n    const buttonClassName = 'bx--btn bx--btn--ghost edit-customer-button-' + this.props.customer.id;\n    return (\n      <ModalWrapper\n        buttonTriggerText={i18n.t('buttons.edit')}\n        modalHeading={i18n.t('adminDashboard.editCustomer.title')}\n        buttonTriggerClassName={buttonClassName}\n        className=\"modal-form\"\n        id={modalId}\n        handleSubmit={this.handleFormSubmit}\n        primaryButtonText={i18n.t('modalText.save')}\n        secondaryButtonText={i18n.t('modalText.cancel')}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit}>\n            <TextInput\n              id={\"name\"+modalId}\n              name=\"name\"\n              labelText={i18n.t('adminDashboard.addCustomer.customerName') + ' *'}\n              value={this.state.name}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['name']}\n            />\n            <TextInput\n              id={\"customerNumber\"+modalId}\n              name=\"customerNumber\"\n              labelText={i18n.t('adminDashboard.addCustomer.customerNumber') + ' *'}\n              value={this.state.customerNumber}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['customerNumber']}\n            />\n            <TextInput\n              id={\"contactName\"+modalId}\n              name=\"contactName\"\n              labelText={i18n.t('adminDashboard.addCustomer.contactName')}\n              value={this.state.contactName}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={\"contactPhone\"+modalId}\n              name=\"contactPhone\"\n              labelText={i18n.t('adminDashboard.addCustomer.contactPhone')}\n              value={this.state.contactPhone}\n              onChange={this.handleChanges}\n            />\n            <TextInput\n              id={\"contactEmail\"+modalId}\n              name=\"contactEmail\"\n              labelText={i18n.t('adminDashboard.addCustomer.contactEmail') + ' *'}\n              value={this.state.contactEmail}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.email')}\n              invalid={this.state.invalid['contactEmail']}\n            />\n            <TextArea\n              name=\"notes\"\n              labelText={i18n.t('adminDashboard.addCustomer.notes')}\n              value={this.state.notes}\n              onChange={this.handleChanges}\n            />\n          </Form>\n        </div>\n        {modalConfirmation}\n      </ModalWrapper>\n    );\n  }\n}\n\nexport default withKeycloak(EditCustomerModal);\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { AccordionItem, Button } from 'carbon-components-react';\r\nimport withKeycloak from '../../auth/withKeycloak';\r\nimport { apiCustomerGet, apiCustomerDelete, apiGetCustomersProjects, apiGetMyCustomersProjects } from '../../api/customers';\r\nimport CustomerDataTable from './customerDataTable';\r\nimport CustomerDetails from './customerDetails';\r\nimport { isPortalAdminOrSupport, isPortalAdmin, isPortalCustomer } from '../../api/helpers';\r\nimport EditCustomerModal from '../Admin/EditCustomerModal';\r\nimport i18n from '../../i18n';\r\n\r\nclass CustomerAccordian extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      projects: {},\r\n      customer: {},\r\n      authenticated: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.getCustomersProjects(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.getCustomersProjects(this.props.customerNumber);\r\n    }\r\n  }\r\n\r\n  async getCustomersProjects(id) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n    if (authenticated) {\r\n      const customer = await apiCustomerGet(this.props.serviceUrl, id);\r\n\r\n      var projects;\r\n      try {\r\n        if (isPortalAdminOrSupport()) {\r\n          projects = await apiGetCustomersProjects(this.props.serviceUrl, id);\r\n        } else {\r\n          projects = await apiGetMyCustomersProjects(this.props.serviceUrl, id);\r\n        }\r\n\r\n        this.setState({\r\n          projects: projects.data,\r\n          customer: customer.data,\r\n        });\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  async deleteCustomer() {\r\n    return await apiCustomerDelete(this.props.serviceUrl, this.state.customer.id);\r\n  }\r\n\r\n  handleDelete() {\r\n    if (window.confirm('Are you sure you want to delete this customer?')) {\r\n      this.deleteCustomer().then(() => {\r\n        this.props.updateCustomerList();\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div>\r\n          {isPortalCustomer() ? <CustomerDetails serviceUrl={this.props.serviceUrl} customerNumber={this.props.customerNumber} /> : null}\r\n          <AccordionItem title={this.props.title} open={this.props.accordionOpened}>\r\n            <div style={{ display: 'flex' }}>\r\n              {isPortalAdminOrSupport() ? (\r\n                <Link style={{ textDecoration: 'none' }} to={`/customer-details/${this.state.customer.id}`}>\r\n                  <Button kind=\"ghost\">{i18n.t('buttons.viewDetails')}</Button>\r\n                </Link>\r\n              ) : null}\r\n              {isPortalAdmin() ? (\r\n                <div style={{ display: 'flex' }}>\r\n                  <EditCustomerModal\r\n                    serviceUrl={this.props.serviceUrl}\r\n                    customer={this.state.customer}\r\n                    key={this.state.customer.id}\r\n                    updateCustomerList={this.props.updateCustomerList}\r\n                    customerId={this.state.customer.id}\r\n                  />\r\n                  <Button kind=\"ghost\" style={{ color: 'red' }} onClick={() => this.handleDelete()}>\r\n                    {i18n.t('buttons.delete')}\r\n                  </Button>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n            <CustomerDataTable\r\n              key={new Date().getTime()}\r\n              serviceUrl={this.props.serviceUrl}\r\n              customerNumber={this.props.customerNumber}\r\n              locale={this.props.locale}\r\n              updateCustomerList={this.props.updateCustomerList}\r\n            />\r\n          </AccordionItem>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withKeycloak(CustomerAccordian);\r\n","import React from 'react';\nimport i18n from '../../i18n';\nimport { Accordion, PaginationNav, Search, Tile } from 'carbon-components-react';\nimport AddCustomerModal from './AddCustomerModal';\nimport AddPartnerModal from './AddPartnerModal';\nimport AddProjectModal from './AddProjectModal';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiAdminCustomersGet, apiMyCustomersGet } from '../../api/customers';\nimport CustomerAccordian from '../Customer/CustomerAccordian';\nimport { isPortalAdmin, isPortalSupport, isPortalPartner, isPortalCustomer, isPortalAdminOrSupport, isPortalUser } from '../../api/helpers';\nimport { apiProjectsGet, apiMyProjectsGet } from '../../api/projects';\n\nclass AdminDashboard extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      customers: {},\n      projects: {},\n      customersProjects: {},\n      role: '',\n      filteredCustomers: {},\n      currentPage: 0,\n      test: '',\n    };\n  }\n\n  componentDidMount() {\n    this.getCustomers();\n    this.getProjects();\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      this.getCustomers();\n      this.getProjects();\n    }\n  }\n\n  async getProjects() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      var projects = '';\n      if (isPortalAdminOrSupport()) {\n        projects = await apiProjectsGet(this.props.serviceUrl);\n      } else {\n        projects = await apiMyProjectsGet(this.props.serviceUrl);\n      }\n      this.setState({\n        projects: projects.data,\n      });\n    }\n  }\n\n  async getCustomers() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      var customers;\n      if (isPortalAdminOrSupport()) {\n        customers = await apiAdminCustomersGet(this.props.serviceUrl);\n      } else {\n        customers = await apiMyCustomersGet(this.props.serviceUrl);\n      }\n\n      this.setState({\n        customers: customers.data,\n        filteredCustomers: customers.data,\n      });\n    }\n  }\n\n  handleSearch = event => {\n    if (event.key === 'Enter') {\n      const newFilteredState = this.state.customers.filter(customer =>\n        customer.name.toLowerCase().includes(event.target.value.toLowerCase())\n      );\n      this.setState({\n        filteredCustomers: newFilteredState,\n        currentPage: 0,\n      });\n    } else {\n      if (event.target.value === '' || event.target.value === undefined) {\n        this.setState({\n          filteredCustomers: this.state.customers,\n        });\n      }\n    }\n    this.forceUpdate();\n  };\n\n  updateCustomerList = () => {\n    this.getCustomers();\n    this.getProjects();\n  };\n\n  render() {\n    var numberOfPages = 1;\n    if (Object.keys(this.state.filteredCustomers).length !== 0) {\n      numberOfPages = Math.ceil(this.state.filteredCustomers.length / 5);\n    } else {\n      numberOfPages = 1;\n    }\n\n    const props = () => ({\n      loop: Boolean(false),\n      page: Number(this.state.currentPage),\n      totalItems: Number(numberOfPages),\n      itemsShown: Number(1),\n      onChange: event => this.setState({ currentPage: event }),\n    });\n\n    return (\n      <div className=\"admin-dashboard\">\n        {isPortalAdmin() ? (\n          <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\n        ) : isPortalSupport() ? (\n          <h3 className=\"pageTitle\">{i18n.t('adminDashboard.supportTitle')}</h3>\n        ) : isPortalCustomer() ? (\n          <h3 className=\"pageTitle\">{i18n.t('adminDashboard.customerTitle')}</h3>\n        ) : isPortalPartner() ? (\n          <h3 className=\"pageTitle\">{i18n.t('adminDashboard.partnerTitle')}</h3>\n        ) : null}\n        {isPortalAdmin() || isPortalSupport() || isPortalPartner() ? (\n          <Tile>\n            <p className=\"title\">{i18n.t('adminDashboard.allCustomers')}</p>\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">\n                <Search\n                  onChange={this.handleSearch}\n                  id=\"search\"\n                  placeholder={i18n.t('adminDashboard.searchText')}\n                  labelText={i18n.t('adminDashboard.searchLabel')}\n                  onKeyPress={this.handleSearch}\n                />\n              </div>\n              {isPortalAdmin() ? (\n                <div className=\"bx--col\">\n                  <div>\n                    <AddPartnerModal\n                      serviceUrl={this.props.serviceUrl}\n                      updateCustomerList={this.updateCustomerList}\n                      allProjects={this.state.projects}\n                    />\n                    <AddCustomerModal serviceUrl={this.props.serviceUrl} updateCustomerList={this.updateCustomerList} />\n                    <AddProjectModal\n                      serviceUrl={this.props.serviceUrl}\n                      updateCustomerList={this.updateCustomerList}\n                      allCustomers={this.state.customers}\n                    />\n                  </div>\n                </div>\n              ) : null}\n            </div>\n          </Tile>\n        ) : null}\n\n        <div className=\"form-container\">\n          <Accordion>\n            {Object.keys(this.state.customers).length !== 0\n              ? this.state.filteredCustomers.map((customer, index) => {\n                  // Pagination for Admin and Support roles (5 items per page)\n                  var indexOfLastItem = (this.state.currentPage + 1) * 5 - 1;\n                  var firstIndexOfCurrentPage = this.state.currentPage * 5;\n                  var accordionOpened = this.state.customers.length === 1;\n\n                  if (isPortalUser()) {\n                    if (index >= firstIndexOfCurrentPage && index <= indexOfLastItem) {\n                      return (\n                        <CustomerAccordian\n                          key={customer.id}\n                          serviceUrl={this.props.serviceUrl}\n                          customerNumber={customer.id}\n                          title={customer.name}\n                          updateCustomerList={this.updateCustomerList}\n                          locale={this.props.locale}\n                          accordionOpened={accordionOpened}\n                        />\n                      );\n                    } else {\n                      return null;\n                    }\n                  } else {\n                    return null;\n                  }\n                })\n              : null}\n          </Accordion>\n          <PaginationNav {...props()} className=\"pagination-right\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withKeycloak(AdminDashboard);\n","export const publishWidgetEvent = (eventId, payload) => {\r\n  const widgetEvent = new CustomEvent(eventId, {\r\n    detail: {\r\n      payload,\r\n    },\r\n  });\r\n  window.dispatchEvent(widgetEvent);\r\n};\r\n\r\nexport const createWidgetEventPublisher = eventType => payload => publishWidgetEvent(eventType, payload);\r\n\r\nexport const subscribeToWidgetEvent = (eventType, eventHandler) => {\r\n  window.addEventListener(eventType, eventHandler);\r\n\r\n  return () => {\r\n    window.removeEventListener(eventType, eventHandler);\r\n  };\r\n};\r\n\r\nexport const subscribeToWidgetEvents = (widgetEvents, eventHandler) => {\r\n  widgetEvents.forEach(eventType => window.addEventListener(eventType, eventHandler));\r\n\r\n  return () => {\r\n    widgetEvents.forEach(eventType => window.removeEventListener(eventType, eventHandler));\r\n  };\r\n};\r\n\r\nexport const widgetEventToFSA = widgetEvent => {\r\n  // for info about Flux Standard Action (FSA) see https://github.com/redux-utilities/flux-standard-action\r\n  const {\r\n    type,\r\n    detail: { payload, error, meta },\r\n  } = widgetEvent;\r\n  return { type, payload, error, meta };\r\n};\r\n","export const INPUT_EVENT_TYPES = {\r\n  formUpdate: 'customer.form.update',\r\n  formCreate: 'customer.form.create',\r\n  formDelete: 'customer.form.delete',\r\n};\r\n\r\nexport const OUTPUT_EVENT_TYPES = {\r\n  select: 'customer.table.select',\r\n  add: 'customer.table.add',\r\n  error: 'customer.table.error',\r\n  delete: 'customer.table.delete',\r\n};\r\n\r\nexport const KEYCLOAK_EVENT_TYPE = 'keycloak';\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AdminDashboard from '../components/Admin/AdminDashboard';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AdminDashboardElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AdminDashboard serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-dashboard-widget', AdminDashboardElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AddCustomerModal from '../components/Admin/AddCustomerModal';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AdminAddCustomerElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AddCustomerModal serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-add-customer-widget', AdminAddCustomerElement);\r\n","import React, { Component } from 'react';\nimport { Select, SelectItem } from 'carbon-components-react';\nimport CustomerDetails from '../Customer/customerDetails';\nimport AdminDashboard from './AdminDashboard';\nimport '../../index.scss';\nimport CustomerDataTable from \"../Customer/customerDataTable\";\n\nexport default class RoleCheck extends Component {\n  state = {\n    roleType: 'customer',\n  };\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    const roleType = ['Admin', 'Customer'];\n    return (\n      <div className=\"role-check\">\n        <Select\n          defaultValue=\"role-type\"\n          id=\"roleType\"\n          name=\"roleType\"\n          labelText=\"Select Role(Testing)\"\n          value={this.state.roleType}\n          onChange={this.handleChanges}\n        >\n          <SelectItem text=\"Select Role\" value=\"role-type\" />\n          {roleType.map((roleType, i) => (\n            <SelectItem key={i} text={roleType} value={roleType.toLowerCase()}>\n              {roleType}\n            </SelectItem>\n          ))}\n        </Select>\n        {this.renderForm()}\n      </div>\n    );\n  }\n\n  // Render Dashboard based on role\n  renderForm() {\n    if (this.state.roleType === 'customer')\n      return (\n        <div>\n          <h3 className=\"pageTitle\">Welcome to Entando Customer Portal</h3>\n          <CustomerDetails />\n          <CustomerDataTable />\n        </div>\n      );\n    if (this.state.roleType === 'admin')\n      return (\n        <div>\n          <h3 className=\"pageTitle\">Welcome to Entando Admin View</h3>\n          <AdminDashboard />\n        </div>\n      );\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport RoleCheck from '../components/Admin/RoleCheck';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AdminRoleCheckElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <RoleCheck serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-rolecheck-widget', AdminRoleCheckElement);\r\n\r\n//export default AdminRoleCheckElement;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport CustomerDataTable from '../components/Customer/customerDataTable';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass CustomerDataTableElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <CustomerDataTable serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('customer-datatable-widget', CustomerDataTableElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport CustomerDetails from '../components/Customer/customerDetails';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass CustomerDetailsElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <CustomerDetails serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\ncustomElements.define('customer-details-widget', CustomerDetailsElement);\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/tickets';\r\n\r\nexport const apiTicketDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketsGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiTicketPost = async (serviceUrl, ticket) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: ticket ? JSON.stringify(ticket) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nconst jiraResource = 'api/tickets/ticketingsystem';\r\nexport const apiJiraTicketDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${jiraResource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiJiraTicketsGet = async (serviceUrl, projectName, organization) => {\r\n  const url = `${serviceUrl}/${jiraResource}/${projectName}/${organization}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiJiraTicketPost = async (serviceUrl, projectName, organization, ticket) => {\r\n  const url = `${serviceUrl}/${jiraResource}/${projectName}/${organization}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: ticket ? JSON.stringify(ticket) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\nimport {\n  DataTable,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell,\n  PaginationNav,\n} from 'carbon-components-react';\nimport {apiJiraTicketsGet} from '../../api/tickets';\nimport {apiCurrentTicketingSystemGet} from '../../api/ticketingsystem';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiProjectGet, apiAddTicketToProject, apiGetMyProject} from '../../api/projects';\nimport {isPortalAdminOrSupport, isPortalUser} from '../../api/helpers';\nimport i18n from '../../i18n';\n\nclass TicketList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tickets: {},\n      project: {},\n      currentTicketingSystem: {},\n      currentPage: 0,\n    };\n    this.headerData = [\n      {\n        header: i18n.t('ticketDetails.issue'),\n        key: 'issue',\n      },\n      {\n        header: i18n.t('ticketDetails.summary'),\n        key: 'summary',\n      },\n      {\n        header: i18n.t('ticketDetails.status'),\n        key: 'status',\n      },\n      {\n        header: i18n.t('ticketDetails.type'),\n        key: 'type',\n      },\n      {\n        header: i18n.t('ticketDetails.priority'),\n        key: 'priority',\n      },\n      {\n        header: i18n.t('ticketDetails.created'),\n        key: 'created',\n      },\n      {\n        header: i18n.t('ticketDetails.updated'),\n        key: 'updated',\n      },\n      {\n        header: i18n.t('ticketDetails.link'),\n        key: 'link',\n      },\n    ];\n  }\n\n  async fetchData() {\n    const { keycloak } = this.props;\n    var authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      try {\n        let project;\n        if (isPortalAdminOrSupport()) {\n          project = await apiProjectGet(this.props.serviceUrl, this.props.projectId);\n        } else {\n          project = await apiGetMyProject(this.props.serviceUrl, this.props.projectId);\n        }\n        const currentTicketingSystem = await apiCurrentTicketingSystemGet(this.props.serviceUrl);\n        var tickets = await apiJiraTicketsGet(this.props.serviceUrl, currentTicketingSystem.systemId, project.data.systemId);\n        for (var i = 0; i < tickets.data.length; i++) {\n          apiAddTicketToProject(this.props.serviceUrl, this.props.projectId, tickets.data[i].id);\n        }\n\n        this.setState({\n          tickets: tickets,\n          project: project,\n          currentTicketingSystem: currentTicketingSystem,\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  }\n\n  componentDidMount() {\n    if (isPortalUser()) {\n      this.fetchData();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth && isPortalUser()) {\n      this.fetchData();\n    }\n  }\n\n  render() {\n    var numberOfPages = 1;\n    if (Object.keys(this.state.tickets).length !== 0) {\n      numberOfPages = Math.ceil(this.state.tickets.data.length / 10);\n    }\n\n    const paginationProps = () => ({\n      loop: Boolean(false),\n      page: Number(this.state.currentPage),\n      totalItems: Number(numberOfPages),\n      itemsShown: Number(1),\n      onChange: event => this.setState({currentPage: event}),\n    });\n    const ticketSystemUrl = this.state.currentTicketingSystem.url;\n    const ticketingSystemBaseUrl = (ticketSystemUrl != null) ?\n      ticketSystemUrl.substr(0, ticketSystemUrl.indexOf('/rest'))\n      : null;\n\n    return (\n      <div>\n        <DataTable rows={rowData} headers={this.headerData}>\n          {({rows, headers, getHeaderProps, getTableProps}) => (\n            <TableContainer\n              title={i18n.t('ticketDetails.listOfTickets')}\n              description={\n                this.state.project.data != null ? (\n                  <a\n                    href={ticketingSystemBaseUrl + '/issues/' +\n                    '?jql=Organizations=' +\n                    this.state.project.data.systemId\n                    }\n                    style={{textDecoration: 'none'}}\n                    target=\"_blank\" rel=\"noreferrer\"\n                >\n                  {i18n.t('buttons.viewAllTickets')}\n                </a>\n                ) : (\n                  <div>{i18n.t('ticketDetails.tickets')}</div>\n                )\n              }\n            >\n              <Table {...getTableProps()}>\n                <TableHead>\n                  <TableRow>\n                    {headers.map(header => (\n                      <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>\n                    ))}\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {Object.keys(this.state.tickets).length !== 0 ? (\n                    this.state.tickets.data.map((ticket, index) => {\n                      const indexOfLastItem = (this.state.currentPage + 1) * 10 - 1;\n                      const firstIndexOfCurrentPage = this.state.currentPage * 10;\n                      const ticketUrl = ticketingSystemBaseUrl +\n                        '/browse/' + ticket.systemId;\n\n                      if (index >= firstIndexOfCurrentPage && index <= indexOfLastItem) {\n                        return (\n                          <TableRow key={ticket.id}>\n                            <TableCell>\n                              <a href={ticketUrl} target=\"_blank\" rel=\"noreferrer\">\n                                {ticket.systemId}\n                              </a>\n                            </TableCell>\n                            <TableCell>{ticket.summary}</TableCell>\n                            <TableCell>{ticket.status}</TableCell>\n                            <TableCell>{ticket.type}</TableCell>\n                            <TableCell>{ticket.priority}</TableCell>\n                            <TableCell>{new Date(ticket.createDate).toDateString()}</TableCell>\n                            <TableCell>{new Date(ticket.updateDate).toDateString()}</TableCell>\n                            <TableCell>\n                              <a href={ticketUrl} target=\"_blank\" rel=\"noreferrer\">\n                                {i18n.t('ticketDetails.viewTicket')}\n                              </a>\n                            </TableCell>\n                          </TableRow>\n                        );\n                      } else {\n                        return null;\n                      }\n                    })\n                  ) : (\n                    <TableRow/>\n                  )}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          )}\n        </DataTable>\n        <PaginationNav {...paginationProps()} className=\"pagination-right\" />\n      </div>\n    );\n  }\n}\n\nconst rowData = [\n  {\n    id: 'a',\n    projectName: 'Ticket1',\n    project: 'Leonardo',\n    entandoVersion: 6.2,\n    creationDate: 'October, 2019',\n    openTicket: 'Open Ticket',\n  },\n  {\n    id: 'a',\n    projectName: 'Ticket1',\n    project: 'Leonardo',\n    entandoVersion: 6.2,\n    creationDate: 'October, 2019',\n    openTicket: 'Open Ticket',\n  },\n  {\n    id: 'a',\n    projectName: 'Ticket1',\n    project: 'Leonardo',\n    entandoVersion: 6.2,\n    creationDate: 'October, 2019',\n    openTicket: 'Open Ticket',\n  },\n];\n\nexport default withKeycloak(TicketList);\n","import { getDefaultOptions, request } from './helpers';\r\n\r\nconst resource = 'api/project-subscriptions';\r\n\r\nexport const apiSubscriptionGet = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiSubscriptionGetAll = async serviceUrl => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n// Project Subscription creation consists of an object containing a projectSubscription, an entandoVersionId, and a\r\n// project id, see SubscriptionCreationRequest.\r\n/**\r\n * Called to create a new project subscription\r\n *\r\n * @param {string} serviceUrl\r\n * @param {ProjectSubscriptionCreation} projectSubscriptionCreation\r\n * @returns\r\n */\r\nexport const apiProjectSubscriptionPost = async (serviceUrl, projectSubscriptionCreation) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: projectSubscriptionCreation ? JSON.stringify(projectSubscriptionCreation) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProjectSubscriptionPut = async (serviceUrl, projectSubscriptionCreation) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: projectSubscriptionCreation ? JSON.stringify(projectSubscriptionCreation) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nconst myResource = 'api/project-subscriptions/mysubscription';\r\nexport const apiGetMySubscription = async (serviceUrl, customerId) => {\r\n  const url = `${serviceUrl}/${myResource}/${customerId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\n// Same format as {projectSubscriptionCreation}\r\nexport const apiRenewSubscription = async (serviceUrl, projectSubscriptionRenew) => {\r\n  const url = `${serviceUrl}/${resource}/renew`;\r\n\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: projectSubscriptionRenew ? JSON.stringify(projectSubscriptionRenew) : null,\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport { ModalWrapper, Form, TextInput, TextArea, Select, SelectItem, DatePicker, DatePickerInput } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiProjectSubscriptionPut, apiSubscriptionGet } from '../../api/subscriptions';\nimport moment from 'moment';\n\nclass EditSubscriptionModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      level: '',\n      status: '',\n      lengthInMonths: '',\n      startDate: '',\n      notes: '',\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    if (this.state.level === 'level') {\n      formIsValid = false;\n      invalid['level'] = true;\n    }\n\n    if (this.state.status === 'status') {\n      formIsValid = false;\n      invalid['status'] = true;\n    }\n\n    if (this.state.lengthInMonths === '' || !this.isNumeric(String(this.state.lengthInMonths))) {\n      formIsValid = false;\n      invalid['lengthInMonths'] = true;\n    }\n\n    if (typeof this.state.startDate !== 'undefined') {\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n        formIsValid = false;\n        invalid['startDate'] = true;\n      }\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  isNumeric(str) {\n    if (typeof str != 'string') return false;\n    return !isNaN(str) && !isNaN(parseFloat(str));\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  handleFormSubmit = e => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const subscriptionRequest = {\n        projectSubscription: {\n          id: this.props.subscription.id,\n          level: this.state.level,\n          status: this.state.status,\n          lengthInMonths: this.state.lengthInMonths,\n          startDate: moment(this.state.startDate).format(),\n          notes: this.state.notes,\n          project: this.props.project,\n          entandoVersion: this.props.subscription.entandoVersion,\n        },\n      };\n      this.subscriptionPut(subscriptionRequest)\n        .then(result => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.updated'),\n            submitColour: '#24a148',\n          });\n          this.props.updateSubscription();\n        })\n        .catch(err => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      this.getSubscriptionDetails();\n    }\n  }\n\n  handleStartDateChange = date => {\n    this.setState({\n      startDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\n    });\n  };\n\n  async getSubscriptionDetails() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      const subscription = await apiSubscriptionGet(this.props.serviceUrl, this.props.subscription.id);\n      this.setState({\n        level: subscription.data.level,\n        status: subscription.data.status,\n        lengthInMonths: subscription.data.lengthInMonths,\n        startDate: moment(subscription.data.startDate).format('MM/DD/YYYY'),\n        notes: subscription.data.notes,\n        submitMsg: '',\n      });\n    }\n  }\n\n  async subscriptionPut(subscription) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      return await apiProjectSubscriptionPut(this.props.serviceUrl, subscription);\n    }\n  }\n  render() {\n    const levelList = ['GOLD', 'PLATINUM'];\n    const statusList = ['REQUESTED', 'PENDING', 'ACTIVE', 'EXPIRED'];\n    const modalId = \"modal-form-sub-edit\"\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n      </div>\n    )\n    return (\n      <ModalWrapper\n        buttonTriggerText={i18n.t('buttons.edit')}\n        modalHeading={i18n.t('editSubscription.title')}\n        buttonTriggerClassName=\"add-project bx--btn bx--btn--tertiary edit-sub-button\"\n        className=\"modal-form\"\n        id= {modalId}\n        handleSubmit={this.handleFormSubmit}\n        primaryButtonText={i18n.t('modalText.save')}\n        secondaryButtonText={i18n.t('modalText.cancel')}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit}>\n            <Select\n              id={\"level\"+modalId}\n              name=\"level\"\n              labelText={i18n.t('subscriptionDetails.level') + ' *'}\n              value={this.state.level}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['level']}\n            >\n              <SelectItem disabled text=\"Select Level\" value=\"level\" />\n              {levelList.map((level, i) => (\n                <SelectItem key={i} text={level} value={level}>\n                  {level}\n                </SelectItem>\n              ))}\n            </Select>\n            <Select\n              id={\"status\"+modalId}\n              name=\"status\"\n              labelText={i18n.t('subscriptionDetails.status') + ' *'}\n              value={this.state.status}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['status']}\n            >\n              <SelectItem disabled text=\"Select Status\" value=\"status\" />\n              {statusList.map((status, i) => (\n                <SelectItem key={i} text={status} value={status}>\n                  {status}\n                </SelectItem>\n              ))}\n            </Select>\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange} value={this.state.startDate}>\n              <DatePickerInput\n                id={\"startDate\"+modalId}\n                name=\"startDate\"\n                placeholder=\"mm/dd/yyyy\"\n                labelText={i18n.t('subscriptionDetails.startDate') + ' *'}\n                //onChange={this.handleChanges}\n                type=\"text\"\n                invalidText={i18n.t('validation.invalid.date')}\n                invalid={this.state.invalid['startDate']}\n              />\n            </DatePicker>\n            <TextInput\n              id={\"lengthInMonths\"+modalId}\n              name=\"lengthInMonths\"\n              labelText={i18n.t('subscriptionDetails.lengthInMonths') + ' *'}\n              value={this.state.lengthInMonths}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.number')}\n              invalid={this.state.invalid['lengthInMonths']}\n            />\n            <TextArea\n              id={\"notes\"+modalId}\n              name=\"notes\"\n              labelText={i18n.t('adminDashboard.addProject.notes')}\n              value={this.state.notes}\n              onChange={this.handleChanges}\n            />\n          </Form>\n        </div>\n        {modalConfirmation}\n      </ModalWrapper>\n    );\n  }\n}\n\nexport default withKeycloak(EditSubscriptionModal);\n","import React from 'react';\nimport TicketList from './TicketList';\nimport { Tile } from 'carbon-components-react';\nimport { apiSubscriptionGet, apiGetMySubscription } from '../../api/subscriptions';\nimport withKeycloak from '../../auth/withKeycloak';\nimport {apiGetProjectUsers, apiProjectGet, apiGetMyProject, apiGetMyProjectUsers} from '../../api/projects';\nimport {isPortalAdminOrSupport, isPortalCustomerOrPartner, isPortalUser, isPortalAdmin} from '../../api/helpers';\nimport EditSubscriptionModal from '../Admin/EditSubscriptionModal';\nimport i18n from '../../i18n';\n\nconst subscriptionData = {\n  description: 'Entando Product Support Subscription Suplier Portal',\n  commitment: 'Leonardo',\n  type: 'Product Support Subscription Entando Platform',\n  quantityRequest: '1(8 Core)',\n  components: '',\n  level: 'Gold',\n  startDate: 'May 2019',\n  endDate: 'May 2020',\n  license: 'Free Commercial Open Source',\n};\n\nclass Subscription extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      subscription: {},\n      users: {},\n      project: {},\n      customer: {},\n    };\n  }\n\n  async getSubscription() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      try {\n        let subscription;\n        let users = '';\n        let project = '';\n        if (isPortalAdminOrSupport()) {\n          subscription = await apiSubscriptionGet(this.props.serviceUrl, this.props.match.params.id);\n          if (subscription.data.project) {\n            project = await apiProjectGet(this.props.serviceUrl, subscription.data.project.id);\n            users = await apiGetProjectUsers(this.props.serviceUrl, project.data.id);\n          }\n        } else if (isPortalCustomerOrPartner()) {\n          subscription = await apiGetMySubscription(this.props.serviceUrl, this.props.match.params.id);\n          if (subscription.data.project) {\n            project = await apiGetMyProject(this.props.serviceUrl, subscription.data.project.id);\n            users = await apiGetMyProjectUsers(this.props.serviceUrl, project.data.id);\n          }\n        }\n        this.setState({\n          subscription: subscription,\n          project: project,\n          customer: project.customer,\n          users: users,\n          loading: false,\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  }\n\n  updateSubscription = () => {\n    this.getSubscription();\n  };\n\n  componentDidMount() {\n    if (isPortalUser()) {\n      this.getSubscription();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth && isPortalUser()) {\n      this.getSubscription();\n    }\n  }\n\n  render() {\n    const { type, license } = subscriptionData;\n\n    if (!this.state.loading) {\n      if (isPortalUser()) {\n        if (Object.keys(this.state.subscription).length !== 0 && Object.keys(this.state.project).length !== 0) {\n          return (\n            <div className=\"subscription-details\">\n              <div>\n                <Tile>\n                  <div className=\"bx--grid\">\n                    <div className=\"bx--row\">\n                      <div className=\"bx--col\">\n                        <p>\n                          <strong>{i18n.t('customerDashboard.customerName')}:</strong> {this.state.project.data.customer.name}\n                        </p>\n                        <p>\n                          <strong>{i18n.t('customerDashboard.projectName')}:</strong> {this.state.project.data.name}\n                        </p>\n                        <p>\n                          <strong>{i18n.t('subscriptionDetails.description')}:</strong> {this.state.subscription.data.project.description}\n                        </p>\n                        <p>\n                          <strong>{i18n.t('subscriptionDetails.partners')}:</strong>\n                          {this.state.project.data !== '' && Object.keys(this.state.project.data.partners).length !== 0 ? (\n                            <>\n                              {this.state.project.data.partners.map((partner, index) => (\n                                <> {index === this.state.project.data.partners.length - 1 ? partner.name : partner.name + ', '} </>\n                              ))}\n                            </>\n                          ) : (\n                            <> {i18n.t('userMessages.none')} </>\n                          )}\n                        </p>\n                        <p>\n                          <strong>{i18n.t('subscriptionDetails.type')}:</strong> {type}\n                        </p>\n                        {isPortalAdminOrSupport() ? (\n                          <p>\n                            <strong>{i18n.t('subscriptionDetails.notes')}:</strong> {this.state.subscription.data.notes}\n                          </p>\n                        ) : null}\n                      </div>\n                      <div className=\"bx--col\">\n                        <p>\n                          <strong>{i18n.t('subscriptionDetails.status')}:</strong> {this.state.subscription.data.status}\n                        </p>\n                        <p>\n                          <strong>{i18n.t('subscriptionDetails.level')}:</strong> {this.state.subscription.data.level}\n                        </p>\n                        <p>\n                          <strong>{i18n.t('subscriptionDetails.startDate')}:</strong>{' '}\n                          {String(new Date(this.state.subscription.data.startDate).toDateString())}\n                        </p>\n                        <p>\n                          <strong>{i18n.t('subscriptionDetails.endDate')}:</strong>{' '}\n                          {String(\n                            new Date(\n                              new Date(this.state.subscription.data.startDate).setMonth(\n                                new Date(this.state.subscription.data.startDate).getMonth() + this.state.subscription.data.lengthInMonths\n                              )\n                            ).toDateString()\n                          )}\n                        </p>\n                        <p>\n                          <strong>{i18n.t('subscriptionDetails.license')}:</strong> {license}\n                        </p>\n                        <p>\n                          <strong>{i18n.t('subscriptionDetails.assignedUsers')}:</strong>\n                          {this.state.project.data !== '' && Object.keys(this.state.users.data).length !== 0 ? (\n                            <>\n                              {this.state.users.data.map((user, index) => (\n                                <> {index === this.state.users.data.length - 1 ? user.username : user.username + ', '} </>\n                              ))}\n                            </>\n                          ) : (\n                            <> {i18n.t('userMessages.none')} </>\n                          )}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                  {isPortalAdmin() ? (\n                    <EditSubscriptionModal\n                      project={this.state.project.data}\n                      subscription={this.state.subscription.data}\n                      serviceUrl={this.props.serviceUrl}\n                      updateSubscription={this.updateSubscription}\n                    />\n                  ) : null}\n                </Tile>\n                <br />\n                <TicketList projectId={this.state.project.data.id} serviceUrl={this.props.serviceUrl} />\n              </div>\n            </div>\n          );\n        } else {\n          return <p>{i18n.t('userMessages.unauthorized')}</p>;\n        }\n      } else {\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\n      }\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(Subscription);\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Subscription from '../components/SubscriptionDetails/subscription';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass SubscriptionElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <Subscription serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('subscription-widget', SubscriptionElement);\r\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport { Form, Select, SelectItem, Button, TextArea, TextInput } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiAdminProjectsGet, apiMyProjectsGet, apiGetProjectSubscriptions } from '../../api/projects';\nimport { apiJiraTicketPost } from '../../api/tickets';\nimport { apiTicketingSystemsGet } from '../../api/ticketingsystem';\nimport {\n  isPortalAdmin,\n  isPortalAdminOrSupport,\n  isPortalCustomer,\n  isPortalCustomerOrPartner,\n  isPortalPartner,\n  isPortalSupport,\n  isPortalUser,\n} from '../../api/helpers';\n\nclass OpenTicket extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: true,\n      project: {},\n      projects: [],\n      systemId: '',\n      type: 'Support',\n      description: '',\n      priority: 'Medium',\n      status: 'To Do',\n      createDate: '',\n      updateDate: '',\n      role: '',\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n    };\n    this.types = ['Support', 'Feature Request'];\n    this.priorities = ['Critical', 'High', 'Medium', 'Low'];\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    if (this.state.project.systemId === undefined || this.state.project.systemId === 'project-list') {\n      formIsValid = false;\n      invalid['project'] = true;\n    }\n\n    if (this.state.type === '' || this.state.type === 'Select') {\n      formIsValid = false;\n      invalid['type'] = true;\n    }\n\n    if (this.state.description === '' || this.state.description === 'Select') {\n      formIsValid = false;\n      invalid['description'] = true;\n    }\n\n    if (this.state.priority === '' || this.state.priority === 'Select') {\n      formIsValid = false;\n      invalid['priority'] = true;\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n\n    if (name === 'project' && value !== '' && value !== 'project-list') {\n      this.setState({\n        project: JSON.parse(value),\n      });\n    } else {\n      this.setState({ [name]: value });\n    }\n  };\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      // check if project has subscription\n      this.fetchProjectSubscription(this.state.project.id)\n        .then(result => {\n          // if project has subscription, create ticket\n          if (result.data.length > 0) {\n            this.createTicket()\n              .then(() => {\n                this.setState({\n                  submitMsg: i18n.t('submitMessages.created'),\n                  submitColour: '#24a148',\n                });\n              })\n              .catch(() => {\n                this.setState({\n                  submitMsg: i18n.t('submitMessages.ticketError'),\n                  submitColour: '#da1e28',\n                });\n              });\n          }\n          // if no subscriptions, don't create ticket\n          else {\n            this.setState({\n              submitMsg: i18n.t('submitMessages.subscriptionRequired'),\n              submitColour: '#da1e28',\n            });\n          }\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  async fetchProjectSubscription(projectId) {\n    return await apiGetProjectSubscriptions(this.props.serviceUrl, projectId);\n  }\n\n  async fetchProjects() {\n    const { keycloak } = this.props;\n    var authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      if (isPortalAdminOrSupport()) {\n        let projects = await apiAdminProjectsGet(this.props.serviceUrl);\n        let search = window.location.search;\n        let params = new URLSearchParams(search);\n        let projectParam = params.get('project');\n        if (projectParam) {\n          projects.data.forEach(project => {\n            if (String(project.id) === projectParam) {\n              projects = project;\n              this.setState({\n                projects: [projects],\n                project: projects,\n              });\n            }\n          });\n        } else {\n          this.setState({\n            projects: projects.data,\n          });\n        }\n      } else if (isPortalCustomerOrPartner()) {\n        var projects = await apiMyProjectsGet(this.props.serviceUrl);\n        let search = window.location.search;\n        let params = new URLSearchParams(search);\n        let projectParam = params.get('project');\n        if (projectParam) {\n          projects.data.forEach(project => {\n            if (String(project.id) === projectParam) {\n              var foundProject = project;\n              this.setState({\n                projects: [foundProject],\n                project: foundProject,\n              });\n            }\n          });\n        } else {\n          this.setState({\n            projects: projects.data,\n          });\n        }\n      }\n    }\n\n    this.render();\n  }\n\n  async createTicket() {\n    const { keycloak } = this.props;\n    var authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      const ticket = {\n        systemId: this.state.project.systemId,\n        type: this.state.type,\n        summary: this.state.summary,\n        description: this.state.description,\n        priority: this.state.priority,\n        status: 'To Do',\n        // these dates are just placeholder to validate the POST request (date will be updated in the backend)\n        createDate: '2021-02-22T14:14:09-05:00',\n        updateDate: '2021-02-22T14:14:09-05:00',\n      };\n      return await apiJiraTicketPost(this.props.serviceUrl, this.state.ticketingSystem.systemId, this.state.project.systemId, ticket);\n      //const addedTicket = await apiAddTicketToProject(this.props.serviceUrl, this.state.project.id, result.data.id);\n    }\n  }\n\n  async getTicketingSystem() {\n    if (isPortalUser()) {\n      const ticketingSystems = await apiTicketingSystemsGet(this.props.serviceUrl);\n      const currentTicketingSystem = ticketingSystems.data[ticketingSystems.data.length - 1];\n      this.setState({\n        ticketingSystem: currentTicketingSystem,\n      });\n    }\n  }\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      this.fetchProjects();\n      this.getTicketingSystem();\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      this.fetchProjects();\n      this.getTicketingSystem();\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  render() {\n    if (!this.state.loading && this.state.projects.length !== 0) {\n      if (isPortalUser()) {\n        return (\n          <div>\n            {isPortalAdmin() ? (\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\n            ) : isPortalSupport() ? (\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.supportTitle')}</h3>\n            ) : isPortalCustomer() ? (\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.customerTitle')}</h3>\n            ) : isPortalPartner() ? (\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.partnerTitle')}</h3>\n            ) : null}\n            <div className=\"form-container\">\n              <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n              <Form onSubmit={this.handleFormSubmit}>\n                <div className=\"form-desc\">\n                  <h4>{i18n.t('supportTicketForm.formTitle')}</h4>\n                  <p>{i18n.t('supportTicketForm.desc')}</p>\n                </div>\n                <div className=\"bx--grid\">\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      <Select\n                        id=\"project\"\n                        name=\"project\"\n                        labelText={i18n.t('supportTicketForm.selectProject') + ' *'}\n                        value={JSON.stringify(this.state.project)}\n                        onChange={this.handleChanges}\n                        invalidText={i18n.t('validation.invalid.required')}\n                        invalid={this.state.invalid['project']}\n                      >\n                        {this.state.projects.length > 1 ? (\n                          <SelectItem text={i18n.t('adminDashboard.addPartner.selectProject')} value=\"project-list\" />\n                        ) : null}\n                        {Object.keys(this.state.projects).length !== 0\n                          ? this.state.projects.map((project, i) => {\n                              return (\n                                <SelectItem key={i} text={project.name} value={JSON.stringify(project)}>\n                                  {project.name}\n                                </SelectItem>\n                              );\n                            })\n                          : null}\n                      </Select>\n                      <Select\n                        id=\"type\"\n                        name=\"type\"\n                        labelText={i18n.t('supportTicketForm.type') + ' *'}\n                        value={this.state.type}\n                        onChange={this.handleChanges}\n                        invalidText={i18n.t('validation.invalid.required')}\n                        invalid={this.state.invalid['type']}\n                      >\n                        {this.types.map((type, i) => (\n                          <SelectItem key={i} text={type} value={type}>\n                            {type}\n                          </SelectItem>\n                        ))}\n                      </Select>\n                      <Select\n                        id=\"priority\"\n                        name=\"priority\"\n                        labelText={i18n.t('supportTicketForm.priority') + ' *'}\n                        value={this.state.priority}\n                        onChange={this.handleChanges}\n                        invalidText={i18n.t('validation.invalid.required')}\n                        invalid={this.state.invalid['priority']}\n                      >\n                        {this.priorities.map((priority, i) => (\n                          <SelectItem key={i} text={priority} value={priority}>\n                            {priority}\n                          </SelectItem>\n                        ))}\n                      </Select>\n                    </div>\n                  </div>\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      <TextInput\n                        labelText={i18n.t('supportTicketForm.ticketSummary') + ' *'}\n                        placeholder={i18n.t('supportTicketForm.addticketSummary')}\n                        id=\"summary\"\n                        name=\"summary\"\n                        value={this.state.summary}\n                        onChange={this.handleChanges}\n                        invalidText={i18n.t('validation.invalid.required')}\n                        invalid={this.state.invalid['summary']}\n                      />\n                    </div>\n                  </div>\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      <TextArea\n                        labelText={i18n.t('supportTicketForm.ticketDescription') + ' *'}\n                        placeholder={i18n.t('supportTicketForm.addticketDescription')}\n                        name=\"description\"\n                        value={this.state.description}\n                        onChange={this.handleChanges}\n                        invalidText={i18n.t('validation.invalid.required')}\n                        invalid={this.state.invalid['description']}\n                      />\n                      <Button kind=\"primary\" tabIndex={0} type=\"submit\">\n                        {' '}\n                        {i18n.t('buttons.submit')}{' '}\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              </Form>\n            </div>\n          </div>\n        );\n      } else {\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\n      }\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(OpenTicket);\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport OpenTicket from '../components/Forms/openTicket';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass FormsOpenTicketElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <OpenTicket serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('forms-openticket-widget', FormsOpenTicketElement);\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst Navigation = () => {\r\n  return (\r\n    <ul id=\"navigation\">\r\n      <li>\r\n        <NavLink to=\"/\">Home</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/subscription-details\">Subscription Details</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/subscription\">New or Renew Subscription</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/service-ticket\">Open Service Ticket</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/enhancement\">Request for Enhancement Process</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/manage-users\">Manage Users</NavLink>\r\n      </li>\r\n      <li>\r\n        <NavLink to=\"/configuration-settings\">Configuration Settings</NavLink>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Navigation from '../components/Navigation/Navigation';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass NavigationElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <Navigation serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('navigation-widget', NavigationElement);\r\n","import React, { Component } from 'react';\r\nimport { Form, TextInput, TextArea, Button } from 'carbon-components-react';\r\nimport i18n from '../../i18n';\r\n\r\nexport default class EnhancementRequest extends Component {\r\n  state = {\r\n    ticketNo: '',\r\n    customerName: '',\r\n    projectName: '',\r\n    openedBy: '',\r\n    priority: '',\r\n    partnerName: '',\r\n    enhancementDescription: '',\r\n    invalid: {},\r\n  };\r\n\r\n  handleValidation() {\r\n    let invalid = {};\r\n    let formIsValid = true;\r\n\r\n    if (this.state.ticketNo === '') {\r\n      formIsValid = false;\r\n      invalid['ticketNo'] = true;\r\n    }\r\n\r\n    if (this.state.customerName === '') {\r\n      formIsValid = false;\r\n      invalid['customerName'] = true;\r\n    }\r\n\r\n    if (this.state.projectName === '') {\r\n      formIsValid = false;\r\n      invalid['projectName'] = true;\r\n    }\r\n\r\n    if (this.state.openedBy === '') {\r\n      formIsValid = false;\r\n      invalid['openedBy'] = true;\r\n    }\r\n\r\n    if (this.state.partnerName === '') {\r\n      formIsValid = false;\r\n      invalid['partnerName'] = true;\r\n    }\r\n\r\n    if (this.state.enhancementDescription === '') {\r\n      formIsValid = false;\r\n      invalid['enhancementDescription'] = true;\r\n    }\r\n\r\n    this.setState({ invalid: invalid });\r\n    return formIsValid;\r\n  }\r\n\r\n  handleChanges = e => {\r\n    const input = e.target;\r\n    const name = input.name;\r\n    const value = input.value;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleFormSubmit = event => {\r\n    console.log(this.state.ticketNo);\r\n    event.preventDefault();\r\n\r\n    const formIsValid = this.handleValidation();\r\n\r\n    if (formIsValid) {\r\n      // placeholder\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h3 className=\"pageTitle\">{i18n.t('enhancementForm.title')}</h3>\r\n        <div className=\"form-container\">\r\n          <Form onSubmit={this.handleFormSubmit}>\r\n            <div className=\"form-desc\">\r\n              <h4>{i18n.t('enhancementForm.formTitle')}</h4>\r\n              <p>{i18n.t('enhancementForm.desc')}</p>\r\n            </div>\r\n            <div className=\"bx--grid\">\r\n              <div className=\"bx--row\">\r\n                <div className=\"bx--col\">\r\n                  <TextInput\r\n                    name=\"ticketNo\"\r\n                    labelText={i18n.t('enhancementForm.ticketNumber')}\r\n                    value={this.state.ticketNo}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['ticketNo']}\r\n                  />\r\n                  <TextInput\r\n                    name=\"projectName\"\r\n                    labelText={i18n.t('enhancementForm.projectName')}\r\n                    value={this.state.projectName}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['projectName']}\r\n                  />\r\n                  <TextInput\r\n                    name=\"priority\"\r\n                    labelText={i18n.t('enhancementForm.priority')}\r\n                    value={this.state.priority}\r\n                    onChange={this.handleChanges}\r\n                  />\r\n                </div>\r\n                <div className=\"bx--col\">\r\n                  <TextInput\r\n                    name=\"customerName\"\r\n                    labelText={i18n.t('enhancementForm.customerName')}\r\n                    value={this.state.customerName}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['customerName']}\r\n                  />\r\n                  <TextInput\r\n                    name=\"openedBy\"\r\n                    labelText={i18n.t('enhancementForm.ticketOpenedBy')}\r\n                    value={this.state.openedBy}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['openedBy']}\r\n                  />\r\n                  <TextInput\r\n                    name=\"partnerName\"\r\n                    labelText={i18n.t('enhancementForm.partnerName')}\r\n                    value={this.state.partnerName}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['partnerName']}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"bx--row\">\r\n                <div className=\"bx--col\">\r\n                  <TextArea\r\n                    labelText={i18n.t('enhancementForm.enhancementDescription')}\r\n                    placeholder={i18n.t('enhancementForm.addenhancementDescription')}\r\n                    name=\"enhancementDescription\"\r\n                    value={this.state.enhancementDescription}\r\n                    onChange={this.handleChanges}\r\n                    invalidText={i18n.t('validation.invalid.required')}\r\n                    invalid={this.state.invalid['enhancementDescription']}\r\n                  />\r\n                  <Button kind=\"primary\" tabIndex={0} type=\"submit\">\r\n                    {' '}\r\n                    {i18n.t('buttons.submit')}{' '}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport EnhancementRequest from '../components/Forms/enhancementRequest';\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport './dashboard.css';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass FormsEnhancementRequestElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <EnhancementRequest serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('forms-enhancement-request-widget', FormsEnhancementRequestElement);\r\n","export const AuthenticatedView = ({ children, keycloak }) => {\r\n  const authenticated = keycloak.initialized && keycloak.authenticated;\r\n  return authenticated ? children : null;\r\n};\r\n\r\nexport const UnauthenticatedView = ({ children, keycloak }) => {\r\n  const authenticated = keycloak.initialized && keycloak.authenticated;\r\n  return !authenticated ? children : null;\r\n};\r\n","import React from 'react';\nimport { Tile } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiAdminCustomerGet, apiGetCustomersProjects } from '../../api/customers';\nimport { isPortalAdminOrSupport } from '../../api/helpers';\nimport i18n from '../../i18n';\nimport CustomerDataTable from \"./customerDataTable\";\n\nclass CustomerProjectList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      projects: {},\n      customer: {},\n    };\n  }\n\n  async getCustomer() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      try {\n        const customer = await apiAdminCustomerGet(this.props.serviceUrl, this.props.match.params.id);\n        const projects = await apiGetCustomersProjects(this.props.serviceUrl, customer.data.id);\n        this.setState({\n          customer: customer.data,\n          projects: projects.data,\n          loading: false,\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    }\n  }\n\n  updateCustomer = () => {\n    this.getCustomer();\n  };\n\n  componentDidMount() {\n    if (isPortalAdminOrSupport()) {\n      this.getCustomer();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      if (isPortalAdminOrSupport()) {\n        this.getCustomer();\n      }\n    }\n  }\n\n  render() {\n    if (!this.state.loading) {\n      if (isPortalAdminOrSupport()) {\n        if (Object.keys(this.state.customer).length !== 0) {\n          return (\n            <div>\n              <Tile>\n                <div className=\"bx--grid\">\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      <p>\n                        <strong>{i18n.t('customerDetails.id')}: </strong> {this.state.customer.id}\n                      </p>\n                      <p>\n                        <strong>{i18n.t('customerDetails.name')}: </strong> {this.state.customer.name}\n                      </p>\n                      <p>\n                        <strong>{i18n.t('customerDetails.notes')}: </strong> {this.state.customer.notes}\n                      </p>\n                    </div>\n                    <div className=\"bx--col\">\n                      <p>\n                        <strong>{i18n.t('customerDetails.contactName')}: </strong> {this.state.customer.contactName}\n                      </p>\n                      <p>\n                        <strong>{i18n.t('customerDetails.contactPhone')}: </strong> {this.state.customer.contactPhone}\n                      </p>\n                      <p>\n                        <strong>{i18n.t('customerDetails.contactEmail')}: </strong> {this.state.customer.contactEmail}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </Tile>\n              <CustomerDataTable serviceUrl={this.props.serviceUrl} customerNumber={this.state.customer.id} locale={this.props.locale} />\n            </div>\n          );\n        } else {\n          return <p>{i18n.t('userMessages.loading')}...</p>;\n        }\n      } else {\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\n      }\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(CustomerProjectList);\n","import React, { Component } from 'react';\r\nimport { HashRouter, Route, Switch } from 'react-router-dom';\r\nimport AdminDashboard from './Admin/AdminDashboard';\r\nimport Subscription from './SubscriptionDetails/subscription';\r\nimport withKeycloak from '../auth/withKeycloak';\r\nimport { AuthenticatedView, UnauthenticatedView } from '../auth/KeycloakViews';\r\nimport { isPortalUser } from '../api/helpers';\r\nimport CustomerProjectList from './Customer/CustomerProjectList';\r\nimport i18n from '../i18n';\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    if (authenticated) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { keycloak } = this.props;\r\n    const authenticated = keycloak.initialized && keycloak.authenticated;\r\n\r\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\r\n\r\n    if (authenticated && changedAuth) {\r\n      this.setState({\r\n        loading: false,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var { keycloak } = this.props;\r\n\r\n    if (!this.state.loading) {\r\n      if (isPortalUser()) {\r\n        return (\r\n          <div id=\"entando-customer-portal\">\r\n            <AuthenticatedView keycloak={keycloak}>\r\n              <HashRouter>\r\n                <Switch>\r\n                  <Route\r\n                    path={'**/customer-details/:id'}\r\n                    render={props => <CustomerProjectList {...props} serviceUrl={this.props.serviceUrl} locale={this.props.locale} />}\r\n                  />\r\n                  <Route\r\n                    path={'**/subscription-details/:id'}\r\n                    render={props => <Subscription {...props} serviceUrl={this.props.serviceUrl} locale={this.props.locale} />}\r\n                  />\r\n                  <Route\r\n                    path=\"**/\"\r\n                    render={props => <AdminDashboard {...props} serviceUrl={this.props.serviceUrl} locale={this.props.locale} />}\r\n                  />\r\n                </Switch>\r\n              </HashRouter>\r\n            </AuthenticatedView>\r\n            <UnauthenticatedView keycloak={keycloak}>\r\n              <p>{i18n.t('userMessages.unauthorized')}</p>\r\n            </UnauthenticatedView>\r\n          </div>\r\n        );\r\n      } else {\r\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\r\n      }\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default withKeycloak(App);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\nimport App from '../components/App';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AppElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <App serviceUrl={serviceUrl} locale={locale} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('app-element', AppElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport TicketList from '../components/SubscriptionDetails/TicketList';\r\nimport '../index.scss';\r\n//import './dashboard.css'\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass TicketListCustomerElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <TicketList serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('ticket-list-widget', TicketListCustomerElement);\r\n","import React, { Component } from 'react';\nimport i18n from '../../../i18n';\nimport { Form, TextInput, Select, SelectItem, Button } from 'carbon-components-react';\nimport {\n  apiTicketingSystemPost,\n  apiTicketingSystemsGet,\n  apiTicketingSystemPut,\n  apiTicketingSystemDelete,\n} from '../../../api/ticketingsystem';\nimport { isPortalAdmin } from '../../../api/helpers';\nimport withKeycloak from '../../../auth/withKeycloak';\n\nclass TicketingSystem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ticketingSystem: '',\n      ticketingSystemType: 'Jira',\n      url: '',\n      serviceAccount: '',\n      serviceAccountSecret: '',\n      systemId: '',\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async createTicketingSystem() {\n    const ticketingSystem = {\n      url: this.state.url,\n      serviceAccount: this.state.serviceAccount,\n      serviceAccountSecret: this.state.serviceAccountSecret,\n      systemId: this.state.systemId,\n    };\n    return await apiTicketingSystemPost(this.props.serviceUrl, ticketingSystem);\n  }\n\n  async updateTicketingSystem() {\n    const ticketingSystem = {\n      id: this.state.ticketingSystem.id,\n      url: this.state.url,\n      serviceAccount: this.state.serviceAccount,\n      serviceAccountSecret: this.state.serviceAccountSecret,\n      systemId: this.state.systemId,\n    };\n    return await apiTicketingSystemPut(this.props.serviceUrl, ticketingSystem);\n  }\n\n  async getTicketingSystems() {\n    const ticketingSystems = await apiTicketingSystemsGet(this.props.serviceUrl);\n    if (ticketingSystems.data.length > 0) {\n      const currentTicketingSystem = ticketingSystems.data[ticketingSystems.data.length - 1];\n\n      this.setState({\n        ticketingSystem: currentTicketingSystem,\n        url: currentTicketingSystem.url,\n        serviceAccount: currentTicketingSystem.serviceAccount,\n        serviceAccountSecret: currentTicketingSystem.serviceAccountSecret,\n        systemId: currentTicketingSystem.systemId,\n      });\n    }\n  }\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      this.getTicketingSystems();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      this.getTicketingSystems();\n    }\n  }\n\n  async deleteTicketingSystem() {\n    return await apiTicketingSystemDelete(this.props.serviceUrl, this.state.ticketingSystem.id);\n  }\n\n  handleDelete() {\n    if (window.confirm('Are you sure you want to delete this ticketing system?')) {\n      this.deleteTicketingSystem()\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.deleted'),\n            submitColour: '#24a148',\n          });\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  }\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    if (this.state.ticketingSystem === '') {\n      this.createTicketingSystem()\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.created'),\n            submitColour: '#24a148',\n          });\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    } else {\n      this.updateTicketingSystem()\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.updated'),\n            submitColour: '#24a148',\n          });\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  render() {\n    const ticketingSystem = ['Jira'];\n    if (isPortalAdmin()) {\n      return (\n        <div className=\"cp-form\">\n          <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n          <Form onSubmit={this.handleFormSubmit}>\n            <div className=\"bx--grid\">\n              <div className=\"bx--row\">\n                <div className=\"bx--col\">\n                  <Select\n                    id=\"ticketingSystemType\"\n                    name=\"ticketingSystemType\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.selectBackendTicketingSystem')}\n                    value={this.state.ticketingSystemType}\n                    onChange={this.handleChanges}\n                  >\n                    <SelectItem text={i18n.t('adminConfig.integrationTicketingSystem.select')} value=\"ticketing-system\" />\n                    {ticketingSystem.map((ticketingSystem, i) => (\n                      <SelectItem key={i} text={ticketingSystem} value={ticketingSystem}>\n                        {ticketingSystem}\n                      </SelectItem>\n                    ))}\n                  </Select>\n                  <TextInput\n                    id=\"serviceAccount\"\n                    name=\"serviceAccount\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.userName')}\n                    value={this.state.serviceAccount}\n                    onChange={this.handleChanges}\n                  />\n                  <TextInput\n                    id=\"systemId\"\n                    name=\"systemId\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.projectName')}\n                    value={this.state.systemId}\n                    onChange={this.handleChanges}\n                  />\n                </div>\n                <div className=\"bx--col\">\n                  <TextInput\n                    id=\"url\"\n                    name=\"url\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.url')}\n                    value={this.state.url}\n                    onChange={this.handleChanges}\n                  />\n                  <TextInput\n                    id=\"serviceAccountSecret\"\n                    name=\"serviceAccountSecret\"\n                    type=\"password\"\n                    labelText={i18n.t('adminConfig.integrationTicketingSystem.password')}\n                    value={this.state.serviceAccountSecret}\n                    onChange={this.handleChanges}\n                  />\n                </div>\n              </div>\n              <Button kind=\"primary\" tabIndex={0} type=\"submit\">\n                {' '}\n                {i18n.t('buttons.submit')}{' '}\n              </Button>\n              {this.state.ticketingSystem ? (\n                <Button kind=\"danger\" onClick={() => this.handleDelete()}>\n                  {' '}\n                  Delete{' '}\n                </Button>\n              ) : null}\n            </div>\n          </Form>\n        </div>\n      );\n    }\n    // Unauthorized\n    else {\n      return <p>{i18n.t('userMessages.unauthorized')}</p>;\n    }\n  }\n}\n\nexport default withKeycloak(TicketingSystem);\n","import { getDefaultOptions, request } from './helpers';\r\n\r\nconst resource = 'api/entando-versions';\r\n\r\nexport const apiProductVersionsGet = async serviceUrl => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionGet = async (serviceUrl, versionId) => {\r\n  const url = `${serviceUrl}/${resource}/${versionId}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiUpdateProductVersionsStatus = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionPost = async (serviceUrl, productVersion) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: productVersion ? JSON.stringify(productVersion) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionPut = async (serviceUrl, productVersion) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: productVersion ? JSON.stringify(productVersion) : null,\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nexport const apiProductVersionDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return request(url, options);\r\n};\r\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport { ModalWrapper, Form, TextInput, DatePicker, DatePickerInput } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiProductVersionPost } from '../../api/productVersion';\nimport moment from 'moment';\n\nclass AddProductVersionModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      name: '',\n      startDate: '',\n      endDate: '',\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n    };\n\n    this.baseState = this.state;\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    //name\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    if (typeof this.state.startDate !== 'undefined') {\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n        formIsValid = false;\n        invalid['startDate'] = true;\n      }\n    }\n\n    if (typeof this.state.endDate !== 'undefined') {\n      if (!this.state.endDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n        formIsValid = false;\n        invalid['endDate'] = true;\n      }\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  async addProductVersion() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      return await apiProductVersionPost(this.props.serviceUrl, this.state);\n    }\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      this.addProductVersion()\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.added'),\n            submitColour: '#24a148',\n          });\n          this.props.updateProductVersions();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  clearValues = () => {\n    const customerModalElement = document.querySelector('#modal-form-product-version');\n    if (!customerModalElement.className.includes('is-visible')) {\n      this.setState(this.baseState);\n    }\n  };\n\n  handleStartDateChange = date => {\n    this.setState({\n      startDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\n    });\n  };\n\n  handleEndDateChange = date => {\n    this.setState({\n      endDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\n    });\n  };\n\n  componentDidMount() {\n    const modalOpenButton = document.querySelector('.add-product-version-button');\n    modalOpenButton.addEventListener('click', this.clearValues, false);\n  }\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n      </div>\n    )\n    const modalId = \"modal-form-product-version\"\n    return (\n      <ModalWrapper\n        buttonTriggerText={i18n.t('buttons.addProductVersion')}\n        modalHeading={i18n.t('adminDashboard.addProductVersion.title')}\n        buttonTriggerClassName=\"add-product-version bx--btn bx--btn--tertiary add-product-version-button\"\n        className=\"modal-form\"\n        id={modalId}\n        handleSubmit={this.handleFormSubmit}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit}>\n            <TextInput\n              id={\"name\" + modalId}\n              name=\"name\"\n              labelText={i18n.t('adminDashboard.addProductVersion.productVersion')}\n              value={this.state.name}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['name']}\n            />\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}>\n              <DatePickerInput\n                id={\"startDate\" + modalId}\n                name=\"startDate\"\n                placeholder=\"mm/dd/yyyy\"\n                labelText={i18n.t('adminDashboard.addProductVersion.productVersionStartDate')}\n                value={this.state.startDate}\n                //onChange={this.handleChanges}\n                type=\"text\"\n                invalidText={i18n.t('validation.invalid.date')}\n                invalid={this.state.invalid['startDate']}\n              />\n            </DatePicker>\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleEndDateChange}>\n              <DatePickerInput\n                id={\"endDate\" + modalId}\n                name=\"endDate\"\n                placeholder=\"mm/dd/yyyy\"\n                labelText={i18n.t('adminDashboard.addProductVersion.productVersionEndDate')}\n                value={this.state.endDate}\n                type=\"text\"\n                invalidText={i18n.t('validation.invalid.date')}\n                invalid={this.state.invalid['endDate']}\n              />\n            </DatePicker>\n          </Form>\n        </div>\n        {modalConfirmation}\n      </ModalWrapper>\n    );\n  }\n}\n\nexport default withKeycloak(AddProductVersionModal);\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport { ModalWrapper, Form, TextInput, DatePicker, DatePickerInput } from 'carbon-components-react';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiProductVersionGet, apiProductVersionPut } from '../../api/productVersion';\nimport moment from 'moment';\n\nclass EditVersionModal extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      name: '',\n      startDate: '',\n      endDate: '',\n      invalid: {},\n      modalId: '',\n      buttonId: '',\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    //name\n    if (this.state.name === '') {\n      formIsValid = false;\n      invalid['name'] = true;\n    }\n\n    if (typeof this.state.startDate !== 'undefined') {\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n        formIsValid = false;\n        invalid['startDate'] = true;\n      }\n    }\n\n    if (typeof this.state.endDate !== 'undefined') {\n      if (!this.state.endDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n        formIsValid = false;\n        invalid['endDate'] = true;\n      }\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      this.getVersionDetails();\n    }\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  handleStartDateChange = date => {\n    this.setState({\n      startDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\n    });\n  };\n\n  handleEndDateChange = date => {\n    this.setState({\n      endDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\n    });\n  };\n\n  async getVersionDetails() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      const version = await apiProductVersionGet(this.props.serviceUrl, this.props.version.id);\n      this.setState({\n        name: version.data.name,\n        startDate: moment(version.data.startDate).format('MM/DD/YYYY'),\n        endDate: moment(version.data.endDate).format('MM/DD/YYYY'),\n        modalId: 'modal-form-version-edit-' + version.data.id,\n        buttonId: 'edit-version-button-' + version.data.id,\n      });\n    }\n  }\n\n  async versionPut(version) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      return await apiProductVersionPut(this.props.serviceUrl, version);\n    }\n  }\n\n  handleFormSubmit = () => {\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      const version = {\n        id: this.props.version.id,\n        name: this.state.name,\n        startDate: moment(this.state.startDate).format(),\n        endDate: moment(this.state.endDate).format(),\n      };\n      this.versionPut(version)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.updated'),\n            submitColour: '#24a148',\n          });\n          this.props.updateProductVersions();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      this.getVersionDetails();\n      const modalOpenButton = document.querySelector('.edit-version-button-' + this.props.version.id);\n      modalOpenButton.addEventListener('click', this.clearValues, false);\n    }\n  }\n\n  render() {\n    const modalConfirmation = (\n      <div className=\"bx--modal-header\">\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n      </div>\n    )\n    const buttonClassName = 'bx--btn bx--btn--ghost edit-version-button-' + this.props.version.id;\n    const modalId = this.state.modalId\n    return (\n      <ModalWrapper\n        buttonTriggerText={i18n.t('buttons.edit')}\n        modalHeading={i18n.t('adminDashboard.addProject.editTitle')}\n        buttonTriggerClassName={buttonClassName}\n        className=\"modal-form\"\n        id={this.state.modalId}\n        handleSubmit={this.handleFormSubmit}\n        primaryButtonText={i18n.t('modalText.save')}\n        secondaryButtonText={i18n.t('modalText.cancel')}\n      >\n        {modalConfirmation}\n        <div className=\"form-container\">\n          <Form onSubmit={this.handleFormSubmit}>\n            <TextInput\n              id={\"name\" + modalId}\n              name=\"name\"\n              labelText={i18n.t('adminDashboard.addProject.projectName') + ' *'}\n              value={this.state.name}\n              onChange={this.handleChanges}\n              invalidText={i18n.t('validation.invalid.required')}\n              invalid={this.state.invalid['name']}\n            />\n            <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange} value={this.state.startDate}>\n              <DatePickerInput\n                id={\"startDate\" + modalId}\n                name=\"startDate\"\n                placeholder=\"mm/dd/yyyy\"\n                labelText={i18n.t('subscriptionDetails.startDate') + ' *'}\n                onChange={this.handleChanges}\n                type=\"text\"\n                invalidText={i18n.t('validation.invalid.date')}\n                invalid={this.state.invalid['startDate']}\n              />\n            </DatePicker>\n            <DatePicker\n              dateFormat=\"m/d/Y\"\n              datePickerType=\"single\"\n              onChange={this.handleEndDateChange}\n              id={\"endDate\"+modalId}\n              name=\"endDate\"\n              value={this.state.endDate}\n            >\n              <DatePickerInput\n                id={\"endDate\"+modalId}\n                name=\"endDate\"\n                placeholder=\"mm/dd/yyyy\"\n                labelText={i18n.t('subscriptionDetails.endDate') + ' *'}\n                onChange={this.handleChanges}\n                type=\"text\"\n                invalidText={i18n.t('validation.invalid.date')}\n                invalid={this.state.invalid['endDate']}\n              />\n            </DatePicker>\n          </Form>\n        </div>\n        {modalConfirmation}\n      </ModalWrapper>\n    );\n  }\n}\n\nexport default withKeycloak(EditVersionModal);\n","import React, { Component } from 'react';\nimport i18n from '../../../i18n';\nimport {\n  DataTable,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell,\n  Toggle,\n  Button,\n} from 'carbon-components-react';\nimport { apiProductVersionDelete, apiProductVersionsGet, apiUpdateProductVersionsStatus } from '../../../api/productVersion';\nimport withKeycloak from '../../../auth/withKeycloak';\nimport AddProductVersionModal from '../AddProductVersionModal';\nimport { isPortalAdminOrSupport } from '../../../api/helpers';\nimport EditVersionModal from '../EditVersionModal';\n\nclass ProductVersion extends Component {\n  constructor() {\n    super();\n    this.state = {\n      data: '',\n    };\n  }\n\n  componentDidMount() {\n    if (isPortalAdminOrSupport()) {\n      this.getProductVersions();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      if (isPortalAdminOrSupport()) {\n        this.getProductVersions();\n      }\n    }\n  }\n\n  async getProductVersions() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      const productVersions = await apiProductVersionsGet(this.props.serviceUrl);\n\n      this.setState({\n        data: productVersions,\n      });\n    }\n  }\n\n  async deleteVersion(id) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      return await apiProductVersionDelete(this.props.serviceUrl, id);\n    }\n  }\n\n  handleDeleteVersion = (e, id) => {\n    e.preventDefault();\n    if (window.confirm('Are you sure you want to delete this Entando version?')) {\n      this.deleteVersion(id)\n        .then(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.deleted'),\n            submitColour: '#24a148',\n          });\n          this.updateProductVersions();\n        })\n        .catch(() => {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        });\n    }\n  };\n\n  updateProductVersions = () => {\n    this.getProductVersions();\n  };\n\n  async handleToggleChange(id) {\n    await apiUpdateProductVersionsStatus(this.props.serviceUrl, id);\n  }\n\n  render() {\n    if (isPortalAdminOrSupport()) {\n      return (\n        <div>\n          <DataTable rows={rowData} headers={headerData}>\n            {({ rows, headers, getHeaderProps, getTableProps }) => (\n              <TableContainer>\n                <Table {...getTableProps()}>\n                  <TableHead>\n                    <TableRow>\n                      {headers.map(header => (\n                        <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>\n                      ))}\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                    {Object.keys(this.state.data).length !== 0\n                      ? this.state.data.data.map((productVersion, index) => (\n                          <TableRow key={index}>\n                            <TableCell>{productVersion.name}</TableCell>\n                            <TableCell>\n                              <Toggle size=\"sm\"\n                                onClick={() => this.handleToggleChange(productVersion.id)}\n                                aria-label=\"toggle button\"\n                                id=\"toggle{productVersion.id}\"\n                                defaultToggled={productVersion.status}\n                              />\n                            </TableCell>\n                            <TableCell>{productVersion.startDate}</TableCell>\n                            <TableCell>{productVersion.endDate}</TableCell>\n                            <TableCell>\n                              <div style={{ display: 'flex' }}>\n                                <EditVersionModal\n                                  key={productVersion.id}\n                                  version={productVersion}\n                                  serviceUrl={this.props.serviceUrl}\n                                  updateProductVersions={this.updateProductVersions}\n                                />\n                                <Button\n                                  kind=\"ghost\"\n                                  onClick={e => this.handleDeleteVersion(e, productVersion.id)}\n                                  style={{ display: 'flex', width: '100%', color: 'red' }}\n                                >\n                                  {i18n.t('buttons.delete')}\n                                </Button>\n                              </div>\n                            </TableCell>\n                          </TableRow>\n                        ))\n                      : null}\n                  </TableBody>\n                </Table>\n              </TableContainer>\n            )}\n          </DataTable>\n          <br />\n          <AddProductVersionModal serviceUrl={this.props.serviceUrl} updateProductVersions={this.updateProductVersions} />\n        </div>\n      );\n    } else {\n      return <p>{i18n.t('userMessages.unauthorized')}</p>;\n    }\n  }\n}\n\nconst headerData = [\n  {\n    header: i18n.t('adminConfig.manageProductVersion.entandoVersion'),\n    key: 'entVersion',\n  },\n  {\n    header: i18n.t('adminConfig.manageProductVersion.status'),\n    key: 'status',\n  },\n  {\n    header: i18n.t('adminConfig.manageProductVersion.startDate'),\n    key: 'startDate',\n  },\n  {\n    header: i18n.t('adminConfig.manageProductVersion.supportEndDate'),\n    key: 'endDate',\n  },\n  {\n    header: i18n.t('customerDashboard.action'),\n    key: 'action',\n  },\n];\n\nconst rowData = [\n  {\n    id: 'a',\n    entVersion: '5.2',\n    status: <Toggle size=\"sm\" aria-label=\"toggle button\" defaultToggled id=\"status-1\" />,\n    startDate: 'April, 2018',\n    endDate: 'April, 2022',\n  },\n  {\n    id: 'b',\n    entVersion: '6.3',\n    status: <Toggle size=\"sm\"  aria-label=\"toggle button\" id=\"status-2\" />,\n    startDate: 'Jile, 2019',\n    endDate: 'April, 2023',\n  },\n  {\n    id: 'c',\n    entVersion: '6.2',\n    status: <Toggle size=\"sm\"  aria-label=\"toggle button\" defaultToggled id=\"status-3\" />,\n    startDate: 'September, 2020',\n    endDate: 'April, 2024',\n  },\n];\n\nexport default withKeycloak(ProductVersion);\n","import React from 'react';\nimport i18n from '../../../i18n';\nimport { Accordion, AccordionItem, Tile } from 'carbon-components-react';\nimport TicketingSystem from './TicketingSystem';\nimport ProductVersion from './ProductVersion';\nimport { isPortalAdmin } from '../../../api/helpers';\nimport withKeycloak from '../../../auth/withKeycloak';\n\nclass AdminConfiguration extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n    };\n    this.adminConfig = [\n      {\n        label: (\n          <div>\n            <p className=\"title\">{i18n.t('adminConfig.integrationTicketingSystem.title')}</p>\n            <p className=\"desc\">{i18n.t('adminConfig.integrationTicketingSystem.desc')}</p>\n          </div>\n        ),\n        content: <TicketingSystem serviceUrl={this.props.serviceUrl} />,\n      },\n      {\n        label: (\n          <div>\n            <p className=\"title\">{i18n.t('adminConfig.manageProductVersion.title')}</p>\n            <p className=\"desc\">{i18n.t('adminConfig.manageProductVersion.desc')}</p>\n          </div>\n        ),\n        content: <ProductVersion serviceUrl={this.props.serviceUrl} />,\n      },\n    ];\n  }\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  render() {\n    if (!this.state.loading) {\n      // Authorized\n      if (isPortalAdmin()) {\n        return (\n          <div>\n            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\n            <div className=\"form-container\">\n              <Tile>\n                <p className=\"title\">{i18n.t('adminConfig.title')}</p>\n                <p className=\"desc\">{i18n.t('adminConfig.desc')}</p>\n              </Tile>\n              <Accordion>\n                {this.adminConfig.map((item, index) => (\n                  <AccordionItem key={index.toString()} index={index} title={item.label} description={item.description}>\n                    <div>{item.content}</div>\n                  </AccordionItem>\n                ))}\n              </Accordion>\n            </div>\n          </div>\n        );\n      }\n      // Unauthorized\n      else {\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\n      }\n    }\n    // Loading\n    else {\n      return null;\n    }\n  }\n}\nexport default withKeycloak(AdminConfiguration);\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AdminConfiguration from '../components/Admin/Configuration/AdminConfiguration';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url'\r\n};\r\n\r\nclass AdminConfigurationElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AdminConfiguration serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('admin-configuration-widget', AdminConfigurationElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport OpenTicket from '../components/Forms/openTicket';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass OpenTicketElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <OpenTicket serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('open-ticket-widget', OpenTicketElement);\r\n","import { getDefaultOptions, request, getUrl } from './helpers';\r\n\r\nconst resource = 'api/portal-users';\r\n\r\nexport const apiUserDelete = async (serviceUrl, id) => {\r\n  const url = `${serviceUrl}/${resource}/${id}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'DELETE',\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUsersPut = async (serviceUrl, user) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: user ? JSON.stringify(user) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUsersGet = async serviceUrl => {\r\n  const url = getUrl(`${serviceUrl}/${resource}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserGet = async (serviceUrl, userId) => {\r\n  const url = getUrl(`${serviceUrl}/${resource}/${userId}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserPost = async (serviceUrl, user) => {\r\n  const url = `${serviceUrl}/${resource}`;\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: user ? JSON.stringify(user) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiUserGetByUsername = async (serviceUrl, username) => {\r\n  const url = getUrl(`${serviceUrl}/${resource}/username/${username}`);\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET',\r\n  };\r\n\r\n  return await request(url, options);\r\n};\r\n","import { getDefaultKeycloakOptions, request, getUrl } from './helpers';\r\n\r\nexport const apiKeycloakUserGet = async (serviceUrl, realm) => {\r\n  const usersResource = `admin/realms/${realm}/users`;\r\n  const url = `${serviceUrl}/${usersResource}`;\r\n  const options = {\r\n    ...getDefaultKeycloakOptions(),\r\n    method: 'GET',\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nexport const apiKeycloakToken = async (serviceUrl, realm) => {\r\n  const tokenResource = `realms/${realm}/protocol/openid-connect/token`;\r\n  const url = getUrl(`${serviceUrl}/${tokenResource}`);\r\n  const keycloakBody = {\r\n    client_id: 'web_app',\r\n    username: 'admin',\r\n    password: 'admin',\r\n    grant_type: 'password',\r\n  };\r\n  const options = {\r\n    ...getDefaultKeycloakOptions(),\r\n    method: 'POST',\r\n    body: keycloakBody ? serialize(keycloakBody) : null,\r\n  };\r\n  return await request(url, options);\r\n};\r\n\r\nfunction serialize(obj) {\r\n  var str = [];\r\n  for (var p in obj)\r\n    if (obj.hasOwnProperty(p)) {\r\n      str.push(encodeURIComponent(p) + '=' + encodeURIComponent(obj[p]));\r\n    }\r\n  return str.join('&');\r\n}\r\n","import React, { Component } from 'react';\nimport { Form, Select, SelectItem, Button } from 'carbon-components-react';\nimport * as portalUserApi from '../../../api/portalusers';\nimport {apiAddUserToProject, apiProjectGet} from '../../../api/projects';\nimport withKeycloak from '../../../auth/withKeycloak';\nimport { apiKeycloakUserGet } from '../../../api/keycloak';\nimport i18n from '../../../i18n';\nclass AssignUser extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      project: null,\n      projectId: '',\n      assignUser: '',\n      users: new Map(),\n      invalid: {},\n      submitMsg: '',\n      submitColour: 'black',\n    };\n  }\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      this.fetchData(keycloak.authServerUrl);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      this.fetchData(keycloak.authServerUrl);\n    }\n  }\n\n  async fetchData(keycloakUrl) {\n    const {keycloak} = this.props;\n    const users = this.mapKeycloakUserEmails((await apiKeycloakUserGet(keycloakUrl, keycloak.realm)).data);\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    let projectId = params.get('project');\n    let project = null;\n    if (projectId != null) {\n      project = (await apiProjectGet(this.props.serviceUrl, projectId)).data;\n    } else {\n      projectId = '';\n    }\n\n    this.setState({\n      projectId: projectId,\n      project: project,\n      users: users\n    });\n  }\n\n  mapKeycloakUserEmails = keycloakUsers => {\n    const usernameEmailMap = new Map();\n    keycloakUsers.forEach(keycloakUser => usernameEmailMap.set(keycloakUser.username, keycloakUser.email));\n    return usernameEmailMap;\n  };\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n  };\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    const { projectId, assignUser } = this.state;\n    const formIsValid = this.handleFormValidation();\n\n    if (formIsValid) {\n      this.assignUserToProject(projectId, assignUser).then(res => {\n        if (res.status === 201) {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.updated'),\n            submitColour: '#24a148',\n          });\n        } else {\n          this.setState({\n            submitMsg: i18n.t('submitMessages.error'),\n            submitColour: '#da1e28',\n          });\n        }\n      });\n    }\n  };\n\n  handleFormValidation() {\n    let invalid = {};\n    let formIsValid = true;\n    const { projectId, assignUser } = this.state;\n\n    //name\n    if (projectId === '') {\n      formIsValid = false;\n      invalid['projectId'] = true;\n    }\n\n    //customerNumber\n    if (assignUser === '') {\n      formIsValid = false;\n      invalid['assignUser'] = true;\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  assignUserToProject = async (projectId, username) => {\n    const portalUserId = await this.getPortalUserId({ username, email: this.state.users.get(username) });\n    return await apiAddUserToProject(this.props.serviceUrl, projectId, portalUserId);\n  };\n\n  getPortalUserId = async keycloakUser => {\n    let portalUserId = null;\n    try {\n      const portalUser = await portalUserApi.apiUserGetByUsername(this.props.serviceUrl, keycloakUser.username);\n      portalUserId = portalUser.data.id;\n    } catch (e) {\n      if (e.message.toLowerCase().includes('not found')) {\n        const portalUser = await this.createPortalUser(keycloakUser);\n        portalUserId = portalUser.data.id;\n      }\n    }\n\n    return portalUserId;\n  };\n\n  createPortalUser = async keycloakUser => {\n    return await portalUserApi.apiUserPost(this.props.serviceUrl, { username: keycloakUser.username, email: keycloakUser.email });\n  };\n\n  setupFormComponents() {\n    const users = this.state.users;\n    const project = this.state.project;\n    let userList = null;\n    let projectList = null;\n\n    if (users.size > 0) {\n      userList = [...users.keys()].map((assignUser, i) => (\n        <SelectItem key={i} text={assignUser} value={assignUser}>\n          {assignUser}\n        </SelectItem>\n      ));\n      userList.unshift(<SelectItem key=\"-1\" text={i18n.t('manageUsers.assign.userList')} value=\"\"/>);\n    } else {\n      userList = <SelectItem text={i18n.t('manageUsers.assign.noUsers')} value=\"\"/>;\n    }\n\n    if (project != null) {\n      projectList = <SelectItem key={project.id} text={project.name} value={project.id}/>;\n    } else {\n      projectList = <SelectItem text={i18n.t('manageUsers.assign.noProjects')} value=\"\"/>;\n    }\n\n    return {userList, projectList};\n  }\n\n  render() {\n    const { userList, projectList } = this.setupFormComponents();\n\n    return (\n      <div>\n        <p style={{ color: this.state.submitColour }}>{this.state.submitMsg}</p>\n        <Form onSubmit={this.handleFormSubmit}>\n          <div className=\"bx--grid\">\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">\n                <Select\n                  id=\"projectId\"\n                  name=\"projectId\"\n                  labelText={i18n.t('manageUsers.assign.projectName')}\n                  value={this.state.projectId}\n                  onChange={this.handleChanges}\n                  invalidText={i18n.t('validation.invalid.required')}\n                  invalid={this.state.invalid['projectId']}\n                >\n                  {projectList}\n                </Select>\n              </div>\n            </div>\n            <div className=\"bx--row\">\n              <div className=\"bx--col\">\n                <Select\n                  id=\"assignUser\"\n                  name=\"assignUser\"\n                  labelText={i18n.t('manageUsers.assign.assignUser')}\n                  value={this.state.assignUser}\n                  onChange={this.handleChanges}\n                  invalidText={i18n.t('validation.invalid.required')}\n                  invalid={this.state.invalid['assignUser']}\n                >\n                  {userList}\n                </Select>\n              </div>\n            </div>\n            <Button kind=\"primary\" tabIndex={0} type=\"submit\">\n              {' '}\n              {i18n.t('buttons.submit')}{' '}\n            </Button>\n          </div>\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default withKeycloak(AssignUser);\n","import React, { Component } from 'react';\nimport {\n  DataTable,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell,\n  Button\n} from 'carbon-components-react';\nimport withKeycloak from '../../../auth/withKeycloak';\nimport i18n from '../../../i18n';\nimport {apiGetProjectUsers, apiDeleteUserFromProject} from \"../../../api/projects\";\n\nclass DeleteUser extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      users: [],\n      displayUsers: [],\n      projectId: '',\n    };\n    this.headerData = [\n      {\n        header: i18n.t('manageUsers.delete.userName'),\n        key: 'username',\n      },\n      {\n        header: i18n.t('manageUsers.delete.userEmail'),\n        key: 'email',\n      },\n      {\n        header: i18n.t('manageUsers.delete.userAccess'),\n        key: 'userAccess',\n      },\n    ];\n  }\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      this.fetchData();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      this.fetchData();\n    }\n  }\n\n  async fetchData() {\n    const {keycloak} = this.props;\n\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      let search = window.location.search;\n      const params = new URLSearchParams(search);\n      const projectId = params.get('project');\n      let users = [];\n      if (projectId != null) {\n        users = ((await apiGetProjectUsers(this.props.serviceUrl, projectId)).data);\n      }\n\n      this.setState({\n        users,\n        projectId\n      });\n\n      this.handleUserDisplay();\n    }\n  }\n\n  handleUserDisplay() {\n    const users = this.state.users;\n    const projectId = this.state.projectId;\n\n    const displayUsers = users.map(user => ({\n      id: user.username,\n      username: user.username,\n      email: user.email,\n      userAccess: (\n        <Button\n          kind=\"ghost\"\n          onClick={event => this.handleRemoveUser(user.id, projectId, event)}\n          style={{display: 'flex', width: '100%', color: 'red'}}\n        >\n          {i18n.t('manageUsers.delete.removeUser')}\n        </Button>\n      ),\n    }));\n\n    this.setState({\n      displayUsers,\n    });\n  }\n\n  handleRemoveUser = (userId, projectId, event) => {\n    event.preventDefault();\n\n    apiDeleteUserFromProject(this.props.serviceUrl, projectId, userId).then(res => {\n      if (res.status === 201) {\n        this.fetchData();\n      } else {\n        console.warn(\"Failed to delete user\", res);\n      }\n    });\n  };\n\n  render() {\n    return (\n      <DataTable rows={this.state.displayUsers} headers={this.headerData}>\n        {({ rows, headers, getHeaderProps, getTableProps }) => (\n          <TableContainer>\n            <Table {...getTableProps()}>\n              <TableHead>\n                <TableRow>\n                  {headers.map(header => (\n                    <TableHeader {...getHeaderProps({ header })}>{header.header}</TableHeader>\n                  ))}\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {rows.map(row => (\n                  <TableRow key={row.id}>\n                    {row.cells.map(cell => (\n                      <TableCell key={cell.id}>{cell.value}</TableCell>\n                    ))}\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        )}\n      </DataTable>\n    );\n  }\n}\n\nexport default withKeycloak(DeleteUser);\n","import React, { Component } from 'react';\nimport i18n from '../../../i18n';\nimport { Accordion, AccordionItem } from 'carbon-components-react';\nimport AssignUser from './AssignUser';\nimport DeleteUser from './DeleteUser';\nimport { isPortalAdmin } from '../../../api/helpers';\nimport withKeycloak from '../../../auth/withKeycloak';\n\nclass ManageUser extends Component {\n  userFunctionality;\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n    };\n    this.userFunctionality = [\n      {\n        label: (\n          <div>\n            <p className=\"title\">{i18n.t('manageUsers.manage.title')}</p>\n            <p className=\"desc\">{i18n.t('manageUsers.manage.desc')}</p>\n          </div>\n        ),\n        content: <DeleteUser serviceUrl={this.props.serviceUrl}/>,\n        open: true,\n      },\n      {\n        label: (\n          <div>\n            <p className=\"title\">{i18n.t('manageUsers.assign.title')}</p>\n            <p className=\"desc\">{i18n.t('manageUsers.assign.desc')}</p>\n          </div>\n        ),\n        content: <AssignUser serviceUrl={this.props.serviceUrl}/>,\n        open: true,\n      }\n    ];\n  }\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    if (authenticated) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  render() {\n    if (!this.state.loading) {\n      if (isPortalAdmin()) {\n        return (\n          <div>\n            <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\n            <div className=\"form-container\">\n              <Accordion>\n                {this.userFunctionality.map((item, index) => (\n                  <AccordionItem key={index.toString()} index={index} title={item.label} description={item.description} open={item.open}>\n                    {item.content}\n                  </AccordionItem>\n                ))}\n              </Accordion>\n            </div>\n          </div>\n        );\n      }\n      // Unauthorized\n      else {\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\n      }\n    }\n    // Loading\n    else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(ManageUser);\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ManageUser from '../components/Admin/ManageUser/ManageUser';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url'\r\n};\r\n\r\nclass ManageUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <ManageUser serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('manage-user-widget', ManageUserElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport AssignUser from '../components/Admin/ManageUser/AssignUser';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass AssignUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <AssignUser serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('assign-user-widget', AssignUserElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport DeleteUser from '../components/Admin/ManageUser/DeleteUser';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from '../custom-elements/widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass DeleteUserElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <DeleteUser serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('delete-user-widget', DeleteUserElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport TicketingSystem from '../components/Admin/Configuration/TicketingSystem';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass TicketingSystemElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <TicketingSystem serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('ticketing-system-widget', TicketingSystemElement);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ProductVersion from '../components/Admin/Configuration/ProductVersion';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass ProductVersionElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <ProductVersion serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('product-version-widget', ProductVersionElement);\r\n","import React, { Component } from 'react';\nimport i18n from '../../i18n';\nimport {Form, TextInput, Select, SelectItem, Button, DatePicker, DatePickerInput} from 'carbon-components-react';\nimport {apiGetProjectIdsAndNames, apiGetMyProjectIdNames} from '../../api/projects';\nimport withKeycloak from '../../auth/withKeycloak';\nimport { apiProjectSubscriptionPost, apiRenewSubscription } from '../../api/subscriptions';\nimport { apiProductVersionsGet } from '../../api/productVersion';\nimport { isPortalAdmin, isPortalAdminOrSupport, isPortalCustomer, isPortalPartner, isPortalSupport, isPortalUser } from '../../api/helpers';\nimport { apiAddSubscriptionToProject } from '../../api/projects';\nimport moment from 'moment';\n\nconst subscriptionLevel = {\n  GOLD: 'Gold',\n  PLATINUM: 'Platinum',\n};\n\nconst subscriptionStatus = {\n  requested: 'REQUESTED',\n  pending: 'PENDING',\n  active: 'ACTIVE',\n  expired: 'EXPIRED',\n};\n\nconst subscriptionTypes = ['New', 'Existing'];\n\nclass SubscriptionForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      subscriptionType: '',\n      projectId: '',\n      startDate: '',\n      subscriptionLevel: '',\n      subscriptionLength: '',\n      entandoVersionId: '',\n      invalid: {},\n      projects: {},\n      productVersions: [],\n      selectedProjectId: '',\n      submitSuccess: false,\n      submitError: false,\n      submitColour: 'black',\n    };\n  }\n\n  componentDidMount() {\n    const { keycloak } = this.props;\n\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n    if (authenticated) {\n      if (isPortalUser()) {\n        this.fetchData();\n      }\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { keycloak } = this.props;\n    const authenticated = keycloak.initialized && keycloak.authenticated;\n\n    const changedAuth = prevProps.keycloak.authenticated !== authenticated;\n\n    if (authenticated && changedAuth) {\n      if (isPortalUser()) {\n        this.fetchData();\n      }\n      this.setState({\n        loading: false,\n      });\n    }\n  }\n\n  async fetchData() {\n    const serviceUrl = this.props.serviceUrl;\n    var projects = '';\n    if (isPortalAdminOrSupport()) {\n      projects = (await apiGetProjectIdsAndNames(serviceUrl)).data;\n    } else {\n      projects = (await apiGetMyProjectIdNames(serviceUrl)).data;\n    }\n    const productVersions = (await apiProductVersionsGet(serviceUrl)).data;\n\n    let search = window.location.search;\n    let params = new URLSearchParams(search);\n    let projectParam = params.get('project');\n\n    if (projectParam) {\n      Object.keys(projects).forEach((id) => {\n        if (id !== projectParam) {\n          delete projects[id];\n        }\n      });\n      if (Object.keys(projects).length === 1) {\n        this.setState({\n          projectId: Object.keys(projects)[0],\n        });\n      }\n    }\n\n    this.setState({\n      projects,\n      productVersions,\n    });\n  }\n\n  isNumeric(str) {\n    if (typeof str != 'string') return false;\n    return !isNaN(str) && !isNaN(parseFloat(str));\n  }\n\n  handleValidation() {\n    let invalid = {};\n    let formIsValid = true;\n\n    if (this.state.subscriptionType === '') {\n      formIsValid = false;\n      invalid['subscriptionType'] = true;\n    }\n\n    if (this.state.projectId === '') {\n      formIsValid = false;\n      invalid['projectId'] = true;\n    }\n\n    if (typeof this.state.startDate !== 'undefined') {\n      if (!this.state.startDate.match(/^(0[1-9]|1[0-2])\\/(0[1-9]|1\\d|2\\d|3[01])\\/(19|20)\\d{2}$/)) {\n        formIsValid = false;\n        invalid['startDate'] = true;\n      }\n    }\n\n    if (this.state.subscriptionLength === '' || !this.isNumeric(this.state.subscriptionLength)) {\n      formIsValid = false;\n      invalid['subscriptionLength'] = true;\n    }\n\n    if (this.state.subscriptionLevel === '') {\n      formIsValid = false;\n      invalid['level'] = true;\n    }\n\n    if (this.state.entandoVersionId === '') {\n      formIsValid = false;\n      invalid['entandoVersionId'] = true;\n    }\n\n    this.setState({ invalid: invalid });\n    return formIsValid;\n  }\n\n  handleChanges = e => {\n    const input = e.target;\n    const name = input.name;\n    const value = input.value;\n    this.setState({ [name]: value });\n    this.setState({\n      submitSuccess: false,\n      submitError: false,\n    });\n  };\n\n  handleStartDateChange = date => {\n    if (date !== '') {\n      this.setState({\n        startDate: moment(date[0].toISOString()).format('MM/DD/YYYY'),\n      });\n    }\n  };\n\n  handleFormSubmit = event => {\n    event.preventDefault();\n    this.setState({\n      submitSuccess: false,\n      submitError: false,\n    });\n    const formIsValid = this.handleValidation();\n\n    if (formIsValid) {\n      if (this.state.subscriptionType === 'new') {\n        this.newSubscription()\n          .then(res => {\n            apiAddSubscriptionToProject(this.props.serviceUrl, this.state.projectId, res.data.id);\n            this.setState({\n              submitSuccess: true,\n              submitError: false,\n              submitColour: '#24a148',\n            });\n          })\n          .catch(err => {\n            this.setState({\n              submitSuccess: false,\n              submitError: true,\n              submitColour: '#da1e28',\n            });\n          });\n      } else if (this.state.subscriptionType === 'existing') {\n        this.renewSubscription()\n          .then(res => {\n            apiAddSubscriptionToProject(this.props.serviceUrl, this.state.projectId, res.data.id);\n            this.setState({\n              submitSuccess: true,\n              submitError: false,\n              submitColour: '#24a148',\n            });\n          })\n          .catch(err => {\n            this.setState({\n              submitSuccess: false,\n              submitError: true,\n              submitColour: '#da1e28',\n            });\n          });\n      }\n    }\n  };\n\n  async newSubscription() {\n    const subscriptionRequest = {\n      entandoVersionId: this.state.entandoVersionId,\n      projectId: this.state.projectId,\n      projectSubscription: {\n        startDate: new Date(this.state.startDate),\n        lengthInMonths: this.state.subscriptionLength,\n        level: this.state.subscriptionLevel,\n        status: this.subscriptionStatus(),\n      },\n    };\n\n    return await apiProjectSubscriptionPost(this.props.serviceUrl, subscriptionRequest);\n  }\n\n  async renewSubscription() {\n    const subscriptionRequest = {\n      entandoVersionId: this.state.entandoVersionId,\n      projectId: this.state.projectId,\n      projectSubscription: {\n        startDate: new Date(this.state.startDate),\n        lengthInMonths: this.state.subscriptionLength,\n        level: this.state.subscriptionLevel,\n        status: this.subscriptionStatus(),\n      },\n    };\n\n    return await apiRenewSubscription(this.props.serviceUrl, subscriptionRequest);\n  }\n\n  subscriptionStatus() {\n    return isPortalAdmin() ? subscriptionStatus.active : subscriptionStatus.requested;\n  }\n\n  setupFormComponents() {\n    const projectIdsNames = this.state.projects;\n    let projectList;\n\n    if (projectIdsNames != null && Object.keys(projectIdsNames).length > 0) {\n      projectList = Object.keys(projectIdsNames).map((projectId, i) => (\n        <SelectItem key={i} text={projectIdsNames[projectId]} value={projectId}>\n          {projectIdsNames[projectId]}\n        </SelectItem>\n      ));\n      if (Object.keys(projectIdsNames).length > 1) {\n        projectList.unshift(<SelectItem key=\"-1\" text={i18n.t('manageUsers.assign.projectList')} value=\"\" />);\n      }\n    } else {\n      projectList = <SelectItem text={i18n.t('manageUsers.assign.noProjects')} value=\"\" />;\n    }\n\n    const subscriptionLevelList = Object.entries(subscriptionLevel).map(([key, value]) => (\n      <SelectItem key={key} text={value} value={key}>\n        {value}\n      </SelectItem>\n    ));\n    subscriptionLevelList.unshift(<SelectItem key=\"-1\" text={i18n.t('subscriptionForm.chooseLevel')} value=\"\" />);\n\n    const versionList = this.state.productVersions.map(version => {\n      // only allow the user to choose from active entando versions\n      if (version.status) {\n        return (\n          <SelectItem key={version.id} text={version.name} value={version.id}>\n            {version.name}\n          </SelectItem>\n        );\n      } else {\n        return null;\n      }\n    });\n    versionList.unshift(<SelectItem key=\"-1\" text={i18n.t('subscriptionForm.chooseVersion')} value=\"\" />);\n\n    return { projectList, subscriptionLevelList, versionList };\n  }\n\n  renderForm() {\n    const formComponents = this.setupFormComponents();\n    const { projectList, subscriptionLevelList, versionList } = formComponents;\n    let formInputs;\n\n    if (this.state.subscriptionType === 'new') {\n      formInputs = (\n        <div>\n          <p>\n            <strong>{i18n.t('subscriptionForm.newSubscription')}</strong>\n          </p>\n          <br />\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">\n              <Select\n                id=\"projectId\"\n                name=\"projectId\"\n                labelText={i18n.t('subscriptionForm.projectName')}\n                value={this.state.projectId}\n                onChange={this.handleChanges}\n                invalidText={i18n.t('validation.invalid.required')}\n                invalid={this.state.invalid['projectId']}\n              >\n                {projectList}\n              </Select>\n              <Select\n                id=\"subscriptionLevel\"\n                name=\"subscriptionLevel\"\n                labelText={i18n.t('subscriptionForm.desiredSubscriptionLevel') + ' *'}\n                value={this.state.subscriptionLevel}\n                onChange={this.handleChanges}\n                invalidText={i18n.t('validation.invalid.required')}\n                invalid={this.state.invalid['level']}\n              >\n                {subscriptionLevelList}\n              </Select>\n              <Select\n                id=\"entandoVersionId\"\n                name=\"entandoVersionId\"\n                labelText={i18n.t('subscriptionForm.entandoVersion') + ' *'}\n                value={this.state.entandoVersionId}\n                onChange={this.handleChanges}\n                invalidText={i18n.t('validation.invalid.required')}\n                invalid={this.state.invalid['entandoVersionId']}\n              >\n                {versionList}\n              </Select>\n            </div>\n            <div className=\"bx--col\">\n              <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}>\n                <DatePickerInput\n                  id=\"startDate\"\n                  name=\"startDate\"\n                  placeholder=\"mm/dd/yyyy\"\n                  labelText={i18n.t('subscriptionForm.desiredSubscriptionStartDate')}\n                  value={this.state.startDate}\n                  //onChange={this.handleChanges}\n                  type=\"text\"\n                  invalidText={i18n.t('validation.invalid.date')}\n                  invalid={this.state.invalid['startDate']}\n                />\n              </DatePicker>\n              <TextInput\n                id=\"subscriptionLength\"\n                name=\"subscriptionLength\"\n                labelText={i18n.t('subscriptionForm.desiredSubscriptionLength') + ' *'}\n                value={this.state.subscriptionLength}\n                onChange={this.handleChanges}\n                invalidText={i18n.t('validation.invalid.number')}\n                invalid={this.state.invalid['subscriptionLength']}\n              />\n            </div>\n          </div>\n        </div>\n      );\n    } else if (this.state.subscriptionType === 'existing') {\n      formInputs = (\n        <div>\n          <p>\n            <strong>{i18n.t('subscriptionForm.renewSubscription')}</strong>\n          </p>\n          <br />\n          <div className=\"bx--row\">\n            <div className=\"bx--col\">\n              <Select\n                id=\"projectId\"\n                name=\"projectId\"\n                labelText={i18n.t('subscriptionForm.projectName')}\n                value={this.state.projectId}\n                onChange={this.handleChanges}\n                invalidText={i18n.t('validation.invalid.required')}\n                invalid={this.state.invalid['projectId']}\n              >\n                {projectList}\n              </Select>\n              <Select\n                id=\"subscriptionLevel\"\n                name=\"subscriptionLevel\"\n                labelText={i18n.t('subscriptionForm.desiredSubscriptionLevel') + ' *'}\n                value={this.state.subscriptionLevel}\n                onChange={this.handleChanges}\n                invalidText={i18n.t('validation.invalid.required')}\n                invalid={this.state.invalid['level']}\n              >\n                {subscriptionLevelList}\n              </Select>\n              <Select\n                id=\"entandoVersionId\"\n                name=\"entandoVersionId\"\n                labelText={i18n.t('subscriptionForm.entandoVersion') + ' *'}\n                value={this.state.entandoVersionId}\n                onChange={this.handleChanges}\n                invalidText={i18n.t('validation.invalid.required')}\n                invalid={this.state.invalid['entandoVersionId']}\n              >\n                {versionList}\n              </Select>\n            </div>\n            <div className=\"bx--col\">\n              <DatePicker dateFormat=\"m/d/Y\" datePickerType=\"single\" onChange={this.handleStartDateChange}>\n                <DatePickerInput\n                  id=\"startDate\"\n                  name=\"startDate\"\n                  placeholder=\"mm/dd/yyyy\"\n                  labelText={i18n.t('subscriptionForm.desiredSubscriptionStartDate')}\n                  value={this.state.startDate}\n                  //onChange={this.handleChanges}\n                  type=\"text\"\n                  invalidText={i18n.t('validation.invalid.date')}\n                  invalid={this.state.invalid['startDate']}\n                />\n              </DatePicker>\n              <TextInput\n                id=\"subscriptionLength\"\n                name=\"subscriptionLength\"\n                labelText={i18n.t('subscriptionForm.desiredSubscriptionLength') + ' *'}\n                value={this.state.subscriptionLength}\n                onChange={this.handleChanges}\n                invalidText={i18n.t('validation.invalid.number')}\n                invalid={this.state.invalid['subscriptionLength']}\n              />\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return formInputs;\n  }\n\n  successErrorMessage() {\n    const isAdmin = isPortalAdmin();\n    const { subscriptionType, submitSuccess, submitError } = this.state;\n\n    if (subscriptionType === 'new') {\n      if (submitSuccess) {\n        return isAdmin ? this.createFormMessage('adminSubmitNewSuccess') : this.createFormMessage('customerSubmitSuccess');\n      } else if (submitError) {\n        return this.createFormMessage('newSubError');\n      }\n    } else {\n      if (submitSuccess) {\n        return isAdmin ? this.createFormMessage('adminRenewNewSuccess') : this.createFormMessage('customerSubmitSuccess');\n      } else if (submitError) {\n        return this.createFormMessage('renewSubError');\n      }\n    }\n  }\n\n  createFormMessage(subMessageKey) {\n    return <p style={{ color: this.state.submitColour }}>{i18n.t(`subscriptionForm.${subMessageKey}`)}</p>;\n  }\n\n  render() {\n    if (!this.state.loading) {\n      if (isPortalUser()) {\n        return (\n          <div>\n            {isPortalAdmin() ? (\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.adminTitle')}</h3>\n            ) : isPortalSupport() ? (\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.supportTitle')}</h3>\n            ) : isPortalCustomer() ? (\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.customerTitle')}</h3>\n            ) : isPortalPartner() ? (\n              <h3 className=\"pageTitle\">{i18n.t('adminDashboard.partnerTitle')}</h3>\n            ) : null}\n            <div className=\"form-container\">\n              {this.successErrorMessage()}\n              <Form onSubmit={this.handleFormSubmit}>\n                <div className=\"form-desc\">\n                  <h4>{i18n.t('subscriptionForm.formTitle')}</h4>\n                </div>\n                <div className=\"bx--grid\">\n                  <div className=\"bx--row\">\n                    <div className=\"bx--col\">\n                      <Select\n                        id=\"subscriptionType\"\n                        name=\"subscriptionType\"\n                        labelText={i18n.t('subscriptionForm.subscriptionType')}\n                        required\n                        value={this.state.subscriptionType}\n                        onChange={this.handleChanges}\n                      >\n                        <SelectItem text={i18n.t('subscriptionForm.selectType')} value=\"\" />\n                        {subscriptionTypes.map((subscriptionType, i) => (\n                          <SelectItem key={i} text={subscriptionType} required value={subscriptionType.toLowerCase()}>\n                            {subscriptionType}\n                          </SelectItem>\n                        ))}\n                      </Select>\n                    </div>\n                  </div>\n                  {this.renderForm()}\n                  {this.state.subscriptionType ? (\n                    <Button kind=\"primary\" tabIndex={0} type=\"submit\">\n                      {' '}\n                      {i18n.t('buttons.submit')}\n                    </Button>\n                  ) : (\n                    ''\n                  )}\n                </div>\n              </Form>\n            </div>\n          </div>\n        );\n      } else {\n        return <p>{i18n.t('userMessages.unauthorized')}</p>;\n      }\n    } else {\n      return null;\n    }\n  }\n}\n\nexport default withKeycloak(SubscriptionForm);\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport SubscriptionForm from '../components/Forms/SubscriptionForm';\r\nimport '../index.scss';\r\nimport './dashboard.css';\r\nimport * as Locale from '../i18n';\r\n\r\nimport KeycloakContext from '../auth/KeycloakContext';\r\n\r\nimport { subscribeToWidgetEvent } from '../helpers/widgetEvents';\r\nimport { KEYCLOAK_EVENT_TYPE } from './widgetEventTypes';\r\n\r\nconst getKeycloakInstance = () =>\r\n  (window && window.entando && window.entando.keycloak && { ...window.entando.keycloak, initialized: true }) || {\r\n    initialized: false,\r\n  };\r\n\r\nconst ATTRIBUTES = {\r\n  hidden: 'hidden',\r\n  locale: 'locale',\r\n  paginationMode: 'pagination-mode',\r\n  disableDefaultEventHandler: 'disable-default-event-handler', // custom element attribute names MUST be written in kebab-case\r\n  serviceUrl: 'service-url'\r\n};\r\n\r\nclass SubscriptionFormElement extends HTMLElement {\r\n  container;\r\n\r\n  mountPoint;\r\n\r\n  unsubscribeFromKeycloakEvent;\r\n\r\n  keycloak = getKeycloakInstance();\r\n\r\n  connectedCallback() {\r\n    this.mountPoint = document.createElement('div');\r\n    this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n\r\n    this.unsubscribeFromKeycloakEvent = subscribeToWidgetEvent(KEYCLOAK_EVENT_TYPE, () => {\r\n      this.keycloak = { ...getKeycloakInstance(), initialized: true };\r\n      this.render();\r\n    });\r\n\r\n    this.render();\r\n\r\n    //retargetEvents(shadowRoot);\r\n    this.appendChild(this.mountPoint);\r\n  }\r\n\r\n  render() {\r\n    const serviceUrl = this.getAttribute(ATTRIBUTES.serviceUrl) || '';\r\n    const locale = this.getAttribute(ATTRIBUTES.locale) || '';\r\n    Locale.setLocale(locale);\r\n\r\n    ReactDOM.render(\r\n      <KeycloakContext.Provider value={this.keycloak}>\r\n        <SubscriptionForm serviceUrl={serviceUrl} />\r\n      </KeycloakContext.Provider>,\r\n      this.mountPoint\r\n    );\r\n  }\r\n}\r\n\r\ncustomElements.define('subscription-form-widget', SubscriptionFormElement);\r\n"],"sourceRoot":""}